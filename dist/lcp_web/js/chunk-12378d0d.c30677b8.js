(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12378d0d"],{"0055":function(e,t,a){"use strict";a("1528")},"07ce":function(e,t,a){},"0962":function(e,t,a){},"0a11":function(e,t,a){},"0ab7":function(e,t,a){},"0bee":function(e,t,a){"use strict";var i=a("c7eb"),r=(a("7f7f"),a("96cf"),a("1da1")),s=(a("3b2b"),a("ac6a"),a("456d"),a("0e07")),n={name:"CreateClusterDialog",props:{createClusterDialogVisible:{type:Boolean,required:!0}},data:function(){var e=this;return{active:0,stepList:[{title:"填写基本信息"},{title:"添加IP端口"},{title:"设置超时时间"},{title:"创建成功"}],clusterBasicInfoData:{name:"",useType:null,type:null,desc:""},clusterBasicInfoRules:{name:[{required:!0,message:"请输入集群名称"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/,message:"请输入中文、英文字母或数字"},{min:2,max:20,message:"请输入2到20个字符"}],useType:[{required:!0,message:"请选择集群用途"}],type:[{required:!0,message:"请选择集群类型"}],desc:[{required:!0,message:"请描述集群的使用场景"}]},useTypeOptionList:[{value:1,label:"服务路由"}],typeOptionList:[{value:2,label:"HTTP服务"},{value:3,label:"HTTP流"}],addIpPortData:{cloudServerList:[{host:"",port:null,weight:1,isBackup:0,down:0,resolve:0}]},addIpPortRules:{host:[{validator:function(t,a,i,r){var s=Object.keys(r)[0],n=s.indexOf("[")+1,o=s.indexOf("]"),l=s.slice(n,o);if(0===e.addIpPortData.cloudServerList[l].resolve)if(""===a)i(new Error("请输入IP"));else{RegExp(/^((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)(\.((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)){3}$/).test(a)?i():i(new Error("请输入正确的IP"))}else if(1===e.addIpPortData.cloudServerList[l].resolve)if(""===a)i(new Error("请输入域名"));else{RegExp(/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/).test(a)?i():i(new Error("请输入正确的域名"))}else i(new Error("请选择IP/域名"))}}],port:[{required:!0,message:"请输入端口"},{pattern:/^[0-9]*$/,message:"请输入数字"}],weight:[{required:!0,message:"请输入权重"},{pattern:/^[0-9]*$/,message:"请输入数字"}]},cloudServerListColumnList:[{label:"IP/域名",prop:"host",width:"240"},{label:"端口",prop:"port"},{label:"权重",prop:"weight"},{label:"是否备用",prop:"isBackup"},{label:"是否停用",prop:"down"}],resolveOptionList:[{value:0,label:"IP"},{value:1,label:"域名"}],isBackupOptionList:[{value:0,label:"否"},{value:1,label:"是"}],downOptionList:[{value:0,label:"否"},{value:1,label:"是"}],setTheTimeoutData:{connectTimeout:500,readTimeout:5e3,sendTimeout:5e3,reliveTimeout:1e4},setTheTimeoutRules:{connectTimeout:[{required:!0,message:"请设置连接超时时间/ms"}],readTimeout:[{required:!0,message:"请设置读取超时时间/ms"}],sendTimeout:[{required:!0,message:"请设置发送超时时间/ms"}],reliveTimeout:[{required:!0,message:"请设置自动复活时间/ms"}]},setTheTimeoutList:[{label:"连接超时时间/ms",prop:"connectTimeout"},{label:"读取超时时间/ms",prop:"readTimeout"},{label:"发送超时时间/ms",prop:"sendTimeout"},{label:"自动复活时间/ms",prop:"reliveTimeout"}],nextStepLoading:!1}},computed:{computeNextStepText:function(){return 2===this.active?"保存":"下一步"}},methods:{cloudClusterSave:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,n,o,l,c,u,d,p,m,f,h=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.clusterBasicInfoData,a=t.name,r=t.useType,n=t.type,o=t.desc,l=this.addIpPortData.cloudServerList,c=this.setTheTimeoutData,u=c.connectTimeout,d=c.sendTimeout,p=c.readTimeout,m=c.reliveTimeout,f={name:a,useType:r,type:n,desc:o,cloudServerList:l,connectTimeout:u,sendTimeout:d,readTimeout:p,reliveTimeout:m,sceneType:1},e.next=6,s.a.cloudClusterSave(f).catch((function(e){var t=e.data.message;throw t&&h.$message.error(t),new Error(e)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),judgeHostPlaceholder:function(e){return{0:"请输入IP",1:"请输入域名"}[this.addIpPortData.cloudServerList[e].resolve]},addRowData:function(){this.addIpPortData.cloudServerList.push({host:"",port:null,weight:1,isBackup:0,down:0,resolve:0})},removeRowData:function(e){this.addIpPortData.cloudServerList.splice(e,1)},dialogBeforeClose:function(){var e=this;["clusterBasicInfoData","addIpPortData","setTheTimeoutData"].forEach((function(t){e.$refs[t].resetFields()})),this.active=0,this.$emit("update:createClusterDialogVisible",!1),this.$emit("queryRefresh",!0)},nextStep:function(){var e=this;this.$refs[{0:"clusterBasicInfoData",1:"addIpPortData",2:"setTheTimeoutData"}[this.active]].validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}if(2!==e.active){t.next=5;break}return e.nextStepLoading=!0,t.next=5,e.cloudClusterSave().catch((function(t){e.nextStepLoading=!1;var a=t.data.message;throw a&&e.$message.error(a),new Error(t)}));case 5:e.active+=1,e.nextStepLoading=!1,t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},continueCreate:function(){var e=this;["clusterBasicInfoData","addIpPortData","setTheTimeoutData"].forEach((function(t){e.$refs[t].resetFields()})),this.active=0}}},o=n,l=(a("b4a3"),a("2877")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"create-cluster-dialog",attrs:{visible:e.createClusterDialogVisible,"close-on-click-modal":!1,title:"创建集群",width:"800px"},on:{close:e.dialogBeforeClose}},[a("div",{staticClass:"create-cluster-dialog__content"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},e._l(e.stepList,(function(e,t){return a("el-step",{key:t,attrs:{title:e.title}})})),1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],ref:"clusterBasicInfoData",staticClass:"create-cluster-dialog__form",attrs:{model:e.clusterBasicInfoData,rules:e.clusterBasicInfoRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"集群名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入集群名称"},model:{value:e.clusterBasicInfoData.name,callback:function(t){e.$set(e.clusterBasicInfoData,"name","string"==typeof t?t.trim():t)},expression:"clusterBasicInfoData.name"}})],1),a("el-form-item",{attrs:{label:"集群用途",prop:"useType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群用途"},model:{value:e.clusterBasicInfoData.useType,callback:function(t){e.$set(e.clusterBasicInfoData,"useType",t)},expression:"clusterBasicInfoData.useType"}},e._l(e.useTypeOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"集群类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群类型"},model:{value:e.clusterBasicInfoData.type,callback:function(t){e.$set(e.clusterBasicInfoData,"type",t)},expression:"clusterBasicInfoData.type"}},e._l(e.typeOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"集群描述",prop:"desc"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请描述集群的使用场景"},model:{value:e.clusterBasicInfoData.desc,callback:function(t){e.$set(e.clusterBasicInfoData,"desc","string"==typeof t?t.trim():t)},expression:"clusterBasicInfoData.desc"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"addIpPortData",staticClass:"create-cluster-dialog__second-form",attrs:{model:e.addIpPortData,rules:e.addIpPortRules}},[a("el-table",{attrs:{data:e.addIpPortData.cloudServerList,"max-height":"180"}},[e._l(e.cloudServerListColumnList,(function(t,i){return a("el-table-column",{key:i,attrs:{label:t.label,prop:t.prop,width:t.width},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.$index;return["host"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+r+"].host",rules:e.addIpPortRules.host}},[a("div",{staticClass:"item-content"},[a("el-select",{staticStyle:{width:"40%"},model:{value:e.addIpPortData.cloudServerList[r].resolve,callback:function(t){e.$set(e.addIpPortData.cloudServerList[r],"resolve",t)},expression:"addIpPortData.cloudServerList[$index].resolve"}},e._l(e.resolveOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:e.judgeHostPlaceholder(r)},model:{value:e.addIpPortData.cloudServerList[r].host,callback:function(t){e.$set(e.addIpPortData.cloudServerList[r],"host","string"==typeof t?t.trim():t)},expression:"addIpPortData.cloudServerList[$index].host"}})],1)])]:"port"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+r+"].port",rules:e.addIpPortRules.port}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"端口"},model:{value:e.addIpPortData.cloudServerList[r].port,callback:function(t){e.$set(e.addIpPortData.cloudServerList[r],"port",e._n(t))},expression:"addIpPortData.cloudServerList[$index].port"}})],1)]:"weight"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+r+"].weight",rules:e.addIpPortRules.weight}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"权重"},model:{value:e.addIpPortData.cloudServerList[r].weight,callback:function(t){e.$set(e.addIpPortData.cloudServerList[r],"weight",e._n(t))},expression:"\n                    addIpPortData.cloudServerList[$index].weight\n                  "}})],1)]:"isBackup"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+r+"].isBackup",rules:e.addIpPortRules.isBackup}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.addIpPortData.cloudServerList[r].isBackup,callback:function(t){e.$set(e.addIpPortData.cloudServerList[r],"isBackup",t)},expression:"addIpPortData.cloudServerList[$index].isBackup"}},e._l(e.isBackupOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:"down"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+r+"].down",rules:e.addIpPortRules.isBackup}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.addIpPortData.cloudServerList[r].down,callback:function(t){e.$set(e.addIpPortData.cloudServerList[r],"down",t)},expression:"addIpPortData.cloudServerList[$index].down"}},e._l(e.downOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e()]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.$index;return[a("div",{staticClass:"icon-wrapper"},[i>0?a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeRowData(i)}}}):e._e()])]}}])})],2),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{icon:"el-icon-plus",plain:""},on:{click:e.addRowData}},[e._v("添加")])],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"setTheTimeoutData",staticClass:"create-cluster-dialog__form",attrs:{model:e.setTheTimeoutData,rules:e.setTheTimeoutRules,"label-width":"140px"}},e._l(e.setTheTimeoutList,(function(t,i){return a("el-form-item",{key:i,attrs:{label:t.label,prop:t.prop}},[a("el-input-number",{attrs:{min:1,step:100,precision:0,"controls-position":"right"},model:{value:e.setTheTimeoutData[t.prop],callback:function(a){e.$set(e.setTheTimeoutData,t.prop,a)},expression:"setTheTimeoutData[item.prop]"}})],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active === 3"}],staticClass:"create-success"},[a("i",{staticClass:"el-icon-success normalColor"}),a("p",{staticClass:"create-success__title"},[e._v("创建成功")])])],1),a("div",{staticClass:"create-cluster-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[0===e.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1):1===e.active||2===e.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:function(t){e.active-=1}}},[e._v("上一步")]),a("el-button",{attrs:{type:"primary",loading:e.nextStepLoading},on:{click:e.nextStep}},[e._v(e._s(e.computeNextStepText))])],1):3===e.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:e.continueCreate}},[e._v("继续创建")])],1):e._e()])])}),[],!1,null,"0f1884b0",null);t.a=c.exports},1464:function(e,t,a){"use strict";a("32a2")},1528:function(e,t,a){},"155c":function(e,t,a){"use strict";a("d1d0")},"16d8":function(e,t,a){"use strict";var i=(a("7f7f"),a("c5f6"),a("2a53")),r={name:"MarkdownEditor",props:{value:{type:String,default:""},height:{type:Number,default:400},placeholder:{type:String,default:""}},data:function(){return{contentEditor:""}},mounted:function(){var e=this,t=this;this.contentEditor=new Vditor("vditor",{mode:"wysiwyg",height:this.height,placeholder:this.placeholder,toolbarConfig:{pin:!0},cdn:"/vditor",cache:{enable:!1},fullscreen:{index:1e4},after:function(){e.contentEditor.setValue(e.value)},upload:{accept:"image/*,.mp3, .wav, .rar",headers:{"Account-Type":Object(i.a)()?"erp":"passport"},url:"/lcp-rest/api/imageUpload",fieldName:"imageFile",format:function(e,a){var i=JSON.parse(a),r=i.code,s=i.message,n=e[0].name;if(2e4===r){var o=i.data,l={};return l[n]=o,JSON.stringify({msg:s,code:r,data:{errFiles:[],succMap:l}})}t.$message.error("图片上传失败！")}}})},methods:{getValue:function(){return this.contentEditor.getValue()},setValue:function(e){return this.contentEditor.setValue(e)}}},s=r,n=(a("155c"),a("2877")),o=Object(n.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"vditor"}})}),[],!1,null,"31aae780",null);t.a=o.exports},1799:function(e,t,a){"use strict";var i=(a("c5f6"),{name:"Pagination",props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},total:{type:Number,default:0},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},reloadTableData:{type:Function,default:function(){}}},methods:{onCurrentChange:function(e){this.$emit("update:currentPage",e),this.reloadTableData()},onSizeChange:function(e){this.$emit("update:pageSize",e),this.reloadTableData()}}}),r=i,s=(a("3fca"),a("2877")),n=Object(s.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{staticClass:"pagination",attrs:{background:!0,"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})}),[],!1,null,"52f386a2",null);t.a=n.exports},"20fa":function(e,t,a){},"24ec":function(e,t,a){e.exports=a.p+"img/noData.aadb7b7d.png"},"2e98":function(e,t,a){"use strict";a("b93c")},"328c":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a("b775");var i=a("7562");function r(e){return i.a.post("/ApiManagerService/queryApiCategory",JSON.stringify(e))}function s(e){return i.a.post("/HttpApiService/queryApiList",e)}},"32a2":function(e,t,a){},"333d":function(e,t,a){"use strict";a("c5f6"),Math.easeInOutQuad=function(e,t,a,i){return(e/=i/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function r(e,t,a){var r=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,s=e-r,n=0;t=void 0===t?500:t;!function e(){n+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(n,r,s,t)),n<t?i(e):a&&"function"==typeof a&&a()}()}var s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},n=s,o=(a("8d79"),a("2877")),l=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"0a87263c",null);t.a=l.exports},"365c":function(e,t,a){"use strict";var i=a("b775"),r={postFindByAppKeyData:function(e){return Object(i.a)({url:"/bizmsg/findByAppKey",method:"post",data:e})},postSubscribeData:function(e){return Object(i.a)({url:"/bizmsg/subMessage",method:"post",data:e})},postUnsubscribeData:function(e){return Object(i.a)({url:"/bizmsg/unsubscribe",method:"post",data:e})}},s=r,n=a("3835"),o={postCreateBizUnitAccessData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizaccess/insertBizAccessPre",method:"post",data:t})},postBizUnitAccessData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizaccess/getBizAccessByUnitId",method:"get",params:{bizUnitId:t}})},postApiChangeSeqData:function(e){return Object(i.a)({url:"/bizapinterface/updateApiSeq",method:"post",data:e})},postApiHideData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizapinterface/hiddenApi",method:"get",params:t})},postApiHideCancelData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizapinterface/hiddenCancelApi",method:"get",params:t})},postUnitCheckPrincipalData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizunit/checkPrincipal",method:"get",params:{id:t}})},postSdkHideData:function(e){return Object(i.a)({url:"/sdk/hide",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postSdkHideCancelData:function(e){return Object(i.a)({url:"/sdk/hideCancel",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postMessageHideData:function(e){return Object(i.a)({url:"/bizmsg/hide",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postMessageHideCancelData:function(e){return Object(i.a)({url:"/bizmsg/hideCancel ",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postBizUnitData:function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return Object(i.a)({url:"/bizUnits",method:"post",data:[a,r]})}},l={getAppData:function(e){return Object(i.a)({url:"/app/getApp",method:"get",params:e})},postFindBizUnitVoListData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizunit/findBizUnitVoList",method:"get",params:{appKey:t}})},findBizUnitVoListByPage:function(e){return Object(i.a)({url:"/bizunit/findBizUnitVoListByPage",method:"get",params:e})},postSubscribeBizData:function(e){var t=Object(n.a)(e,1)[0];return Object(i.a)({url:"/bizunit/submitRecord",method:"post",data:t})},getCustomerGroupListData:function(e){return Object(i.a)({url:"/app/findAppGroupList",method:"get",params:e})},getCustomerGroupDetailData:function(e){return Object(i.a)({url:"/app/getAppGroupDetail",method:"get",params:e})},postCustomerGroupSaveData:function(e){return Object(i.a)({url:"/app/saveAppGroup",method:"post",data:e})},postCustomerGroupDeleteData:function(e){return Object(i.a)({url:"/app/deleteAppGroup",method:"post",params:e})},getCustomerGroupListNoPageData:function(e){return Object(i.a)({url:"/app/findAppGroupListWithNoPage",method:"get",params:e})},getCustomerGroupMessageCallbackInfoData:function(e){return Object(i.a)({url:"/app/getMessageCallbackInfoList",method:"get",params:e})},postCustomerGroupMessageCallbackInfoSaveData:function(e){return Object(i.a)({url:"/app/saveMessageCallbackInfo",method:"post",data:e})}},c={findSupplierUserByErp:function(e){return Object(i.a)({url:"/supplier/findSupplierUserByErp",method:"get",params:e})}},u={message:s,openBiz:o,appManager:l,apiManager:c};t.a=u},"386d":function(e,t,a){"use strict";var i=a("cb7c"),r=a("83a1"),s=a("5f1b");a("214f")("search",1,(function(e,t,a,n){return[function(a){var i=e(this),r=null==a?void 0:a[t];return void 0!==r?r.call(a,i):new RegExp(a)[t](String(i))},function(e){var t=n(a,e,this);if(t.done)return t.value;var o=i(e),l=String(this),c=o.lastIndex;r(c,0)||(o.lastIndex=0);var u=s(o,l);return r(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},"3b91":function(e,t,a){"use strict";a("20fa")},"3cfc":function(e,t,a){"use strict";var i=(a("7f7f"),a("3835")),r=a("c7eb"),s=(a("96cf"),a("1da1")),n=(a("c5f6"),a("964d")),o=a("1667"),l=a("274c"),c=a("547a"),u=a("61f0"),d=a.n(u),p=(a("6014"),a("b311")),m=a.n(p),f={name:"QuickMaintain",mixins:[c.a],props:{qualifiedName:{type:String,default:""},methodName:{type:String,default:""},methodId:{type:Number,default:0},alias:{type:String,default:""},isRequest:{type:Boolean,default:!0},handleUpdateParamList:{type:Function,default:function(){}},provideWay:{type:Number,default:0},tabName:{type:String,default:""},tableData:{type:Array,default:function(){return[]}}},data:function(){return{pullFromJsfDebounceTimer:null,uploadUrl:"".concat(window.env.gatewayFileBaseApi,"lop/mulfile/upload?LOP-DN=").concat(window.env.gatewayUploadLopDnXml),importXmlDialogVisible:!1,importXmlFormData:{method:"uploadFile",fileList:[]},importXmlFormRules:{method:[{required:!0,message:"请选择导入方式"}],fileList:[{type:"array",required:!0,message:"请上传XML文件"}]},importXmlFormList:[{prop:"method",label:"导入方式"},{prop:"fileList",label:"导入操作"}],importXmlDebounceTimer:null,importXmlSaveLoading:!1,importJsonFormData:{method:"uploadFile",fileList:[]},importJsonFormRules:{method:[{required:!0,message:"请选择导入方式"}],fileList:[{type:"array",required:!0,message:"请上传JSON文件"}]},importJsonDialogVisible:!1,monitoringMap:{jsf:{pullFromJsf:{request:"apiManager_jsf_1670468865530|2",response:"apiManager_jsf_1670468865530|3"},importJson:{request:"apiManager_jsf_1670468865530|4",response:"apiManager_jsf_1670468865530|5"},importXml:{request:"apiManager_jsf_1670468865530|6",response:"apiManager_jsf_1670468865530|7"},jsonEdit:{request:"apiManager_jsf_1670468865530|8",response:"apiManager_jsf_1670468865530|9"}},http:{importJson:{request:"apiManager_http_1670470412984|2",response:"apiManager_http_1670470412984|3"},importXml:{request:"apiManager_http_1670470412984|4",response:"apiManager_http_1670470412984|5"},jsonEdit:{request:"apiManager_http_1670470412984|6",response:"apiManager_http_1670470412984|7"}},ApiManagerPassBack:{importJson:{request:"apiManager_passBack_1670471262879|2",response:"apiManager_passBack_1670471262879|3"},importXml:{request:"apiManager_passBack_1670471262879|4",response:"apiManager_passBack_1670471262879|5"},jsonEdit:{request:"apiManager_passBack_1670471262879|6",response:"apiManager_passBack_1670471262879|7"}}},jsonEditDialogVisible:!1,jsonEditor:void 0,jsonEditDebounceTimer:null}},computed:{computeQuickMaintainTipText:function(){return"更新将覆盖原有".concat({true:"请求",false:"响应"}[this.isRequest],"参数，请谨慎操作！")}},methods:{findApiStatus:function(){var e=Object(s.a)(Object(r.a)().mark((function e(){var t,a,i,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.qualifiedName,a=this.methodName,i=this.alias,t&&a&&i){e.next=4;break}throw this.$message.error("从JSF注册中心拉取不到元数据，请确认在【基础数据】维护的JSF信息是否正确？"),new Error("qualifiedName or methodName or alias is empty!");case 4:return s=[{qualifiedName:t,jsfAlias:i,methodList:[a]}],e.next=9,l.a.findApiStatus(s);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),quickMaintainApiDocByJsf:function(){var e=Object(s.a)(Object(r.a)().mark((function e(){var t,a,i,s,o,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qualifiedName,a=this.methodName,i=this.alias,s=this.methodId,o=this.isRequest,l=[{qualifiedName:t,methodName:a,alias:i,methodId:s,judgeType:{true:1,false:2}[o]||1}],e.next=7,n.a.quickMaintainApiDocByJsf(l);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),quickMaintainApiDocByXml:function(){var e=Object(s.a)(Object(r.a)().mark((function e(t){var a,i,s,o,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.isRequest,i={true:1,false:2},s={jsf:1,http:2}[this.$route.params.type],o=parseInt(this.$route.params.id),l=[{appId:o,judgeType:i[a]||1,type:s,jssKey:t}],e.next=9,n.a.quickMaintainApiDocByXml(l);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleCommandDropdownItem:function(e){var t=this;({importXml:function(){return t.handleClickImportXml()},importJson:function(){return t.handleClickImportJson()},pullFromJsf:function(){return t.handleClickPullFromJsf()},jsonEdit:function(){return t.handleClickJsonEdit()}})[e]()},handleClickPullFromJsf:function(){var e=this;clearTimeout(this.pullFromJsfDebounceTimer),this.pullFromJsfDebounceTimer=setTimeout(Object(s.a)(Object(r.a)().mark((function t(){var a,i,s,n,o,l,c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.findApiStatus().catch((function(t){throw 10003===t.code&&e.$message.error("从JSF注册中心拉取不到元数据，请确认在【基础数据】维护的JSF信息是否正确？"),new Error("handleClickConfirmPullFromJsf findApiStatus")}));case 2:return t.next=4,e.quickMaintainApiDocByJsf().catch((function(){throw new Error("handleClickConfirmPullFromJsf quickMaintainApiDocByJsf")}));case 4:a=t.sent,i=a.data,s=i.inParamList,n=void 0===s?[]:s,o=i.outParamList,l=void 0===o?[]:o,c=e.isRequest,e.handleUpdateParamList(c,c?n:l),e.$message.success("操作成功！");case 10:case"end":return t.stop()}}),t)}))),300)},handleClickImportXml:function(){this.importXmlDialogVisible=!0},handleChangeImportXmlUpload:function(e,t){t&&t.length>0&&(this.importXmlFormData.fileList=[e])},handleSuccessImportXmlUpload:function(){var e=Object(s.a)(Object(r.a)().mark((function e(t){var a,s,n,o,l,c,u,d,p,m=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.a)(t.fileName,1),s=a[0],e.next=3,this.quickMaintainApiDocByXml(s).catch((function(){throw m.importXmlSaveLoading=!1,new Error("handleSuccessImportXmlUpload quickMaintainApiDocByXml")}));case 3:n=e.sent,o=n.data,l=o.inParamList,c=void 0===l?[]:l,u=o.outParamList,d=void 0===u?[]:u,p=this.isRequest,this.handleUpdateParamList(p,p?c:d),this.importXmlDialogVisible=!1,this.importXmlSaveLoading=!1,this.$message.success("操作成功！");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleErrorImportXmlUpload:function(){this.importXmlSaveLoading=!1,this.importXmlFormData.fileList=[],this.$message.error("上传失败，请重新上传")},handleClickConfirmImportXml:function(){var e=this;clearTimeout(this.importXmlDebounceTimer),this.importXmlDebounceTimer=setTimeout(Object(s.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.importXmlSaveLoading=!0,t.next=3,e.$refs.importXmlForm.validate().catch((function(){throw e.importXmlSaveLoading=!1,new Error("handleClickConfirmImportXml validate")}));case 3:e.$refs.importXmlFormUpload[0].submit();case 4:case"end":return t.stop()}}),t)}))),300)},handleClickImportJson:function(){this.importJsonDialogVisible=!0},handleJsonExceed:function(){this.$message.warning("当前限制只能选择 1 个文件，请删除已选文件后重新上传")},handleErrorImportJsonUpload:function(){this.importJsonFormData.fileList=[],this.$message.error("上传失败，请重新上传")},handleBeforeUpload:function(e){if(e.size/1024>500)return this.$message.error("导入失败，文件大小超过500KB"),!1},handleRemoveImportJsonUpload:function(e,t){this.importJsonFormData.fileList=[]},handleSuccessImportJsonUpload:function(e,t,a){this.importJsonFormData.fileList=a},handleSaveImportJson:function(){var e=this;this.$refs.importJsonForm.validate(function(){var t=Object(s.a)(Object(r.a)().mark((function t(a){var i,s,n,o,l,c,u,d,p;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return i=e.importJsonFormData.fileList[0].name,t.next=4,e.quickMaintainApiDocByJson(i).catch((function(t){throw e.importJsonFormData.fileList=[],e.$message.error({message:t}),new Error("handleSaveImportJson quickMaintainApiDocByJson")}));case 4:s=t.sent,n=s.data,l=(o=n||{}).inParamList,c=void 0===l?[]:l,u=o.outParamList,d=void 0===u?[]:u,p=e.isRequest,e.handleUpdateParamList(p,p?c:d),e.importJsonDialogVisible=!1,e.$message.success("导入成功，可继续在页面维护API文档详细信息"),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},quickMaintainApiDocByJson:function(){var e=Object(s.a)(Object(r.a)().mark((function e(t){var a,i,s,n,l,c,u,d;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.isRequest,i={true:1,false:2},s={jsf:1,http:2},n=this.$route.params.type?s[this.$route.params.type]:4,l=parseInt(this.$route.params.id),c=i[a]||1,u=this.$route.params.topic,d=[{appId:l,judgeType:c,type:n,jssKey:t,topic:u}],e.next=10,o.a.quickMaintainApiDocByJson(d);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleClickJsonEdit:function(){var e=this;this.jsonEditDialogVisible=!0,clearTimeout(this.jsonEditDebounceTimer),this.jsonEditDebounceTimer=setTimeout((function(){var t=document.getElementById("jsonEdit_"+e.isRequest);e.jsonEditor||(e.jsonEditor=new d.a(t,{mode:"code",search:!1,enableSort:!1,enableTransform:!1,language:"zh-CN",onChange:function(){}})),e.jsonEditor.set(e.tableData)}),300)},handleJsonEdit:function(){var e=this.isRequest;this.handleUpdateParamList(e,this.jsonEditor.get()),this.jsonEditDialogVisible=!1},copyCodeText:function(){var e=this,t=new m.a(".copyCodeText",{text:function(){return JSON.stringify(e.jsonEditor.get(),null,2)}});t.on("success",(function(){e.$message.success("复制成功！"),t.destroy()})),t.on("error",(function(){e.$message.error("复制失败！"),t.destroy()}))}}},h=f,b=(a("9b93"),a("2877")),v=Object(b.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quick-maintain"},[a("el-dropdown",{staticClass:"quick-maintain__dropdown",attrs:{trigger:"click"},on:{command:e.handleCommandDropdownItem}},[a("span",[e._v("快速维护"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"jsonEdit"}},[e._v("JSON编辑")]),a("el-dropdown-item",{attrs:{command:"importXml"}},[e._v("导入XML文件")]),a("el-dropdown-item",{attrs:{command:"importJson"}},[e._v("导入JSON报文")]),1===e.provideWay?a("el-dropdown-item",{attrs:{command:"pullFromJsf"}},[e._v("从JSF注册中心拉取元数据")]):e._e()],1)],1),a("el-dialog",{attrs:{"custom-class":"import-xml-dialog",title:"导入XML文件",width:"480px",visible:e.importXmlDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.importXmlDialogVisible=t},close:function(t){return e.$refs.importXmlForm.resetFields()}}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form",{ref:"importXmlForm",staticClass:"import-xml-form",attrs:{model:e.importXmlFormData,rules:e.importXmlFormRules}},e._l(e.importXmlFormList,(function(t){return a("el-form-item",{key:t.prop,attrs:{prop:t.prop,label:t.label,"label-width":"100px"}},[["method"].includes(t.prop)?[a("el-radio-group",{staticStyle:{margin:"8px",width:"100%"},model:{value:e.importXmlFormData.method,callback:function(t){e.$set(e.importXmlFormData,"method",t)},expression:"importXmlFormData.method"}},[a("el-radio",{attrs:{label:"uploadFile"}},[e._v("上传文件")])],1)]:["fileList"].includes(t.prop)?[a("el-upload",{ref:"importXmlFormUpload",refInFor:!0,staticClass:"import-xml-form__upload",attrs:{action:e.uploadUrl,"file-list":e.importXmlFormData.fileList,"auto-upload":!1,"on-change":e.handleChangeImportXmlUpload,"on-success":e.handleSuccessImportXmlUpload,"on-error":e.handleErrorImportXmlUpload}},[a("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传XML文件，且不超过500kb ")])],1)]:e._e()],2)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importXmlDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.importXmlSaveLoading,clstag:e.clstag(e.monitoringMap[e.tabName].importXml[e.isRequest?"request":"response"],"")},on:{click:e.handleClickConfirmImportXml}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-json-dialog",title:"导入",width:"560px",visible:e.importJsonDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.importJsonDialogVisible=t},close:function(t){return e.$refs.importJsonForm.resetFields()}}},[a("el-form",{ref:"importJsonForm",staticClass:"json-dialog-form",attrs:{model:e.importJsonFormData,rules:e.importJsonFormRules,"label-width":"100px"}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form-item",{attrs:{prop:"method",label:"导入方式"}},[a("el-radio-group",{model:{value:e.importXmlFormData.method,callback:function(t){e.$set(e.importXmlFormData,"method",t)},expression:"importXmlFormData.method"}},[a("el-radio",{attrs:{label:"uploadFile"}},[e._v("文件导入")])],1)],1),a("el-form-item",{attrs:{prop:"fileList",label:"导入操作"}},[a("el-upload",{ref:"importJsonFormUpload",staticClass:"form__upload",attrs:{action:e.uploadUrl,"file-list":e.importJsonFormData.fileList,limit:1,"on-exceed":e.handleJsonExceed,"before-upload":e.handleBeforeUpload,"on-remove":e.handleRemoveImportJsonUpload,"on-success":e.handleSuccessImportJsonUpload,"on-error":e.handleErrorImportJsonUpload}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"}},[e._v("上传文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 上传的文件大小不能超过500kb ")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importJsonDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",clstag:e.clstag(e.monitoringMap[e.tabName].importJson[e.isRequest?"request":"response"],"")},on:{click:e.handleSaveImportJson}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-json-dialog",title:e.isRequest?"JSON编辑请求参数":"JSON编辑响应参数",width:"832px",visible:e.jsonEditDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.jsonEditDialogVisible=t}}},[a("div",{staticClass:"dialog-flex",attrs:{div:""}},[a("div",{staticClass:"dialog-flex-left"},[e._v("使用方法见"),a("a",{attrs:{href:"http://lcp.jdl.com/#/apiNewHand/55044",target:"_blank"}},[e._v("JSON编辑操作指南")])]),a("div",{staticClass:"dialog-flex-right"},[a("a",{staticClass:"copyCodeText",on:{click:function(t){return e.copyCodeText()}}},[e._v("复制代码")])])]),a("div",{staticClass:"json-view-container",staticStyle:{width:"800px",height:"400px"},attrs:{id:"jsonEdit_"+e.isRequest}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.jsonEditDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",clstag:e.clstag(e.monitoringMap[e.tabName].jsonEdit[e.isRequest?"request":"response"],"")},on:{click:e.handleJsonEdit}},[e._v("确定")])],1)])],1)}),[],!1,null,"7ca990ce",null);t.a=v.exports},"3ea0":function(e,t,a){"use strict";a("9b95")},"3fca":function(e,t,a){"use strict";a("848d")},"43fc":function(e,t,a){"use strict";a("d14b")},4475:function(e,t,a){},4820:function(e,t,a){"use strict";a("a475")},4821:function(e,t,a){},"491a":function(e,t,a){"use strict";a.r(t);var i=a("c7eb"),r=(a("96cf"),a("1da1")),s=a("a322"),n=(a("ac6a"),a("28a5"),a("b85c")),o=(a("7f7f"),a("5530")),l=(a("c5f6"),a("7a3a")),c=a("c24f"),u=a("328c"),d=a("365c"),p=a("7562"),m={props:{status:{type:Number,required:!0},jsfBasicEditBtnStatus:{type:Object,default:function(){}}},data:function(){return{popoverVisible:!1,popoverDevVisible:!1,editer:{status:!0},addProdPinData:{zhanghaos:[],loading:!1,value:"",realName:"",mobile:"",email:"",realNameEdit:!0,mobileEdit:!0,emailEdit:!0},addDevPinData:{zhanghaos:[],loading:!1,value:"",realName:"",mobile:"",email:"",realNameEdit:!0,mobileEdit:!0,emailEdit:!0},oldApiSummaryForm:{id:"",oldCnName:"",oldServiceType:"",oldStatus:"",oldMainProd:"",oldMainDev:"",oldRemark:"",oldMvn:"",oldBusinessCategoryId:""},apiSummaryForm:{cnName:"",status:"",remark:"",mvn:"",stakeholderList:[],mainProd:"",mainDev:"",id:"",businessCategoryId:"",businessCategoryName:"",appName:"",appCode:""},categoryList:[],copyCategoryList:[],rules:{mainProd:[{required:!0,message:"请输入产品负责人京东账号",trigger:"blur"}],mainDev:[{required:!0,message:"请输入研发负责人京东账号",trigger:"blur"}],cnName:[{required:!0,message:"请输入API名称",trigger:"blur"},{min:2,max:255,message:"长度在 2 到 255 个字符",trigger:"blur"}],prodPin:[{required:!0,message:"请输入产品负责人",trigger:"blur"}],devPin:[{required:!0,message:"请输入研发负责人",trigger:"blur"}],remark:[{required:!0,message:"请输入功能描述",trigger:"blur"},{min:10,max:255,message:"长度在10 到 255 个字符",trigger:"blur"}],mvn:[{required:!0,message:"请输入Maven坐标",trigger:"blur"}],businessCategoryId:[{required:!0,message:"请选择所属分类",trigger:"change"}]},loading:!0}},computed:{mainProdPlaceHolder:function(){return"请输入产品负责人京东账号"},mainDevPlaceHolder:function(){return"请输入研发负责人京东账号"},remarkPlaceHolder:function(){return"描述API的主要作用,10-255个字符"},MvnPlaceHolder:function(){return"<dependency>\n            <groupId>com.xxx.xxx</groupId>\n            <artifactId>xxxxx</artifactId>\n            <version>x.x.x</version>\n     </dependency>"}},methods:{findApiBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=[{id:t}],e.next=4,p.a.post("/ApiManagerService/findApiBaseInfo",JSON.stringify(a));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveApiBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.apiSummaryForm,a=[Object(o.a)({},t)],e.next=4,p.a.post("/ApiManagerService/saveApiBaseInfo",JSON.stringify(a));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),categoryFilter:function(e){this.categoryList=e?this.copyCategoryList.filter((function(t){if(-1!==t.name.indexOf(e))return!0})):this.copyCategoryList},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r.a)(Object(i.a)().mark((function e(a){var r,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=11;break}return e.next=3,t.saveApiBaseInfo().catch((function(){throw new Error("submitForm saveApiBaseInfo")}));case 3:l.Message.success("API信息修改成功"),r=Object(n.a)(t.categoryList);try{for(r.s();!(s=r.n()).done;)o=s.value,Number(t.apiSummaryForm.businessCategoryId===Number(o.id))&&(t.apiSummaryForm.businessCategoryName=o.name)}catch(e){r.e(e)}finally{r.f()}t.editer.status=!0,t.fetchApiSummary(),t.$emit("updateStatus"),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.editer.status=!0,this.$refs[e].clearValidate(),this.apiSummaryForm.cnName=this.oldApiSummaryForm.oldCnName,this.apiSummaryForm.businessCategoryId=this.oldApiSummaryForm.oldBusinessCategoryId,this.apiSummaryForm.status=this.oldApiSummaryForm.oldStatus,this.apiSummaryForm.remark=this.oldApiSummaryForm.oldRemark,this.apiSummaryForm.mvn=this.oldApiSummaryForm.oldMvn,""!==this.oldApiSummaryForm.oldMainProd?this.apiSummaryForm.mainProd=this.oldApiSummaryForm.oldMainProd+":"+this.addProdPinData.realName:this.apiSummaryForm.mainProd="",""!==this.oldApiSummaryForm.oldMainDev?this.apiSummaryForm.mainDev=this.oldApiSummaryForm.oldMainDev+":"+this.addDevPinData.realName:this.apiSummaryForm.mainDev="",this.addProdPinData.value=this.oldApiSummaryForm.oldMainProd,this.addDevPinData.value=this.oldApiSummaryForm.oldMainDev},editerForm:function(e){this.editer.status=!1},fetchApiSummary:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiBaseInfo().catch((function(){throw r.loading=!1,new Error("fetchApiSummary findApiBaseInfo")}));case 2:t=e.sent,a=t.data,this.apiSummaryForm=a,delete this.apiSummaryForm.createTime,delete this.apiSummaryForm.updateTime,delete this.apiSummaryForm.ts,delete this.apiSummaryForm.serviceType,this.apiSummaryForm.mainProd&&(this.addProdPinData.value=this.apiSummaryForm.mainProd.split(":")[0],this.addProdPinData.realName=this.apiSummaryForm.mainProd.split(":")[1],this.oldApiSummaryForm.oldMainProd=this.addProdPinData.value),this.apiSummaryForm.mainDev&&(this.addDevPinData.value=this.apiSummaryForm.mainDev.split(":")[0],this.addDevPinData.realName=this.apiSummaryForm.mainDev.split(":")[1],this.oldApiSummaryForm.oldMainDev=this.addDevPinData.value),0===this.apiSummaryForm.businessCategoryId&&(this.apiSummaryForm.businessCategoryId="",this.apiSummaryForm.businessCategoryName=""),this.oldApiSummaryForm.oldBusinessCategoryId=this.apiSummaryForm.businessCategoryId,this.oldApiSummaryForm.oldCnName=this.apiSummaryForm.cnName,this.oldApiSummaryForm.oldStatus=this.apiSummaryForm.status,this.oldApiSummaryForm.oldRemark=this.apiSummaryForm.remark,this.oldApiSummaryForm.oldMvn=this.apiSummaryForm.mvn,this.queryCategoryList(1,1e4);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryCategoryList:function(){var e=this;Object(u.a)([{pageSize:1e4,pageNumb:1}]).then((function(t){e.categoryList=t.data;var a,i=Object(n.a)(e.categoryList);try{for(i.s();!(a=i.n()).done;){var r=a.value;Number(e.apiSummaryForm.businessCategoryId===Number(r.id))&&(e.apiSummaryForm.businessCategoryName=r.name)}}catch(e){i.e(e)}finally{i.f()}e.loading=!1,e.copyCategoryList=Object.assign(e.categoryList)})).catch((function(t){e.loading=!1}))},searchProdPin:function(e){var t=this;""!==e?(this.addProdPinData.loading=!0,setTimeout((function(){Object(c.c)(e).then((function(e){t.addProdPinData.loading=!1,t.addProdPinData.zhanghaos=e.data})).catch((function(e){}))}),200)):this.addProdPinData.zhanghaos=[]},searchDevPin:function(e){var t=this;""!==e?(this.addDevPinData.loading=!0,setTimeout((function(){Object(c.c)(e).then((function(e){t.addDevPinData.loading=!1,t.addDevPinData.zhanghaos=e.data})).catch((function(e){}))}),200)):this.addDevPinData.zhanghaos=[]},prodPinSelectChange:function(e){var t=this,a={erp:e};d.a.apiManager.findSupplierUserByErp(a).then((function(e){e.data?t.popoverVisible=!1:t.popoverVisible=!0})).catch((function(e){})),this.addProdPinData.realName="",this.addProdPinData.mobile="",this.addProdPinData.email="",this.addProdPinData.zhanghaos.forEach((function(a,i){e===a.userName&&(a.realName?(t.addProdPinData.realNameEdit=!0,t.addProdPinData.realName=a.realName):t.addProdPinData.realNameEdit=!1,a.mobile?(t.addProdPinData.mobileEdit=!0,t.addProdPinData.mobile=a.mobile):t.addProdPinData.mobileEdit=!1,a.email?(t.addProdPinData.emailEdit=!0,t.addProdPinData.email=a.email):t.addProdPinData.emailEdit=!1,t.apiSummaryForm.mainProd=a.userName+":"+a.realName,t.addProdPinData.realName=a.realName)}))},devPinSelectChange:function(e){var t=this,a={erp:e};d.a.apiManager.findSupplierUserByErp(a).then((function(e){e.data?t.popoverDevVisible=!1:t.popoverDevVisible=!0})).catch((function(e){})),this.addDevPinData.realName="",this.addDevPinData.mobile="",this.addDevPinData.email="",this.addDevPinData.zhanghaos.forEach((function(a,i){e===a.userName&&(a.realName?(t.addDevPinData.realNameEdit=!0,t.addDevPinData.realName=a.realName):t.addDevPinData.realNameEdit=!1,a.mobile?(t.addDevPinData.mobileEdit=!0,t.addDevPinData.mobile=a.mobile):t.addDevPinData.mobileEdit=!1,a.email?(t.addDevPinData.emailEdit=!0,t.addDevPinData.email=a.email):t.addDevPinData.emailEdit=!1,t.apiSummaryForm.mainDev=a.userName+":"+a.realName,t.addDevPinData.realName=a.realName)}))}},created:function(){this.fetchApiSummary()}},f=m,h=(a("9a96"),a("2877")),b=Object(h.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mod-overview"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"apiSummaryForm",staticClass:"overview-apiSummaryForm",attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading",model:e.apiSummaryForm,rules:e.rules,"label-width":"100px",disabled:e.editer.status}},[a("el-form-item",{attrs:{label:"中文名称",prop:"cnName"}},[e.editer.status?e._e():a("el-input",{model:{value:e.apiSummaryForm.cnName,callback:function(t){e.$set(e.apiSummaryForm,"cnName",t)},expression:"apiSummaryForm.cnName"}}),e.editer.status?a("span",[e._v(e._s(""===e.apiSummaryForm.cnName?"未填写":e.apiSummaryForm.cnName))]):e._e()],1),a("el-form-item",{attrs:{label:"所属分类",prop:"businessCategoryId"}},[e.editer.status?e._e():a("el-select",{attrs:{filterable:!0,"filter-method":this.categoryFilter,placeholder:"请选择所属分类"},model:{value:e.apiSummaryForm.businessCategoryId,callback:function(t){e.$set(e.apiSummaryForm,"businessCategoryId",t)},expression:"apiSummaryForm.businessCategoryId"}},e._l(e.categoryList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.editer.status?a("span",[e._v(e._s(""===e.apiSummaryForm.businessCategoryName?"未填写":e.apiSummaryForm.businessCategoryName))]):e._e()],1),a("el-form-item",{attrs:{label:"所属应用",prop:"appName"}},[a("span",[e._v(e._s(e.apiSummaryForm.appName))]),a("span",[e._v(e._s(""===e.apiSummaryForm.appCode?"":"("))]),a("span",[e._v(e._s(""===e.apiSummaryForm.appCode?"":e.apiSummaryForm.appCode))]),a("span",[e._v(e._s(""===e.apiSummaryForm.appCode?"":")"))])]),a("el-popover",{attrs:{placement:"bottom-end",width:"260"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[a("div",[a("div",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red","font-size":"18px",position:"absolute",top:"40px"}})]),a("p",{staticStyle:{"margin-left":"24px","margin-top":"10px"}},[e._v(" 【"+e._s(e.addProdPinData.realName)+"】不在您的团队下，为了不影响接口审批，建议去【个人中心】将该用户拉入您的团队 ")])]),a("div",{staticStyle:{"text-align":"right",margin:"10px 0 0"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.popoverVisible=!1}}},[e._v("我知道了")])],1),e.editer.status?e._e():a("el-form-item",{attrs:{slot:"reference",label:"产品负责人",prop:"mainProd"},slot:"reference"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,remote:!0,"reserve-keyword":!0,placeholder:this.mainProdPlaceHolder,"remote-method":e.searchProdPin,loading:e.addProdPinData.loading,disabled:1!==e.status,"popper-class":"erp-info-select"},on:{change:e.prodPinSelectChange},model:{value:e.addProdPinData.value,callback:function(t){e.$set(e.addProdPinData,"value",t)},expression:"addProdPinData.value"}},e._l(e.addProdPinData.zhanghaos,(function(t){return a("el-option",{key:t.userName,attrs:{label:t.userName,value:t.userName}},[a("div",{staticClass:"cbox ptb5"},[a("div",{staticClass:"avatar__wrapper"},[a("div",{style:{display:"inlineFlex",margin:"2px",width:"30px",height:"30px",borderRadius:"50%",background:"url("+t.headImg+") 0% 0% / 30px 30px no-repeat scroll content-box border-box transparent"}})]),a("div",{staticClass:"inputUsers__input__autocomplete--info vhbox"},[a("span",[e._v(e._s(t.userName)+" ("+e._s(t.realName)+")")]),a("span",[e._v(e._s(t.organizationFullName))])])])])})),1)],1)],1),e.editer.status?a("el-form-item",{attrs:{label:"产品负责人",prop:"mainProd"}},[a("span",[e._v(e._s(""===e.addProdPinData.value?"未填写":e.addProdPinData.value))])]):e._e(),a("el-popover",{attrs:{placement:"bottom-end",width:"260"},model:{value:e.popoverDevVisible,callback:function(t){e.popoverDevVisible=t},expression:"popoverDevVisible"}},[a("div",[a("div",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red","font-size":"18px",position:"absolute",top:"40px"}})]),a("p",{staticStyle:{"margin-left":"24px","margin-top":"10px"}},[e._v(" 【"+e._s(e.addDevPinData.realName)+"】不在您的团队下，为了不影响接口审批，建议去【个人中心】将该用户拉入您的团队 ")])]),a("div",{staticStyle:{"text-align":"right",margin:"10px 0 0"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.popoverDevVisible=!1}}},[e._v("我知道了")])],1),e.editer.status?e._e():a("el-form-item",{attrs:{slot:"reference",label:"研发负责人",prop:"mainDev"},slot:"reference"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,remote:!0,"reserve-keyword":!0,placeholder:this.mainDevPlaceHolder,"remote-method":e.searchDevPin,loading:e.addDevPinData.loading,disabled:1!==e.status,"popper-class":"erp-info-select"},on:{change:e.devPinSelectChange},model:{value:e.addDevPinData.value,callback:function(t){e.$set(e.addDevPinData,"value",t)},expression:"addDevPinData.value"}},e._l(e.addDevPinData.zhanghaos,(function(t){return a("el-option",{key:t.userName,attrs:{label:t.userName,value:t.userName}},[a("div",{staticClass:"cbox ptb5"},[a("div",{staticClass:"avatar__wrapper"},[a("div",{style:{display:"inlineFlex",margin:"2px",width:"30px",height:"30px",borderRadius:"50%",background:"url("+t.headImg+") 0% 0% / 30px 30px no-repeat scroll content-box border-box transparent"}})]),a("div",{staticClass:"inputUsers__input__autocomplete--info vhbox"},[a("span",[e._v(e._s(t.userName)+" ("+e._s(t.realName)+")")]),a("span",[e._v(e._s(t.organizationFullName))])])])])})),1)],1)],1),e.editer.status?a("el-form-item",{attrs:{label:"研发负责人",prop:"mainDev"}},[a("span",[e._v(e._s(""===e.addDevPinData.value?"未填写":e.addDevPinData.value))])]):e._e(),a("el-form-item",{attrs:{label:"功能描述",prop:"remark"}},[e.editer.status?e._e():a("el-input",{attrs:{type:"textarea",placeholder:this.remarkPlaceHolder},model:{value:e.apiSummaryForm.remark,callback:function(t){e.$set(e.apiSummaryForm,"remark",t)},expression:"apiSummaryForm.remark"}}),e.editer.status?a("span",{staticClass:"remark-content"},[e._v(e._s(""===e.apiSummaryForm.remark?"未填写":e.apiSummaryForm.remark))]):e._e()],1),a("el-form-item",{attrs:{label:"Maven坐标",prop:"mvn"}},[e.editer.status?e._e():a("el-input",{attrs:{type:"textarea",rows:5,autosize:!0,placeholder:this.MvnPlaceHolder},model:{value:e.apiSummaryForm.mvn,callback:function(t){e.$set(e.apiSummaryForm,"mvn",t)},expression:"apiSummaryForm.mvn"}}),e.editer.status?a("span",{staticClass:"mvn"},[e._v(e._s(null===e.apiSummaryForm.mvn||""===e.apiSummaryForm.mvn?"未填写":e.apiSummaryForm.mvn))]):e._e()],1),e.editer.status?e._e():a("el-form-item",[a("el-button",{on:{click:function(t){return e.resetForm("apiSummaryForm")}}},[e._v("取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("apiSummaryForm")}}},[e._v("保存 ")])],1)],1),e.editer.status&&e.jsfBasicEditBtnStatus.visible?a("el-button",{staticStyle:{"margin-left":"6.5%"},attrs:{type:"primary",disabled:e.jsfBasicEditBtnStatus.disabled},on:{click:function(t){return e.editerForm("apiSummaryForm")}}},[e._v("编辑 ")]):e._e()],1)}),[],!1,null,"2c1341f5",null),v=b.exports,g=(a("5df3"),a("2a6f")),y=a("43b3"),D=a("e219"),w=a("bbd1"),k=a("3835"),S=a("964d"),C=a("547a"),x=a("61f0"),_=a.n(x),I=(a("6014"),a("b311")),T=a.n(I),j={name:"QuickMaintain",mixins:[C.a],props:{qualifiedName:{type:String,required:!0},methodName:{type:String,required:!0},methodId:{type:Number,required:!0},isRequest:{type:Boolean,default:!0},handleUpdateParamList:{type:Function,default:function(){}},tabName:{type:String,default:""},tableData:{type:Array,default:function(){return[]}}},data:function(){return{pullFromJsfDialogVisible:!1,pullFromJsfFormData:{qualifiedName:"",methodName:"",alias:""},pullFromJsfFormRules:{qualifiedName:[{required:!0,message:"请输入JSF接口名"}],methodName:[{required:!0,message:"请输入JSF方法名"}],alias:[{required:!0,message:"请输入JSF别名"}]},pullFromJsfFormList:[{prop:"qualifiedName",label:"JSF接口名",placeholder:"请输入JSF接口名"},{prop:"methodName",label:"JSF方法名",placeholder:"请输入JSF方法名"},{prop:"alias",label:"JSF别名",placeholder:"请选择JSF别名"}],aliasOptionList:[],aliasOptionLoading:!1,pullFromJsfDebounceTimer:null,pullFromJsfSaveLoading:!1,uploadUrl:"".concat(window.env.gatewayFileBaseApi,"lop/mulfile/upload?LOP-DN=").concat(window.env.gatewayUploadLopDnXml),importXmlDialogVisible:!1,importXmlFormData:{method:"uploadFile",fileList:[]},importXmlFormRules:{method:[{required:!0,message:"请选择导入方式"}],fileList:[{type:"array",required:!0,message:"请上传XML文件"}]},importXmlFormList:[{prop:"method",label:"导入方式"},{prop:"fileList",label:"导入操作"}],importXmlDebounceTimer:null,importXmlSaveLoading:!1,importJsonFormData:{method:"uploadFile",fileList:[]},importJsonFormRules:{method:[{required:!0,message:"请选择导入方式"}],fileList:[{type:"array",required:!0,message:"请上传JSON文件"}]},importJsonDialogVisible:!1,monitoringMap:{jsf:{pullFromJsf:{request:"apiManager_jsf_1670468865530|2",response:"apiManager_jsf_1670468865530|3"},importJson:{request:"apiManager_jsf_1670468865530|4",response:"apiManager_jsf_1670468865530|5"},importXml:{request:"apiManager_jsf_1670468865530|6",response:"apiManager_jsf_1670468865530|7"},jsonEdit:{request:"apiManager_jsf_1670468865530|8",response:"apiManager_jsf_1670468865530|9"}},http:{importJson:{request:"apiManager_http_1670470412984|2",response:"apiManager_http_1670470412984|3"},importXml:{request:"apiManager_http_1670470412984|4",response:"apiManager_http_1670470412984|5"},jsonEdit:{request:"apiManager_http_1670470412984|6",response:"apiManager_http_1670470412984|7"}},ApiManagerPassBack:{importJson:{request:"apiManager_passBack_1670471262879|2",response:"apiManager_passBack_1670471262879|3"},importXml:{request:"apiManager_passBack_1670471262879|4",response:"apiManager_passBack_1670471262879|5"},jsonEdit:{request:"apiManager_passBack_1670471262879|6",response:"apiManager_passBack_1670471262879|7"}}},jsonEditDialogVisible:!1,jsonEditor:void 0,jsonEditDebounceTimer:null}},computed:{computeQuickMaintainTipText:function(){return"更新将覆盖原有".concat({true:"请求",false:"响应"}[this.isRequest],"参数，请谨慎操作！")}},methods:{queryAliasByInterface:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pullFromJsfFormData.qualifiedName,a=[{qualifiedName:t}],e.next=4,S.a.queryAliasByInterface(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),quickMaintainApiDocByJsf:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pullFromJsfFormData,a=t.qualifiedName,r=t.methodName,s=t.alias,n=this.methodId,o=this.isRequest,l=[{qualifiedName:a,methodName:r,alias:s,methodId:n,judgeType:{true:1,false:2}[o]||1}],e.next=7,S.a.quickMaintainApiDocByJsf(l);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),quickMaintainApiDocByXml:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s,n,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.methodName,r=this.methodId,s=this.isRequest,n={true:1,false:2},o={jsf:1,http:2}[this.$route.params.type],l=[{methodName:a,methodId:r,judgeType:n[s]||1,type:o,jssKey:t}],e.next=8,S.a.quickMaintainApiDocByXml(l);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleCommandDropdownItem:function(e){var t=this;({importXml:function(){return t.handleClickImportXml()},importJson:function(){return t.handleClickImportJson()},pullFromJsf:function(){return t.handleClickPullFromJsf()},jsonEdit:function(){return t.handleClickJsonEdit()}})[e]()},initPullFromJsfFormData:function(){var e=this.qualifiedName,t=this.methodName;this.pullFromJsfFormData={qualifiedName:e,methodName:t,alias:""}},handleQueryAliasByInterface:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.aliasOptionLoading=!0,e.next=3,this.queryAliasByInterface().catch((function(){throw r.aliasOptionLoading=!1,new Error("handleQueryAliasByInterface queryAliasByInterface")}));case 3:t=e.sent,a=t.data,this.aliasOptionList=a||[],this.aliasOptionLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickPullFromJsf:function(){var e=this;this.pullFromJsfDialogVisible=!0,this.$nextTick((function(){e.initPullFromJsfFormData(),e.handleQueryAliasByInterface()}))},handleClickConfirmPullFromJsf:function(){var e=this;clearTimeout(this.pullFromJsfDebounceTimer),this.pullFromJsfDebounceTimer=setTimeout(Object(r.a)(Object(i.a)().mark((function t(){var a,r,s,n,o,l,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pullFromJsfSaveLoading=!0,t.next=3,e.$refs.pullFromJsfForm.validate().catch((function(){throw e.pullFromJsfSaveLoading=!1,new Error("handleClickConfirmPullFromJsf validate")}));case 3:return t.next=5,e.quickMaintainApiDocByJsf().catch((function(){throw e.pullFromJsfSaveLoading=!1,new Error("handleClickConfirmPullFromJsf quickMaintainApiDocByJsf")}));case 5:a=t.sent,r=a.data,s=r.inParamList,n=void 0===s?[]:s,o=r.outParamList,l=void 0===o?[]:o,c=e.isRequest,e.handleUpdateParamList(c,c?n:l),e.pullFromJsfDialogVisible=!1,e.pullFromJsfSaveLoading=!1,e.$message.success("操作成功！");case 13:case"end":return t.stop()}}),t)}))),300)},handleClickImportXml:function(){this.importXmlDialogVisible=!0},handleChangeImportXmlUpload:function(e,t){t&&t.length>0&&(this.importXmlFormData.fileList=[e])},handleSuccessImportXmlUpload:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s,n,o,l,c,u,d,p=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(k.a)(t.fileName,1),r=a[0],e.next=3,this.quickMaintainApiDocByXml(r).catch((function(){throw p.importXmlSaveLoading=!1,new Error("handleSuccessImportXmlUpload quickMaintainApiDocByXml")}));case 3:s=e.sent,n=s.data,o=n.inParamList,l=void 0===o?[]:o,c=n.outParamList,u=void 0===c?[]:c,d=this.isRequest,this.handleUpdateParamList(d,d?l:u),this.importXmlDialogVisible=!1,this.importXmlSaveLoading=!1,this.$message.success("操作成功！");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleErrorImportXmlUpload:function(){this.importXmlSaveLoading=!1,this.importXmlFormData.fileList=[],this.$message.error("上传失败，请重新上传")},handleClickConfirmImportXml:function(){var e=this;clearTimeout(this.importXmlDebounceTimer),this.importXmlDebounceTimer=setTimeout(Object(r.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.importXmlSaveLoading=!0,t.next=3,e.$refs.importXmlForm.validate().catch((function(){throw e.importXmlSaveLoading=!1,new Error("handleClickConfirmImportXml validate")}));case 3:e.$refs.importXmlFormUpload[0].submit();case 4:case"end":return t.stop()}}),t)}))),300)},handleClickImportJson:function(){this.importJsonDialogVisible=!0},handleJsonExceed:function(){this.$message.warning("当前限制只能选择 1 个文件，请删除已选文件后重新上传")},handleErrorImportJsonUpload:function(){this.importJsonFormData.fileList=[],this.$message.error("上传失败，请重新上传")},handleBeforeUpload:function(e){if(e.size/1024>500)return this.$message.error("导入失败，文件大小超过500KB"),!1},handleRemoveImportJsonUpload:function(e,t){this.importJsonFormData.fileList=[]},handleSuccessImportJsonUpload:function(e,t,a){this.importJsonFormData.fileList=a},handleSaveImportJson:function(){var e=this;this.$refs.importJsonForm.validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r,s,n,o,l,c,u,d;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return r=e.importJsonFormData.fileList[0].name,t.next=4,e.quickMaintainApiDocByJson(r).catch((function(){throw e.importJsonFormData.fileList=[],new Error("handleSaveImportJson quickMaintainApiDocByJson")}));case 4:s=t.sent,n=s.data,o=n.inParamList,l=void 0===o?[]:o,c=n.outParamList,u=void 0===c?[]:c,d=e.isRequest,e.handleUpdateParamList(d,d?l:u),e.importJsonDialogVisible=!1,e.$message.success("导入成功，可继续在页面维护API文档详细信息"),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},quickMaintainApiDocByJson:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s,n,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.isRequest,r={true:1,false:2},s={jsf:1,http:2}[this.$route.params.type],n=parseInt(this.$route.params.id),o=[{appId:n,judgeType:r[a]||1,type:s,jssKey:t}],e.next=9,S.a.quickMaintainApiDocByJson(o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleClickJsonEdit:function(){var e=this;this.jsonEditDialogVisible=!0,clearTimeout(this.jsonEditDebounceTimer),this.jsonEditDebounceTimer=setTimeout((function(){var t=document.getElementById("jsonEdit_"+e.isRequest);e.jsonEditor||(e.jsonEditor=new _.a(t,{mode:"code",search:!1,enableSort:!1,enableTransform:!1,language:"zh-CN",onChange:function(){}})),e.jsonEditor.set(e.tableData)}),300)},handleJsonEdit:function(){var e=this.isRequest;this.handleUpdateParamList(e,this.jsonEditor.get()),this.jsonEditDialogVisible=!1},copyCodeText:function(){var e=this,t=new T.a(".copyCodeText",{text:function(){return JSON.stringify(e.jsonEditor.get(),null,2)}});t.on("success",(function(){e.$message.success("复制成功！"),t.destroy()})),t.on("error",(function(){e.$message.error("复制失败！"),t.destroy()}))}}},P=j,O=(a("8482"),Object(h.a)(P,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quick-maintain"},[a("el-dropdown",{staticClass:"quick-maintain__dropdown",attrs:{trigger:"click"},on:{command:e.handleCommandDropdownItem}},[a("span",[e._v("快速维护"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"jsonEdit"}},[e._v("JSON编辑")]),a("el-dropdown-item",{attrs:{command:"importXml"}},[e._v("导入XML文件")]),a("el-dropdown-item",{attrs:{command:"importJson"}},[e._v("导入JSON报文")]),a("el-dropdown-item",{attrs:{command:"pullFromJsf"}},[e._v("从JSF注册中心拉取元数据")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-xml-dialog",title:"导入XML文件",width:"480px",visible:e.importXmlDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.importXmlDialogVisible=t},close:function(t){return e.$refs.importXmlForm.resetFields()}}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form",{ref:"importXmlForm",staticClass:"import-xml-form",attrs:{model:e.importXmlFormData,rules:e.importXmlFormRules}},e._l(e.importXmlFormList,(function(t){return a("el-form-item",{key:t.prop,attrs:{prop:t.prop,label:t.label,"label-width":"100px"}},[["method"].includes(t.prop)?[a("el-radio-group",{staticStyle:{margin:"8px",width:"100%"},model:{value:e.importXmlFormData.method,callback:function(t){e.$set(e.importXmlFormData,"method",t)},expression:"importXmlFormData.method"}},[a("el-radio",{attrs:{label:"uploadFile"}},[e._v("上传文件")])],1)]:["fileList"].includes(t.prop)?[a("el-upload",{ref:"importXmlFormUpload",refInFor:!0,staticClass:"import-xml-form__upload",attrs:{action:e.uploadUrl,"file-list":e.importXmlFormData.fileList,"auto-upload":!1,"on-change":e.handleChangeImportXmlUpload,"on-success":e.handleSuccessImportXmlUpload,"on-error":e.handleErrorImportXmlUpload}},[a("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传XML文件，且不超过500kb ")])],1)]:e._e()],2)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importXmlDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.importXmlSaveLoading,clstag:e.clstag(e.monitoringMap[e.tabName].importXml[e.isRequest?"request":"response"],"")},on:{click:e.handleClickConfirmImportXml}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"custom-class":"pull-from-jsf-dialog",title:"从JSF注册中心拉取元数据",width:"480px",visible:e.pullFromJsfDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.pullFromJsfDialogVisible=t},close:function(t){return e.$refs.pullFromJsfForm.resetFields()}}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form",{ref:"pullFromJsfForm",attrs:{model:e.pullFromJsfFormData,rules:e.pullFromJsfFormRules}},e._l(e.pullFromJsfFormList,(function(t){return a("el-form-item",{key:t.prop,attrs:{prop:t.prop,label:t.label,"label-width":"100px"}},[["alias"].includes(t.prop)?[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.aliasOptionLoading,placeholder:t.placeholder},model:{value:e.pullFromJsfFormData[t.prop],callback:function(a){e.$set(e.pullFromJsfFormData,t.prop,a)},expression:"pullFromJsfFormData[item.prop]"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)]:[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,disabled:""},model:{value:e.pullFromJsfFormData[t.prop],callback:function(a){e.$set(e.pullFromJsfFormData,t.prop,"string"==typeof a?a.trim():a)},expression:"pullFromJsfFormData[item.prop]"}})]],2)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.pullFromJsfDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.pullFromJsfSaveLoading,clstag:e.clstag(e.monitoringMap[e.tabName].pullFromJsf[e.isRequest?"request":"response"],"")},on:{click:e.handleClickConfirmPullFromJsf}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-json-dialog",title:"导入",width:"560px",visible:e.importJsonDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.importJsonDialogVisible=t},close:function(t){return e.$refs.importJsonForm.resetFields()}}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form",{ref:"importJsonForm",staticClass:"json-dialog-form",attrs:{model:e.importJsonFormData,rules:e.importJsonFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"method",label:"导入方式"}},[a("el-radio-group",{model:{value:e.importXmlFormData.method,callback:function(t){e.$set(e.importXmlFormData,"method",t)},expression:"importXmlFormData.method"}},[a("el-radio",{attrs:{label:"uploadFile"}},[e._v("文件导入")])],1)],1),a("el-form-item",{attrs:{prop:"fileList",label:"导入操作"}},[a("el-upload",{ref:"importJsonFormUpload",staticClass:"form__upload",attrs:{action:e.uploadUrl,"file-list":e.importJsonFormData.fileList,limit:1,"on-exceed":e.handleJsonExceed,"before-upload":e.handleBeforeUpload,"on-success":e.handleSuccessImportJsonUpload,"on-remove":e.handleRemoveImportJsonUpload,"on-error":e.handleErrorImportJsonUpload}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"}},[e._v("上传文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 上传的文件大小不能超过500kb ")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importJsonDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",clstag:e.clstag(e.monitoringMap[e.tabName].importJson[e.isRequest?"request":"response"],"")},on:{click:e.handleSaveImportJson}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-json-dialog",title:e.isRequest?"JSON编辑请求参数":"JSON编辑响应参数",width:"832px",visible:e.jsonEditDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.jsonEditDialogVisible=t}}},[a("div",{staticClass:"dialog-flex"},[a("div",{staticClass:"dialog-flex-left"},[e._v("使用方法见"),a("a",{attrs:{href:"http://lcp.jdl.com/#/apiNewHand/55044",target:"_blank"}},[e._v("JSON编辑操作指南")])]),a("div",{staticClass:"dialog-flex-right"},[a("a",{staticClass:"copyCodeText",on:{click:function(t){return e.copyCodeText()}}},[e._v("复制代码")])])]),a("div",{staticClass:"json-view-container",staticStyle:{width:"800px",height:"400px"},attrs:{id:"jsonEdit_"+e.isRequest}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.jsonEditDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",clstag:e.clstag(e.monitoringMap[e.tabName].jsonEdit[e.isRequest?"request":"response"],"")},on:{click:e.handleJsonEdit}},[e._v("确定")])],1)])],1)}),[],!1,null,"391889d6",null)),N=O.exports,F={name:"EditApiDoc",components:{StickyWrapper:g.a,Title:y.a,ParamTable:D.a,ErrorCodeTable:w.a,QuickMaintain:N},props:{editApiDocVisible:{type:Boolean,required:!0},methodId:{type:Number,required:!0},status:{type:Number,required:!0},tabName:{type:String,default:""}},data:function(){return{loading:!0,qualifiedName:"",methodName:"",basicInfoFormData:{cnName:"",methodRemark:""},basicInfoFormRules:{cnName:[{required:!0,message:"请输入中文名称"},{min:2,max:20,message:"长度在 2 到 20 个字符之间"}],methodRemark:[{required:!0,message:"请输入方法描述"},{min:2,max:500,message:"长度在 2 到 500 个字符之间"}]},editable:!0,requestParamTableData:[],requestParamTableEditedData:[],responseParamTableData:[],responseParamTableEditedData:[],errorCodeTableData:[],errorCodeTableEditedData:[],debounceTimer:null,saveLoading:!1}},watch:{requestParamTableData:{handler:function(e){this.requestParamTableEditedData=JSON.parse(JSON.stringify(e))}},responseParamTableData:{handler:function(e){this.responseParamTableEditedData=JSON.parse(JSON.stringify(e))}},errorCodeTableData:{handler:function(e){this.errorCodeTableEditedData=JSON.parse(JSON.stringify(e))}}},methods:{findApiDoc:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.methodId,a=[{methodId:t}],e.next=4,S.a.findApiDoc(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateApiDoc:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c,u,d,p,m,f,h,b,v;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={jsf:1,http:2}[this.$route.params.type],a=this.qualifiedName,r=this.methodId,s=this.methodName,n=this.requestParamTableEditedData,o=this.responseParamTableEditedData,l=this.errorCodeTableEditedData,c=r,u=s,d=n,p=o,m=l,f=this.basicInfoFormData,h=f.cnName,b=f.methodRemark,v=[{type:t,id:c,name:u,cnName:h,qualifiedName:a,remark:b,inParamList:d,outParamList:p,errorCodeList:m}],e.next=13,S.a.updateApiDoc(v);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),loadApiMethodData:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c,u,d,p,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.findApiDoc().catch((function(){throw new Error("loadApiMethodData findApiDoc")}));case 3:t=e.sent,a=t.data,r=a.qualifiedName,s=a.name,n=a.cnName,o=a.remark,l=a.inParamList,c=void 0===l?[]:l,u=a.outParamList,d=void 0===u?[]:u,p=a.errorCodeList,m=void 0===p?[]:p,this.qualifiedName=r,this.methodName=s,this.basicInfoFormData.cnName=n,this.basicInfoFormData.methodRemark=o,this.requestParamTableData=this.initTableData(c),this.responseParamTableData=this.initTableData(d),this.errorCodeTableData=m,this.loading=!1;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initTableData:function(e){var t=this;return e.map((function(e){var a=e.children;return a=a&&a.length>0?t.initTableData(a):[],Object(o.a)(Object(o.a)({},e),{},{children:a})}))},handleUpdateParamList:function(){var e=arguments.length>1?arguments[1]:void 0;this[{true:"requestParamTableEditedData",false:"responseParamTableEditedData"}[!(arguments.length>0&&void 0!==arguments[0])||arguments[0]]||"requestParamTableEditedData"]=this.initTableData(e)},goBack:function(){this.$emit("update:editApiDocVisible",!1),this.$emit("update:methodId",0)},handleClickSave:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(Object(r.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.saveLoading=!0,t.next=3,Promise.all([e.$refs.basicInfoForm.validate(),e.$refs.requestParamTable.validateTable(),e.$refs.responseParamTable.validateTable(),e.$refs.errorCodeTable.validateTable()]).catch((function(){throw e.saveLoading=!1,new Error("handleClickSave validate")}));case 3:return t.next=5,e.updateApiDoc().catch((function(){throw e.saveLoading=!1,new Error("handleClickSave updateApiDoc")}));case 5:e.$message.success("操作成功！"),e.$emit("update:editApiDocVisible",!1),e.$emit("update:methodId",0),e.saveLoading=!1,e.$emit("updateStatus");case 10:case"end":return t.stop()}}),t)}))),300)}},created:function(){this.loadApiMethodData()}},A=F,L=(a("64191"),Object(h.a)(A,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-api-doc"},[a("el-page-header",{attrs:{content:e.methodName},on:{back:e.goBack}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"edit-api-doc__content"},[a("Title",{attrs:{text:"基本信息"}}),a("el-form",{ref:"basicInfoForm",attrs:{model:e.basicInfoFormData,rules:e.basicInfoFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"中文名称",prop:"cnName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入方法中文名称，如：获取XXXX"},model:{value:e.basicInfoFormData.cnName,callback:function(t){e.$set(e.basicInfoFormData,"cnName","string"==typeof t?t.trim():t)},expression:"basicInfoFormData.cnName"}})],1),a("el-form-item",{attrs:{label:"方法描述",prop:"methodRemark"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{rows:2,type:"textarea",resize:"none",placeholder:"请输入方法能力、使用场景描述，如：获取XXXX"},model:{value:e.basicInfoFormData.methodRemark,callback:function(t){e.$set(e.basicInfoFormData,"methodRemark",t)},expression:"basicInfoFormData.methodRemark"}})],1)],1),a("div",{staticClass:"content__title"},[a("Title",{attrs:{text:"请求参数"}}),a("QuickMaintain",{attrs:{qualifiedName:e.qualifiedName,methodName:e.methodName,methodId:e.methodId,isRequest:!0,handleUpdateParamList:e.handleUpdateParamList,tabName:e.tabName,tableData:e.requestParamTableEditedData}})],1),a("ParamTable",{ref:"requestParamTable",attrs:{editable:e.editable,isRequest:!0,paramTableData:e.requestParamTableData,paramTableEditedData:e.requestParamTableEditedData,status:e.status},on:{"update:paramTableData":function(t){e.requestParamTableData=t},"update:param-table-data":function(t){e.requestParamTableData=t},"update:paramTableEditedData":function(t){e.requestParamTableEditedData=t},"update:param-table-edited-data":function(t){e.requestParamTableEditedData=t}}}),a("div",{staticClass:"content__title"},[a("Title",{attrs:{text:"响应参数"}}),a("QuickMaintain",{attrs:{qualifiedName:e.qualifiedName,methodName:e.methodName,methodId:e.methodId,isRequest:!1,handleUpdateParamList:e.handleUpdateParamList,tabName:e.tabName,tableData:e.responseParamTableEditedData}})],1),a("ParamTable",{ref:"responseParamTable",attrs:{editable:e.editable,isRequest:!1,paramTableData:e.responseParamTableData,paramTableEditedData:e.responseParamTableEditedData,status:e.status},on:{"update:paramTableData":function(t){e.responseParamTableData=t},"update:param-table-data":function(t){e.responseParamTableData=t},"update:paramTableEditedData":function(t){e.responseParamTableEditedData=t},"update:param-table-edited-data":function(t){e.responseParamTableEditedData=t}}}),a("Title",{attrs:{text:"错误码"}}),a("ErrorCodeTable",{ref:"errorCodeTable",attrs:{editable:e.editable,errorCodeTableData:e.errorCodeTableData,errorCodeTableEditedData:e.errorCodeTableEditedData}}),a("StickyWrapper",[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.handleClickSave}},[e._v("保 存")])],1)],1)],1)}),[],!1,null,"c576cec2",null)),q=L.exports,E=a("1799"),$={name:"AddMethodDialog",props:{qualifiedName:{type:String,required:!0},addMethodDialogVisible:{type:Boolean,required:!0},handleEditDoc:{type:Function,required:!0},reloadTableData:{type:Function,default:function(){}}},data:function(){return{addMethodFormVisible:!0,addMethodFormData:{name:"",cnName:"",remark:""},addMethodFormRules:{name:[{required:!0,message:"请输入JSF方法名"}],cnName:[{required:!0,message:"请输入中文名称"},{min:2,max:20,message:"长度在 2 到 20 个字符之间"}],remark:[{required:!0,message:"请输入方法描述"},{min:2,max:255,message:"长度在 2 到 255 个字符之间"}]},debounceTimer:null,confirmAddMethodLoading:!1,methodId:0}},methods:{addApiMethod:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=this.qualifiedName,r=this.addMethodFormData,s=r.name,n=r.cnName,o=r.remark,l=[{apiId:t,qualifiedName:a,name:s,cnName:n,remark:o}],e.next=6,S.a.addApiMethod(l);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleConfirmAddMethod:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){e.$refs.addMethodForm.validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r,s;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return e.confirmAddMethodLoading=!0,t.next=4,e.addApiMethod().catch((function(){throw e.confirmAddMethodLoading=!1,new Error("handleConfirmAddMethod addApiMethod")}));case 4:r=t.sent,s=r.data,e.methodId=s,e.addMethodFormVisible=!1,e.confirmAddMethodLoading=!1,e.reloadTableData(),e.$emit("updateStatus"),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),300)},resetAddMethodForm:function(){this.$refs.addMethodForm.resetFields(),this.addMethodFormVisible=!0},goToEditDoc:function(){this.$emit("update:addMethodDialogVisible",!1),this.handleEditDoc(this.methodId)}}},M=$,J=(a("ddbd"),Object(h.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"custom-class":"add-method-dialog",title:"添加方法",width:"480px",visible:e.addMethodDialogVisible,"close-on-click-modal":!1},on:{close:e.resetAddMethodForm,"update:visible":function(t){return e.$emit("update:addMethodDialogVisible",t)}}},[a("div",{staticClass:"body__content"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.addMethodFormVisible,expression:"addMethodFormVisible"}],ref:"addMethodForm",staticClass:"add-method-form",attrs:{model:e.addMethodFormData,rules:e.addMethodFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"JSF方法名",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入JSF方法名，如：queryDictByBean"},model:{value:e.addMethodFormData.name,callback:function(t){e.$set(e.addMethodFormData,"name","string"==typeof t?t.trim():t)},expression:"addMethodFormData.name"}})],1),a("el-form-item",{attrs:{label:"中文名称",prop:"cnName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入方法中文名称，如：获取XXXX"},model:{value:e.addMethodFormData.cnName,callback:function(t){e.$set(e.addMethodFormData,"cnName","string"==typeof t?t.trim():t)},expression:"addMethodFormData.cnName"}})],1),a("el-form-item",{attrs:{label:"方法描述",prop:"remark"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{rows:4,type:"textarea",resize:"none",placeholder:"请输入方法能力、使用场景描述，如：获取XXXX"},model:{value:e.addMethodFormData.remark,callback:function(t){e.$set(e.addMethodFormData,"remark","string"==typeof t?t.trim():t)},expression:"addMethodFormData.remark"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.addMethodFormVisible,expression:"!addMethodFormVisible"}],staticClass:"add-method-success"},[a("i",{staticClass:"el-icon-success add-method-success__icon"}),a("p",{staticClass:"add-method-success__title"},[e._v("添加成功")]),a("p",{staticClass:"add-method-success__tip"},[e._v(" 您可以点击下方快捷入口，继续添加方法或编辑文档。 ")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.addMethodFormVisible,expression:"addMethodFormVisible"}],staticClass:"footer__button-wrapper"},[a("el-button",{on:{click:function(t){return e.$emit("update:addMethodDialogVisible",!1)}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.confirmAddMethodLoading,type:"primary"},on:{click:e.handleConfirmAddMethod}},[e._v("确认添加")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.addMethodFormVisible,expression:"!addMethodFormVisible"}],staticClass:"footer__button-wrapper"},[a("el-button",{on:{click:e.resetAddMethodForm}},[e._v("继续添加")]),a("el-button",{attrs:{type:"primary"},on:{click:e.goToEditDoc}},[e._v("编辑文档")])],1)])])}),[],!1,null,"6e5d30c3",null)),B=J.exports,R=(a("a481"),{name:"ConfigurationDialog",props:{currentRow:{type:Object,required:!0},configurationDialogVisible:{type:Boolean,required:!0}},data:function(){var e=this;return{configurationForm:{excpsWhites:null,effectDomains:null,effectRange:1,supportGeneralize:0,generalizeDetail:""},configurationFormRules:{excpsWhites:[{pattern:/^([^,]*,){0,4}[^,]*$/,message:"异常类型超过5个"}],effectDomains:[{pattern:/^([^,]*,){0,9}[^,]*$/,message:"异常类型超过10个"}],generalizeDetail:[{validator:function(t,a,i){if(0!==e.configurationForm.supportGeneralize){var r=a.length;if(r>100||r<=0)i(new Error("字符长度范围为：1-100"));else if(/^[a-zA-Z0-9,\.[\]''""]*$/g.test(a.replace(/\s*/g,""))){try{e.paramTypeList=JSON.parse(e.configurationForm.generalizeDetail)}catch(e){return void i(new Error("请输入正确格式的一级参数类型"))}i()}else i(new Error('允许输入英文字母、数字、[]、""、"、.、,'))}else i()},trigger:"change"}]},paramTypeList:[]}},watch:{configurationDialogVisible:{handler:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s,n,o,l,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return this.currentRow,a=this.currentRow,r=a.qualifiedName,s=a.name,n=r,o=s,e.next=7,S.a.findMethodConfig([{interfaceName:n,methodName:o}]).catch((function(){throw new Error("handleConfiguration findMethodConfig")}));case 7:l=e.sent,(c=l.data)&&(this.configurationForm.effectDomains=c.effectDomains,this.configurationForm.effectRange=c.effectRange,this.configurationForm.excpsWhites=c.excpsWhites,this.configurationForm.generalizeDetail=JSON.stringify(c.jsfGeneric.paramTypeList),this.configurationForm.supportGeneralize=c.jsfGeneric.enabled);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}},methods:{handlerSupportGeneralizeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(0!=+t||e){if(!t&&e&&this.configurationForm.generalizeDetail.length<=0)return!0;if(this.configurationForm.generalizeDetail.length<=0)return this.configurationForm.supportGeneralize=0,void this.$message("无法开启支持泛化调用开关请在开关下的文本框中，维护一级参数的配置信息");try{this.paramTypeList=JSON.parse(this.configurationForm.generalizeDetail)}catch(e){return void this.$message.error({message:"请输入正确格式的一级参数类型"})}return!e&&(this.configurationForm.supportGeneralize=t),!0}},handleGetParamsType:function(){var e=this,t=this.currentRow,a=t.qualifiedName,i=t.name;S.a.queryOneLevelParamTypeForMethod([{interfaceName:a,methodName:i}]).then((function(t){e.configurationForm.generalizeDetail=JSON.stringify(t.data)}))},handleClose:function(){this.$emit("update:configurationDialogVisible",!1),this.$refs.configurationForm.resetFields()},handleSave:function(){var e=this;this.$refs.configurationForm.validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r,s,n,o,l,c,u,d,p,m;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}if(r=e.currentRow,s=r.qualifiedName,n=r.name,o=s,l=n,c=e.configurationForm,u=c.effectRange,d=c.excpsWhites,p=c.effectDomains,e.handlerSupportGeneralizeChange(!0)){t.next=7;break}return t.abrupt("return");case 7:return m={interfaceName:o,methodName:l,effectRange:u,excpsWhites:d,effectDomains:p,jsfGeneric:{enabled:e.configurationForm.supportGeneralize,paramTypeList:e.paramTypeList}},t.next=10,S.a.saveMethodConfig([m]).then((function(){e.$emit("updateStatus"),e.$emit("reloadTableData")})).catch((function(){throw new Error("handleConfiguration findMethodConfig")}));case 10:e.$emit("update:configurationDialogVisible",!1),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),V=R,z=(a("4820"),Object(h.a)(V,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"configuration-dialog"},[a("el-dialog",{attrs:{title:e.currentRow.name+"方法配置",visible:e.configurationDialogVisible,"close-on-click-modal":!1,width:"530px"},on:{close:e.handleClose}},[a("el-form",{ref:"configurationForm",staticClass:"configuration-form",attrs:{model:e.configurationForm,rules:e.configurationFormRules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"支持泛化调用",prop:"generalizeDetail"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handlerSupportGeneralizeChange(!1,t)}},model:{value:e.configurationForm.supportGeneralize,callback:function(t){e.$set(e.configurationForm,"supportGeneralize",t)},expression:"configurationForm.supportGeneralize"}}),a("p",{staticClass:"link",on:{click:e.handleGetParamsType}},[e._v(" 从JSF注册中心拉取JSF方法一级参数类型 ")]),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"由于在调用JSF服务时，需要网关指定一级参数类型。请使用上方的快捷按钮获取一级参数类型，或者手动维护参数类型。示例：[“com.aaa.bbb.ccc”]"},model:{value:e.configurationForm.generalizeDetail,callback:function(t){e.$set(e.configurationForm,"generalizeDetail",t)},expression:"configurationForm.generalizeDetail"}})],1),a("p",{staticClass:"tip"},[e._v(" 为避免出现因为配置导致调用失败情况，请确保上面的一级参数类型及位置与运行时一致 ")]),a("el-form-item",{attrs:{label:"异常类型白名单",prop:"excpsWhites"}},[a("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"异常类型配置到白名单后，网关会将异常信息放到错信息中返回给用户。多个用“,”分割，最多支持配置5个。示例：java.lang.Exception,java.lang.NullPointerException"},model:{value:e.configurationForm.excpsWhites,callback:function(t){e.$set(e.configurationForm,"excpsWhites","string"==typeof t?t.trim():t)},expression:"configurationForm.excpsWhites"}})],1),a("el-form-item",{staticClass:"form-radio",attrs:{prop:"effectRange"}},[a("span",{staticClass:"radio-label"},[e._v("生效范围")]),a("el-radio-group",{model:{value:e.configurationForm.effectRange,callback:function(t){e.$set(e.configurationForm,"effectRange",t)},expression:"configurationForm.effectRange"}},[a("el-radio",{attrs:{label:0}},[e._v("在部分对接方案/API分组生效")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"选择全部生效后，配置信息将对使用此JSF方法的所有用户生效。如未进行过配置验证，请勿轻易选择全部生效。",placement:"bottom-start"}},[a("el-radio",{attrs:{label:1}},[e._v("全部生效")])],1)],1)],1),a("el-form-item",{attrs:{prop:"effectDomains"}},[a("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"填写生效异常类型白名单的对接方案编码，多个请用“,”分割，最多支持配置10个。示例：JD_CMBC,CMBC"},model:{value:e.configurationForm.effectDomains,callback:function(t){e.$set(e.configurationForm,"effectDomains","string"==typeof t?t.trim():t)},expression:"configurationForm.effectDomains"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"01be6630",null)),X=z.exports,U=a("ad2b"),Q=a("3cfb"),G=a("fd48"),H=a("3935"),W={props:["tapOutJsfDiaInfo"],computed:{diaVisible:{set:function(e){this.$emit("update:tapOutJsfDiaInfo",Object.assign({},this.tapOutJsfDiaInfo,{show:e}))},get:function(){return this.pShow&&!!this.curStep}},pShow:{get:function(){return this.tapOutJsfDiaInfo.show}}},watch:{pShow:{handler:function(e){e?this.checkJsfApiMethodOfflineHaveHttp():this.applyerForm.applyerErp=""},immediate:!0}},data:function(){return{applyerForm:{applyerErp:""},curStep:"",applyerErpRule:{applyerErp:[{validator:function(e,t,a){t?t!==Q.a.getters.user_pin?a():a(new Error("审批人不能为当前操作人本人")):a(new Error("请输入审批人ERP账号"))},trigger:["change","blure"]},{required:!0,trigger:["change","blure"]}]}}},methods:{handleDiaCancel:function(){this.$emit("update:tapOutJsfDiaInfo",Object.assign({},this.tapOutJsfDiaInfo,{show:!1}))},checkJsfApiMethodOfflineHaveHttp:function(){var e=this,t=[{qualifiedName:this.tapOutJsfDiaInfo.rowInfo.qualifiedName,methodName:this.tapOutJsfDiaInfo.rowInfo.name}];G.a.HttpApiService.checkJsfApiMethodOfflineHaveHttp(JSON.stringify(t)).then((function(t){var a=t||{},i=a.code,r=a.data;2e4==+i&&(e.curStep=r?"step1":"step2")})).catch((function(t){e.$message.error(t),e.$emit("update:tapOutJsfDiaInfo",Object.assign({},e.tapOutJsfDiaInfo,{show:!1}))}))},offlineJsfApiMethod:function(){var e=this;return new Promise((function(t){var a=[{qualifiedName:e.tapOutJsfDiaInfo.rowInfo.qualifiedName,approver:e.applyerForm.applyerErp,methodName:e.tapOutJsfDiaInfo.rowInfo.name}],i=!1;G.a.HttpApiService.offlineJsfApiMethod(JSON.stringify(a)).then((function(a){var r=a||{},s=r.code,n=r.message;i=2e4==+s,2e4!=+s&&e.$message.error(n),t(i)})).catch((function(e){t(i)}))}))},handleDiaConfirm:function(e){var t=this;switch(e){case"step1":this.curStep="step2";break;case"step2":this.$refs.tapOutHttpApplyerErp.validate(function(){var e=Object(r.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return e.next=3,t.offlineJsfApiMethod();case 3:e.sent&&(t.curStep="step3",t.$emit("queryApi")),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());break;case"step3":this.handleDiaCancel()}}},components:{ErpPrincipal:H.a},name:"TapOutJsfDialog"},K=W,Z=(a("bbba"),Object(h.a)(K,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"530px",type:"text",title:"JSF方法下线申请","custom-class":"tap-out-http-dia",visible:e.diaVisible},on:{"update:visible":function(t){e.diaVisible=t}}},["step1"===e.curStep?a("div",{staticClass:"dia-content"},[a("p",[a("i",{staticClass:"el-icon-warning"}),a("span",{staticClass:"step1-title step-title"},[e._v("确认要下线此JSF方法吗？")])]),a("p",{staticClass:"step1-des"},[e._v(" 此JSF方法有对接方案、HTTP接口使用，如下线将会影响使用方更新JSF方法文档 ")])]):"step2"===e.curStep?a("div",{staticClass:"dia-content step2-content"},[a("p",{staticClass:"step-title"},[e._v("请填写指定的审批人ERP账号")]),a("p",{},[e._v("审批通过后，API下线生效")]),a("div",{staticClass:"step2-form_content"},[a("el-form",{ref:"tapOutHttpApplyerErp",attrs:{model:e.applyerForm,rules:e.applyerErpRule}},[a("el-form-item",{staticClass:"step2-form-item_wrap",attrs:{prop:"applyerErp",label:"审批人ERP账号"}},[a("ErpPrincipal",{attrs:{formDataPrincipal:e.applyerForm.applyerErp,placeholder:"审批人可在京ME流程中心审批"},on:{"update:formDataPrincipal":function(t){return e.$set(e.applyerForm,"applyerErp",t)},"update:form-data-principal":function(t){return e.$set(e.applyerForm,"applyerErp",t)}}})],1)],1)],1)]):"step3"===e.curStep?a("div",{staticClass:"dia-content dia-content_success"},[a("i",{staticClass:"el-icon-success"}),a("p",{staticClass:"step3-title"},[e._v("提交成功")]),a("p",{staticClass:"step3-des"},[e._v("提醒审批人尽快审批吧，审批通过后JSF方法下线生效")])]):e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},["step1"===e.curStep?[a("el-button",{on:{click:e.handleDiaCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleDiaConfirm("step1")}}},[e._v("下线")])]:e._e(),"step2"===e.curStep?[a("el-button",{on:{click:e.handleDiaCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleDiaConfirm("step2")}}},[e._v("提交")])]:e._e(),"step3"===e.curStep?[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleDiaConfirm("step3")}}},[e._v("确定")])]:e._e()],2)])}),[],!1,null,"613b756d",null)),Y=Z.exports,ee={name:"MethodTable",components:{Pagination:E.a,AddMethodDialog:B,ConfigurationDialog:X,TapOutJsfDialog:Y},props:{qualifiedName:{type:String,required:!0},editApiDocVisible:{type:Boolean,required:!0},methodId:{type:Number,required:!0},jsfAddBtnStatus:{type:Object,default:function(){return{visible:!0,disabled:!1}}}},computed:{jsfBtnStatus:function(){return function(e){var t=e.isOnline,a=e.status,i={disabled:!1,visible:!0},r={disabled:!1,visible:!0},s={disabled:!1,visible:!0};return 0==+t&&1==+a?i.visible=!1:1==+t&&1==+a||(3==+a||9==+a||7==+a?(s.disabled=!0,r.disabled=!0,i.disabled=!0):4==+a||6==+a&&(s.disabled=!0,r.disabled=!0,i.visible=!1)),{offline:i,edit:s,config:r}}}},data:function(){var e=this.$createElement;return{queryString:"",tableDataLoading:!0,tableData:[],tableList:[{prop:"name",label:"方法名","min-width":"300"},{prop:"cnName",label:"方法名称中文名","min-width":"180"},{prop:"remark",label:"描述","min-width":"240"},{prop:"status",label:"状态",formatter:function(t,a,i){var r=t.status,s=t.isOnline,n="",o="";return 0==+s&&1==+r?(o="初始化",n="status status_init"):1==+s&&1==+r?(o="编辑中",n="status status_edit"):3==+r||9==+r||7==+r?(o="审批中",n="status status_approve"):4==+r?(o="已发布",n="status status_released"):6==+r&&(o="已下线",n="status status_offline"),e("span",{class:n},[o])}},{prop:"updateUser",label:"更新人","min-width":"100"},{prop:"updateTime",label:"更新时间","min-width":"180",formatter:function(e,t,a){return U.a.timeInTable(a)}}],currentPage:1,pageSize:10,total:0,addMethodDialogVisible:!1,configurationDialogVisible:!1,currentRow:{},tapOutJsfDiaInfo:{show:!1,rowInfo:null}}},methods:{queryMethodListByInterfaceOrCnName:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qualifiedName,a=this.queryString,r=this.currentPage,s=this.pageSize,n=[{pageSize:s,page:r},{name:a,qualifiedName:t}],e.next=6,S.a.queryMethodListByInterfaceOrCnName(n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),reloadTableData:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableDataLoading=!0,e.next=3,this.queryMethodListByInterfaceOrCnName().catch((function(){throw n.tableDataLoading=!1,new Error("reloadTableData queryMethodListByInterfaceOrCnName")}));case 3:t=e.sent,a=t.data,r=a.total,s=a.list,this.total=r,this.tableData=s,this.tableDataLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleEditDoc:function(e){this.$emit("update:editApiDocVisible",!0),this.$emit("update:methodId",e)},handleConfiguration:function(e){this.configurationDialogVisible=!0,this.currentRow=e},handleTapOutJsf:function(e){this.tapOutJsfDiaInfo={show:!0,rowInfo:e}}},created:function(){this.reloadTableData()}},te=ee,ae=(a("a0df"),Object(h.a)(te,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"method-table"},[a("div",{staticClass:"method-table__search"},[a("div",{staticClass:"search__form"},[a("el-input",{staticStyle:{width:"360px"},attrs:{clearable:!0,placeholder:"请输入方法名、方法中文名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.reloadTableData(t)}},model:{value:e.queryString,callback:function(t){e.queryString="string"==typeof t?t.trim():t},expression:"queryString"}}),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.reloadTableData}},[e._v("查 询")])],1),a("div",{staticClass:"search__button-wrapper"},[e.jsfAddBtnStatus.visible?a("el-button",{attrs:{main:"",disabled:e.jsfAddBtnStatus.disabled},on:{click:function(t){e.addMethodDialogVisible=!0}}},[e._v("添加方法")]):e._e()],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,hideEmptyImg:!0}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"80"}}),e._l(e.tableList,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e["min-width"],"show-tooltip-when-overflow":!0,formatter:e.formatter}})})),a("el-table-column",{attrs:{prop:"handle",label:"操作","min-width":"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.jsfBtnStatus(i).edit.visible?a("el-button",{attrs:{type:"text",disabled:e.jsfBtnStatus(i).edit.disabled},on:{click:function(t){return e.handleEditDoc(i.id)}}},[e._v("编辑文档")]):e._e(),e.jsfBtnStatus(i).config.visible?a("el-button",{attrs:{type:"text",disabled:e.jsfBtnStatus(i).config.disabled},on:{click:function(t){return e.handleConfiguration(i)}}},[e._v("配置")]):e._e()]}}])})],2),e.total>0?a("Pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total,reloadTableData:e.reloadTableData},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e(),a("AddMethodDialog",{attrs:{qualifiedName:e.qualifiedName,addMethodDialogVisible:e.addMethodDialogVisible,handleEditDoc:e.handleEditDoc,reloadTableData:e.reloadTableData},on:{"update:addMethodDialogVisible":function(t){e.addMethodDialogVisible=t},"update:add-method-dialog-visible":function(t){e.addMethodDialogVisible=t},updateStatus:function(t){return e.$emit("updateStatus")}}}),a("ConfigurationDialog",{attrs:{configurationDialogVisible:e.configurationDialogVisible,currentRow:e.currentRow},on:{"update:configurationDialogVisible":function(t){e.configurationDialogVisible=t},"update:configuration-dialog-visible":function(t){e.configurationDialogVisible=t},updateStatus:function(t){return e.$emit("updateStatus")},reloadTableData:e.reloadTableData}}),a("TapOutJsfDialog",{attrs:{tapOutJsfDiaInfo:e.tapOutJsfDiaInfo},on:{"update:tapOutJsfDiaInfo":function(t){e.tapOutJsfDiaInfo=t},"update:tap-out-jsf-dia-info":function(t){e.tapOutJsfDiaInfo=t},queryApi:e.reloadTableData}})],1)}),[],!1,null,"6399f8f8",null)),ie={name:"MethodList",components:{EditApiDoc:q,MethodTable:ae.exports},props:{qualifiedName:{type:String,required:!0},jsfAddBtnStatus:{type:Object,default:function(){return{visible:!0,disabled:!1}}},status:{type:Number,required:!0},tabName:{type:String,default:""}},data:function(){return{editApiDocVisible:!1,methodId:0}}},re=Object(h.a)(ie,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"method-list"},[e.editApiDocVisible?a("EditApiDoc",{attrs:{editApiDocVisible:e.editApiDocVisible,methodId:e.methodId,status:e.status,tabName:e.tabName},on:{"update:editApiDocVisible":function(t){e.editApiDocVisible=t},"update:edit-api-doc-visible":function(t){e.editApiDocVisible=t},"update:methodId":function(t){e.methodId=t},"update:method-id":function(t){e.methodId=t},updateStatus:function(t){return e.$emit("updateStatus")}}}):!e.editApiDocVisible&&e.qualifiedName?a("MethodTable",{attrs:{qualifiedName:e.qualifiedName,editApiDocVisible:e.editApiDocVisible,methodId:e.methodId,jsfAddBtnStatus:e.jsfAddBtnStatus},on:{"update:editApiDocVisible":function(t){e.editApiDocVisible=t},"update:edit-api-doc-visible":function(t){e.editApiDocVisible=t},"update:methodId":function(t){e.methodId=t},"update:method-id":function(t){e.methodId=t},updateStatus:function(t){return e.$emit("updateStatus")}}}):e._e()],1)}),[],!1,null,"f7ced2b8",null),se=re.exports,ne=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticStyle:{display:"none"},attrs:{id:"displayapicall"}},[i("div",{staticStyle:{"margin-top":"0px","text-align":"center"}},[i("img",{staticStyle:{width:"316px",height:"200px"},attrs:{src:a("24ec")}})]),i("div",{staticClass:"noDataMessage"},[e._v("暂无调用方~ ")])])}],oe=a("333d"),le={props:["id"],data:function(){return{popKey:"myPop",checked:!0,aliasList:[],checkedAlias:[],apiAliasPopVisible:!1}},methods:{checkData:function(){var e=this;this.aliasList=[],this.checkedAlias=[],Object(p.a)({method:"post",url:"/ApiManagerService/queryApiApplyAlias",data:JSON.stringify([{apiApplyId:this.id}])}).then((function(t){if(e.aliasList=t.data.serviceAliasList,e.checkedAlias=t.data.checkedAlias,e.apiAliasPopVisible=!0,e.id,e.aliasList.length,0==e.aliasList.length)return e.$message({type:"error",message:"请先添加别名!"}),e.popKey="myPop"+Date.parse(new Date),void(e.apiAliasPopVisible=!1)})).catch((function(e){}))},saveAlias:function(e,t){Object(p.a)({method:"post",url:"/ApiManagerService/assignAlias",data:JSON.stringify([{id:e,aliasList:t}])}).then((function(e){l.Message.success("别名分配成功"),location.reload()})).catch((function(e){})),this.apiAliasPopVisible=!1}}},ce=le,ue=Object(h.a)(ce,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-popover",{key:e.popKey,ref:"popover5",attrs:{width:"220",placement:"bottom"},model:{value:e.apiAliasPopVisible,callback:function(t){e.apiAliasPopVisible=t},expression:"apiAliasPopVisible"}},[a("div",{staticStyle:{"text-align":"left",margin:"0",width:"220px"}},[a("el-checkbox-group",{model:{value:e.checkedAlias,callback:function(t){e.checkedAlias=t},expression:"checkedAlias"}},[e._l(e.aliasList,(function(t){return[t.distributed?a("el-checkbox",{key:t.serviceAliasId,attrs:{disabled:"",label:t.aliasDes}},[e._v(e._s(t.aliasDes))]):a("el-checkbox",{key:t.serviceAliasId,attrs:{label:t.aliasDes}},[e._v(e._s(t.aliasDes))])]}))],2)],1),a("br"),a("div",{staticStyle:{"text-align":"center",margin:"0",width:"220px"}},[a("el-button",{on:{click:function(t){e.apiAliasPopVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveAlias(e.id,e.checkedAlias)}}},[e._v("确 定")])],1)]),a("div",{staticStyle:{"text-align":"center",margin:"0"}},[a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],attrs:{type:"text"},on:{click:e.checkData}},[e._v("分配别名")])],1)],1)}),[],!1,null,"6824947d",null),de=ue.exports,pe={components:{Pagination:oe.a,ChooseServiceAlias:de},data:function(){return{tableDatas:[],listQuery:{total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},nodata:"yes"}},created:function(){this.paginationChange()},methods:{queryApi:function(){var e=this;Object(p.a)({url:"/ApiManagerService/queryApiApply",method:"post",data:JSON.stringify([{id:this.$route.params.id},{pageSize:this.listQuery.pageSize,pageNumb:this.listQuery.pageNumb}])}).then((function(t){0===t.data.total?(document.getElementById("displayapicall").style.display="",e.nodata="yes"):(document.getElementById("displayapicall").style.display="none",e.nodata="no",e.listQuery.total=t.data.total,e.tableDatas=t.data.list)})).catch((function(e){}))},paginationChange:function(){this.queryApi(),this.listQuery.pageNumb},rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1}}},me=pe,fe=(a("fb53"),Object(h.a)(me,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0px"},attrs:{meta:"x:216.0,y:81.0,width:600.0,height:321.0"}},["no"===this.nodata?a("span",{key:"1"},[a("el-table",{staticClass:"my-table mb2",attrs:{data:e.tableDatas,meta:"x:37.0,y:57.0,width:901.0,height:216.0","row-class-name":e.rowClassName}},[a("el-table-column",{attrs:{label:"开发商",prop:"supplierName",align:"center"}}),a("el-table-column",{attrs:{label:"APPKey",prop:"appKey",align:"center","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"应用中文名称",prop:"appName",align:"center","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"TPS",prop:"tps",align:"center"}}),a("el-table-column",{attrs:{label:"申请人",prop:"applyUserName",align:"center"}}),a("el-table-column",{attrs:{label:"已分配别名",prop:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"text-align":"center",margin:"0"}},e._l(t.row.applyInterfaceAliasList,(function(t){return a("el-tag",{key:t.serviceAliasId,staticStyle:{"margin-left":"5px",float:"left"},attrs:{size:"mini"}},[e._v(e._s(t.alias))])})),1)]}}],null,!1,2996122231)}),a("el-table-column",{attrs:{label:"操作",prop:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("ChooseServiceAlias",{ref:"chooseServiceAlias",attrs:{content:"请添加别名",id:e.row.id}})]}}],null,!1,3897270267)})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{float:"right"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1):e._e(),e._m(0)])}),ne,!1,null,null,null)),he=fe.exports,be={props:{jsfAliasAddBtnStatus:{type:Object,default:function(){}},jsfAliasEditBtnStatus:{type:Object,default:function(){}},jsfAliasDeleteBtnStatus:{type:Object,default:function(){}}},components:{Pagination:oe.a},data:function(){return{tableDatas:[],aliasForm:{id:"",alias:"",remark:"",qualifiedName:"",instanceId:this.$route.params.id},aliasRemarkForm:{id:"",alias:"",remark:"",qualifiedName:"",instanceId:this.$route.params.id},listQuery:{total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},aliasDialogVisible:!1,aliasRemarkDialogVisible:!1,aliasOptions:[],aliases:[],nodata:"yes",aliasRules:{alias:[{required:!0,message:"请选择别名名称",trigger:"change"}],remark:[{required:!0,message:"请输入功能描述",trigger:"blur"},{min:2,max:200,message:"长度在2到200个字符",trigger:"blur"}]}}},methods:{findApiBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/findApiBaseInfo",t=this.$route.params.id,a=[{id:t}],e.next=5,p.a.post("/ApiManagerService/findApiBaseInfo",JSON.stringify(a));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},queryServiceAlias:function(){var e=this;Object(p.a)({url:"/ApiManagerService/queryAlias",method:"post",data:JSON.stringify([{pageSize:this.listQuery.pageSize,pageNumb:this.listQuery.pageNumb},{id:this.$route.params.id}])}).then((function(t){0===t.data.total?(document.getElementById("displayalias").style.display="",e.nodata="yes"):(document.getElementById("displayalias").style.display="none",e.nodata="no",e.listQuery.total=t.data.total,e.tableDatas=t.data.list)})).catch((function(e){}))},fetchApiInstance:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiBaseInfo().catch((function(){throw new Error("fetchApiInstance findApiBaseInfo")}));case 2:t=e.sent,a=t.data,this.qualifiedName=a.qualifiedName;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryAliasInJsf:function(){var e=this;Object(p.a)({url:"/JsfApiMetaService/queryAliasByInterface",method:"post",data:JSON.stringify([{qualifiedName:this.qualifiedName}])}).then((function(t){var a=t.data;e.aliases=a})).catch((function(e){}))},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.queryServiceAlias()},addServiceAlias:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.aliasForm.qualifiedName=t.qualifiedName,Object(p.a)({url:"/ApiManagerService/addAlias",method:"post",data:JSON.stringify([t.aliasForm])}).then((function(e){l.Message.success("别名添加成功"),t.aliasForm.alias="",t.aliasForm.remark="",t.aliasDialogVisible=!1,t.queryServiceAlias(),t.$emit("updateStatus")})).catch((function(e){})))}))},handleClose:function(e){this.aliasForm.alias="",this.aliasForm.remark="",this.$refs.aliasForm.resetFields(),e()},onCancel:function(e){this.aliasForm.alias="",this.aliasForm.remark="",this.$refs[e].resetFields(),this.aliasDialogVisible=!1},onRemarkChangeCancel:function(e){this.aliasForm.remark="",this.$refs[e].resetFields(),this.aliasRemarkDialogVisible=!1},handleRemarkClose:function(e){this.aliasRemarkForm.remark="",this.$refs.aliasRemarkForm.resetFields(),e()},onDelete:function(e){var t=this;this.$confirm("确认删除？","提示").then((function(a){Object(p.a)({url:"/ApiManagerService/deleteAlias",method:"post",data:JSON.stringify([{id:e}])}).then((function(e){l.Message.success("删除成功"),t.queryServiceAlias(),t.$emit("updateStatus")})).catch((function(e){}))})).catch((function(e){}))},onModify:function(e){this.aliasRemarkDialogVisible=!0,this.aliasRemarkForm.id=e.id,this.aliasRemarkForm.alias=e.alias,this.aliasRemarkForm.remark=e.remark},onRemarkChangeSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(p.a)({method:"post",url:"/ApiManagerService/updateAlias",data:JSON.stringify([{id:t.aliasRemarkForm.id,remark:t.aliasRemarkForm.remark}])}).then((function(e){l.Message.success("别名描述修改成功"),t.aliasRemarkForm.alias="",t.aliasRemarkForm.remark="",t.$refs.aliasRemarkForm.resetFields(),t.aliasRemarkDialogVisible=!1,t.queryServiceAlias(),t.$emit("updateStatus")})).catch((function(e){}))}))}},created:function(){this.queryServiceAlias(1,this.listQuery.limit),this.fetchApiInstance()}},ve=be,ge=Object(h.a)(ve,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"0px"},attrs:{meta:"x:216.0,y:81.0,width:600.0,height:321.0"}},["no"===this.nodata?i("span",{key:"1"},[i("el-row",{staticClass:"filter-container",staticStyle:{"margin-bottom":"0px"}},[i("el-col",{attrs:{span:12}},[i("el-form",{staticStyle:{height:"45px"},attrs:{inline:!0}},[i("el-form-item",{attrs:{label:""}})],1)],1),i("el-col",{attrs:{span:12}},[e.jsfAliasAddBtnStatus.visible?i("el-button",{staticStyle:{margin:"5px",float:"right"},attrs:{type:"primary",icon:"el-icon-plus",disabled:e.jsfAliasAddBtnStatus.disabled},on:{click:function(t){e.queryAliasInJsf(),e.aliasDialogVisible=!0}}},[e._v("添加别名 ")]):e._e()],1)],1),i("el-table",{staticClass:"my-table mb2",attrs:{data:e.tableDatas,"row-class-name":e.rowClassName}},[i("el-table-column",{attrs:{label:"序号",prop:"number",align:"center","min-width":"7.36%"}}),i("el-table-column",{attrs:{label:"别名",prop:"alias",align:"center","min-width":"23.08%","show-tooltip-when-overflow":!0}}),i("el-table-column",{attrs:{label:"功能描述",prop:"remark",align:"center","min-width":"62.88%","show-tooltip-when-overflow":!0}}),i("el-table-column",{attrs:{label:"操作",prop:"id",align:"center","min-width":"10.02%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.jsfAliasEditBtnStatus.visible?i("el-button",{attrs:{type:"text",disabled:e.jsfAliasEditBtnStatus.disabled},on:{click:function(a){return e.onModify(t.row)}}},[e._v("编辑 ")]):e._e(),e.jsfAliasDeleteBtnStatus.visible?i("el-button",{attrs:{type:"text",disabled:e.jsfAliasDeleteBtnStatus.disabled},on:{click:function(a){return e.onDelete(t.row.id)}}},[e._v("删除 ")]):e._e()]}}],null,!1,819770685)})],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px",float:"right"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1),i("el-dialog",{attrs:{title:"编辑别名",visible:e.aliasRemarkDialogVisible,"before-close":this.handleRemarkClose,width:"680px","close-on-click-modal":!1},on:{"update:visible":function(t){e.aliasRemarkDialogVisible=t}}},[i("el-form",{ref:"aliasRemarkForm",attrs:{model:e.aliasRemarkForm,rules:e.aliasRules,"label-width":"100px",inline:!1}},[i("el-form-item",{attrs:{prop:"alias",label:"别名:"}},[e._v(" "+e._s(e.aliasRemarkForm.alias)+" ")]),i("el-form-item",{attrs:{prop:"remark",label:"功能描述:"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入功能描述"},model:{value:e.aliasRemarkForm.remark,callback:function(t){e.$set(e.aliasRemarkForm,"remark",t)},expression:"aliasRemarkForm.remark"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.onRemarkChangeCancel("aliasRemarkForm")}}},[e._v("取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onRemarkChangeSubmit("aliasRemarkForm")}}},[e._v("确定 ")])],1)],1)],1):e._e(),i("span",{staticStyle:{display:"none"},attrs:{id:"displayalias"}},[i("div",{staticStyle:{"margin-top":"0px","text-align":"center"}},[i("img",{staticStyle:{width:"316px",height:"200px"},attrs:{src:a("24ec")}}),i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticStyle:{"margin-top":"0px","text-align":"center"}},[i("span",[i("a",{staticStyle:{color:"#3c6ef0"},on:{click:function(t){e.queryAliasInJsf(),e.aliasDialogVisible=!0}}},[e._v("点此添加别名, ")]),e._v("以确保调用方可正常申请调用您的API ")])])])],1)],1)]),i("el-dialog",{attrs:{title:"别名添加",visible:e.aliasDialogVisible,"before-close":this.handleClose,width:"680px","close-on-click-modal":!1},on:{"update:visible":function(t){e.aliasDialogVisible=t}}},[i("el-form",{ref:"aliasForm",attrs:{model:e.aliasForm,rules:e.aliasRules,"label-width":"100px",inline:!1}},[i("el-form-item",{attrs:{prop:"alias",label:"别名:"}},[i("el-select",{attrs:{placeholder:"请选择别名"},model:{value:e.aliasForm.alias,callback:function(t){e.$set(e.aliasForm,"alias",t)},expression:"aliasForm.alias"}},e._l(e.aliases,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),i("el-form-item",{attrs:{prop:"remark",label:"功能描述:"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入功能描述"},model:{value:e.aliasForm.remark,callback:function(t){e.$set(e.aliasForm,"remark",t)},expression:"aliasForm.remark"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.onCancel("aliasForm")}}},[e._v("取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addServiceAlias("aliasForm")}}},[e._v("确定 ")])],1)],1)],1)}),[],!1,null,null,null),ye=ge.exports,De=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"no-data"},[i("img",{attrs:{src:a("24ec")}}),i("p",[e._v("暂无更新记录")])])}],we=a("b775"),ke=a("ed08"),Se={data:function(){return{activities:[],history:"noExists"}},methods:{findApiBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/findApiBaseInfo",t=this.$route.params.id,a=[{id:t}],e.next=5,p.a.post("/ApiManagerService/findApiBaseInfo",JSON.stringify(a));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fetchApiInstance:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiBaseInfo().catch((function(){throw new Error("fetchApiInstance findApiBaseInfo")}));case 2:t=e.sent,a=t.data,this.qualifiedName=a.qualifiedName,this.fetchUpdateHistory();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fetchUpdateHistory:function(){var e=this;Object(p.a)({method:"post",url:"/ApiManagerService/queryUpdateLog",data:JSON.stringify([{pageSize:10,pageNumb:1},{qualifiedName:this.qualifiedName}])}).then((function(t){var a=t.data.list,i=a.length;if(i>0){e.history="exists";for(var r=0;r<a.length;r++)a[r].updateTime=Object(ke.c)(a[r].updateTime,"{y}-{m}-{d} {h}:{i}"),a[r].id=i,i--;e.activities=a}})).catch((function(e){}))}},created:function(){this.fetchApiInstance()}},Ce=Se,xe=(a("0055"),Object(h.a)(Ce,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["exists"===e.history?a("span",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-timeline",{key:"1"},e._l(e.activities,(function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.updateTime,placement:"top"}},[a("el-card",[a("div",{staticStyle:{margin:"10px"}},[a("p",{staticStyle:{margin:"10px"}},[e._v("更新人: "+e._s(t.updateUser))]),a("p",{staticStyle:{margin:"10px"}},[e._v("更新内容: "+e._s(t.remark))])])])],1)})),1)],1)],1)],1):"noExists"===e.history?a("span",{key:"2"},[e._m(0)]):e._e()])}),De,!1,null,"60de1c39",null)),_e=xe.exports,Ie=(a("386d"),a("2f62")),Te=a("16d8"),je=a("87fb"),Pe=a("2a53"),Oe={props:{msgType:"1"},components:{Pagination:oe.a,MarkdownEditor:Te.a,MarkdownPreview:je.a},data:function(){return{showCenterDialogVisible:!1,editCenterDialogVisible:!1,showTitle:"",showContent:"",qualifiedName:"",messgeTableData:[],messageSearchForm:{queryName:""},listQuery:{searchKeyWord:"",total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},languageTypeList:{en:"en_US",zh:"zh_CN",es:"es_ES"},formData:{editContent:"",editTitle:"",id:""},editorRules:{editTitle:[{required:!0,message:"标题长度2-100位字符",min:2,max:100,trigger:"blur"}]},status:""}},computed:Object(o.a)(Object(o.a)({},Object(Ie.b)(["msgCount"])),{},{language:function(){return this.languageTypeList.zh}}),methods:{handleClose:function(){this.$refs.MarkdownEditor.setValue("")},findApiBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/findApiBaseInfo",t=this.$route.params.id,a=[{id:t}],e.next=5,p.a.post("/ApiManagerService/findApiBaseInfo",JSON.stringify(a));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),formatTime:function(e){return U.a.timeInTable(e)||"-"},search:function(){this.paginationChange()},paginationChange:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiBaseInfo().catch((function(){throw s.loading=!1,new Error("paginationChange findApiBaseInfo")}));case 2:t=e.sent,a=t.data,this.qualifiedName=a.qualifiedName,this.status=a.status,"/message/getMsgList",r={},Object(Pe.a)()?r.accountType=0:r.accountType=2,r.pageSize=this.listQuery.pageSize,r.pageNumb=this.listQuery.pageNumb,r.msgType=2,r.qualifiedName=a.qualifiedName,r.title=this.messageSearchForm.queryName,Object(we.a)({url:"/message/getMsgList",method:"get",params:r}).then((function(e){2e4===e.code&&(s.listQuery.total=e.data.total,s.messgeTableData=e.data.list)})).catch((function(e){}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),viewInfo:function(e){var t=this;this.showTitle=e.title;Object(we.a)({url:"/message/getMsgById",method:"get",params:{id:e.id,qualifiedName:this.qualifiedName}}).then((function(e){2e4===e.code&&e.data&&(e.data.content&&(t.showCenterDialogVisible=!0,t.showContent=e.data.content),e.data.title&&(t.showTitle=e.data.title))})).catch((function(e){}))},rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},onSearchChange:function(){0===this.messageSearchForm.queryName.trim().length&&this.search()},newMessage:function(){this.editCenterDialogVisible=!0,this.formData.editTitle="",this.formData.editContent=""},saveMsg:function(){var e=this;this.$refs.editorForm.validate((function(t){if(e.formData.editContent=e.$refs.MarkdownEditor.getValue(),!t)return!1;if(""==e.formData.editContent.trim())e.$message.error("数据不能为空!");else{var a={};a.title=e.formData.editTitle,a.content=e.formData.editContent,a.msgType=2,a.qualifiedName=e.qualifiedName,""!=e.formData.id&&(a.id=e.formData.id),Object(we.a)({headers:{"Content-Type":"application/json"},url:"/message/saveMsg",method:"post",data:a}).then((function(t){2e4===t.code&&(t.data&&(t.data.content&&(e.showContent=t.data.content),t.data.title&&(e.showTitle=t.data.title)),e.$message.info("保存数据成功!"),e.paginationChange(),e.editCenterDialogVisible=!1)})).catch((function(e){}))}}))},publishInfo:function(e){var t=this;this.$confirm("确定将当前信息给当前API的所有调用方?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(we.a)({headers:{"Content-Type":"application/json"},url:"/message/publishInfo",method:"post",data:{id:e.id,qualifiedName:t.qualifiedName}}).then((function(e){2e4===e.code?(t.$message({type:"success",message:"发布成功!"}),t.paginationChange()):t.$message({type:"info",message:e.message})})).catch((function(e){}))})).catch((function(){t.$message({type:"info",message:"取消发布"})}))},modifyInfo:function(e){var t=this;Object(we.a)({url:"/message/getMsgById",method:"get",params:{id:e.id,qualifiedName:this.qualifiedName}}).then((function(e){2e4===e.code&&e.data&&(t.editCenterDialogVisible=!0,e.data.content&&(t.formData.editContent=e.data.content),e.data.title&&(t.formData.editTitle=e.data.title),t.formData.id=e.data.id)})).catch((function(e){}))}},created:function(){this.paginationChange()}},Ne=Oe,Fe=Object(h.a)(Ne,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",{attrs:{inline:!0,model:e.messageSearchForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"搜索标题"},on:{input:e.onSearchChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.messageSearchForm.queryName,callback:function(t){e.$set(e.messageSearchForm,"queryName",t)},expression:"messageSearchForm.queryName"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-button",{staticStyle:{margin:"5px",float:"right"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.newMessage}},[e._v("新建公告 ")])],1)],1),a("div",[a("el-table",{attrs:{data:e.messgeTableData,"row-class-name":e.rowClassName}},[a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center"}}),a("el-table-column",{attrs:{label:"消息标题",prop:"title"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"updateColor"},[e._v(e._s(0===t.row.status?"待发送":""))]),a("span",{staticClass:"normalColor"},[e._v(e._s(1===t.row.status?"已发送":""))])]}}])}),a("el-table-column",{attrs:{label:"创建人",prop:"createUser"}}),a("el-table-column",{attrs:{label:"发布时间",prop:"publisTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v(e._s(e.formatTime(t.row.createTime)))]):e._e(),0==t.row.status?a("span",[e._v("-")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.modifyInfo(t.row)}}},[e._v("修改")]),1!=e.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.publishInfo(t.row)}}},[e._v("发布")]):e._e()],1):e._e(),1===t.row.status?a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.viewInfo(t.row)}}},[e._v("查看")])],1):e._e()]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px",float:"right"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1),e.showCenterDialogVisible?a("el-dialog",{attrs:{title:e.showTitle,visible:e.showCenterDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.showCenterDialogVisible=t}}},[a("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[e.showContent?a("MarkdownPreview",{staticClass:"markdown-preview",model:{value:e.showContent,callback:function(t){e.showContent=t},expression:"showContent"}}):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showCenterDialogVisible=!1}}},[e._v("关 闭")])],1)]):e._e(),e.editCenterDialogVisible?a("el-dialog",{attrs:{visible:e.editCenterDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.editCenterDialogVisible=t},close:e.handleClose}},[a("el-form",{ref:"editorForm",attrs:{model:e.formData,rules:e.editorRules}},[a("el-form-item",{attrs:{"label-width":"50px",label:"标题",prop:"editTitle"}},[a("el-input",{attrs:{maxlength:"100"},model:{value:e.formData.editTitle,callback:function(t){e.$set(e.formData,"editTitle",t)},expression:"formData.editTitle"}})],1)],1),a("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[a("MarkdownEditor",{ref:"MarkdownEditor",staticClass:"markdown-editor",model:{value:e.formData.editContent,callback:function(t){e.$set(e.formData,"editContent",t)},expression:"formData.editContent"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveMsg()}}},[e._v("保 存")]),a("el-button",{on:{click:function(t){e.editCenterDialogVisible=!1}}},[e._v("关 闭")])],1)],1):e._e()],1)}),[],!1,null,null,null),Ae=Fe.exports,Le=a("9530"),qe=a.n(Le),Ee={name:"JsfDetail",components:{HeaderInfo:s.a,BasicData:v,MethodList:se,Caller:he,AliasList:ye,UpdateRecords:_e,PushMessage:Ae},computed:{jsfBtnStatus:function(){var e={visible:!0,disabled:!1},t={visible:!0,disabled:!1},a={visible:!0,disabled:!1},i={visible:!0,disabled:!1},r={visible:!0,disabled:!1},s={visible:!0,disabled:!1},n={text:"",className:""};return 0==+this.isOnline&&1==+this.status?(n.text="初始化",n.className="status status_init"):1==+this.isOnline&&1==+this.status?(n.text="编辑中",n.className="status status_edit"):3==+this.status||9==+this.status||7==+this.status?(n.text="审批中",n.className="status status_approve",e.disabled=!0,t.disabled=!0,a.disabled=!0,i.disabled=!0,r.disabled=!0,s.disabled=!0):4==+this.status?(n.text="已发布",n.className="status status_released",s.disabled=!0):6===this.status&&(n.text="已下线",n.className="status status_offline",e.disabled=!0,t.disabled=!0,a.disabled=!0,i.disabled=!0,r.disabled=!0,s.disabled=!1),{basicEdit:e,functionListAdd:t,aliasAdd:a,aliasEdit:i,aliasDelete:r,publish:s,statusInfo:n}}},data:function(){var e=this;return{id:e.$route.params.id,type:e.$route.params.type,activeName:e.$route.query.tab||"basic-data",loading:!0,imagePath:qe.a,qualifiedName:"",cnName:"",createUser:"",createTime:"2021-01-01T09:00:00.000+0000",status:1,isOnline:null}},methods:{findApiBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a=[{id:t}],e.next=4,S.a.findApiBaseInfo(a).catch((function(e){var t=e.message;throw t&&r.$message.error(t),new Error("findApiBaseInfo")}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),verifyApiSummaryFull:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a={id:t},e.next=4,S.a.verifyApiSummaryFull(a).catch((function(e){var t=e.data.message;throw t&&r.$message.error(t),new Error("verifyApiSummaryFull")}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickTab:function(){var e={type:this.type,id:this.id},t={tab:this.activeName};this.$router.push({name:"ApiManagerDetail",params:e,query:t})},updateStatus:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=4,this.findApiBaseInfo().catch((function(){throw new Error("updateStatus findApiBaseInfo")}));case 4:t=e.sent,a=t.data,r=a.qualifiedName,s=a.cnName,n=a.createUser,o=a.createTime,l=a.status,c=a.isOnline,this.qualifiedName=r,this.cnName=s,this.createUser=n,this.createTime=o,this.status=l,this.loading=!1,this.isOnline=c;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickPublish:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.verifyApiSummaryFull().catch((function(){throw new Error("handleClickPublish")}));case 2:t=this.id,a=this.qualifiedName,this.$router.push({name:"ApiManagerApiTabsPublishOne",params:{id:t},query:{qualifiedName:a}});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},created:function(){this.updateStatus()}},$e=Ee,Me=(a("3ea0"),Object(h.a)($e,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"jsf-detail"},[a("HeaderInfo",{attrs:{imagePath:e.imagePath,url:e.qualifiedName,name:e.cnName,createUser:e.createUser,createTime:e.createTime,statusInfo:e.jsfBtnStatus.statusInfo}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 如果控制台中的API文档/使用手册有变更，则需发布到前台，才会实际生效。 ")]),e.jsfBtnStatus.publish.visible?a("el-button",{attrs:{type:"primary",disabled:e.jsfBtnStatus.publish.disabled},on:{click:e.handleClickPublish}},[e._v("发 布")]):e._e()],1),3===e.status||7===e.status||9===e.status?a("div",{attrs:{slot:"hintContent"},slot:"hintContent"},[a("i",{staticClass:"el-icon-warning"}),e._v(" 您可联系"),a("a",{attrs:{href:"timline://chat/?topin=zhangjuzheng3"}},[e._v("zhangjuzheng3")]),e._v("或"),a("a",{attrs:{href:"timline://chat/?topin=dongguojun1"}},[e._v("dongguojun1")]),e._v("提醒审批，审核通过后发布内容生效。 ")]):e._e()],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础数据",name:"basic-data"}},["basic-data"===e.activeName?a("BasicData",{attrs:{status:e.status,jsfBasicEditBtnStatus:e.jsfBtnStatus.basicEdit},on:{updateStatus:e.updateStatus}}):e._e()],1),a("el-tab-pane",{attrs:{label:"方法列表",name:"method-list"}},["method-list"===e.activeName?a("MethodList",{attrs:{qualifiedName:e.qualifiedName,jsfAddBtnStatus:e.jsfBtnStatus.functionListAdd,status:e.status,tabName:"jsf"},on:{updateStatus:e.updateStatus}}):e._e()],1),a("el-tab-pane",{attrs:{label:"调用方",name:"caller"}},["caller"===e.activeName?a("Caller"):e._e()],1),a("el-tab-pane",{attrs:{label:"别名列表",name:"alias-list"}},["alias-list"===e.activeName?a("AliasList",{attrs:{jsfAliasAddBtnStatus:e.jsfBtnStatus.aliasAdd,jsfAliasEditBtnStatus:e.jsfBtnStatus.aliasEdit,jsfAliasDeleteBtnStatus:e.jsfBtnStatus.aliasDelete},on:{updateStatus:e.updateStatus}}):e._e()],1),a("el-tab-pane",{attrs:{label:"更新记录",name:"update-records"}},["update-records"===e.activeName?a("UpdateRecords"):e._e()],1),a("el-tab-pane",{attrs:{label:"消息推送",name:"push-message"}},["push-message"===e.activeName?a("PushMessage"):e._e()],1)],1)],1)}),[],!1,null,"71fee8de",null)),Je=Me.exports,Be=(a("4f7f"),a("2909")),Re=a("b1f8"),Ve=(a("6b54"),a("0bee")),ze=a("c2d0"),Xe={name:"CreateGroupDialog",props:{createGroupDialogVisible:{type:Boolean,required:!0},type:{type:Number,required:!0},getDomain:{type:Object,default:{}}},data:function(){return{groupFormData:{code:"",cnName:"",intr:"",serviceType:1},groupFormRules:{code:[{required:!0,message:"分组英文名称不能为空"},{min:2,max:30,message:"请输入2-30个字符"},{pattern:/^[A-Za-z_]*$/,message:"请输入英文字母、_"}],cnName:[{required:!0,message:"分组中文名称不能为空"}],intr:[{required:!0,message:"分组描述不能为空"}],serviceType:[{required:!0,message:"发布范围不能为空"}]},handleSaveLoading:!1}},methods:{saveCloudDomain:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.groupFormData,a=t.code,r=t.cnName,s=t.intr,n=t.serviceType,o=this.type,l=[{code:a,name:r,description:s,serviceType:n,type:o,sceneType:1}],e.next=5,ze.a.saveCloudDomain(l).catch((function(e){var t=e.data.message;throw t&&c.$message.error(t),new Error(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),dialogBeforeClose:function(){this.$refs.groupFormData.resetFields(),this.$emit("update:createGroupDialogVisible",!1)},handleSave:function(){var e=this;this.$refs.groupFormData.validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r,s,n,o,l,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return e.handleSaveLoading=!0,t.next=4,e.saveCloudDomain().catch((function(t){e.handleSaveLoading=!1;var a=t.data.message;throw a&&e.$message.error(a),new Error(t)}));case 4:r=t.sent,s=r.data,n=s.code,o=s.id,l=s.name,c={domainCode:n,domainId:o,domainName:l},e.$message.success("创建分组成功"),e.$emit("update:createGroupDialogVisible",!1),e.$emit("update:getDomain",c),e.handleSaveLoading=!1,t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},Ue=Xe,Qe=(a("e74e"),Object(h.a)(Ue,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"create-group-dialog",attrs:{visible:e.createGroupDialogVisible,"close-on-click-modal":!1,title:"创建分组",width:"560px"},on:{close:e.dialogBeforeClose}},[a("el-form",{ref:"groupFormData",staticClass:"create-group-dialog__form",attrs:{model:e.groupFormData,rules:e.groupFormRules}},[a("el-form-item",{attrs:{"label-width":"140px",prop:"code"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组英文名称 "),a("el-tooltip",{staticClass:"item",attrs:{content:"分组的英文编码，调用API时需要在LOP-DN字段中传。",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-input",{attrs:{placeholder:"请输入分组编码"},model:{value:e.groupFormData.code,callback:function(t){e.$set(e.groupFormData,"code","string"==typeof t?t.trim():t)},expression:"groupFormData.code"}})],1),a("el-form-item",{attrs:{"label-width":"140px",prop:"cnName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组中文名称 "),a("el-tooltip",{staticClass:"item",attrs:{content:"分组的中文名称，如：技术开放平台产品组的分组。",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-input",{attrs:{placeholder:"请输入分组中文名称"},model:{value:e.groupFormData.cnName,callback:function(t){e.$set(e.groupFormData,"cnName","string"==typeof t?t.trim():t)},expression:"groupFormData.cnName"}})],1),a("el-form-item",{attrs:{"label-width":"140px",prop:"intr"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组描述 "),a("el-tooltip",{staticClass:"item",attrs:{content:"具体描述分组下一类API的应用场景，如：基础平台组为云仓物控平台项目提供的API组，调用方设备为PC端，账号体系为passport。",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-input",{attrs:{type:"textarea",placeholder:"请输入分组使用场景的描述"},model:{value:e.groupFormData.intr,callback:function(t){e.$set(e.groupFormData,"intr","string"==typeof t?t.trim():t)},expression:"groupFormData.intr"}})],1),a("el-form-item",{attrs:{"label-width":"140px",prop:"serviceType"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 发布范围 "),a("el-tooltip",{staticClass:"item",attrs:{content:"发布到内网，仅内网可用。发布到公网，内网、公网均可用",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-radio",{attrs:{label:1},model:{value:e.groupFormData.serviceType,callback:function(t){e.$set(e.groupFormData,"serviceType",t)},expression:"groupFormData.serviceType"}},[e._v("发布到内网")]),a("el-radio",{attrs:{label:2},model:{value:e.groupFormData.serviceType,callback:function(t){e.$set(e.groupFormData,"serviceType",t)},expression:"groupFormData.serviceType"}},[e._v("发布到公网")])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("update:createGroupDialogVisible",!1)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.handleSaveLoading},on:{click:e.handleSave}},[e._v("确认创建")])],1)],1)}),[],!1,null,"16ffac13",null)),Ge=Qe.exports,He=a("0e07"),We=a("c750"),Ke={name:"BasicInfo",components:{Title:y.a,StickyWrapper:g.a,CreateClusterDialog:Ve.a,CreateGroupDialog:Ge,ErpPrincipal:H.a},props:{disabledEdit:{type:Boolean,required:!0},showStatus:{type:Number,required:!0},name:{type:String,required:!0},remark:{type:String,default:""},visibility:{type:Number,default:0},dataLevel:{type:Number,default:0},type:{type:Number,default:2},testCluster:{type:Object,required:!0},uatCluster:{type:Object,required:!0},prodCluster:{type:Object,required:!0},domain:{type:Object,required:!0},lcpApp:{type:Object,required:!0},productPrincipal:{type:String,default:""},developPrincipal:{type:String,default:""},operationPrincipal:{type:String,default:""},interfaceName:{type:String,default:""},testAlias:{type:String,default:""},method:{type:String,default:""},uatAlias:{type:String,default:""},prodAlias:{type:String,default:""},testToken:{type:String,default:""},uatToken:{type:String,default:""},prodToken:{type:String,default:""},leafIdList:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=function(t,a,i){0!==e.labelIdList.length?i():i(new Error("请选则敏感标签"))};return{getDomain:{},env:window.env.buildEnv,editable:!1,createClusterDialogVisible:!1,createGroupDialogVisible:!1,basicInfoData:{name:"",remark:"",dataLevel:0,type:2,testCluster:{},uatCluster:{},prodCluster:{},testAlias:"",method:"",uatAlias:"",prodAlias:"",testToken:"",uatToken:"",prodToken:"",domain:{},lcpApp:{},productPrincipal:"",developPrincipal:"",operationPrincipal:"",interfaceName:""},basicInfoRules:{},basicInfoJsfRules:{name:[{required:!0,message:"请输入中文名称"},{min:2,max:20,message:"请输入2到20个字符"}],remark:[{required:!0,message:"请输入功能描述"},{min:2,max:500,message:"请输入2到500个字符"}],visibility:[{required:!0,message:"请选择功能描述"}],dataLevel:[{required:!0,message:"请选择数据级别"}],type:[{required:!0,message:"请选择提供API的方式"}],domain:[{required:!0,message:"请输入分组中文名称或分组编码"}],lcpApp:[{required:!0,message:"请输入应用中文名称"}],productPrincipal:[{required:!0,message:"请输入产品负责人的ERP账号"}],developPrincipal:[{required:!0,message:"请输入研发负责人的ERP账号"}],operationPrincipal:[{required:!0,message:"请输入运营负责人的ERP账号"}],interfaceName:[{required:!0,message:"请选择JSF接口名"}],testAlias:[{required:!0,message:"请选择测试环境-别名"}],uatAlias:[{required:!0,message:"请选择预发环境-别名"}],prodAlias:[{required:!0,message:"请选生产环境-别名"}],method:[{required:!0,message:"请选择方法名"}],testToken:[{max:50,message:"请输入0-50个字符"}],uatToken:[{max:50,message:"请输入0-50个字符"}],prodToken:[{max:50,message:"请输入0-50个字符"}],labelIdList:[{required:!0,validator:t}]},basicInfoIpRules:{name:[{required:!0,message:"请输入中文名称"},{min:2,max:20,message:"请输入2到20个字符"}],remark:[{required:!0,message:"请输入功能描述"},{min:2,max:500,message:"请输入2到500个字符"}],dataLevel:[{required:!0,message:"请选择数据级别"}],labelIdList:[{required:!0,validator:t}],type:[{required:!0,message:"请选择提供API的方式"}],testCluster:[{required:!0,validator:function(t,a,i){e.basicInfoData.testCluster&&e.basicInfoData.testCluster.testClusterId&&e.basicInfoData.testCluster.testClusterName?i():i(new Error("请输入集群的中文名称"))}}],uatCluster:[{required:!0,validator:function(t,a,i){e.basicInfoData.uatCluster&&e.basicInfoData.uatCluster.uatClusterId&&e.basicInfoData.uatCluster.uatClusterName?i():i(new Error("请输入集群的中文名称"))}}],prodCluster:[{required:!0,validator:function(t,a,i){e.basicInfoData.prodCluster&&e.basicInfoData.prodCluster.prodClusterId&&e.basicInfoData.prodCluster.prodClusterName?i():i(new Error("请输入集群的中文名称"))}}],domain:[{required:!0,message:"请输入分组中文名称或分组编码"}],lcpApp:[{required:!0,message:"请输入应用中文名称"}],productPrincipal:[{required:!0,message:"请输入产品负责人的ERP账号"}],developPrincipal:[{required:!0,message:"请输入研发负责人的ERP账号"}],operationPrincipal:[{required:!0,message:"请输入运营负责人的ERP账号"}]},dataLevelOptionList:[{value:0,label:"公开数据（L1）"},{value:1,label:"秘密数据（L2）"},{value:2,label:"机密数据（L3）"},{value:3,label:"绝密数据（L4）"}],typeOptionList:[{value:1,label:"一个JSF服务的接口方法"},{value:2,label:"IP端口组成的服务器集群"}],interfaceNameErrorMessage:"",testAliasErrorMessage:"",uatAliasErrorMessage:"",prodAliasErrorMessage:"",testClusterOptionList:[],testClusterLoading:!1,uatClusterOptionList:[],uatClusterLoading:!1,prodClusterOptionList:[],prodClusterLoading:!1,domainOptionList:[],domainLoading:!1,lcpAppOptionList:[],interfaceNameLoading:!1,interfaceNameOptionList:[],methodOptionList:[],aliasOptionList:[],props:{multiple:!0,value:"id",label:"labelName"},selectedLeafLabel:[],cascaderOptions:[],labelIdList:this.leafIdList}},computed:{computeDataLevelText:function(){return{0:"公开数据（L1）",1:"秘密数据（L2）",2:"机密数据（L3）",3:"绝密数据（L4）"}[this.dataLevel]},computeTypeText:function(){return{1:"一个JSF服务的接口方法",2:"IP端口组成的服务器集群"}[this.type]},computeInitItemDisabled:function(){return!this.editable||1!==this.showStatus},computeSelectedLeafLabel:function(){return this.selectedLeafLabel.toString().replace(/,/g," ")}},watch:{"basicInfoData.type":{handler:function(e){var t={1:this.basicInfoJsfRules,2:this.basicInfoIpRules};this.basicInfoRules=t[e]||{}},immediate:!0},getDomain:function(e){this.basicInfoData.domain=e,this.domainOptionList=[e]},leafIdList:function(e){this.labelIdList=e,this.getSelectedLabel()},labelIdList:{handler:function(e){this.basicInfoData.labelIdList=this.labelIdList},immediate:!0}},methods:{queryApiReleaseByCondition:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1,1e3,1,a=[{pageNumb:1,pageSize:1e3},{searchType:1,searchKeyWord:t}],e.next=6,He.a.queryApiReleaseByCondition(a).catch((function(e){var t=e.message;throw t&&r.$message.error(t),new Error("queryApiReleaseByCondition")}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),queryList:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t,sceneType:1},e.next=3,He.a.queryList(a).catch((function(e){var t=e.data.message;throw t&&r.$message.error(t),new Error("queryList")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findAppListForSelect:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.a.findAppListForSelect().catch((function(e){var a=e.data.message;throw a&&t.$message.error(a),new Error("findAppListForSelect")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),queryCloudDomainList:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null,1,1e4,a=this.basicInfoData.type,r=[{page:1,pageSize:1e4},{queryLike:t,type:a,isOnline:null,sceneType:1}],e.next=7,ze.a.queryCloudDomainList(r).catch((function(e){var t=e.data.message;throw t&&s.$message.error(t),new Error("queryCloudDomainList")}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),saveBaseInfo:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c,u,d,p,m,f,h,b,v,g,y,D,w,k,S,C,x,_,I,T,j,P,O,N,F,A,L,q,E,$=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=parseInt(this.$route.params.id),a=this.basicInfoData.name,r=this.basicInfoData.remark,s=this.basicInfoData.dataLevel,n=this.basicInfoData.type,o=this.basicInfoData.testCluster,l=o.testClusterId,c=o.testClusterName,u=this.basicInfoData.uatCluster,d=u.uatClusterId,p=u.uatClusterName,m=this.basicInfoData.prodCluster,f=m.prodClusterId,h=m.prodClusterName,b=this.basicInfoData.domain,v=b.domainId,g=b.domainCode,y=b.domainName,D=this.basicInfoData.lcpApp,w=D.lcpAppId,k=D.lcpAppKey,S=D.lcpAppName,C=this.basicInfoData.productPrincipal,x=this.basicInfoData.developPrincipal,_=this.basicInfoData.operationPrincipal,I=this.basicInfoData,T=I.interfaceName,j=I.testAlias,P=I.uatAlias,O=I.prodAlias,N=I.method,F=I.testToken,A=I.uatToken,L=I.prodToken,!((q=this.labelIdList).length<=0)){e.next=18;break}return this.$message.warning("敏感标签不能为空"),e.abrupt("return");case 18:return E={id:t,name:a,remark:r,dataLevel:s,type:n,testClusterId:l,testClusterName:c,uatClusterId:d,uatClusterName:p,prodClusterId:f,prodClusterName:h,domainId:v,domainCode:g,domainName:y,lcpAppId:w,lcpAppKey:k,lcpAppName:S,productPrincipal:C,developPrincipal:x,operationPrincipal:_,interfaceName:T,testAlias:j,uatAlias:P,prodAlias:O,method:N,testToken:F,uatToken:A,prodToken:L,labelIdList:q},e.next=21,He.a.saveBaseInfo(E).catch((function(e){var t=e.data.message;throw t&&$.$message.error(t),new Error("saveBaseInfo")}));case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryAliasIfPresentInterface:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfoData.interfaceName,e.next=3,G.a.JsfApiService.queryAliasIfPresentInterface([{qualifiedName:t}]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryMethodIfPresentInterface:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfoData.interfaceName,a=[{qualifiedName:t}],e.next=4,G.a.JsfApiService.queryMethodIfPresentInterface(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findApiStatus:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=this.basicInfoData.interfaceName,r=[{qualifiedName:a,jsfAlias:t}],e.next=5,G.a.JsfApiMetaService.findApiStatus(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),hrefToDocument:function(){window.open("//cf.jd.com/pages/viewpage.action?pageId=106705184","_blank")},gotoGroupDetail:function(e){var t="#/apiManager/apiGroup/detail/".concat(e);window.open(t,"_blank")},initBasicInfoData:function(){var e=this.name,t=this.remark,a=this.dataLevel,i=this.type,r=this.testCluster,s=this.uatCluster,n=this.prodCluster,o=this.domain,l=this.lcpApp,c=this.productPrincipal,u=this.developPrincipal,d=this.operationPrincipal,p=this.interfaceName,m=this.testAlias,f=this.uatAlias,h=this.prodAlias,b=this.method,v=this.testToken,g=this.uatToken,y=this.prodToken;l.lcpAppId=String(l.lcpAppId),this.basicInfoData={name:e,remark:t,dataLevel:a,type:i,testCluster:r,uatCluster:s,prodCluster:n,domain:o,lcpApp:l,productPrincipal:c,developPrincipal:u,operationPrincipal:d,interfaceName:p,testAlias:m,uatAlias:f,prodAlias:h,method:b,testToken:v,uatToken:g,prodToken:y},this.testClusterOptionList=[r],this.uatClusterOptionList=[s],this.prodClusterOptionList=[n],this.domainOptionList=[o],this.labelIdList=this.leafIdList},handleEdit:function(){var e=this;this.editable=!0,this.$nextTick((function(){e.initBasicInfoData()}))},handleCancel:function(){this.$refs.basicInfoData.resetFields(),this.editable=!1},handleSave:function(){var e=this;this.$refs.basicInfoData.validate(function(){var t=Object(r.a)(Object(i.a)().mark((function t(a){var r,s;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=11;break}return t.next=3,e.saveBaseInfo().catch((function(){throw new Error("handleSave saveBaseInfo")}));case 3:r=t.sent,(s=r.data.message)&&e.$message.success(s),e.$refs.basicInfoData.resetFields(),e.editable=!1,e.$emit("updateGetApi"),t.next=12;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeType:function(){var e=this,t=We.a[this.env],a=["".concat(t,"Cluster"),"interfaceName","".concat(t,"Method"),"".concat(t,"Alias"),"domain"],i=["".concat(t,"ClusterOptionList"),"interfaceNameOptionList","methodOptionList","aliasOptionList","domainOptionList"];"prod"===t&&(a=a.concat(["uatCluster","uatAlias"]),i=i.concat(["uatClusterOptionList"])),a.forEach((function(t){return e.$refs[t].resetField()})),i.forEach((function(t){return e[t]=[]}))},remoteInterfaceName:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=10;break}return this.interfaceNameLoading=!0,e.next=4,this.queryApiReleaseByCondition(t).catch((function(){throw s.interfaceNameLoading=!1,new Error("remoteInterfaceName queryApiReleaseByCondition")}));case 4:a=e.sent,r=a.data.list,this.interfaceNameOptionList=r&&r.length>0?r.map((function(e){return{interfaceName:e.qualifiedName}})):[],this.interfaceNameLoading=!1,e.next=11;break;case 10:this.interfaceNameOptionList=[];case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),changeSelectInterface:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r,s,n=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}return a=We.a[this.env],r=["".concat(a,"Method"),"".concat(a,"Alias")],s=["methodOptionList","aliasOptionList"],"prod"===a&&(r.concat(["uatAlias"]),Object(Re.a)("refList")),r.forEach((function(e){return n.$refs[e].resetField()})),s.forEach((function(e){return n[e]=[]})),this.interfaceNameErrorMessage="",e.next=10,this.findApiStatus().catch((function(e){var t=e.message;n.interfaceNameErrorMessage=t||""}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),focusSelectMethod:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.basicInfoData.interfaceName){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.queryMethodIfPresentInterface().catch((function(){throw new Error("focusSelectMethod queryMethodIfPresentInterface")}));case 4:t=e.sent,a=t.data,this.methodOptionList=a||[];case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),focusSelectAlias:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.basicInfoData.interfaceName){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.queryAliasIfPresentInterface().catch((function(){throw new Error("focusSelectAlias queryAliasIfPresentInterface")}));case 4:t=e.sent,a=t.data,this.aliasOptionList=a||[];case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changeSelectAlias:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t,a){var r,s=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return this["".concat(a,"AliasErrorMessage")]="",r=this.basicInfoData["".concat(a,"Alias")],e.next=5,this.findApiStatus(r).catch((function(e){e.code;var t=e.message;s["".concat(a,"AliasErrorMessage")]=t||""}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),remoteCluster:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t,a){var r,s,n,o=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={toggleLoading:function(e){o["".concat(a,"ClusterLoading")]=e||!1},mapCallback:function(e){var t=e.id,i=e.name,r={};return r["".concat(a,"ClusterId")]=t,r["".concat(a,"ClusterName")]=i,r},assignOptionList:function(e){o["".concat(a,"ClusterOptionList")]=e||[]}},""===t){e.next=11;break}return r.toggleLoading(!0),e.next=5,this.queryList(t).catch((function(){throw new Error("remoteCluster queryList")}));case 5:s=e.sent,(n=s.data)&&n.length>0?r.assignOptionList(n.map(r.mapCallback)):r.assignOptionList(),r.toggleLoading(),e.next=12;break;case 11:r.assignOptionList();case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),remoteDomain:function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=10;break}return this.domainLoading=!0,e.next=4,this.queryCloudDomainList(t).catch((function(){throw new Error("remoteDomain queryCloudDomainList")}));case 4:a=e.sent,r=a.data.rows,this.domainOptionList=r&&r.length>0?r.map((function(e){return{domainId:e.id,domainCode:e.code,domainName:e.cnName}})):[],this.domainLoading=!1,e.next=11;break;case 10:this.domainOptionList=[];case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),getSensitiveLabelForest:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.a.getSensitiveLabelForest();case 2:t=e.sent,this.cascaderOptions=t.data,this.getSelectedLabel();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getSelectedLabel:function(){var e=this;this.selectedLeafLabel=[],this.labelIdList.forEach((function(t){e.queryLeafLabel(t[t.length-1],e.cascaderOptions)}))},queryLeafLabel:function(e,t){var a=this;t.forEach((function(t){t.id!==e?t.children&&a.queryLeafLabel(e,t.children):a.selectedLeafLabel.push(t.labelName)}))},onCopy:function(e){this.$message.success("复制成功")},onError:function(e){this.$message.error("复制失败")}},created:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(r.a)(Object(i.a)().mark((function e(){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.findAppListForSelect().catch((function(){throw new Error("created findAppListForSelect")}));case 2:a=e.sent,r=a.data.data,t.lcpAppOptionList=r&&r.length>0?r.map((function(e){return{lcpAppId:e.value,lcpAppKey:e.code,lcpAppName:e.label}})):[];case 5:case"end":return e.stop()}}),e)})))(),e.next=3,this.getSensitiveLabelForest();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},Ze=Ke,Ye=(a("7f19"),Object(h.a)(Ze,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"basic-info"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticClass:"basic-info__not-editable-form",attrs:{"label-width":"120px","label-position":"left",model:{}}},[a("Title",{attrs:{text:"描述信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文名称"}},[a("span",[e._v(e._s(e.name))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"功能描述"}},[a("span",{staticClass:"remark-content"},[e._v(e._s(e.remark))])])],1)],1),a("Title",{attrs:{text:"敏感信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据级别"}},[a("span",[e._v(e._s(e.computeDataLevelText))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"敏感标签"}},[a("span",[e._v(" "+e._s(e.computeSelectedLeafLabel))])])],1)],1),a("Title",{attrs:{text:"提供API的方式"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"提供API的方式"}},[a("span",[e._v(e._s(e.computeTypeText))])])],1)],1),1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"JSF接口名"}},[a("span",[e._v(e._s(e.interfaceName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"方法名"}},[a("span",[e._v(e._s(e.method))])])],1)],1):e._e(),"local"===e.env||"devtest"===e.env||"publictest"===e.env?[1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-别名"}},[a("span",[e._v(e._s(e.testAlias))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-token"}},[a("span",[e._v(e._s(e.testToken))])])],1)],1):e._e()]:"uat"===e.env||"prod"===e.env?[1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-别名"}},[a("span",[e._v(e._s(e.uatAlias))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-token"}},[a("span",[e._v(e._s(e.uatToken))])])],1)],1):e._e(),1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-别名"}},[a("span",[e._v(e._s(e.prodAlias))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-token"}},[a("span",[e._v(e._s(e.prodToken))])])],1)],1):e._e()]:e._e(),2===e.type?a("el-row",{staticClass:"row--offset"},["local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-集群"}},[a("span",[e._v(e._s(e.testCluster.testClusterName))])])],1)]:"uat"===e.env||"prod"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-集群"}},[a("span",[e._v(e._s(e.uatCluster.uatClusterName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-集群"}},[a("span",[e._v(e._s(e.prodCluster.prodClusterName))])])],1)]:e._e()],2):e._e(),a("Title",{attrs:{text:"分组信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",[a("el-form-item",{attrs:{label:"所属分组"}},[a("span",[e._v(e._s(e.domain.domainName+"("+e.domain.domainCode+")"))]),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){return e.gotoGroupDetail(e.domain.domainId)}}},[e._v("详情")])],1)],1)],1),a("Title",{attrs:{text:"应用信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"所属应用"}},[a("span",[e._v(e._s(e.lcpApp.lcpAppName)+"("+e._s(e.lcpApp.lcpAppKey)+")")])])],1)],1),a("Title",{attrs:{text:"负责人信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品负责人"}},[a("span",[e._v(e._s(e.productPrincipal))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发负责人"}},[a("span",[e._v(e._s(e.developPrincipal))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运营负责人"}},[a("span",[e._v(e._s(e.operationPrincipal))])])],1)],1)],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],ref:"basicInfoData",staticClass:"basic-info__editable-form",attrs:{"label-width":"120px","label-position":"right",model:e.basicInfoData,rules:e.basicInfoRules}},[a("Title",{attrs:{text:"描述信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入中文名称"},model:{value:e.basicInfoData.name,callback:function(t){e.$set(e.basicInfoData,"name","string"==typeof t?t.trim():t)},expression:"basicInfoData.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"功能描述",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入功能描述",type:"textarea",rows:1},model:{value:e.basicInfoData.remark,callback:function(t){e.$set(e.basicInfoData,"remark",t)},expression:"basicInfoData.remark"}})],1)],1)],1),a("Title",{attrs:{text:"敏感信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据级别",prop:"dataLevel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据级别"},model:{value:e.basicInfoData.dataLevel,callback:function(t){e.$set(e.basicInfoData,"dataLevel",t)},expression:"basicInfoData.dataLevel"}},e._l(e.dataLevelOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"敏感标签",prop:"labelIdList"}},[a("el-cascader",{ref:"cascader",staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,options:e.cascaderOptions,props:e.props,clearable:""},model:{value:e.labelIdList,callback:function(t){e.labelIdList=t},expression:"labelIdList"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:e.hrefToDocument}},[e._v("说明")])],1)],1),a("Title",{attrs:{text:"提供API的方式"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"提供API的方式",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,placeholder:"请选择提供API的方式"},on:{change:e.changeType},model:{value:e.basicInfoData.type,callback:function(t){e.$set(e.basicInfoData,"type",t)},expression:"basicInfoData.type"}},e._l(e.typeOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"interfaceName",attrs:{label:"JSF接口名",prop:"interfaceName",error:e.interfaceNameErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,loading:e.interfaceNameLoading,filterable:!0,"allow-create":!0,remote:!0,"remote-method":e.remoteInterfaceName},on:{"visible-change":e.changeSelectInterface},model:{value:e.basicInfoData.interfaceName,callback:function(t){e.$set(e.basicInfoData,"interfaceName","string"==typeof t?t.trim():t)},expression:"basicInfoData.interfaceName"}},e._l(e.interfaceNameOptionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.interfaceName,value:e.interfaceName}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"method",attrs:{label:"方法名",prop:"method"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF方法名"},on:{focus:e.focusSelectMethod},model:{value:e.basicInfoData.method,callback:function(t){e.$set(e.basicInfoData,"method","string"==typeof t?t.trim():t)},expression:"basicInfoData.method"}},e._l(e.methodOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)],1),"local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"testAlias",attrs:{label:"测试环境-别名",prop:"testAlias",error:e.testAliasErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF别名"},on:{focus:e.focusSelectAlias,"visible-change":function(t){return e.changeSelectAlias(t,"test")}},model:{value:e.basicInfoData.testAlias,callback:function(t){e.$set(e.basicInfoData,"testAlias","string"==typeof t?t.trim():t)},expression:"basicInfoData.testAlias"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-token",prop:"testToken"}},[a("el-input",{attrs:{placeholder:"输入测试环境JSF token"},model:{value:e.basicInfoData.testToken,callback:function(t){e.$set(e.basicInfoData,"testToken",t)},expression:"basicInfoData.testToken"}})],1)],1)],1)]:"uat"===e.env||"prod"===e.env?[a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"uatAlias",attrs:{label:"预发环境-别名",prop:"uatAlias",error:e.uatAliasErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF别名"},on:{focus:e.focusSelectAlias,"visible-change":function(t){return e.changeSelectAlias(t,"uat")}},model:{value:e.basicInfoData.uatAlias,callback:function(t){e.$set(e.basicInfoData,"uatAlias","string"==typeof t?t.trim():t)},expression:"basicInfoData.uatAlias"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-token",prop:"uatToken"}},[a("el-input",{attrs:{placeholder:"输入预发环境JSF token"},model:{value:e.basicInfoData.uatToken,callback:function(t){e.$set(e.basicInfoData,"uatToken",t)},expression:"basicInfoData.uatToken"}})],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"prodAlias",attrs:{label:"生产环境-别名",prop:"prodAlias",error:e.prodAliasErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF别名"},on:{focus:e.focusSelectAlias,"visible-change":function(t){return e.changeSelectAlias(t,"prod")}},model:{value:e.basicInfoData.prodAlias,callback:function(t){e.$set(e.basicInfoData,"prodAlias","string"==typeof t?t.trim():t)},expression:"basicInfoData.prodAlias"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-token",prop:"prodToken"}},[a("el-input",{attrs:{placeholder:"输入生产环境JSF token"},model:{value:e.basicInfoData.prodToken,callback:function(t){e.$set(e.basicInfoData,"prodToken",t)},expression:"basicInfoData.prodToken"}})],1)],1)],1)]:e._e(),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.basicInfoData.type,expression:"basicInfoData.type === 2"}],staticClass:"row--offset"},["local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"testCluster",attrs:{label:"测试环境-集群",prop:"testCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.testClusterLoading,filterable:!0,remote:!0,"remote-method":function(t){return e.remoteCluster(t,"test")},"value-key":"testClusterId",placeholder:"请输入集群的中文名称"},model:{value:e.basicInfoData.testCluster,callback:function(t){e.$set(e.basicInfoData,"testCluster",t)},expression:"basicInfoData.testCluster"}},e._l(e.testClusterOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.testClusterName,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){e.createClusterDialogVisible=!0}}},[e._v("+创建集群")])],1)]:"uat"===e.env||"prod"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"uatCluster",attrs:{label:"预发环境-集群",prop:"uatCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.uatClusterLoading,filterable:!0,remote:!0,"remote-method":function(t){return e.remoteCluster(t,"uat")},"value-key":"uatClusterId",placeholder:"请输入集群的中文名称"},model:{value:e.basicInfoData.uatCluster,callback:function(t){e.$set(e.basicInfoData,"uatCluster",t)},expression:"basicInfoData.uatCluster"}},e._l(e.uatClusterOptionList,(function(e){return a("el-option",{key:e.uatClusterId,attrs:{label:e.uatClusterName,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"prodCluster",attrs:{label:"生产环境-集群",prop:"prodCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.prodClusterLoading,filterable:!0,remote:!0,"remote-method":function(t){return e.remoteCluster(t,"prod")},"value-key":"prodClusterId",placeholder:"请输入集群的中文名称"},model:{value:e.basicInfoData.prodCluster,callback:function(t){e.$set(e.basicInfoData,"prodCluster",t)},expression:"basicInfoData.prodCluster"}},e._l(e.prodClusterOptionList,(function(e){return a("el-option",{key:e.prodClusterId,attrs:{label:e.prodClusterName,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){e.createClusterDialogVisible=!0}}},[e._v("+创建集群")])],1)]:e._e()],2),a("Title",{attrs:{text:"分组信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"domain",attrs:{label:"所属分组",prop:"domain"}},[a("el-select",{staticClass:"select--fix-height",staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,loading:e.domainLoading,filterable:!0,remote:!0,"remote-method":e.remoteDomain,"value-key":"domainId",placeholder:"请输入分组中文名称或分组编码"},model:{value:e.basicInfoData.domain,callback:function(t){e.$set(e.basicInfoData,"domain",t)},expression:"basicInfoData.domain"}},e._l(e.domainOptionList,(function(e){return a("el-option",{key:e.domainId,attrs:{label:e.domainName+"("+e.domainCode+")",value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){e.createGroupDialogVisible=!0}}},[e._v("+创建分组")])],1)],1),a("Title",{attrs:{text:"应用信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"所属应用",prop:"lcpApp"}},[a("el-select",{staticClass:"select--fix-height",staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"value-key":"lcpAppId",placeholder:"请输入应用中文名称"},model:{value:e.basicInfoData.lcpApp,callback:function(t){e.$set(e.basicInfoData,"lcpApp",t)},expression:"basicInfoData.lcpApp"}},e._l(e.lcpAppOptionList,(function(e){return a("el-option",{key:e.lcpAppId,attrs:{label:e.lcpAppName+"("+e.lcpAppKey+")",value:e}})})),1)],1)],1)],1),a("Title",{attrs:{text:"负责人信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品负责人",prop:"productPrincipal"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:e.basicInfoData.productPrincipal,disabled:1!==e.showStatus,placeholder:"请输入产品负责人的ERP账号"},on:{"update:formDataPrincipal":function(t){return e.$set(e.basicInfoData,"productPrincipal",t)},"update:form-data-principal":function(t){return e.$set(e.basicInfoData,"productPrincipal",t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发负责人",prop:"developPrincipal"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:e.basicInfoData.developPrincipal,disabled:1!==e.showStatus,placeholder:"请输入研发负责人的ERP账号"},on:{"update:formDataPrincipal":function(t){return e.$set(e.basicInfoData,"developPrincipal",t)},"update:form-data-principal":function(t){return e.$set(e.basicInfoData,"developPrincipal",t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运营负责人",prop:"operationPrincipal"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:e.basicInfoData.operationPrincipal,disabled:1!==e.showStatus,placeholder:"请输入运营负责人的ERP账号"},on:{"update:formDataPrincipal":function(t){return e.$set(e.basicInfoData,"operationPrincipal",t)},"update:form-data-principal":function(t){return e.$set(e.basicInfoData,"operationPrincipal",t)}}})],1)],1)],1)],2),a("CreateClusterDialog",{attrs:{createClusterDialogVisible:e.createClusterDialogVisible},on:{"update:createClusterDialogVisible":function(t){e.createClusterDialogVisible=t},"update:create-cluster-dialog-visible":function(t){e.createClusterDialogVisible=t}}}),a("CreateGroupDialog",{attrs:{createGroupDialogVisible:e.createGroupDialogVisible,getDomain:e.getDomain,type:e.basicInfoData.type},on:{"update:createGroupDialogVisible":function(t){e.createGroupDialogVisible=t},"update:create-group-dialog-visible":function(t){e.createGroupDialogVisible=t},"update:getDomain":function(t){e.getDomain=t},"update:get-domain":function(t){e.getDomain=t}}}),a("StickyWrapper",[e.editable?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1):a("el-button",{attrs:{type:"primary",disabled:e.disabledEdit},on:{click:e.handleEdit}},[e._v("编辑")])],1)],1)}),[],!1,null,"5b52d714",null)),et=Ye.exports,tt=a("3cfc"),at=a("3342"),it=a("1667"),rt={name:"ApiDoc",components:{StickyWrapper:g.a,Title:y.a,ParamTable:D.a,ErrorCodeTable:w.a,QuickMaintain:tt.a},props:{disabledEdit:{type:Boolean,required:!0},groupCode:{type:String,required:!0},status:{type:Number,required:!0},tabName:{type:String,default:""}},data:function(){return{loading:!0,editable:!1,requestParamTableData:[],requestParamTableEditedData:[],responseParamTableData:[],responseParamTableEditedData:[],errorCodeTableData:[],errorCodeTableEditedData:[],debounceTimer:null,saveLoading:!1,provideWay:0,qualifiedName:"",methodId:0,methodName:"",alias:""}},watch:{requestParamTableData:{handler:function(e){this.requestParamTableEditedData=JSON.parse(JSON.stringify(e))}},responseParamTableData:{handler:function(e){this.responseParamTableEditedData=JSON.parse(JSON.stringify(e))}},errorCodeTableData:{handler:function(e){this.errorCodeTableEditedData=JSON.parse(JSON.stringify(e))}}},methods:{findApiDoc:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=this.groupCode,r={id:t,groupCode:a},e.next=5,at.a.findApiDoc(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateApiDoc:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={jsf:1,http:2}[this.$route.params.type],a=this.requestParamTableEditedData,r=this.responseParamTableEditedData,s=this.errorCodeTableEditedData,n=parseInt(this.$route.params.id),o=[{type:t,id:n,inParamList:a,outParamList:r,errorCodeList:s}],e.next=10,it.a.updateApiDoc(o);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),loadApiMethodData:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c,u,d,p,m,f;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.findApiDoc().catch((function(){throw new Error("loadApiMethodData findApiDoc")}));case 3:t=e.sent,a=t.data,r=a.inParamList,s=void 0===r?[]:r,n=a.outParamList,o=void 0===n?[]:n,l=a.errorCodeList,c=void 0===l?[]:l,u=a.type,d=void 0===u?0:u,p=a.interfaceName,m=a.id,f=window.env.baseEnv,this.requestParamTableData=this.initTableData(s),this.responseParamTableData=this.initTableData(o),this.errorCodeTableData=c,this.provideWay=d,this.qualifiedName=p,this.methodId=m,this.methodName=a["".concat(f,"Method")]||"",this.alias=a["".concat(f,"Alias")]||"",this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initTableData:function(e){var t=this;return e.map((function(e){var a=e.children;return a=a&&a.length>0?t.initTableData(a):[],Object(o.a)(Object(o.a)({},e),{},{children:a})}))},handleUpdateParamList:function(){var e=arguments.length>1?arguments[1]:void 0;this[{true:"requestParamTableEditedData",false:"responseParamTableEditedData"}[!(arguments.length>0&&void 0!==arguments[0])||arguments[0]]||"requestParamTableEditedData"]=this.initTableData(e)},handleClickCancel:function(){this.requestParamTableData=Object(Be.a)(this.requestParamTableData),this.responseParamTableData=Object(Be.a)(this.responseParamTableData),this.errorCodeTableData=Object(Be.a)(this.errorCodeTableData),this.editable=!1},handleClickSave:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(Object(r.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.saveLoading=!0,t.next=3,Promise.all([e.$refs.requestParamTable.validateTable(),e.$refs.responseParamTable.validateTable(),e.$refs.errorCodeTable.validateTable()]).catch((function(){throw e.saveLoading=!1,new Error("handleClickSave validate")}));case 3:return t.next=5,e.updateApiDoc().catch((function(){throw e.saveLoading=!1,new Error("handleClickSave updateApiDoc")}));case 5:e.editable=!1,e.$message.success("操作成功！"),e.saveLoading=!1,e.loadApiMethodData(),e.$emit("updateGetApi");case 10:case"end":return t.stop()}}),t)}))),300)}},created:function(){this.loadApiMethodData()}},st=rt,nt=(a("9942"),Object(h.a)(st,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"api-doc"},[e.editable?a("div",{staticClass:"content__title"},[a("Title",{attrs:{text:"请求参数"}}),a("QuickMaintain",{attrs:{qualifiedName:e.qualifiedName,methodId:e.methodId,methodName:e.methodName,alias:e.alias,isRequest:!0,handleUpdateParamList:e.handleUpdateParamList,provideWay:e.provideWay,tabName:e.tabName,tableData:e.requestParamTableEditedData}})],1):a("Title",{attrs:{text:"请求参数"}}),a("ParamTable",{ref:"requestParamTable",attrs:{editable:e.editable,isRequest:!0,paramTableData:e.requestParamTableData,paramTableEditedData:e.requestParamTableEditedData,status:e.status},on:{"update:paramTableData":function(t){e.requestParamTableData=t},"update:param-table-data":function(t){e.requestParamTableData=t},"update:paramTableEditedData":function(t){e.requestParamTableEditedData=t},"update:param-table-edited-data":function(t){e.requestParamTableEditedData=t}}}),e.editable?a("div",{staticClass:"content__title"},[a("Title",{attrs:{text:"响应参数"}}),a("QuickMaintain",{attrs:{qualifiedName:e.qualifiedName,methodId:e.methodId,methodName:e.methodName,alias:e.alias,isRequest:!1,handleUpdateParamList:e.handleUpdateParamList,provideWay:e.provideWay,tabName:e.tabName,tableData:e.responseParamTableEditedData}})],1):a("Title",{attrs:{text:"响应参数"}}),a("ParamTable",{ref:"responseParamTable",attrs:{editable:e.editable,isRequest:!1,paramTableData:e.responseParamTableData,paramTableEditedData:e.responseParamTableEditedData,status:e.status},on:{"update:paramTableData":function(t){e.responseParamTableData=t},"update:param-table-data":function(t){e.responseParamTableData=t},"update:paramTableEditedData":function(t){e.responseParamTableEditedData=t},"update:param-table-edited-data":function(t){e.responseParamTableEditedData=t}}}),a("Title",{attrs:{text:"错误码"}}),a("ErrorCodeTable",{ref:"errorCodeTable",attrs:{editable:e.editable,errorCodeTableData:e.errorCodeTableData,errorCodeTableEditedData:e.errorCodeTableEditedData}}),a("StickyWrapper",[e.editable?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.handleClickSave}},[e._v("保 存")])],1):a("el-button",{attrs:{type:"primary",disabled:e.disabledEdit},on:{click:function(t){e.editable=!0}}},[e._v("编 辑")])],1)],1)}),[],!1,null,"461fb09a",null)),ot=nt.exports,lt=a("9eec"),ct=a.n(lt),ut={name:"HttpDetail",components:{HeaderInfo:s.a,BasicInfo:et,ApiDoc:ot},data:function(){return{loading:!0,imagePath:ct.a,url:"url",name:"name",createUser:"createUser",createTime:new Date,isOnline:0,status:0,remark:"",visibility:0,dataLevel:0,type:2,testCluster:{},uatCluster:{},prodCluster:{},domain:{},lcpApp:{},productPrincipal:"",developPrincipal:"",operationPrincipal:"",groupCode:"",activeName:this.$route.query.tab||"basic-data",sensitive:{visible:!1,level:"",hits:[]},interfaceName:"",testAlias:"",uatAlias:"",prodAlias:"",method:"",testToken:"",uatToken:"",prodToken:"",labelIdList:null}},computed:{computeShowStatus:function(){return{0:1,1:{1:3,3:3,4:2}[this.status]}[this.isOnline]},httpBtnStatus:function(){var e={visible:!0,disabled:!1},t={text:"",className:""};return 0==+this.isOnline&&1==+this.status?(t.text="初始化",t.className="status status_init"):1==+this.isOnline&&1==+this.status?(t.text="编辑中",t.className="status status_edit"):3==+this.status||9==+this.status||7==+this.status?(t.text="审批中",t.className="status status_approve",e.disabled=!0):4==+this.status?(t.text="已发布",t.className="status status_released",e.disabled=!0):6===this.status&&(t.text="已下线",t.className="status status_offline",e.disabled=!1),{publish:e,statusInfo:t}},computePublishDisabled:function(){return 3==+this.status||9==+this.status||7==+this.status||4==+this.status},computeEditDisabled:function(){return 3==+this.status||9==+this.status||7==+this.status||6==+this.status},displaySensitiveTokens:function(){return Object(Be.a)(new Set(this.sensitive.hits.map((function(e){return e.text})))).join("、")}},methods:{getApi:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=[{id:t}],e.next=4,it.a.getApi(a).catch((function(e){var t=e.data.message;throw t&&r.$message.error(t),new Error(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),verifyApiSummaryFull:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=[{id:t}],e.next=4,it.a.verifyApiSummaryFull(a).catch((function(e){var t=e.data.message;throw t&&r.$message.error(t),new Error(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickTab:function(){var e=this.$route.params,t={type:e.type,id:e.id},a={tab:this.activeName};this.$router.push({name:"ApiManagerDetail",params:t,query:a})},publishApi:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.verifyApiSummaryFull();case 2:this.sensitive.visible?this.$router.push({name:"PublishApi"}):(t=this.$route.params.id,a=[{id:t}],p.a.post("/HttpApiService/detectApi",a).then((function(e){return e.data})).then((function(e){e.level?(r.sensitive.level=e.level,r.sensitive.hits=e.hits,r.sensitive.visible=!0):r.$router.push({name:"PublishApi"})})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateGetApi:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t,a,r,s,n,o,l,c,u,d,p,m,f,h,b,v,g,y,D,w,k,S,C,x,_,I,T,j,P,O,N,F,A,L,q,E,$;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getApi();case 3:t=e.sent,a=t.data,r=a.url,s=a.name,n=a.createUser,o=a.createTime,l=a.isOnline,c=a.status,u=a.remark,d=a.visibility,p=a.dataLevel,m=a.type,f=a.testClusterId,h=a.testClusterName,b=a.uatClusterId,v=a.uatClusterName,g=a.prodClusterId,y=a.prodClusterName,D=a.domainId,w=a.domainCode,k=a.domainName,S=a.lcpAppId,C=a.lcpAppKey,x=a.lcpAppName,_=a.productPrincipal,I=a.developPrincipal,T=a.operationPrincipal,j=a.groupCode,P=a.interfaceName,O=a.testAlias,N=a.uatAlias,F=a.prodAlias,A=a.method,L=a.testToken,q=a.uatToken,E=a.prodToken,$=a.labelIdList,this.url=r,this.name=s,this.createUser=n,this.createTime=o,this.isOnline=l,this.status=c,this.remark=u,this.visibility=d,this.dataLevel=p,this.type=m,this.testCluster={testClusterId:f,testClusterName:h},this.uatCluster={uatClusterId:b,uatClusterName:v},this.prodCluster={prodClusterId:g,prodClusterName:y},this.domain={domainId:D,domainCode:w,domainName:k},this.lcpApp={lcpAppId:S,lcpAppKey:C,lcpAppName:x},this.productPrincipal=_||"",this.developPrincipal=I||"",this.operationPrincipal=T||"",this.groupCode=j,this.interfaceName=P,this.testAlias=O,this.uatAlias=N,this.prodAlias=F,this.method=A,this.testToken=L,this.uatToken=q,this.prodToken=E,this.labelIdList=$||[],this.loading=!1;case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),gotoUpdateApi:function(){this.sensitive.visible=!1}},created:function(){this.updateGetApi()}},dt=ut,pt=(a("1464"),Object(h.a)(dt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"http-detail"},[a("HeaderInfo",{attrs:{imagePath:e.imagePath,url:e.url,name:e.name,createUser:e.createUser,createTime:e.createTime,showStatus:e.computeShowStatus,statusInfo:e.httpBtnStatus.statusInfo}},[a("el-button",{attrs:{type:"primary",disabled:e.computePublishDisabled},on:{click:e.publishApi}},[e._v("发布")])],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础数据",name:"basic-data"}},["basic-data"===e.activeName&&e.labelIdList?a("BasicInfo",{attrs:{disabledEdit:e.computeEditDisabled,showStatus:e.computeShowStatus,name:e.name,remark:e.remark,visibility:e.visibility,dataLevel:e.dataLevel,type:e.type,testCluster:e.testCluster,uatCluster:e.uatCluster,prodCluster:e.prodCluster,domain:e.domain,lcpApp:e.lcpApp,productPrincipal:e.productPrincipal,developPrincipal:e.developPrincipal,operationPrincipal:e.operationPrincipal,interfaceName:e.interfaceName,testAlias:e.testAlias,uatAlias:e.uatAlias,prodAlias:e.prodAlias,method:e.method,testToken:e.testToken,uatToken:e.uatToken,prodToken:e.prodToken,leafIdList:e.labelIdList},on:{updateGetApi:e.updateGetApi}}):e._e()],1),a("el-tab-pane",{attrs:{label:"API文档",name:"api-doc"}},["api-doc"===e.activeName&&e.groupCode?a("ApiDoc",{attrs:{disabledEdit:e.computeEditDisabled,groupCode:e.groupCode,status:e.status,tabName:"http"},on:{updateGetApi:e.updateGetApi}}):e._e()],1)],1),a("el-dialog",{attrs:{title:"数据级别校验提示",visible:e.sensitive.visible},on:{"update:visible":function(t){return e.$set(e.sensitive,"visible",t)}}},[a("span",[e._v("API文档中包含【"+e._s(e.sensitive.level)+"】数据级别关键字: "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.displaySensitiveTokens))]),e._v(", 与API的当前【L"+e._s(e.dataLevel)+"】数据级别不符，请确认是否去更新API数据级别？")]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.publishApi}},[e._v("继续发布API")]),a("el-button",{attrs:{type:"primary"},on:{click:e.gotoUpdateApi}},[e._v("去更新")])],1)])],1)}),[],!1,null,"b6274df6",null)),mt={name:"detail",components:{JsfDetail:Je,HttpDetail:pt.exports},data:function(){return{serviceType:this.$route.params.type}}},ft=(a("64da"),Object(h.a)(mt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},["http"===e.serviceType?a("HttpDetail"):"jsf"===e.serviceType?a("JsfDetail"):e._e()],1)}),[],!1,null,"64f8738e",null));t.default=ft.exports},"4db9":function(e,t,a){"use strict";a("5a8a")},"56be":function(e,t,a){},"5a8a":function(e,t,a){},64191:function(e,t,a){"use strict";a("0a11")},"64da":function(e,t,a){"use strict";a("56be")},"6bd49":function(e,t,a){},"753e":function(e,t,a){},"7f19":function(e,t,a){"use strict";a("c648")},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},8482:function(e,t,a){"use strict";a("0962")},"848d":function(e,t,a){},"87fb":function(e,t,a){"use strict";var i={name:"MarkdownPreview",props:{value:{type:String,default:""},after:{type:Function,default:function(){}}},data:function(){return{contentPreview:""}},mounted:function(){var e=this,t=document.querySelector("#VditorPreview");Vditor.preview(t,this.value,{IPreviewOptions:{cdn:"/vditor"},cdn:"/vditor",after:function(){e.after()}})}},r=i,s=(a("2e98"),a("2877")),n=Object(s.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"VditorPreview"}})}),[],!1,null,"c9333ad8",null);t.a=n.exports},"8d79":function(e,t,a){"use strict";a("753e")},9530:function(e,t,a){e.exports=a.p+"img/jsf.081763bd.png"},9942:function(e,t,a){"use strict";a("9cec")},"9a96":function(e,t,a){"use strict";a("4821")},"9b93":function(e,t,a){"use strict";a("cd9c")},"9b95":function(e,t,a){},"9cec":function(e,t,a){},a0df:function(e,t,a){"use strict";a("a29b")},a29b:function(e,t,a){},a322:function(e,t,a){"use strict";var i=a("ad2b"),r={name:"HeaderInfo",props:{imagePath:{type:String|Function},url:{type:String,default:""},name:{type:String,default:""},createUser:{type:String,default:""},createTime:{type:String|Date,default:function(){return new Date}},statusInfo:{type:Object,default:function(){return{text:"",className:""}}}},computed:{computeCreateTime:function(){return i.a.timeInTable(this.createTime)}}},s=(a("43fc"),a("2877")),n=Object(s.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header-info"},[a("div",{staticClass:"header-info-top"},[a("div",{staticClass:"header-info__content"},[e.imagePath?a("div",{staticClass:"image-wrapper"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.imagePath}})]):e._t("otherImage"),a("div",{staticClass:"text-wrapper"},[a("div",{staticClass:"title-wrapper"},[a("p",{staticClass:"title"},[e._v(e._s(e.url)+"（"+e._s(e.name)+"）")]),a("span",{class:e.statusInfo.className+" showStatus"},[e._v("● "+e._s(e.statusInfo.text))])]),a("p",{staticClass:"subtitle"},[e._v(" "+e._s(e.createUser)+" 创建于 "+e._s(e.computeCreateTime)+" ")])])],2),a("div",{staticClass:"header-info__button-wrapper"},[e._t("default")],2)]),a("div",{staticClass:"header-info-bottom"},[e._t("hintContent")],2)])}),[],!1,null,"2c213686",null);t.a=n.exports},a475:function(e,t,a){},b4a3:function(e,t,a){"use strict";a("4475")},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("06c5");function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(i.a)(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw n}}}}},b93c:function(e,t,a){},bbba:function(e,t,a){"use strict";a("0ab7")},bbd1:function(e,t,a){"use strict";var i=a("c7eb"),r=(a("ac6a"),a("5df3"),a("96cf"),a("1da1")),s={name:"ErrorCodeTable",props:{editable:{type:Boolean,default:!0},errorCodeTableData:{type:Array,default:function(){return[]}},errorCodeTableEditedData:{type:Array,default:function(){return[]}}},data:function(){return{errorCodeTableList:[{prop:"errorCode",label:"错误码",width:"200",placeholder:"请输入错误码"},{prop:"errorMsg",label:"错误消息",minWidth:"200",placeholder:"请输入错误消息",className:"line-feed"},{prop:"solution",label:"处理建议",minWidth:"200",placeholder:"请输入处理建议"}],errorCodeTableFormRules:{errorCode:[{required:!0,message:"请输入错误码"},{min:1,max:20,message:"请输入 1 到 20 个字符"}],errorMsg:[{required:!0,message:"请输入错误消息"},{min:2,max:200,message:"请输入 2 到 200 个字符"}],solution:[{min:0,max:200,message:"请输入 0 到 200 个字符"}]}}},methods:{handleClickDelete:function(e){this.errorCodeTableEditedData.splice(e,1)},handleClickCreate:function(e){var t={errorCode:"",errorMsg:"",solution:"",id:-(new Date).getTime()};this.errorCodeTableEditedData.splice(e,0,t)},validateTable:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$refs.form&&this.$refs.form.length>0,e.abrupt("return",!t||Promise.all(this.$refs.form.map((function(e){return e.validate()}))));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},n=s,o=(a("4db9"),a("2877")),l=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-code-table"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticStyle:{width:"100%"},attrs:{data:e.errorCodeTableData,"hide-empty-img":!0,stripe:""}},e._l(e.errorCodeTableList,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,"show-overflow-tooltip":!0,"class-name":e.className}})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"error-code-table__table-wrapper--editable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.errorCodeTableEditedData,"hide-empty-img":!0,stripe:""}},[e._l(e.errorCodeTableList,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.row,s=i.column.property;return[["errorCode","errorMsg","solution"].includes(s)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:r,rules:e.errorCodeTableFormRules}},[a("el-form-item",{attrs:{prop:s}},"errorCode"===s?[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder},model:{value:r[s],callback:function(t){e.$set(r,s,t)},expression:"row[property]"}})]:[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:1,placeholder:t.placeholder},model:{value:r[s],callback:function(t){e.$set(r,s,t)},expression:"row[property]"}})],1)],1)]:[a("span",[e._v(e._s(r[s]))])]]}}],null,!0)})})),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.$index;return[a("i",{staticClass:"el-icon-clear cell__icon",on:{click:function(t){return e.handleClickDelete(i)}}}),a("i",{staticClass:"el-icon-circle-plus cell__icon",on:{click:function(t){return e.handleClickCreate(i+1)}}})]}}])})],2),0===e.errorCodeTableEditedData.length?a("el-button",{staticStyle:{"margin-top":"8px",width:"100%"},attrs:{icon:"el-icon-plus",plain:""},on:{click:function(t){return e.handleClickCreate(e.errorCodeTableEditedData.length)}}},[e._v("添 加")]):e._e()],1)],1)}),[],!1,null,"ed37910c",null);t.a=l.exports},bea1:function(e,t,a){},c648:function(e,t,a){},cd9c:function(e,t,a){},d14b:function(e,t,a){},d1d0:function(e,t,a){},ddbd:function(e,t,a){"use strict";a("07ce")},e219:function(e,t,a){"use strict";var i=a("c7eb"),r=(a("96cf"),a("1da1")),s=(a("ac6a"),a("4f7f"),a("5df3"),a("1c4c"),a("6b54"),a("a481"),a("28a5"),a("2909")),n=(a("c5f6"),a("aa47")),o={name:"ParamTable",components:{InputTextareaDescription:a("748f").a},props:{status:{type:Number,required:!0},editable:{type:Boolean,default:!0},isRequest:{type:Boolean,default:!0},paramTableData:{type:Array,default:function(){return[]}},paramTableEditedData:{type:Array,default:function(){return[]}},switchValueType:{type:String,default:"String"}},data:function(){return{options:[{value:"0",label:"否"},{value:"1",label:"是"},{value:"2",label:"条件"}],expandRowIdList:[],expandRowKeyEditedList:[],paramTableList:[],flatTreeList:[],requestParamTableList:[{prop:"name",label:"名称",width:"200",placeholder:"请输入名称",className:"column--name"},{prop:"type",label:"类型",width:"200",placeholder:"请选择类型",optionList:[{value:"支持自定义输入",disabled:!0},{value:"java.lang.String"},{value:"java.lang.Integer"},{value:"java.lang.Long"},{value:"java.lang.Float"},{value:"java.lang.Double"},{value:"java.lang.Boolean"},{value:"java.util.Date"},{value:"java.math.BigDecimal"},{value:"java.lang.Character"},{value:"java.lang.Byte"},{value:"java.math.BigInteger"},{value:"java.sql.Date"},{value:"java.time.LocalDate"},{value:"java.time.LocalTime"},{value:"java.time.LocalDateTime"},{value:"java.lang.Object"},{value:"java.util.List"},{value:"java.util.Set"},{value:"java.util.Map"}]},{prop:"required",label:"是否必填",width:"100",formatter:function(e,t,a){return{0:"否",1:"是",2:"条件"}[a]||""}},{prop:"exampleValue",label:"示例值",width:"140"},{prop:"remark",label:"描述",minWidth:"200",className:"line-feed"}],responseParamTableList:[{prop:"name",label:"名称",width:"200",placeholder:"请输入名称",className:"column--name"},{prop:"type",label:"类型",width:"200",placeholder:"请选择类型",optionList:[{value:"支持自定义输入",disabled:!0},{value:"java.lang.String"},{value:"java.lang.Integer"},{value:"java.lang.Long"},{value:"java.lang.Float"},{value:"java.lang.Double"},{value:"java.lang.Boolean"},{value:"java.util.Date"},{value:"java.math.BigDecimal"},{value:"java.lang.Character"},{value:"java.lang.Byte"},{value:"java.math.BigInteger"},{value:"java.sql.Date"},{value:"java.time.LocalDate"},{value:"java.time.LocalTime"},{value:"java.time.LocalDateTime"},{value:"java.lang.Object"},{value:"java.util.List"},{value:"java.util.Set"},{value:"java.util.Map"}]},{prop:"exampleValue",label:"示例值",width:"140"},{prop:"remark",label:"描述",minWidth:"200",className:"line-feed"}],includeParamsTypeList:["java.lang.Character","java.lang.Byte","java.lang.Integer","java.lang.Long","java.lang.Float","java.lang.Double","java.lang.Boolean","java.lang.String","java.math.BigInteger","java.math.BigDecimal","java.util.Date","java.sql.Date","java.time.LocalDate","java.time.LocalTime","java.time.LocalDateTime"],paramTableFormRules:{name:[{required:!0,message:"请输入名称"},{pattern:/^\S*$/,message:"名称不能包含空格"}],type:[{required:!0,message:"请选择类型",trigger:"change"},{pattern:/^\S*$/,message:"类型不能包含空格",trigger:"change"}],required:[{required:!0,message:"请选择是否必填"}],exampleValue:[{pattern:/^[^\n]*$/,message:"示例值不能包含换行符"}]}}},watch:{isRequest:{handler:function(e){this.paramTableList=e?this.requestParamTableList:this.responseParamTableList,this.$emit("update:paramTableData",Object(s.a)(this.paramTableData)),this.$emit("update:paramTableEditedData",Object(s.a)(this.paramTableEditedData))},immediate:!0}},created:function(){var e=this;this.$nextTick((function(){e.initializeTableDrag()}))},methods:{formatterRequired:function(e){return{0:"否",1:"是",2:"条件"}[e]||""},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},handleExpandChange:function(e,t){if(t)this.expandRowIdList.push(e.id.toString()),this.expandRowIdList=Array.from(new Set(this.expandRowIdList));else{var a=this.expandRowIdList.indexOf(e.id.toString());a>-1&&this.expandRowIdList.splice(a,1)}},flatTreeData:function(e){for(var t in e)this.flatTreeList.push(e[t]),e[t].children&&e[t].children.length>0&&this.flatTreeData(e[t].children)},buildTree:function(e,t,a){var i=this;e.forEach((function(r){r.parentId===t&&(r.children=[],i.buildTree(e,r.id,r.children),a.push(r))}))},listToTree:function(e,t){var a=[];return this.buildTree(e,t,a),a.length>0?a.length>1?a:[a[0]]:[]},initializeTableDrag:function(){var e=this.$refs.paramTable.$el.querySelector(".table__edit .el-table__body-wrapper tbody"),t=this;n.a.create(e,{handle:".operation-icon",sort:!0,animation:150,setData:function(e){e.setData("Text","")},onMove:function(e,a){var i=JSON.parse(JSON.stringify(t.paramTableEditedData));t.flatTreeList=[],t.flatTreeData(i);var r=e.dragged.rowIndex,s=e.related.rowIndex,n=t.flatTreeList[r],o=t.flatTreeList[s];return n.parentId===o.parentId},onEnd:function(e){var a=e.oldIndex,i=e.newIndex;if(a!==i){var r=t.flatTreeList.splice(a,1)[0];t.flatTreeList.splice(i,0,r);var s=t.listToTree(t.flatTreeList,-1);t.$emit("update:paramTableEditedData",[]),t.$nextTick((function(){t.$emit("update:paramTableEditedData",s)}))}}})},handleClickDelete:function(e,t,a){var i=this;4===this.status&&this.paramTableData.length>0?-1===t?this.$confirm("删除一级参数会导致已使用开放API的用户调用失败","是否确认删除参数？",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){i.deleteRowTableData(e,i.paramTableEditedData)})).catch((function(){})):1==+a?this.$confirm("删除必填参数会导致已使用开放API的用户调用失败","是否确认删除必填参数？",{type:"warning",confirmButtonText:"删除",cancelButtonText:"取消"}).then((function(){i.deleteRowTableData(e,i.paramTableEditedData)})).catch():this.deleteRowTableData(e,this.paramTableEditedData):this.deleteRowTableData(e,this.paramTableEditedData)},deleteRowTableData:function(e,t){var a=this;return t.some((function(t,i,r){var s=t.id,n=t.children;return s===e?r.splice(i,1):!!(n&&n.length>0)&&a.deleteRowTableData(e,n)}))},handleCommandDropdownItem:function(e){var t=e.mode,a=e.id,i=e.parentId;this.checkBeforeCreateParam(t,a,i)},checkBeforeCreateParam:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;4===this.status&&this.paramTableData.length>0&&-1===i&&"subparameter"!==e?this.$confirm("新增一级参数会导致已使用开放API的用户调用失败","是否确认新增参数？",{confirmButtonText:"添加",cancelButtonText:"取消",type:"warning"}).then((function(){t.handleClickCreateParam(e,a,i)})).catch((function(){})):this.handleClickCreateParam(e,a,i)},handleClickCreateParam:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,r=-(new Date).getTime(),s=[],n={id:r,parentId:i,name:"",type:"",required:"0",exampleValue:"",remark:"",children:s},o={id:r,parentId:a,name:"",type:"",required:"0",exampleValue:"",remark:"",children:s};({parameter:function(){return t.createParameterRowTableData(a,t.paramTableEditedData,n)},subparameter:function(){return t.createSubparameterRowTableData(a,t.paramTableEditedData,o)},push:function(){return t.paramTableEditedData.push(n)}})[e]()},createParameterRowTableData:function(e,t,a){var i=this;return t.some((function(t,r,s){var n=t.id,o=t.children;return n===e?s.splice(r+1,0,a):!!(o&&o.length>0)&&i.createParameterRowTableData(e,o,a)}))},createSubparameterRowTableData:function(e,t,a){var i=this;return t.some((function(t){var r=t.id,s=t.children;return r===e?(t.children.push(a),i.$nextTick((function(){i.$refs.paramTable.toggleRowExpansion(t,!0)})),!0):!!(s&&s.length>0)&&i.createSubparameterRowTableData(e,s,a)}))},validateTable:function(){var e=Object(r.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$refs.form&&this.$refs.form.length>0,e.abrupt("return",!t||Promise.all(this.$refs.form.map((function(e){return e.validate()}))));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleRequiredChange:function(e,t,a){4===this.status&&this.paramTableData.length>0&&1==+e&&+t.id>0&&this.$confirm("非必填改为必填会导致已使用开放API的用户调用失败","是否确认将此参数从非必填改为必填？",{type:"warning"}).then((function(){t[a]=e})).catch((function(){t[a]="0"}))},handleTypeChange:function(e,t,a){var i=this,r=t[a];4===this.status&&this.paramTableData.length>0&&+t.id>0?this.$confirm("修改参数类型会导致已使用开放API的用户调用失败","是否确认修改此参数的参数类型？",{type:"warning"}).then((function(){t[a]=e,i.$refs["form-select"].forEach((function(e){return e.blur()}))})).catch((function(){t[a]=r,i.$refs["form-select"].forEach((function(e){return e.blur()}))})):t[a]=e}}},l=o,c=(a("3b91"),a("2877")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"param-table"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticStyle:{width:"100%"},attrs:{data:e.paramTableData,"tree-props":{children:"children"},"hide-empty-img":!0,"default-expand-all":!1,"row-key":"id",stripe:""}},e._l(e.paramTableList,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,formatter:t.formatter,"class-name":t.className},scopedSlots:e._u([{key:"default",fn:function(i){return["描述"===t.label?a("div",{staticClass:"wb-doc-title",domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(i.row[t.prop]))}}):"是否必填"===t.label?a("div",[e._v(" "+e._s(e.formatterRequired(i.row[t.prop]))+" ")]):a("div",[e._v(" "+e._s(i.row[t.prop])+" ")])]}}],null,!0)})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"param-table__table-wrapper--editable"},[a("el-table",{ref:"paramTable",staticClass:"table__edit",staticStyle:{width:"100%"},attrs:{data:e.paramTableEditedData,"tree-props":{children:"children"},"hide-empty-img":!0,"default-expand-all":!1,"expand-row-keys":e.expandRowIdList,"row-key":"id",stripe:""},on:{"expand-change":e.handleExpandChange}},[e._l(e.paramTableList,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,"class-name":t.className},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.row.type,s=i.row,n=i.column,o=n.property,l=n.label;return[["name"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder},model:{value:s[o],callback:function(t){e.$set(s,o,"string"==typeof t?t.trim():t)},expression:"row[property]"}})],1)],1)]:["type"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-select",{ref:"form-select",refInFor:!0,staticStyle:{width:"100%"},attrs:{value:s[o],placeholder:t.placeholder,filterable:"",clearable:"","allow-create":"","default-first-option":""},on:{change:function(t){return e.handleTypeChange(t,s,o)}}},e._l(t.optionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value,disabled:e.disabled}})})),1)],1)],1)]:["required"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.handleRequiredChange(t,s,o)}},model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"row[property]"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)]:["exampleValue"].includes(o)?[e.includeParamsTypeList.includes(r)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,rows:1,resize:"none",type:"textarea"},model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"row[property]"}})],1)],1)]:e._e()]:["remark"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},["描述"===l?a("InputTextareaDescription",{attrs:{value:s[o],placeholder:t.placeholder},on:{"update:value":function(t){return e.$set(s,o,t)}}}):a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,rows:1,resize:"none",type:"textarea"},model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"row[property]"}})],1)],1)]:[a("span",[e._v(e._s(s[o]))])]]}}],null,!0)})})),a("el-table-column",{attrs:{width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,r=i.id,s=i.type,n=i.parentId,o=i.required;return[a("div",{staticClass:"cell-icon-group"},[a("i",{staticClass:"el-icon-clear cell__icon",on:{click:function(t){return e.handleClickDelete(r,n,o)}}}),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommandDropdownItem}},[a("i",{staticClass:"el-icon-circle-plus cell__icon"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{mode:"parameter",id:r,parentId:n}}},[e._v("添加参数")]),e.includeParamsTypeList.includes(s)?a("el-tooltip",{attrs:{effect:"dark",content:"此参数类型不允许添加子参数",placement:"left-end"}},[a("span",[a("el-dropdown-item",{attrs:{command:{mode:"subparameter",id:r,parentId:n},disabled:!0}},[e._v("添加子参数")])],1)]):a("el-dropdown-item",{attrs:{command:{mode:"subparameter",id:r,parentId:n}}},[e._v("添加子参数")])],1)],1),n>0?a("span",{staticClass:"operation-icon"}):e._e()],1)]}}])})],2),0===e.paramTableEditedData.length?a("el-button",{staticStyle:{"margin-top":"8px",width:"100%"},attrs:{icon:"el-icon-plus",plain:""},on:{click:function(t){return e.checkBeforeCreateParam("push",null,-1)}}},[e._v("添 加")]):e._e()],1)],1)}),[],!1,null,"3cbfd57d",null);t.a=u.exports},e74e:function(e,t,a){"use strict";a("6bd49")},fb53:function(e,t,a){"use strict";a("bea1")}}]);