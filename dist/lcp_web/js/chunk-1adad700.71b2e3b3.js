(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1adad700"],{"04d5":function(e,t,a){},"0e47":function(e,t,a){},"0e49":function(e,t,a){"use strict";a("6733")},1174:function(e,t,a){"use strict";a.r(t);var r=(a("7f7f"),a("c7eb")),i=(a("96cf"),a("1da1")),s=(a("ac6a"),a("5df3"),a("4f7f"),a("2909")),o=a("ad2b"),n={name:"HeaderInfo",props:{imagePath:{type:String|Function,required:!0},url:{type:String,default:""},name:{type:String,default:""},createUser:{type:String,default:""},createTime:{type:String|Date,default:function(){return new Date}},statusInfo:{type:Object,default:function(){return{text:"",className:""}}}},computed:{computeCreateTime:function(){return o.a.timeInTable(this.createTime)}}},l=(a("f04c"),a("2877")),c=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header-info"},[a("div",{staticClass:"header-info__content"},[a("div",{staticClass:"image-wrapper"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.imagePath}})]),a("div",{staticClass:"text-wrapper"},[a("div",{staticClass:"title-wrapper"},[a("p",{staticClass:"title"},[e._v(e._s(e.url)+"（"+e._s(e.name)+"）")]),a("span",{class:e.statusInfo.className+" showStatus"},[e._v("● "+e._s(e.statusInfo.text))])]),a("p",{staticClass:"subtitle"},[e._v(e._s(e.createUser)+" 创建于 "+e._s(e.computeCreateTime))])])]),a("div",{staticClass:"header-info__button-wrapper"},[e._t("default")],2)])}),[],!1,null,"0286dab1",null),u=c.exports,p=a("b1f8"),d=(a("6b54"),a("a481"),a("c5f6"),a("43b3")),m=a("2a6f"),f=a("9572"),h=a("c2d0"),b={name:"CreateGroupDialog",props:{createGroupDialogVisible:{type:Boolean,required:!0},type:{type:Number,required:!0},getDomain:{type:Object,default:{}}},data:function(){return{groupFormData:{code:"",cnName:"",intr:"",serviceType:1},groupFormRules:{code:[{required:!0,message:"分组英文名称不能为空"},{min:2,max:30,message:"请输入2-30个字符"},{pattern:/^[A-Za-z_]*$/,message:"请输入英文字母、_"}],cnName:[{required:!0,message:"分组中文名称不能为空"}],intr:[{required:!0,message:"分组描述不能为空"}],serviceType:[{required:!0,message:"发布范围不能为空"}]},handleSaveLoading:!1}},methods:{saveCloudDomain:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s,o,n,l,c=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.groupFormData,a=t.code,i=t.cnName,s=t.intr,o=t.serviceType,n=this.type,l=[{code:a,name:i,description:s,serviceType:o,type:n,sceneType:3}],e.next=5,h.a.saveCloudDomain(l).catch((function(e){var t=e.data.message;throw t&&c.$message.error(t),new Error(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),dialogBeforeClose:function(){this.$refs.groupFormData.resetFields(),this.$emit("update:createGroupDialogVisible",!1)},handleSave:function(){var e=this;this.$refs.groupFormData.validate(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){var i,s,o,n,l,c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return e.handleSaveLoading=!0,t.next=4,e.saveCloudDomain().catch((function(t){e.handleSaveLoading=!1;var a=t.data.message;throw a&&e.$message.error(a),new Error(t)}));case 4:i=t.sent,s=i.data,o=s.code,n=s.id,l=s.name,c={domainCode:o,domainId:n,domainName:l},e.$message.success("创建分组成功"),e.$emit("update:createGroupDialogVisible",!1),e.$emit("update:getDomain",c),e.handleSaveLoading=!1,t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},v=b,g=(a("631a"),Object(l.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"create-group-dialog",attrs:{visible:e.createGroupDialogVisible,"close-on-click-modal":!1,title:"创建分组",width:"560px"},on:{close:e.dialogBeforeClose}},[a("el-form",{ref:"groupFormData",staticClass:"create-group-dialog__form",attrs:{model:e.groupFormData,rules:e.groupFormRules}},[a("el-form-item",{attrs:{"label-width":"140px",prop:"code"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组英文名称 "),a("el-tooltip",{staticClass:"item",attrs:{content:"分组的英文编码，调用API时需要在LOP-DN字段中传。",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-input",{attrs:{placeholder:"请输入分组编码"},model:{value:e.groupFormData.code,callback:function(t){e.$set(e.groupFormData,"code","string"==typeof t?t.trim():t)},expression:"groupFormData.code"}})],1),a("el-form-item",{attrs:{"label-width":"140px",prop:"cnName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组中文名称 "),a("el-tooltip",{staticClass:"item",attrs:{content:"分组的中文名称，如：技术开放平台产品组的分组。",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-input",{attrs:{placeholder:"请输入分组中文名称"},model:{value:e.groupFormData.cnName,callback:function(t){e.$set(e.groupFormData,"cnName","string"==typeof t?t.trim():t)},expression:"groupFormData.cnName"}})],1),a("el-form-item",{attrs:{"label-width":"140px",prop:"intr"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组描述 "),a("el-tooltip",{staticClass:"item",attrs:{content:"具体描述分组下一类API的应用场景，如：基础平台组为云仓物控平台项目提供的API组，调用方设备为PC端，账号体系为passport。",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-input",{attrs:{type:"textarea",placeholder:"请输入分组使用场景的描述"},model:{value:e.groupFormData.intr,callback:function(t){e.$set(e.groupFormData,"intr","string"==typeof t?t.trim():t)},expression:"groupFormData.intr"}})],1),a("el-form-item",{attrs:{"label-width":"140px",prop:"serviceType"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 发布范围 "),a("el-tooltip",{staticClass:"item",attrs:{content:"发布到内网，仅内网可用。发布到公网，内网、公网均可用",placement:"top"}},[a("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),a("el-radio",{attrs:{label:1},model:{value:e.groupFormData.serviceType,callback:function(t){e.$set(e.groupFormData,"serviceType",t)},expression:"groupFormData.serviceType"}},[e._v("发布到内网")]),a("el-radio",{attrs:{label:2},model:{value:e.groupFormData.serviceType,callback:function(t){e.$set(e.groupFormData,"serviceType",t)},expression:"groupFormData.serviceType"}},[e._v("发布到公网")])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("update:createGroupDialogVisible",!1)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.handleSaveLoading},on:{click:e.handleSave}},[e._v("确认创建")])],1)],1)}),[],!1,null,"d2e27918",null)),w=g.exports,D=a("3935"),y=a("0e07"),C=a("c750"),I=a("fd48"),T={name:"BasicInfo",components:{Title:d.a,StickyWrapper:m.a,CreateClusterDialog:f.a,CreateGroupDialog:w,ErpPrincipal:D.a},props:{disabledEdit:{type:Boolean,required:!0},showStatus:{type:Number,required:!0},name:{type:String,required:!0},remark:{type:String,default:""},visibility:{type:Number,default:0},dataLevel:{type:Number,default:0},type:{type:Number,default:2},testCluster:{type:Object,required:!0},uatCluster:{type:Object,required:!0},prodCluster:{type:Object,required:!0},domain:{type:Object,required:!0},lcpApp:{type:Object,required:!0},productPrincipal:{type:String,default:""},developPrincipal:{type:String,default:""},operationPrincipal:{type:String,default:""},interfaceName:{type:String,default:""},testAlias:{type:String,default:""},method:{type:String,default:""},uatAlias:{type:String,default:""},prodAlias:{type:String,default:""},testToken:{type:String,default:""},uatToken:{type:String,default:""},prodToken:{type:String,default:""},leafIdList:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=function(t,a,r){0!==e.labelIdList.length?r():r(new Error("请选则敏感标签"))};return{getDomain:{},env:window.env.buildEnv,editable:!1,createClusterDialogVisible:!1,createGroupDialogVisible:!1,basicInfoData:{name:"",remark:"",visibility:0,dataLevel:0,type:2,testCluster:{},uatCluster:{},prodCluster:{},testAlias:"",method:"",uatAlias:"",prodAlias:"",testToken:"",uatToken:"",prodToken:"",domain:{},lcpApp:{},productPrincipal:"",developPrincipal:"",operationPrincipal:"",interfaceName:""},basicInfoRules:{},basicInfoJsfRules:{name:[{required:!0,message:"请输入中文名称"},{min:2,max:20,message:"请输入2到20个字符"}],remark:[{required:!0,message:"请输入功能描述"},{min:10,max:255,message:"请输入10到255个字符"}],dataLevel:[{required:!0,message:"请选择数据级别"}],type:[{required:!0,message:"请选择提供API的方式"}],domain:[{required:!0,message:"请输入分组中文名称或分组编码"}],lcpApp:[{required:!0,message:"请输入应用中文名称"}],productPrincipal:[{required:!0,message:"请输入产品负责人的ERP账号"}],developPrincipal:[{required:!0,message:"请输入研发负责人的ERP账号"}],operationPrincipal:[{required:!0,message:"请输入运营负责人的ERP账号"}],interfaceName:[{required:!0,message:"请选择JSF接口名"}],testAlias:[{required:!0,message:"请选择测试环境-别名"}],uatAlias:[{required:!0,message:"请选择预发环境-别名"}],prodAlias:[{required:!0,message:"请选生产环境-别名"}],method:[{required:!0,message:"请选择方法名"}],testToken:[{max:50,message:"请输入0-50个字符"}],uatToken:[{max:50,message:"请输入0-50个字符"}],prodToken:[{max:50,message:"请输入0-50个字符"}],labelIdList:[{required:!0,validator:t}]},basicInfoIpRules:{name:[{required:!0,message:"请输入中文名称"},{min:2,max:20,message:"请输入2到20个字符"}],remark:[{required:!0,message:"请输入功能描述"},{min:10,max:255,message:"请输入10到255个字符"}],visibility:[{required:!0,message:"请选择功能描述"}],dataLevel:[{required:!0,message:"请选择数据级别"}],labelIdList:[{required:!0,validator:t}],type:[{required:!0,message:"请选择提供API的方式"}],testCluster:[{required:!0,validator:function(t,a,r){e.basicInfoData.testCluster&&e.basicInfoData.testCluster.testClusterId&&e.basicInfoData.testCluster.testClusterName?r():r(new Error("请输入集群的中文名称"))}}],uatCluster:[{required:!0,validator:function(t,a,r){e.basicInfoData.uatCluster&&e.basicInfoData.uatCluster.uatClusterId&&e.basicInfoData.uatCluster.uatClusterName?r():r(new Error("请输入集群的中文名称"))}}],prodCluster:[{required:!0,validator:function(t,a,r){e.basicInfoData.prodCluster&&e.basicInfoData.prodCluster.prodClusterId&&e.basicInfoData.prodCluster.prodClusterName?r():r(new Error("请输入集群的中文名称"))}}],domain:[{required:!0,message:"请输入分组中文名称或分组编码"}],lcpApp:[{required:!0,message:"请输入应用中文名称"}],productPrincipal:[{required:!0,message:"请输入产品负责人的ERP账号"}],developPrincipal:[{required:!0,message:"请输入研发负责人的ERP账号"}],operationPrincipal:[{required:!0,message:"请输入运营负责人的ERP账号"}]},dataLevelOptionList:[{value:0,label:"公开数据（L1）"},{value:1,label:"秘密数据（L2）"},{value:2,label:"机密数据（L3）"},{value:3,label:"绝密数据（L4）"}],typeOptionList:[{value:1,label:"一个JSF服务的接口方法"},{value:2,label:"IP端口组成的服务器集群"}],interfaceNameErrorMessage:"",testAliasErrorMessage:"",uatAliasErrorMessage:"",prodAliasErrorMessage:"",testClusterOptionList:[],testClusterLoading:!1,uatClusterOptionList:[],uatClusterLoading:!1,prodClusterOptionList:[],prodClusterLoading:!1,domainOptionList:[],domainLoading:!1,lcpAppOptionList:[],interfaceNameLoading:!1,interfaceNameOptionList:[],methodOptionList:[],aliasOptionList:[],props:{multiple:!0,value:"id",label:"labelName"},selectedLeafLabel:[],cascaderOptions:[],labelIdList:this.leafIdList}},computed:{computeDataLevelText:function(){return{0:"公开数据（L1）",1:"秘密数据（L2）",2:"机密数据（L3）",3:"绝密数据（L4）"}[this.dataLevel]},computeTypeText:function(){return{1:"一个JSF服务的接口方法",2:"IP端口组成的服务器集群"}[this.type]},computeInitItemDisabled:function(){return!this.editable||1!==this.showStatus},computeSelectedLeafLabel:function(){return this.selectedLeafLabel.toString().replace(/,/g," ")}},watch:{"basicInfoData.type":{handler:function(e){var t={1:this.basicInfoJsfRules,2:this.basicInfoIpRules};this.basicInfoRules=t[e]||{}},immediate:!0},getDomain:function(e){this.basicInfoData.domain=e,this.domainOptionList=[e]},leafIdList:function(e){this.labelIdList=e,this.getSelectedLabel()},labelIdList:{handler:function(e){this.basicInfoData.labelIdList=this.labelIdList},immediate:!0}},methods:{queryApiReleaseByCondition:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1,1e3,1,a=[{pageNumb:1,pageSize:1e3},{searchType:1,searchKeyWord:t}],e.next=6,y.a.queryApiReleaseByCondition(a).catch((function(e){var t=e.message;throw t&&i.$message.error(t),new Error("queryApiReleaseByCondition")}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),queryList:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t,sceneType:3},e.next=3,y.a.queryList(a).catch((function(e){var t=e.data.message;throw t&&i.$message.error(t),new Error("queryList")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findAppListForSelect:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.findAppListForSelect().catch((function(e){var a=e.data.message;throw a&&t.$message.error(a),new Error("findAppListForSelect")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),queryCloudDomainList:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i,s=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null,1,1e4,a=this.basicInfoData.type,i=[{page:1,pageSize:1e4},{queryLike:t,type:a,isOnline:null,sceneType:3}],e.next=7,h.a.queryCloudDomainList(i).catch((function(e){var t=e.data.message;throw t&&s.$message.error(t),new Error("queryCloudDomainList")}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),saveBaseInfo:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s,o,n,l,c,u,p,d,m,f,h,b,v,g,w,D,C,I,T,k,x,L,S,_,P,j,O,A,N,E,q,$,F,J=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=parseInt(this.$route.params.id),a=this.basicInfoData.name,i=this.basicInfoData.remark,s=this.basicInfoData.dataLevel,o=this.basicInfoData.type,n=this.basicInfoData.testCluster,l=n.testClusterId,c=n.testClusterName,u=this.basicInfoData.uatCluster,p=u.uatClusterId,d=u.uatClusterName,m=this.basicInfoData.prodCluster,f=m.prodClusterId,h=m.prodClusterName,b=this.basicInfoData.domain,v=b.domainId,g=b.domainCode,w=b.domainName,D=this.basicInfoData.lcpApp,C=D.lcpAppId,I=D.lcpAppKey,T=D.lcpAppName,k=this.basicInfoData.productPrincipal,x=this.basicInfoData.developPrincipal,L=this.basicInfoData.operationPrincipal,S=this.basicInfoData,_=S.interfaceName,P=S.testAlias,j=S.uatAlias,O=S.prodAlias,A=S.method,N=S.testToken,E=S.uatToken,q=S.prodToken,!(($=this.labelIdList).length<=0)){e.next=18;break}return this.$message.warning("敏感标签不能为空"),e.abrupt("return");case 18:return F={id:t,name:a,remark:i,dataLevel:s,type:o,testClusterId:l,testClusterName:c,uatClusterId:p,uatClusterName:d,prodClusterId:f,prodClusterName:h,domainId:v,domainCode:g,domainName:w,lcpAppId:C,lcpAppKey:I,lcpAppName:T,productPrincipal:k,developPrincipal:x,operationPrincipal:L,interfaceName:_,testAlias:P,uatAlias:j,prodAlias:O,method:A,testToken:N,uatToken:E,prodToken:q,labelIdList:$},e.next=21,y.a.saveBaseInfo(F).catch((function(e){var t=e.data.message;throw t&&J.$message.error(t),new Error("saveBaseInfo")}));case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryAliasIfPresentInterface:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfoData.interfaceName,e.next=3,I.a.JsfApiService.queryAliasIfPresentInterface([{qualifiedName:t}]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryMethodIfPresentInterface:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfoData.interfaceName,a=[{qualifiedName:t}],e.next=4,I.a.JsfApiService.queryMethodIfPresentInterface(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findApiStatus:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=this.basicInfoData.interfaceName,i=[{qualifiedName:a,jsfAlias:t}],e.next=5,I.a.JsfApiMetaService.findApiStatus(i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),hrefToDocument:function(){window.open("//cf.jd.com/pages/viewpage.action?pageId=106705184","_blank")},gotoGroupDetail:function(e){var t="#/apiManager/mobile/apiGroup/detail/".concat(e);window.open(t,"_blank")},initBasicInfoData:function(){var e=this.name,t=this.remark,a=this.dataLevel,r=this.type,i=this.testCluster,s=this.uatCluster,o=this.prodCluster,n=this.domain,l=this.lcpApp,c=this.productPrincipal,u=this.developPrincipal,p=this.operationPrincipal,d=this.interfaceName,m=this.testAlias,f=this.uatAlias,h=this.prodAlias,b=this.method,v=this.testToken,g=this.uatToken,w=this.prodToken;this.basicInfoData={name:e,remark:t,dataLevel:a,type:r,testCluster:i,uatCluster:s,prodCluster:o,domain:n,lcpApp:l,productPrincipal:c,developPrincipal:u,operationPrincipal:p,interfaceName:d,testAlias:m,uatAlias:f,prodAlias:h,method:b,testToken:v,uatToken:g,prodToken:w},l.lcpAppId=String(l.lcpAppId),this.testClusterOptionList=[i],this.uatClusterOptionList=[s],this.prodClusterOptionList=[o],this.domainOptionList=[n],this.labelIdList=this.leafIdList},handleEdit:function(){var e=this;this.editable=!0,this.$nextTick((function(){e.initBasicInfoData()}))},handleCancel:function(){this.$refs.basicInfoData.resetFields(),this.editable=!1},handleSave:function(){var e=this;this.$refs.basicInfoData.validate(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){var i,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=11;break}return t.next=3,e.saveBaseInfo().catch((function(){throw new Error("handleSave saveBaseInfo")}));case 3:i=t.sent,(s=i.data.message)&&e.$message.success(s),e.$refs.basicInfoData.resetFields(),e.editable=!1,e.$emit("updateGetApi"),t.next=12;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeType:function(){var e=this,t=C.a[this.env],a=["".concat(t,"Cluster"),"interfaceName","".concat(t,"Method"),"".concat(t,"Alias"),"domain"],r=["".concat(t,"ClusterOptionList"),"interfaceNameOptionList","methodOptionList","aliasOptionList","domainOptionList"];"prod"===t&&(a=a.concat(["uatCluster","uatAlias"]),r=r.concat(["uatClusterOptionList"])),a.forEach((function(t){return e.$refs[t].resetField()})),r.forEach((function(t){return e[t]=[]}))},remoteInterfaceName:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i,s=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=10;break}return this.interfaceNameLoading=!0,e.next=4,this.queryApiReleaseByCondition(t).catch((function(){throw s.interfaceNameLoading=!1,new Error("remoteInterfaceName queryApiReleaseByCondition")}));case 4:a=e.sent,i=a.data.list,this.interfaceNameOptionList=i&&i.length>0?i.map((function(e){return{interfaceName:e.qualifiedName}})):[],this.interfaceNameLoading=!1,e.next=11;break;case 10:this.interfaceNameOptionList=[];case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),changeSelectInterface:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i,s,o=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}return a=C.a[this.env],i=["".concat(a,"Method"),"".concat(a,"Alias")],s=["methodOptionList","aliasOptionList"],"prod"===a&&(i.concat(["uatAlias"]),Object(p.a)("refList")),i.forEach((function(e){return o.$refs[e].resetField()})),s.forEach((function(e){return o[e]=[]})),this.interfaceNameErrorMessage="",e.next=10,this.findApiStatus().catch((function(e){var t=e.message;o.interfaceNameErrorMessage=t||""}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),focusSelectMethod:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.basicInfoData.interfaceName){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.queryMethodIfPresentInterface().catch((function(){throw new Error("focusSelectMethod queryMethodIfPresentInterface")}));case 4:t=e.sent,a=t.data,this.methodOptionList=a||[];case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),focusSelectAlias:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.basicInfoData.interfaceName){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.queryAliasIfPresentInterface().catch((function(){throw new Error("focusSelectAlias queryAliasIfPresentInterface")}));case 4:t=e.sent,a=t.data,this.aliasOptionList=a||[];case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changeSelectAlias:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,a){var i,s=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return this["".concat(a,"AliasErrorMessage")]="",i=this.basicInfoData["".concat(a,"Alias")],e.next=5,this.findApiStatus(i).catch((function(e){e.code;var t=e.message;s["".concat(a,"AliasErrorMessage")]=t||""}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),remoteCluster:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,a){var i,s,o,n=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={toggleLoading:function(e){n["".concat(a,"ClusterLoading")]=e||!1},mapCallback:function(e){var t=e.id,r=e.name,i={};return i["".concat(a,"ClusterId")]=t,i["".concat(a,"ClusterName")]=r,i},assignOptionList:function(e){n["".concat(a,"ClusterOptionList")]=e||[]}},""===t){e.next=11;break}return i.toggleLoading(!0),e.next=5,this.queryList(t).catch((function(){throw new Error("remoteCluster queryList")}));case 5:s=e.sent,(o=s.data)&&o.length>0?i.assignOptionList(o.map(i.mapCallback)):i.assignOptionList(),i.toggleLoading(),e.next=12;break;case 11:i.assignOptionList();case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),remoteDomain:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=10;break}return this.domainLoading=!0,e.next=4,this.queryCloudDomainList(t).catch((function(){throw new Error("remoteDomain queryCloudDomainList")}));case 4:a=e.sent,i=a.data.rows,this.domainOptionList=i&&i.length>0?i.map((function(e){return{domainId:e.id,domainCode:e.code,domainName:e.cnName}})):[],this.domainLoading=!1,e.next=11;break;case 10:this.domainOptionList=[];case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),getSensitiveLabelForest:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getSensitiveLabelForest();case 2:t=e.sent,this.cascaderOptions=t.data,this.getSelectedLabel();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getSelectedLabel:function(){var e=this;this.selectedLeafLabel=[],this.labelIdList.forEach((function(t){e.queryLeafLabel(t[t.length-1],e.cascaderOptions)}))},queryLeafLabel:function(e,t){var a=this;t.forEach((function(t){t.id!==e?t.children&&a.queryLeafLabel(e,t.children):a.selectedLeafLabel.push(t.labelName)}))},onCopy:function(e){this.$message.success("复制成功")},onError:function(e){this.$message.error("复制失败")}},created:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(i.a)(Object(r.a)().mark((function e(){var a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.findAppListForSelect().catch((function(){throw new Error("created findAppListForSelect")}));case 2:a=e.sent,i=a.data.data,t.lcpAppOptionList=i&&i.length>0?i.map((function(e){return{lcpAppId:e.value,lcpAppKey:e.code,lcpAppName:e.label}})):[];case 5:case"end":return e.stop()}}),e)})))(),e.next=3,this.getSensitiveLabelForest();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},k=T,x=(a("815e"),Object(l.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"basic-info"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticClass:"basic-info__not-editable-form",attrs:{"label-width":"120px","label-position":"left",model:{}}},[a("Title",{attrs:{text:"描述信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文名称"}},[a("span",[e._v(e._s(e.name))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"功能描述"}},[a("span",[e._v(e._s(e.remark))])])],1)],1),a("Title",{attrs:{text:"敏感信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据级别"}},[a("span",[e._v(e._s(e.computeDataLevelText))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"敏感标签"}},[a("span",[e._v(" "+e._s(e.computeSelectedLeafLabel))])])],1)],1),a("Title",{attrs:{text:"提供API的方式"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"提供API的方式"}},[a("span",[e._v(e._s(e.computeTypeText))])])],1)],1),1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"JSF接口名"}},[a("span",[e._v(e._s(e.interfaceName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"方法名"}},[a("span",[e._v(e._s(e.method))])])],1)],1):e._e(),"local"===e.env||"devtest"===e.env||"publictest"===e.env?[1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-别名"}},[a("span",[e._v(e._s(e.testAlias))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-token"}},[a("span",[e._v(e._s(e.testToken))])])],1)],1):e._e()]:"uat"===e.env||"prod"===e.env?[1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-别名"}},[a("span",[e._v(e._s(e.uatAlias))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-token"}},[a("span",[e._v(e._s(e.uatToken))])])],1)],1):e._e(),1===e.type?a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-别名"}},[a("span",[e._v(e._s(e.prodAlias))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-token"}},[a("span",[e._v(e._s(e.prodToken))])])],1)],1):e._e()]:e._e(),2===e.type?a("el-row",{staticClass:"row--offset"},["local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-集群"}},[a("span",[e._v(e._s(e.testCluster.testClusterName))])])],1)]:"uat"===e.env||"prod"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-集群"}},[a("span",[e._v(e._s(e.uatCluster.uatClusterName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-集群"}},[a("span",[e._v(e._s(e.prodCluster.prodClusterName))])])],1)]:e._e()],2):e._e(),a("Title",{attrs:{text:"分组信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",[a("el-form-item",{attrs:{label:"所属分组"}},[a("span",[e._v(e._s(e.domain.domainName+"("+e.domain.domainCode+")"))]),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){return e.gotoGroupDetail(e.domain.domainId)}}},[e._v("详情")])],1)],1)],1),a("Title",{attrs:{text:"应用信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"所属应用"}},[a("span",[e._v(e._s(e.lcpApp.lcpAppName)+"（"+e._s(e.lcpApp.lcpAppKey)+"）")])])],1)],1),a("Title",{attrs:{text:"负责人信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品负责人"}},[a("span",[e._v(e._s(e.productPrincipal))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发负责人"}},[a("span",[e._v(e._s(e.developPrincipal))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运营负责人"}},[a("span",[e._v(e._s(e.operationPrincipal))])])],1)],1)],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],ref:"basicInfoData",staticClass:"basic-info__editable-form",attrs:{"label-width":"120px","label-position":"right",model:e.basicInfoData,rules:e.basicInfoRules}},[a("Title",{attrs:{text:"描述信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入中文名称"},model:{value:e.basicInfoData.name,callback:function(t){e.$set(e.basicInfoData,"name","string"==typeof t?t.trim():t)},expression:"basicInfoData.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"功能描述",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入功能描述",type:"textarea",rows:1},model:{value:e.basicInfoData.remark,callback:function(t){e.$set(e.basicInfoData,"remark","string"==typeof t?t.trim():t)},expression:"basicInfoData.remark"}})],1)],1)],1),a("Title",{attrs:{text:"敏感信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据级别",prop:"dataLevel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据级别"},model:{value:e.basicInfoData.dataLevel,callback:function(t){e.$set(e.basicInfoData,"dataLevel",t)},expression:"basicInfoData.dataLevel"}},e._l(e.dataLevelOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"敏感标签",prop:"labelIdList"}},[a("el-cascader",{ref:"cascader",staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,options:e.cascaderOptions,props:e.props,clearable:""},model:{value:e.labelIdList,callback:function(t){e.labelIdList=t},expression:"labelIdList"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:e.hrefToDocument}},[e._v("说明")])],1)],1),a("Title",{attrs:{text:"提供API的方式"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"提供API的方式",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,placeholder:"请选择提供API的方式"},on:{change:e.changeType},model:{value:e.basicInfoData.type,callback:function(t){e.$set(e.basicInfoData,"type",t)},expression:"basicInfoData.type"}},e._l(e.typeOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"interfaceName",attrs:{label:"JSF接口名",prop:"interfaceName",error:e.interfaceNameErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,loading:e.interfaceNameLoading,filterable:!0,"allow-create":!0,remote:!0,"remote-method":e.remoteInterfaceName},on:{"visible-change":e.changeSelectInterface},model:{value:e.basicInfoData.interfaceName,callback:function(t){e.$set(e.basicInfoData,"interfaceName","string"==typeof t?t.trim():t)},expression:"basicInfoData.interfaceName"}},e._l(e.interfaceNameOptionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.interfaceName,value:e.interfaceName}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"method",attrs:{label:"方法名",prop:"method"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF方法名"},on:{focus:e.focusSelectMethod},model:{value:e.basicInfoData.method,callback:function(t){e.$set(e.basicInfoData,"method","string"==typeof t?t.trim():t)},expression:"basicInfoData.method"}},e._l(e.methodOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)],1),"local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"testAlias",attrs:{label:"测试环境-别名",prop:"testAlias",error:e.testAliasErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF别名"},on:{focus:e.focusSelectAlias,"visible-change":function(t){return e.changeSelectAlias(t,"test")}},model:{value:e.basicInfoData.testAlias,callback:function(t){e.$set(e.basicInfoData,"testAlias","string"==typeof t?t.trim():t)},expression:"basicInfoData.testAlias"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-token",prop:"testToken"}},[a("el-input",{attrs:{placeholder:"输入测试环境JSF token"},model:{value:e.basicInfoData.testToken,callback:function(t){e.$set(e.basicInfoData,"testToken",t)},expression:"basicInfoData.testToken"}})],1)],1)],1)]:"uat"===e.env||"prod"===e.env?[a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"uatAlias",attrs:{label:"预发环境-别名",prop:"uatAlias",error:e.uatAliasErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF别名"},on:{focus:e.focusSelectAlias,"visible-change":function(t){return e.changeSelectAlias(t,"uat")}},model:{value:e.basicInfoData.uatAlias,callback:function(t){e.$set(e.basicInfoData,"uatAlias","string"==typeof t?t.trim():t)},expression:"basicInfoData.uatAlias"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-token",prop:"uatToken"}},[a("el-input",{attrs:{placeholder:"输入预发环境JSF token"},model:{value:e.basicInfoData.uatToken,callback:function(t){e.$set(e.basicInfoData,"uatToken",t)},expression:"basicInfoData.uatToken"}})],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.basicInfoData.type,expression:"basicInfoData.type === 1"}],staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"prodAlias",attrs:{label:"生产环境-别名",prop:"prodAlias",error:e.prodAliasErrorMessage}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"allow-create":!0,placeholder:"选择JSF别名"},on:{focus:e.focusSelectAlias,"visible-change":function(t){return e.changeSelectAlias(t,"prod")}},model:{value:e.basicInfoData.prodAlias,callback:function(t){e.$set(e.basicInfoData,"prodAlias","string"==typeof t?t.trim():t)},expression:"basicInfoData.prodAlias"}},e._l(e.aliasOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-token",prop:"prodToken"}},[a("el-input",{attrs:{placeholder:"输入生产环境JSF token"},model:{value:e.basicInfoData.prodToken,callback:function(t){e.$set(e.basicInfoData,"prodToken",t)},expression:"basicInfoData.prodToken"}})],1)],1)],1)]:e._e(),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.basicInfoData.type,expression:"basicInfoData.type === 2"}],staticClass:"row--offset"},["local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"testCluster",attrs:{label:"测试环境-集群",prop:"testCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.testClusterLoading,filterable:!0,remote:!0,"remote-method":function(t){return e.remoteCluster(t,"test")},"value-key":"testClusterId",placeholder:"请输入集群的中文名称"},model:{value:e.basicInfoData.testCluster,callback:function(t){e.$set(e.basicInfoData,"testCluster",t)},expression:"basicInfoData.testCluster"}},e._l(e.testClusterOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.testClusterName,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){e.createClusterDialogVisible=!0}}},[e._v("+创建集群")])],1)]:"uat"===e.env||"prod"===e.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"uatCluster",attrs:{label:"预发环境-集群",prop:"uatCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.uatClusterLoading,filterable:!0,remote:!0,"remote-method":function(t){return e.remoteCluster(t,"uat")},"value-key":"uatClusterId",placeholder:"请输入集群的中文名称"},model:{value:e.basicInfoData.uatCluster,callback:function(t){e.$set(e.basicInfoData,"uatCluster",t)},expression:"basicInfoData.uatCluster"}},e._l(e.uatClusterOptionList,(function(e){return a("el-option",{key:e.uatClusterId,attrs:{label:e.uatClusterName,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"prodCluster",attrs:{label:"生产环境-集群",prop:"prodCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.prodClusterLoading,filterable:!0,remote:!0,"remote-method":function(t){return e.remoteCluster(t,"prod")},"value-key":"prodClusterId",placeholder:"请输入集群的中文名称"},model:{value:e.basicInfoData.prodCluster,callback:function(t){e.$set(e.basicInfoData,"prodCluster",t)},expression:"basicInfoData.prodCluster"}},e._l(e.prodClusterOptionList,(function(e){return a("el-option",{key:e.prodClusterId,attrs:{label:e.prodClusterName,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){e.createClusterDialogVisible=!0}}},[e._v("+创建集群")])],1)]:e._e()],2),a("Title",{attrs:{text:"分组信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{ref:"domain",attrs:{label:"所属分组",prop:"domain"}},[a("el-select",{staticClass:"select--fix-height",staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,loading:e.domainLoading,filterable:!0,remote:!0,"remote-method":e.remoteDomain,"value-key":"domainId",placeholder:"请输入分组中文名称或分组编码"},model:{value:e.basicInfoData.domain,callback:function(t){e.$set(e.basicInfoData,"domain",t)},expression:"basicInfoData.domain"}},e._l(e.domainOptionList,(function(e){return a("el-option",{key:e.domainId,attrs:{label:e.domainName+"("+e.domainCode+")",value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(t){e.createGroupDialogVisible=!0}}},[e._v("+创建分组")])],1)],1),a("Title",{attrs:{text:"应用信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"所属应用",prop:"lcpApp"}},[a("el-select",{staticClass:"select--fix-height",staticStyle:{width:"100%"},attrs:{disabled:1!==e.showStatus,filterable:!0,"value-key":"lcpAppId",placeholder:"请输入应用中文名称"},model:{value:e.basicInfoData.lcpApp,callback:function(t){e.$set(e.basicInfoData,"lcpApp",t)},expression:"basicInfoData.lcpApp"}},e._l(e.lcpAppOptionList,(function(e){return a("el-option",{key:e.lcpAppId,attrs:{label:e.lcpAppName+"（"+e.lcpAppKey+"）",value:e}})})),1)],1)],1)],1),a("Title",{attrs:{text:"负责人信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品负责人",prop:"productPrincipal"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:e.basicInfoData.productPrincipal,disabled:1!==e.showStatus,placeholder:"请输入产品负责人的ERP账号"},on:{"update:formDataPrincipal":function(t){return e.$set(e.basicInfoData,"productPrincipal",t)},"update:form-data-principal":function(t){return e.$set(e.basicInfoData,"productPrincipal",t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发负责人",prop:"developPrincipal"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:e.basicInfoData.developPrincipal,disabled:1!==e.showStatus,placeholder:"请输入研发负责人的ERP账号"},on:{"update:formDataPrincipal":function(t){return e.$set(e.basicInfoData,"developPrincipal",t)},"update:form-data-principal":function(t){return e.$set(e.basicInfoData,"developPrincipal",t)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运营负责人",prop:"operationPrincipal"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:e.basicInfoData.operationPrincipal,disabled:1!==e.showStatus,placeholder:"请输入运营负责人的ERP账号"},on:{"update:formDataPrincipal":function(t){return e.$set(e.basicInfoData,"operationPrincipal",t)},"update:form-data-principal":function(t){return e.$set(e.basicInfoData,"operationPrincipal",t)}}})],1)],1)],1)],2),a("CreateClusterDialog",{attrs:{createClusterDialogVisible:e.createClusterDialogVisible},on:{"update:createClusterDialogVisible":function(t){e.createClusterDialogVisible=t},"update:create-cluster-dialog-visible":function(t){e.createClusterDialogVisible=t}}}),a("CreateGroupDialog",{attrs:{createGroupDialogVisible:e.createGroupDialogVisible,getDomain:e.getDomain,type:e.basicInfoData.type},on:{"update:createGroupDialogVisible":function(t){e.createGroupDialogVisible=t},"update:create-group-dialog-visible":function(t){e.createGroupDialogVisible=t},"update:getDomain":function(t){e.getDomain=t},"update:get-domain":function(t){e.getDomain=t}}}),a("StickyWrapper",[e.editable?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1):a("el-button",{attrs:{type:"primary",disabled:e.disabledEdit},on:{click:e.handleEdit}},[e._v("编辑")])],1)],1)}),[],!1,null,"563c3fc0",null)),L=x.exports,S=a("5530"),_=(a("1c4c"),a("aa47")),P={name:"ParamTable",props:{editable:{type:Boolean,default:!0},isRequest:{type:Boolean,default:!0},paramTableData:{type:Array,default:function(){return[]}},paramTableEditedData:{type:Array,default:function(){return[]}}},data:function(){return{expandRowIdList:[],expandRowKeyEditedList:[],paramTableList:[],flatTreeList:[],requestParamTableList:[{prop:"name",label:"名称",width:"200",placeholder:"请输入名称",className:"column--name"},{prop:"type",label:"类型",width:"200",placeholder:"请选择类型",optionList:[{value:"java.lang.Character"},{value:"java.lang.Byte"},{value:"java.lang.Integer"},{value:"java.lang.Long"},{value:"java.lang.Float"},{value:"java.lang.Double"},{value:"java.lang.Boolean"},{value:"java.lang.String"},{value:"java.math.BigInteger"},{value:"java.math.BigDecimal"},{value:"java.util.Date"},{value:"java.sql.Date"},{value:"java.time.LocalDate"},{value:"java.time.LocalTime"},{value:"java.time.LocalDateTime"},{value:"java.lang.Object"},{value:"java.util.List"},{value:"java.util.Set"},{value:"java.util.Map"}]},{prop:"required",label:"是否必填",width:"80",formatter:function(e,t,a){return{0:"否",1:"是"}[a]||""}},{prop:"exampleValue",label:"示例值",width:"140"},{prop:"remark",label:"描述",minWidth:"200",className:"line-feed"}],responseParamTableList:[{prop:"name",label:"名称",width:"200",placeholder:"请输入名称",className:"column--name"},{prop:"type",label:"类型",width:"200",placeholder:"请选择类型",optionList:[{value:"java.lang.Character"},{value:"java.lang.Byte"},{value:"java.lang.Integer"},{value:"java.lang.Long"},{value:"java.lang.Float"},{value:"java.lang.Double"},{value:"java.lang.Boolean"},{value:"java.lang.String"},{value:"java.math.BigInteger"},{value:"java.math.BigDecimal"},{value:"java.util.Date"},{value:"java.sql.Date"},{value:"java.time.LocalDate"},{value:"java.time.LocalTime"},{value:"java.time.LocalDateTime"},{value:"java.lang.Object"},{value:"java.util.List"},{value:"java.util.Set"},{value:"java.util.Map"}]},{prop:"exampleValue",label:"示例值",width:"140"},{prop:"remark",label:"描述",minWidth:"200",className:"line-feed"}],includeParamsTypeList:["java.lang.Character","java.lang.Byte","java.lang.Integer","java.lang.Long","java.lang.Float","java.lang.Double","java.lang.Boolean","java.lang.String","java.math.BigInteger","java.math.BigDecimal","java.util.Date","java.sql.Date","java.time.LocalDate","java.time.LocalTime","java.time.LocalDateTime"],paramTableFormRules:{name:[{required:!0,message:"请输入名称"},{pattern:/^\S*$/,message:"名称不能包含空格"}],type:[{required:!0,message:"请选择类型",trigger:"change"},{pattern:/^\S*$/,message:"类型不能包含空格",trigger:"change"}],required:[{required:!0,message:"请选择是否必填"}],exampleValue:[{pattern:/^[^\n]*$/,message:"示例值不能包含换行符"}]}}},watch:{isRequest:{handler:function(e){this.paramTableList=e?this.requestParamTableList:this.responseParamTableList,this.$emit("update:paramTableData",Object(s.a)(this.paramTableData)),this.$emit("update:paramTableEditedData",Object(s.a)(this.paramTableEditedData))},immediate:!0}},created:function(){var e=this;this.$nextTick((function(){e.initializeTableDrag()}))},methods:{handleExpandChange:function(e,t){if(t)this.expandRowIdList.push(e.id.toString()),this.expandRowIdList=Array.from(new Set(this.expandRowIdList));else{var a=this.expandRowIdList.indexOf(e.id.toString());a>-1&&this.expandRowIdList.splice(a,1)}},flatTreeData:function(e){for(var t in e)this.flatTreeList.push(e[t]),e[t].children&&e[t].children.length>0&&this.flatTreeData(e[t].children)},buildTree:function(e,t,a){var r=this;e.forEach((function(i){i.parentId===t&&(i.children=[],r.buildTree(e,i.id,i.children),a.push(i))}))},listToTree:function(e,t){var a=[];return this.buildTree(e,t,a),a.length>0?a.length>1?a:[a[0]]:[]},initializeTableDrag:function(){var e=this.$refs.paramTable.$el.querySelector(".table__edit .el-table__body-wrapper tbody"),t=this;_.a.create(e,{handle:".operation-icon",sort:!0,animation:150,setData:function(e){e.setData("Text","")},onMove:function(e,a){var r=JSON.parse(JSON.stringify(t.paramTableEditedData));t.flatTreeList=[],t.flatTreeData(r);var i=e.dragged.rowIndex,s=e.related.rowIndex,o=t.flatTreeList[i],n=t.flatTreeList[s];return o.parentId===n.parentId},onEnd:function(e){var a=e.oldIndex,r=e.newIndex;if(a!==r){var i=t.flatTreeList.splice(a,1)[0];t.flatTreeList.splice(r,0,i);var s=t.listToTree(t.flatTreeList,-1);t.$emit("update:paramTableEditedData",[]),t.$nextTick((function(){t.$emit("update:paramTableEditedData",s)}))}}})},handleClickDelete:function(e){this.deleteRowTableData(e,this.paramTableEditedData)},deleteRowTableData:function(e,t){var a=this;return t.some((function(t,r,i){var s=t.id,o=t.children;return s===e?i.splice(r,1):!!(o&&o.length>0)&&a.deleteRowTableData(e,o)}))},handleCommandDropdownItem:function(e){var t=e.mode,a=e.id,r=e.parentId;this.handleClickCreateParam(t,a,r)},handleClickCreateParam:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,i=-(new Date).getTime(),s=[],o={id:i,parentId:r,name:"",type:"",required:"0",exampleValue:"",remark:"",children:s},n={id:i,parentId:a,name:"",type:"",required:"0",exampleValue:"",remark:"",children:s};({parameter:function(){return t.createParameterRowTableData(a,t.paramTableEditedData,o)},subparameter:function(){return t.createSubparameterRowTableData(a,t.paramTableEditedData,n)},push:function(){return t.paramTableEditedData.push(o)}})[e]()},createParameterRowTableData:function(e,t,a){var r=this;return t.some((function(t,i,s){var o=t.id,n=t.children;return o===e?s.splice(i+1,0,a):!!(n&&n.length>0)&&r.createParameterRowTableData(e,n,a)}))},createSubparameterRowTableData:function(e,t,a){var r=this;return t.some((function(t){var i=t.id,s=t.children;return i===e?(t.children.push(a),r.$nextTick((function(){r.$refs.paramTable.toggleRowExpansion(t,!0)})),!0):!!(s&&s.length>0)&&r.createSubparameterRowTableData(e,s,a)}))},validateTable:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$refs.form&&this.$refs.form.length>0,e.abrupt("return",!t||Promise.all(this.$refs.form.map((function(e){return e.validate()}))));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},j=P,O=(a("a77f"),Object(l.a)(j,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"param-table"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticStyle:{width:"100%"},attrs:{data:e.paramTableData,"tree-props":{children:"children"},"hide-empty-img":!0,"default-expand-all":!1,"row-key":"id",stripe:""}},e._l(e.paramTableList,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,formatter:e.formatter,"show-overflow-tooltip":!0,"class-name":e.className}})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"param-table__table-wrapper--editable"},[a("el-table",{ref:"paramTable",staticClass:"table__edit",staticStyle:{width:"100%"},attrs:{data:e.paramTableEditedData,"tree-props":{children:"children"},"hide-empty-img":!0,"default-expand-all":!1,"expand-row-keys":e.expandRowIdList,"row-key":"id",stripe:""},on:{"expand-change":e.handleExpandChange}},[e._l(e.paramTableList,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,"class-name":t.className},scopedSlots:e._u([{key:"default",fn:function(r){var i=r.row.type,s=r.row,o=r.column.property;return[["name"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder},model:{value:s[o],callback:function(t){e.$set(s,o,"string"==typeof t?t.trim():t)},expression:"row[property]"}})],1)],1)]:["type"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,filterable:"",clearable:"","allow-create":"","default-first-option":""},model:{value:s[o],callback:function(t){e.$set(s,o,"string"==typeof t?t.trim():t)},expression:"row[property]"}},e._l(t.optionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1)],1)]:["required"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-switch",{attrs:{size:"big","active-value":"1","inactive-value":"0","active-inner-text":"是","inactive-inner-text":"否"},model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"row[property]"}})],1)],1)]:["exampleValue"].includes(o)?[e.includeParamsTypeList.includes(i)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,rows:1,resize:"none",type:"textarea"},model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"row[property]"}})],1)],1)]:e._e()]:["remark"].includes(o)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:s,rules:e.paramTableFormRules}},[a("el-form-item",{attrs:{prop:o}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,rows:1,resize:"none",type:"textarea"},model:{value:s[o],callback:function(t){e.$set(s,o,t)},expression:"row[property]"}})],1)],1)]:[a("span",[e._v(e._s(s[o]))])]]}}],null,!0)})})),a("el-table-column",{attrs:{width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,i=r.id,s=r.type,o=r.parentId;return[a("div",{staticClass:"cell-icon-group"},[a("i",{staticClass:"el-icon-clear cell__icon",on:{click:function(t){return e.handleClickDelete(i)}}}),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommandDropdownItem}},[a("i",{staticClass:"el-icon-circle-plus cell__icon"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{mode:"parameter",id:i,parentId:o}}},[e._v("添加参数")]),e.includeParamsTypeList.includes(s)?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此参数类型不允许添加子参数",placement:"left-end"}},[a("span",[a("el-dropdown-item",{attrs:{command:{mode:"subparameter",id:i,parentId:o},disabled:!0}},[e._v("添加子参数")])],1)]):a("el-dropdown-item",{attrs:{command:{mode:"subparameter",id:i,parentId:o}}},[e._v("添加子参数")])],1)],1),o>0?a("span",{staticClass:"operation-icon"}):e._e()],1)]}}])})],2),0===e.paramTableEditedData.length?a("el-button",{staticStyle:{"margin-top":"8px",width:"100%"},attrs:{icon:"el-icon-plus",plain:""},on:{click:function(t){return e.handleClickCreateParam("push")}}},[e._v("添 加")]):e._e()],1)],1)}),[],!1,null,"4fff27d2",null)),A=O.exports,N={name:"ErrorCodeTable",props:{editable:{type:Boolean,default:!0},errorCodeTableData:{type:Array,default:function(){return[]}},errorCodeTableEditedData:{type:Array,default:function(){return[]}}},data:function(){return{errorCodeTableList:[{prop:"errorCode",label:"错误码",width:"200",placeholder:"请输入错误码"},{prop:"errorMsg",label:"错误消息",minWidth:"200",placeholder:"请输入错误消息",className:"line-feed"},{prop:"solution",label:"处理建议",minWidth:"200",placeholder:"请输入处理建议"}],errorCodeTableFormRules:{errorCode:[{required:!0,message:"请输入错误码"},{min:1,max:10,message:"请输入 1 到 10 个字符"}],errorMsg:[{required:!0,message:"请输入错误消息"},{min:2,max:200,message:"请输入 2 到 200 个字符"}],solution:[{min:0,max:200,message:"请输入 0 到 200 个字符"}]}}},methods:{handleClickDelete:function(e){this.errorCodeTableEditedData.splice(e,1)},handleClickCreate:function(e){var t={errorCode:"",errorMsg:"",solution:"",id:-(new Date).getTime()};this.errorCodeTableEditedData.splice(e,0,t)},validateTable:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$refs.form&&this.$refs.form.length>0,e.abrupt("return",!t||Promise.all(this.$refs.form.map((function(e){return e.validate()}))));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},E=N,q=(a("a701"),Object(l.a)(E,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-code-table"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticStyle:{width:"100%"},attrs:{data:e.errorCodeTableData,"hide-empty-img":!0,stripe:""}},e._l(e.errorCodeTableList,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,"show-overflow-tooltip":!0,"class-name":e.className}})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"error-code-table__table-wrapper--editable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.errorCodeTableEditedData,"hide-empty-img":!0,stripe:""}},[e._l(e.errorCodeTableList,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth},scopedSlots:e._u([{key:"default",fn:function(r){var i=r.row,s=r.column.property;return[["errorCode","errorMsg","solution"].includes(s)?[a("el-form",{ref:"form",refInFor:!0,attrs:{model:i,rules:e.errorCodeTableFormRules}},[a("el-form-item",{attrs:{prop:s}},"errorCode"===s?[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder},model:{value:i[s],callback:function(t){e.$set(i,s,t)},expression:"row[property]"}})]:[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:1,placeholder:t.placeholder},model:{value:i[s],callback:function(t){e.$set(i,s,t)},expression:"row[property]"}})],1)],1)]:[a("span",[e._v(e._s(i[s]))])]]}}],null,!0)})})),a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.$index;return[a("i",{staticClass:"el-icon-clear cell__icon",on:{click:function(t){return e.handleClickDelete(r)}}}),a("i",{staticClass:"el-icon-circle-plus cell__icon",on:{click:function(t){return e.handleClickCreate(r+1)}}})]}}])})],2),0===e.errorCodeTableEditedData.length?a("el-button",{staticStyle:{"margin-top":"8px",width:"100%"},attrs:{icon:"el-icon-plus",plain:""},on:{click:function(t){return e.handleClickCreate(e.errorCodeTableEditedData.length)}}},[e._v("添 加")]):e._e()],1)],1)}),[],!1,null,"d9491cfa",null)),$=q.exports,F=a("3835"),J=a("964d"),B=a("1667"),R=a("274c"),M=a("61f0"),X=a.n(M),V=(a("6014"),a("b311")),U=a.n(V),G={name:"QuickMaintain",props:{qualifiedName:{type:String,default:""},methodName:{type:String,default:""},methodId:{type:Number,default:0},alias:{type:String,default:""},isRequest:{type:Boolean,default:!0},handleUpdateParamList:{type:Function,default:function(){}},provideWay:{type:Number,default:0},tableData:{type:Array,default:function(){return[]}}},data:function(){return{pullFromJsfDebounceTimer:null,uploadUrl:"".concat(window.env.gatewayFileBaseApi,"lop/mulfile/upload?LOP-DN=").concat(window.env.gatewayUploadLopDnXml),importXmlDialogVisible:!1,importXmlFormData:{method:"uploadFile",fileList:[]},importXmlFormRules:{method:[{required:!0,message:"请选择导入方式"}],fileList:[{type:"array",required:!0,message:"请上传XML文件"}]},importXmlFormList:[{prop:"method",label:"导入方式"},{prop:"fileList",label:"导入操作"}],importXmlDebounceTimer:null,importXmlSaveLoading:!1,importJsonFormData:{method:"uploadFile",fileList:[]},importJsonFormRules:{method:[{required:!0,message:"请选择导入方式"}],fileList:[{type:"array",required:!0,message:"请上传JSON文件"}]},importJsonDialogVisible:!1,jsonEditDialogVisible:!1,jsonEditor:void 0,jsonEditDebounceTimer:null}},computed:{computeQuickMaintainTipText:function(){return"更新将覆盖原有".concat({true:"请求",false:"响应"}[this.isRequest],"参数，请谨慎操作！")}},methods:{findApiStatus:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.qualifiedName,a=this.methodName,i=this.alias,t&&a&&i){e.next=4;break}throw this.$message.error("从JSF注册中心拉取不到元数据，请确认在【基础数据】维护的JSF信息是否正确？"),new Error("qualifiedName or methodName or alias is empty!");case 4:return s=[{qualifiedName:t,jsfAlias:i,methodList:[a]}],e.next=9,R.a.findApiStatus(s);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),quickMaintainApiDocByJsf:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s,o,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qualifiedName,a=this.methodName,i=this.alias,s=this.methodId,o=this.isRequest,n=[{qualifiedName:t,methodName:a,alias:i,methodId:s,judgeType:{true:1,false:2}[o]||1}],e.next=7,J.a.quickMaintainApiDocByJsf(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),quickMaintainApiDocByXml:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i,s,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.isRequest,i={true:1,false:2},2,s=parseInt(this.$route.params.id),o=[{appId:s,judgeType:i[a]||1,type:2,jssKey:t}],e.next=8,J.a.quickMaintainApiDocByXml(o);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleCommandDropdownItem:function(e){var t=this;({importXml:function(){return t.handleClickImportXml()},importJson:function(){return t.handleClickImportJson()},pullFromJsf:function(){return t.handleClickPullFromJsf()},jsonEdit:function(){return t.handleClickJsonEdit()}})[e]()},handleClickPullFromJsf:function(){var e=this;clearTimeout(this.pullFromJsfDebounceTimer),this.pullFromJsfDebounceTimer=setTimeout(Object(i.a)(Object(r.a)().mark((function t(){var a,i,s,o,n,l,c;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.findApiStatus().catch((function(t){throw 10003===t.code&&e.$message.error("从JSF注册中心拉取不到元数据，请确认在【基础数据】维护的JSF信息是否正确？"),new Error("handleClickConfirmPullFromJsf findApiStatus")}));case 2:return t.next=4,e.quickMaintainApiDocByJsf().catch((function(){throw new Error("handleClickConfirmPullFromJsf quickMaintainApiDocByJsf")}));case 4:a=t.sent,i=a.data,s=i.inParamList,o=void 0===s?[]:s,n=i.outParamList,l=void 0===n?[]:n,c=e.isRequest,e.handleUpdateParamList(c,c?o:l),e.$message.success("操作成功！");case 10:case"end":return t.stop()}}),t)}))),300)},handleClickImportXml:function(){this.importXmlDialogVisible=!0},handleChangeImportXmlUpload:function(e,t){t&&t.length>0&&(this.importXmlFormData.fileList=[e])},handleSuccessImportXmlUpload:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i,s,o,n,l,c,u,p,d=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(F.a)(t.fileName,1),i=a[0],e.next=3,this.quickMaintainApiDocByXml(i).catch((function(){throw d.importXmlSaveLoading=!1,new Error("handleSuccessImportXmlUpload quickMaintainApiDocByXml")}));case 3:s=e.sent,o=s.data,n=o.inParamList,l=void 0===n?[]:n,c=o.outParamList,u=void 0===c?[]:c,p=this.isRequest,this.handleUpdateParamList(p,p?l:u),this.importXmlDialogVisible=!1,this.importXmlSaveLoading=!1,this.$message.success("操作成功！");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleErrorImportXmlUpload:function(){this.importXmlSaveLoading=!1,this.importXmlFormData.fileList=[],this.$message.error("上传失败，请重新上传")},handleClickConfirmImportXml:function(){var e=this;clearTimeout(this.importXmlDebounceTimer),this.importXmlDebounceTimer=setTimeout(Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.importXmlSaveLoading=!0,t.next=3,e.$refs.importXmlForm.validate().catch((function(){throw e.importXmlSaveLoading=!1,new Error("handleClickConfirmImportXml validate")}));case 3:e.$refs.importXmlFormUpload[0].submit();case 4:case"end":return t.stop()}}),t)}))),300)},handleClickImportJson:function(){this.importJsonDialogVisible=!0},handleJsonExceed:function(){this.$message.warning("当前限制只能选择 1 个文件，请删除已选文件后重新上传")},handleErrorImportJsonUpload:function(){this.importJsonFormData.fileList=[],this.$message.error("上传失败，请重新上传")},handleBeforeUpload:function(e){if(e.size/1024>500)return this.$message.error("导入失败，文件大小超过500KB"),!1},handleRemoveImportJsonUpload:function(e,t){this.importJsonFormData.fileList=[]},handleSuccessImportJsonUpload:function(e,t,a){this.importJsonFormData.fileList=a},handleSaveImportJson:function(){var e=this;this.$refs.importJsonForm.validate(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){var i,s,o,n,l,c,u,p;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return i=e.importJsonFormData.fileList[0].name,t.next=4,e.quickMaintainApiDocByJson(i).catch((function(){throw e.importJsonFormData.fileList=[],new Error("handleSaveImportJson quickMaintainApiDocByJson")}));case 4:s=t.sent,o=s.data,n=o.inParamList,l=void 0===n?[]:n,c=o.outParamList,u=void 0===c?[]:c,p=e.isRequest,e.handleUpdateParamList(p,p?l:u),e.importJsonDialogVisible=!1,e.$message.success("导入成功，可继续在页面维护API文档详细信息"),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},quickMaintainApiDocByJson:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,i,s,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.isRequest,i={true:1,false:2},2,s=parseInt(this.$route.params.id),o=[{appId:s,judgeType:i[a]||1,type:2,jssKey:t}],e.next=8,B.a.quickMaintainApiDocByJson(o);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleClickJsonEdit:function(){var e=this;this.jsonEditDialogVisible=!0,clearTimeout(this.jsonEditDebounceTimer),this.jsonEditDebounceTimer=setTimeout((function(){var t=document.getElementById("jsonEdit_"+e.isRequest);e.jsonEditor||(e.jsonEditor=new X.a(t,{mode:"code",search:!1,enableSort:!1,enableTransform:!1,language:"zh-CN",onChange:function(){}})),e.jsonEditor.set(e.tableData)}),300)},handleJsonEdit:function(){var e=this.isRequest;this.handleUpdateParamList(e,this.jsonEditor.get()),this.jsonEditDialogVisible=!1},copyCodeText:function(){var e=this,t=new U.a(".copyCodeText",{text:function(){return JSON.stringify(e.jsonEditor.get(),null,2)}});t.on("success",(function(){e.$message.success("复制成功！"),t.destroy()})),t.on("error",(function(){e.$message.error("复制失败！"),t.destroy()}))}}},W=G,z=(a("3516"),Object(l.a)(W,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quick-maintain"},[a("el-dropdown",{staticClass:"quick-maintain__dropdown",attrs:{trigger:"click"},on:{command:e.handleCommandDropdownItem}},[a("span",[e._v("快速维护"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"jsonEdit"}},[e._v("JSON编辑")]),a("el-dropdown-item",{attrs:{command:"importXml"}},[e._v("导入XML文件")]),a("el-dropdown-item",{attrs:{command:"importJson"}},[e._v("导入JSON报文")]),1===e.provideWay?a("el-dropdown-item",{attrs:{command:"pullFromJsf"}},[e._v("从JSF注册中心拉取元数据")]):e._e()],1)],1),a("el-dialog",{attrs:{"custom-class":"import-xml-dialog",title:"导入XML文件",width:"480px",visible:e.importXmlDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.importXmlDialogVisible=t},close:function(t){return e.$refs.importXmlForm.resetFields()}}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form",{ref:"importXmlForm",staticClass:"import-xml-form",attrs:{model:e.importXmlFormData,rules:e.importXmlFormRules}},e._l(e.importXmlFormList,(function(t){return a("el-form-item",{key:t.prop,attrs:{prop:t.prop,label:t.label,"label-width":"100px"}},[["method"].includes(t.prop)?[a("el-radio-group",{staticStyle:{margin:"8px",width:"100%"},model:{value:e.importXmlFormData.method,callback:function(t){e.$set(e.importXmlFormData,"method",t)},expression:"importXmlFormData.method"}},[a("el-radio",{attrs:{label:"uploadFile"}},[e._v("上传文件")])],1)]:["fileList"].includes(t.prop)?[a("el-upload",{ref:"importXmlFormUpload",refInFor:!0,staticClass:"import-xml-form__upload",attrs:{action:e.uploadUrl,"file-list":e.importXmlFormData.fileList,"auto-upload":!1,"on-change":e.handleChangeImportXmlUpload,"on-success":e.handleSuccessImportXmlUpload,"on-error":e.handleErrorImportXmlUpload}},[a("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传XML文件，且不超过500kb ")])],1)]:e._e()],2)})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importXmlDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.importXmlSaveLoading},on:{click:e.handleClickConfirmImportXml}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-json-dialog",title:"导入",width:"560px",visible:e.importJsonDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.importJsonDialogVisible=t},close:function(t){return e.$refs.importJsonForm.resetFields()}}},[a("el-form",{ref:"importJsonForm",staticClass:"json-dialog-form",attrs:{model:e.importJsonFormData,rules:e.importJsonFormRules,"label-width":"100px"}},[a("p",{staticClass:"quick-maintain-tip"},[e._v(e._s(e.computeQuickMaintainTipText))]),a("el-form-item",{attrs:{prop:"method",label:"导入方式"}},[a("el-radio-group",{model:{value:e.importXmlFormData.method,callback:function(t){e.$set(e.importXmlFormData,"method",t)},expression:"importXmlFormData.method"}},[a("el-radio",{attrs:{label:"uploadFile"}},[e._v("文件导入")])],1)],1),a("el-form-item",{attrs:{prop:"fileList",label:"导入操作"}},[a("el-upload",{ref:"importJsonFormUpload",staticClass:"form__upload",attrs:{action:e.uploadUrl,"file-list":e.importJsonFormData.fileList,limit:1,"on-exceed":e.handleJsonExceed,"before-upload":e.handleBeforeUpload,"on-remove":e.handleRemoveImportJsonUpload,"on-success":e.handleSuccessImportJsonUpload,"on-error":e.handleErrorImportJsonUpload}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"}},[e._v("上传文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 上传的文件大小不能超过500kb ")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importJsonDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveImportJson}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{"custom-class":"import-json-dialog",title:e.isRequest?"JSON编辑请求参数":"JSON编辑响应参数",width:"832px",visible:e.jsonEditDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.jsonEditDialogVisible=t}}},[a("div",{staticClass:"dialog-flex",attrs:{div:""}},[a("div",{staticClass:"dialog-flex-left"},[e._v("使用方法见"),a("a",{attrs:{href:"http://lcp.jdl.com/#/apiNewHand/55044",target:"_blank"}},[e._v("JSON编辑操作指南")])]),a("div",{staticClass:"dialog-flex-right"},[a("a",{staticClass:"copyCodeText",on:{click:function(t){return e.copyCodeText()}}},[e._v("复制代码")])])]),a("div",{staticClass:"json-view-container",staticStyle:{width:"800px",height:"400px"},attrs:{id:"jsonEdit_"+e.isRequest}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.jsonEditDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleJsonEdit}},[e._v("确定")])],1)])],1)}),[],!1,null,"c15c6922",null)),H=z.exports,K=a("3342"),Q={name:"ApiDoc",components:{StickyWrapper:m.a,Title:d.a,ParamTable:A,ErrorCodeTable:$,QuickMaintain:H},props:{disabledEdit:{type:Boolean,required:!0},groupCode:{type:String,required:!0}},data:function(){return{loading:!0,editable:!1,requestParamTableData:[],requestParamTableEditedData:[],responseParamTableData:[],responseParamTableEditedData:[],errorCodeTableData:[],errorCodeTableEditedData:[],debounceTimer:null,saveLoading:!1,provideWay:0,qualifiedName:"",methodId:0,methodName:"",alias:""}},watch:{requestParamTableData:{handler:function(e){this.requestParamTableEditedData=JSON.parse(JSON.stringify(e))}},responseParamTableData:{handler:function(e){this.responseParamTableEditedData=JSON.parse(JSON.stringify(e))}},errorCodeTableData:{handler:function(e){this.errorCodeTableEditedData=JSON.parse(JSON.stringify(e))}}},methods:{findApiDoc:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=this.groupCode,i={id:t,groupCode:a},e.next=5,K.a.findApiDoc(i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateApiDoc:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 2,t=this.requestParamTableEditedData,a=this.responseParamTableEditedData,i=this.errorCodeTableEditedData,s=parseInt(this.$route.params.id),o=[{type:2,id:s,inParamList:t,outParamList:a,errorCodeList:i}],e.next=9,B.a.updateApiDoc(o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),loadApiMethodData:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s,o,n,l,c,u,p,d,m,f;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.findApiDoc().catch((function(){throw new Error("loadApiMethodData findApiDoc")}));case 3:t=e.sent,a=t.data,i=a.inParamList,s=void 0===i?[]:i,o=a.outParamList,n=void 0===o?[]:o,l=a.errorCodeList,c=void 0===l?[]:l,u=a.type,p=void 0===u?0:u,d=a.interfaceName,m=a.id,f=window.env.baseEnv,this.requestParamTableData=this.initTableData(s),this.responseParamTableData=this.initTableData(n),this.errorCodeTableData=c,this.provideWay=p,this.qualifiedName=d,this.methodId=m,this.methodName=a["".concat(f,"Method")]||"",this.alias=a["".concat(f,"Alias")]||"",this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initTableData:function(e){var t=this;return e.map((function(e){var a=e.children;return a=a&&a.length>0?t.initTableData(a):[],Object(S.a)(Object(S.a)({},e),{},{children:a})}))},handleUpdateParamList:function(){var e=arguments.length>1?arguments[1]:void 0;this[{true:"requestParamTableEditedData",false:"responseParamTableEditedData"}[!(arguments.length>0&&void 0!==arguments[0])||arguments[0]]||"requestParamTableEditedData"]=this.initTableData(e)},handleClickCancel:function(){this.requestParamTableData=Object(s.a)(this.requestParamTableData),this.responseParamTableData=Object(s.a)(this.responseParamTableData),this.errorCodeTableData=Object(s.a)(this.errorCodeTableData),this.editable=!1},handleClickSave:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.saveLoading=!0,t.next=3,Promise.all([e.$refs.requestParamTable.validateTable(),e.$refs.responseParamTable.validateTable(),e.$refs.errorCodeTable.validateTable()]).catch((function(){throw e.saveLoading=!1,new Error("handleClickSave validate")}));case 3:return t.next=5,e.updateApiDoc().catch((function(){throw e.saveLoading=!1,new Error("handleClickSave updateApiDoc")}));case 5:e.editable=!1,e.$message.success("操作成功！"),e.saveLoading=!1,e.loadApiMethodData(),e.$emit("updateGetApi");case 10:case"end":return t.stop()}}),t)}))),300)}},created:function(){this.loadApiMethodData()}},Z=Q,Y=(a("0e49"),Object(l.a)(Z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"api-doc"},[e.editable?a("div",{staticClass:"content__title"},[a("Title",{attrs:{text:"请求参数"}}),a("QuickMaintain",{attrs:{qualifiedName:e.qualifiedName,methodId:e.methodId,methodName:e.methodName,alias:e.alias,isRequest:!0,handleUpdateParamList:e.handleUpdateParamList,provideWay:e.provideWay,tableData:e.requestParamTableEditedData}})],1):a("Title",{attrs:{text:"请求参数"}}),a("ParamTable",{ref:"requestParamTable",attrs:{editable:e.editable,isRequest:!0,paramTableData:e.requestParamTableData,paramTableEditedData:e.requestParamTableEditedData},on:{"update:paramTableData":function(t){e.requestParamTableData=t},"update:param-table-data":function(t){e.requestParamTableData=t},"update:paramTableEditedData":function(t){e.requestParamTableEditedData=t},"update:param-table-edited-data":function(t){e.requestParamTableEditedData=t}}}),e.editable?a("div",{staticClass:"content__title"},[a("Title",{attrs:{text:"响应参数"}}),a("QuickMaintain",{attrs:{qualifiedName:e.qualifiedName,methodId:e.methodId,methodName:e.methodName,alias:e.alias,isRequest:!1,handleUpdateParamList:e.handleUpdateParamList,provideWay:e.provideWay,tableData:e.responseParamTableEditedData}})],1):a("Title",{attrs:{text:"响应参数"}}),a("ParamTable",{ref:"responseParamTable",attrs:{editable:e.editable,isRequest:!1,paramTableData:e.responseParamTableData,paramTableEditedData:e.responseParamTableEditedData},on:{"update:paramTableData":function(t){e.responseParamTableData=t},"update:param-table-data":function(t){e.responseParamTableData=t},"update:paramTableEditedData":function(t){e.responseParamTableEditedData=t},"update:param-table-edited-data":function(t){e.responseParamTableEditedData=t}}}),a("Title",{attrs:{text:"错误码"}}),a("ErrorCodeTable",{ref:"errorCodeTable",attrs:{editable:e.editable,errorCodeTableData:e.errorCodeTableData,errorCodeTableEditedData:e.errorCodeTableEditedData}}),a("StickyWrapper",[e.editable?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.handleClickSave}},[e._v("保 存")])],1):a("el-button",{attrs:{type:"primary",disabled:e.disabledEdit},on:{click:function(t){e.editable=!0}}},[e._v("编 辑")])],1)],1)}),[],!1,null,"0ba62cae",null)),ee=Y.exports,te=a("9eec"),ae=a.n(te),re=a("7562"),ie={name:"HttpDetail",components:{HeaderInfo:u,BasicInfo:L,ApiDoc:ee},data:function(){return{loading:!0,imagePath:ae.a,url:"url",name:"name",createUser:"createUser",createTime:new Date,isOnline:0,status:0,remark:"",visibility:0,dataLevel:0,type:2,testCluster:{},uatCluster:{},prodCluster:{},domain:{},lcpApp:{},productPrincipal:"",developPrincipal:"",operationPrincipal:"",groupCode:"",activeName:this.$route.query.tab||"basic-data",sensitive:{visible:!1,level:"",hits:[]},interfaceName:"",testAlias:"",uatAlias:"",prodAlias:"",method:"",testToken:"",uatToken:"",prodToken:"",labelIdList:null}},computed:{computeShowStatus:function(){return{0:1,1:{1:3,3:3,4:2}[this.status]}[this.isOnline]},httpBtnStatus:function(){var e={visible:!0,disabled:!1},t={text:"",className:""};return 0==+this.isOnline&&1==+this.status?(t.text="初始化",t.className="status status_init"):1==+this.isOnline&&1==+this.status?(t.text="编辑中",t.className="status status_edit"):3==+this.status||9==+this.status||7==+this.status?(t.text="审批中",t.className="status status_approve",e.disabled=!0):4==+this.status?(t.text="已发布",t.className="status status_released",e.disabled=!0):6===this.status&&(t.text="已下线",t.className="status status_offline",e.disabled=!1),{publish:e,statusInfo:t}},computePublishDisabled:function(){return 3==+this.status||9==+this.status||7==+this.status||4==+this.status},computeEditDisabled:function(){return 3==+this.status||9==+this.status||7==+this.status||6==+this.status},displaySensitiveTokens:function(){return Object(s.a)(new Set(this.sensitive.hits.map((function(e){return e.text})))).join("、")}},methods:{getApi:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=[{id:t}],e.next=4,B.a.getApi(a).catch((function(e){var t=e.data.message;throw t&&i.$message.error(t),new Error(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),verifyApiSummaryFull:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=[{id:t}],e.next=4,B.a.verifyApiSummaryFull(a).catch((function(e){var t=e.data.message;throw t&&i.$message.error(t),new Error(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickTab:function(){var e={id:this.$route.params.id},t={tab:this.activeName};this.$router.push({name:"ApiManagerMobileDetail",params:e,query:t})},publishApi:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.verifyApiSummaryFull();case 2:this.sensitive.visible?this.$router.push({name:"PublishMobileApi"}):(t=this.$route.params.id,a=[{id:t}],re.a.post("/HttpApiService/detectApi",a).then((function(e){return e.data})).then((function(e){e.level?(i.sensitive.level=e.level,i.sensitive.hits=e.hits,i.sensitive.visible=!0):i.$router.push({name:"PublishMobileApi"})})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateGetApi:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,s,o,n,l,c,u,p,d,m,f,h,b,v,g,w,D,y,C,I,T,k,x,L,S,_,P,j,O,A,N,E,q,$,F;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getApi();case 3:t=e.sent,a=t.data,i=a.url,s=a.name,o=a.createUser,n=a.createTime,l=a.isOnline,c=a.status,u=a.remark,p=a.visibility,d=a.dataLevel,m=a.type,f=a.testClusterId,h=a.testClusterName,b=a.uatClusterId,v=a.uatClusterName,g=a.prodClusterId,w=a.prodClusterName,D=a.domainId,y=a.domainCode,C=a.domainName,I=a.lcpAppId,T=a.lcpAppKey,k=a.lcpAppName,x=a.productPrincipal,L=a.developPrincipal,S=a.operationPrincipal,_=a.groupCode,P=a.interfaceName,j=a.testAlias,O=a.uatAlias,A=a.prodAlias,N=a.method,E=a.testToken,q=a.uatToken,$=a.prodToken,F=a.labelIdList,this.url=i,this.name=s,this.createUser=o,this.createTime=n,this.isOnline=l,this.status=c,this.remark=u,this.visibility=p,this.dataLevel=d,this.type=m,this.testCluster={testClusterId:f,testClusterName:h},this.uatCluster={uatClusterId:b,uatClusterName:v},this.prodCluster={prodClusterId:g,prodClusterName:w},this.domain={domainId:D,domainCode:y,domainName:C},this.lcpApp={lcpAppId:I,lcpAppKey:T,lcpAppName:k},this.productPrincipal=x||"",this.developPrincipal=L||"",this.operationPrincipal=S||"",this.groupCode=_,this.interfaceName=P,this.testAlias=j,this.uatAlias=O,this.prodAlias=A,this.method=N,this.testToken=E,this.uatToken=q,this.prodToken=$,this.labelIdList=F||[],this.loading=!1;case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),gotoUpdateApi:function(){this.sensitive.visible=!1}},created:function(){this.updateGetApi()}},se=ie,oe=(a("44cc"),Object(l.a)(se,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"http-detail"},[a("HeaderInfo",{attrs:{imagePath:e.imagePath,url:e.url,name:e.name,createUser:e.createUser,createTime:e.createTime,showStatus:e.computeShowStatus,statusInfo:e.httpBtnStatus.statusInfo}},[a("el-button",{attrs:{type:"primary",disabled:e.computePublishDisabled},on:{click:e.publishApi}},[e._v("发布")])],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础数据",name:"basic-data"}},["basic-data"===e.activeName&&e.labelIdList?a("BasicInfo",{attrs:{disabledEdit:e.computeEditDisabled,showStatus:e.computeShowStatus,name:e.name,remark:e.remark,visibility:e.visibility,dataLevel:e.dataLevel,type:e.type,testCluster:e.testCluster,uatCluster:e.uatCluster,prodCluster:e.prodCluster,domain:e.domain,lcpApp:e.lcpApp,productPrincipal:e.productPrincipal,developPrincipal:e.developPrincipal,operationPrincipal:e.operationPrincipal,interfaceName:e.interfaceName,testAlias:e.testAlias,uatAlias:e.uatAlias,prodAlias:e.prodAlias,method:e.method,testToken:e.testToken,uatToken:e.uatToken,prodToken:e.prodToken,leafIdList:e.labelIdList},on:{updateGetApi:e.updateGetApi}}):e._e()],1),a("el-tab-pane",{attrs:{label:"API文档",name:"api-doc"}},["api-doc"===e.activeName&&e.groupCode?a("ApiDoc",{attrs:{disabledEdit:e.computeEditDisabled,groupCode:e.groupCode},on:{updateGetApi:e.updateGetApi}}):e._e()],1)],1),a("el-dialog",{attrs:{title:"数据级别校验提示",visible:e.sensitive.visible},on:{"update:visible":function(t){return e.$set(e.sensitive,"visible",t)}}},[a("span",[e._v("API文档中包含【"+e._s(e.sensitive.level)+"】数据级别关键字: "),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.displaySensitiveTokens))]),e._v(", 与API的当前【L"+e._s(e.dataLevel)+"】数据级别不符，请确认是否去更新API数据级别？")]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.publishApi}},[e._v("继续发布API")]),a("el-button",{attrs:{type:"primary"},on:{click:e.gotoUpdateApi}},[e._v("去更新")])],1)])],1)}),[],!1,null,"374b2cc2",null)),ne={name:"detail",components:{HttpDetail:oe.exports}},le=(a("9fc4"),Object(l.a)(ne,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"detail"},[t("HttpDetail")],1)}),[],!1,null,"3e4ec251",null));t.default=le.exports},"2f6a":function(e,t,a){},3516:function(e,t,a){"use strict";a("0e47")},"43b3":function(e,t,a){"use strict";var r={name:"Title",props:{text:{type:String,default:""}}},i=(a("b61a"),a("2877")),s=Object(i.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",{staticClass:"title__icon"}),a("div",{staticClass:"title__text"},[e._v(e._s(e.text))])])}),[],!1,null,"3d118947",null);t.a=s.exports},"44cc":function(e,t,a){"use strict";a("04d5")},"4c63":function(e,t,a){"use strict";a("6b90")},"631a":function(e,t,a){"use strict";a("e58e9")},6733:function(e,t,a){},"6b90":function(e,t,a){},7258:function(e,t,a){},"815e":function(e,t,a){"use strict";a("ebec")},9572:function(e,t,a){"use strict";var r=a("c7eb"),i=(a("7f7f"),a("96cf"),a("1da1")),s=(a("3b2b"),a("ac6a"),a("456d"),a("0e07")),o={name:"CreateClusterDialog",props:{createClusterDialogVisible:{type:Boolean,required:!0}},data:function(){var e=this;return{active:0,stepList:[{title:"填写基本信息"},{title:"添加IP端口"},{title:"设置超时时间"},{title:"创建成功"}],clusterBasicInfoData:{name:"",useType:null,type:null,desc:""},clusterBasicInfoRules:{name:[{required:!0,message:"请输入集群名称"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/,message:"请输入中文、英文字母或数字"},{min:2,max:20,message:"请输入2到20个字符"}],useType:[{required:!0,message:"请选择集群用途"}],type:[{required:!0,message:"请选择集群类型"}],desc:[{required:!0,message:"请描述集群的使用场景"}]},useTypeOptionList:[{value:1,label:"服务路由"}],typeOptionList:[{value:2,label:"HTTP服务"},{value:3,label:"HTTP流"}],addIpPortData:{cloudServerList:[{host:"",port:null,weight:1,isBackup:0,down:0,resolve:0}]},addIpPortRules:{host:[{validator:function(t,a,r,i){var s=Object.keys(i)[0],o=s.indexOf("[")+1,n=s.indexOf("]"),l=s.slice(o,n);if(0===e.addIpPortData.cloudServerList[l].resolve)if(""===a)r(new Error("请输入IP"));else{RegExp(/^((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)(\.((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)){3}$/).test(a)?r():r(new Error("请输入正确的IP"))}else if(1===e.addIpPortData.cloudServerList[l].resolve)if(""===a)r(new Error("请输入域名"));else{RegExp(/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/).test(a)?r():r(new Error("请输入正确的域名"))}else r(new Error("请选择IP/域名"))}}],port:[{required:!0,message:"请输入端口"},{pattern:/^[0-9]*$/,message:"请输入数字"}],weight:[{required:!0,message:"请输入权重"},{pattern:/^[0-9]*$/,message:"请输入数字"}]},cloudServerListColumnList:[{label:"IP/域名",prop:"host",width:"240"},{label:"端口",prop:"port"},{label:"权重",prop:"weight"},{label:"是否备用",prop:"isBackup"},{label:"是否停用",prop:"down"}],resolveOptionList:[{value:0,label:"IP"},{value:1,label:"域名"}],isBackupOptionList:[{value:0,label:"否"},{value:1,label:"是"}],downOptionList:[{value:0,label:"否"},{value:1,label:"是"}],setTheTimeoutData:{connectTimeout:500,readTimeout:5e3,sendTimeout:5e3,reliveTimeout:1e4},setTheTimeoutRules:{connectTimeout:[{required:!0,message:"请设置连接超时时间/ms"}],readTimeout:[{required:!0,message:"请设置读取超时时间/ms"}],sendTimeout:[{required:!0,message:"请设置发送超时时间/ms"}],reliveTimeout:[{required:!0,message:"请设置自动复活时间/ms"}]},setTheTimeoutList:[{label:"连接超时时间/ms",prop:"connectTimeout"},{label:"读取超时时间/ms",prop:"readTimeout"},{label:"发送超时时间/ms",prop:"sendTimeout"},{label:"自动复活时间/ms",prop:"reliveTimeout"}],nextStepLoading:!1}},computed:{computeNextStepText:function(){return 2===this.active?"保存":"下一步"}},methods:{cloudClusterSave:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,i,o,n,l,c,u,p,d,m,f,h=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 3,t=this.clusterBasicInfoData,a=t.name,i=t.useType,o=t.type,n=t.desc,l=this.addIpPortData.cloudServerList,c=this.setTheTimeoutData,u=c.connectTimeout,p=c.sendTimeout,d=c.readTimeout,m=c.reliveTimeout,f={name:a,useType:i,type:o,desc:n,cloudServerList:l,connectTimeout:u,sendTimeout:p,readTimeout:d,reliveTimeout:m,sceneType:3},e.next=7,s.a.cloudClusterSave(f).catch((function(e){var t=e.data.message;throw t&&h.$message.error(t),new Error(e)}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),judgeHostPlaceholder:function(e){return{0:"请输入IP",1:"请输入域名"}[this.addIpPortData.cloudServerList[e].resolve]},addRowData:function(){this.addIpPortData.cloudServerList.push({host:"",port:null,weight:1,isBackup:0,down:0,resolve:0})},removeRowData:function(e){this.addIpPortData.cloudServerList.splice(e,1)},dialogBeforeClose:function(){var e=this;["clusterBasicInfoData","addIpPortData","setTheTimeoutData"].forEach((function(t){e.$refs[t].resetFields()})),this.active=0,this.$emit("update:createClusterDialogVisible",!1),this.$emit("queryRefresh",!0)},nextStep:function(){var e=this;this.$refs[{0:"clusterBasicInfoData",1:"addIpPortData",2:"setTheTimeoutData"}[this.active]].validate(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}if(2!==e.active){t.next=5;break}return e.nextStepLoading=!0,t.next=5,e.cloudClusterSave().catch((function(t){e.nextStepLoading=!1;var a=t.data.message;throw a&&e.$message.error(a),new Error(t)}));case 5:e.active+=1,e.nextStepLoading=!1,t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},continueCreate:function(){var e=this;["clusterBasicInfoData","addIpPortData","setTheTimeoutData"].forEach((function(t){e.$refs[t].resetFields()})),this.active=0}}},n=o,l=(a("4c63"),a("2877")),c=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"create-cluster-dialog",attrs:{visible:e.createClusterDialogVisible,"close-on-click-modal":!1,title:"创建集群",width:"800px"},on:{close:e.dialogBeforeClose}},[a("div",{staticClass:"create-cluster-dialog__content"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},e._l(e.stepList,(function(e,t){return a("el-step",{key:t,attrs:{title:e.title}})})),1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],ref:"clusterBasicInfoData",staticClass:"create-cluster-dialog__form",attrs:{model:e.clusterBasicInfoData,rules:e.clusterBasicInfoRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"集群名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入集群名称"},model:{value:e.clusterBasicInfoData.name,callback:function(t){e.$set(e.clusterBasicInfoData,"name","string"==typeof t?t.trim():t)},expression:"clusterBasicInfoData.name"}})],1),a("el-form-item",{attrs:{label:"集群用途",prop:"useType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群用途"},model:{value:e.clusterBasicInfoData.useType,callback:function(t){e.$set(e.clusterBasicInfoData,"useType",t)},expression:"clusterBasicInfoData.useType"}},e._l(e.useTypeOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"集群类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群类型"},model:{value:e.clusterBasicInfoData.type,callback:function(t){e.$set(e.clusterBasicInfoData,"type",t)},expression:"clusterBasicInfoData.type"}},e._l(e.typeOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"集群描述",prop:"desc"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请描述集群的使用场景"},model:{value:e.clusterBasicInfoData.desc,callback:function(t){e.$set(e.clusterBasicInfoData,"desc","string"==typeof t?t.trim():t)},expression:"clusterBasicInfoData.desc"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"addIpPortData",staticClass:"create-cluster-dialog__second-form",attrs:{model:e.addIpPortData,rules:e.addIpPortRules}},[a("el-table",{attrs:{data:e.addIpPortData.cloudServerList,"max-height":"180"}},[e._l(e.cloudServerListColumnList,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t.label,prop:t.prop,width:t.width},scopedSlots:e._u([{key:"default",fn:function(r){var i=r.$index;return["host"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].host",rules:e.addIpPortRules.host}},[a("div",{staticClass:"item-content"},[a("el-select",{staticStyle:{width:"40%"},model:{value:e.addIpPortData.cloudServerList[i].resolve,callback:function(t){e.$set(e.addIpPortData.cloudServerList[i],"resolve",t)},expression:"addIpPortData.cloudServerList[$index].resolve"}},e._l(e.resolveOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:e.judgeHostPlaceholder(i)},model:{value:e.addIpPortData.cloudServerList[i].host,callback:function(t){e.$set(e.addIpPortData.cloudServerList[i],"host","string"==typeof t?t.trim():t)},expression:"addIpPortData.cloudServerList[$index].host"}})],1)])]:"port"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].port",rules:e.addIpPortRules.port}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"端口"},model:{value:e.addIpPortData.cloudServerList[i].port,callback:function(t){e.$set(e.addIpPortData.cloudServerList[i],"port",e._n(t))},expression:"addIpPortData.cloudServerList[$index].port"}})],1)]:"weight"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].weight",rules:e.addIpPortRules.weight}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"权重"},model:{value:e.addIpPortData.cloudServerList[i].weight,callback:function(t){e.$set(e.addIpPortData.cloudServerList[i],"weight",e._n(t))},expression:"\n                    addIpPortData.cloudServerList[$index].weight\n                  "}})],1)]:"isBackup"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].isBackup",rules:e.addIpPortRules.isBackup}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.addIpPortData.cloudServerList[i].isBackup,callback:function(t){e.$set(e.addIpPortData.cloudServerList[i],"isBackup",t)},expression:"addIpPortData.cloudServerList[$index].isBackup"}},e._l(e.isBackupOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:"down"===t.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].down",rules:e.addIpPortRules.isBackup}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.addIpPortData.cloudServerList[i].down,callback:function(t){e.$set(e.addIpPortData.cloudServerList[i],"down",t)},expression:"addIpPortData.cloudServerList[$index].down"}},e._l(e.downOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e()]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.$index;return[a("div",{staticClass:"icon-wrapper"},[r>0?a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.removeRowData(r)}}}):e._e()])]}}])})],2),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{icon:"el-icon-plus",plain:""},on:{click:e.addRowData}},[e._v("添加")])],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"setTheTimeoutData",staticClass:"create-cluster-dialog__form",attrs:{model:e.setTheTimeoutData,rules:e.setTheTimeoutRules,"label-width":"140px"}},e._l(e.setTheTimeoutList,(function(t,r){return a("el-form-item",{key:r,attrs:{label:t.label,prop:t.prop}},[a("el-input-number",{attrs:{min:1,step:100,precision:0,"controls-position":"right"},model:{value:e.setTheTimeoutData[t.prop],callback:function(a){e.$set(e.setTheTimeoutData,t.prop,a)},expression:"setTheTimeoutData[item.prop]"}})],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active === 3"}],staticClass:"create-success"},[a("i",{staticClass:"el-icon-success normalColor"}),a("p",{staticClass:"create-success__title"},[e._v("创建成功")])])],1),a("div",{staticClass:"create-cluster-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[0===e.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1):1===e.active||2===e.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:function(t){e.active-=1}}},[e._v("上一步")]),a("el-button",{attrs:{type:"primary",loading:e.nextStepLoading},on:{click:e.nextStep}},[e._v(e._s(e.computeNextStepText))])],1):3===e.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:e.continueCreate}},[e._v("继续创建")])],1):e._e()])])}),[],!1,null,"0395e54e",null);t.a=c.exports},"9a95":function(e,t,a){},"9aea":function(e,t,a){},"9fc4":function(e,t,a){"use strict";a("7258")},a701:function(e,t,a){"use strict";a("b5cf")},a77f:function(e,t,a){"use strict";a("9aea")},b5cf:function(e,t,a){},b61a:function(e,t,a){"use strict";a("2f6a")},e58e9:function(e,t,a){},ebec:function(e,t,a){},f04c:function(e,t,a){"use strict";a("9a95")}}]);