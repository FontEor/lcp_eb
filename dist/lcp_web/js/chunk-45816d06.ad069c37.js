(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45816d06"],{"0e07":function(e,t,i){"use strict";var a=i("7aef"),s=i("7562"),r=(i("b775"),{queryList:function(e){return s.a.post("/ApiManagerService/queryCloudClusterList",[e])},cloudClusterSave:function(e){return s.a.post("/ApiManagerService/saveCloudCluster",[e])},cloudClusterUpdate:function(e){return s.a.post("/ApiManagerService/updateCloudCluster",[e])},findUser:function(e){return a.a.get("/hrInfo/findUser",{params:e})},findSupplierUserByErp:function(e){return a.a.get("/supplier/findSupplierUserByErp",{params:e})},saveBaseInfo:function(e){return s.a.post("/HttpApiService/saveBaseInfo",[e])},queryApiReleaseByCondition:function(e){return s.a.post("/ApiDepotService/queryApiReleaseByCondition",JSON.stringify(e))},queryAliasByInterface:function(e){return s.a.post("/JsfApiMetaService/queryAliasByInterface",JSON.stringify(e))},getMethodList:function(e){return s.a.post("/ApiDepotService/queryApiReleaseByCondition",JSON.stringify(e))},queryMethodByInterface:function(e){return s.a.post("/JsfApiMetaService/queryMethodByInterface",JSON.stringify(e))},getSensitiveLabelForest:function(){return s.a.post("/HttpApiService/querySensitiveLabelForest")}});t.a=r},"10d1":function(e,t,i){"use strict";i("425e")},1667:function(e,t,i){"use strict";i("7aef");var a=i("7562"),s=i("0e07"),r=i("3342"),n={getApi:function(e){return a.a.post("/HttpApiService/findApi",e)},verifyApiSummaryFull:function(e){return a.a.post("/HttpApiService/verifyPublishApi",e)},postApi:function(e){return a.a.post("/HttpApiService/publishApi",[e])},updateApiDoc:function(e){return a.a.post("/ApiManagerService/updateApiDoc",JSON.stringify(e))},quickMaintainApiDocByXml:function(e){return a.a.post("/ApiManagerService/quickMaintainApiDocByXml",JSON.stringify(e))},quickMaintainApiDocByJson:function(e){return a.a.post("/ApiManagerService/quickMaintainApiDocByJson",JSON.stringify(e))},basicInfo:s.a,apiDoc:r.a};t.a=n},"29d4":function(e,t,i){},3342:function(e,t,i){"use strict";var a=i("7562"),s=i("7aef"),r={findApiDoc:function(e){return a.a.post("/HttpApiService/findApiDoc",[e])},saveOrUpdateApiDocForXml:function(e,t){return s.a.post("/httpApi/saveOrUpdateApiDocForXml",e,{params:t})},updateApiDoc:function(e){return s.a.post("/httpApi/updateApiDoc",e)}};t.a=r},3774:function(e,t,i){},"3f37":function(e,t,i){},"425e":function(e,t,i){},"51c7":function(e,t,i){"use strict";i("3f37")},"5fd0":function(e,t,i){"use strict";i("84b6")},"6b5a":function(e,t,i){},"6ea4":function(e,t,i){"use strict";var a=(i("c5f6"),{name:"steps",props:{active:{required:!0,type:Number},title:{required:!1,type:String},tiptitle:{required:!0,type:Array}}}),s=(i("e7be"),i("2877")),r=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.title?i("h2",{staticClass:"com-tit-mini"},[e._v(e._s(e.title))]):e._e(),i("div",{staticClass:"my-step-bar"},[i("el-steps",{staticClass:"my-steps",attrs:{active:e.active,"finish-status":"success","align-center":""}},e._l(e.tiptitle,(function(e,t){return i("el-step",{key:t,attrs:{title:e}})})),1)],1)])}),[],!1,null,"16bbb482",null);t.a=r.exports},"70c0":function(e,t,i){"use strict";i("a75e")},7562:function(e,t,i){"use strict";var a=i("c7eb"),s=(i("96cf"),i("1da1")),r=i("bc3a"),n=i.n(r),o=i("7a3a"),l=i("3cfb"),c=i("c24f"),p=i("2a53"),u=i("a78e"),f=i.n(u),d=!1,m=n.a.create({baseURL:window.env.gatewayApiDecoupling,withCredentials:!0,timeout:1e4,headers:{"LOP-DN":window.env.gatewayApiDecouplingLop,"Account-Type":Object(p.a)()?"erp":"passport","X-Requested-With":"XMLHttpRequest"}});function h(){return v.apply(this,arguments)}function v(){return v=Object(s.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.dispatch("user/resetUser"),sessionStorage.setItem("store",JSON.stringify(l.a.state)),o.MessageBox.confirm("您的登录状态已失效，是否重新登录？","提示",{confirmButtonText:"登录",cancelButtonText:"不登录",type:"warning"}).then(Object(s.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=!1,e.next=3,Object(c.a)();case 3:if(!p.a){e.next=8;break}return e.next=6,l.a.dispatch("user/handleIntranetGetUserInfo");case 6:e.next=9;break;case 8:window.location.reload();case 9:case"end":return e.stop()}}),e)})))).catch((function(){d=!1}));case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}m.interceptors.request.use((function(e){return e.headers.groupCode=f.a.get("groupCode")||"",e}),(function(e){return Promise.reject(e)})),m.interceptors.response.use((function(e){var t=e.status;if(e.data.error_response)return o.Message.error("服务异常"),Promise.reject(e);if(401===t||520===t)return d||(d=!0,h()),Promise.reject(e);if(e.data.response){var i=e.data.response,a=i.code,s=i.message;return 2e4===a?e.data.response:(10003===a||s&&o.Message.error(s),Promise.reject(e.data.response))}return Promise.reject(e)}),(function(e){var t=e.response.status;return e.response.data.error_response&&o.Message.error("服务异常"),401!==t&&520!==t||d||(d=!0,h()),Promise.reject(e.response)})),t.a=m},"768f":function(e,t,i){},"84ab":function(e,t,i){},"84b6":function(e,t,i){},"964d":function(e,t,i){"use strict";i("7aef");var a=i("7562"),s={findApiBaseInfo:function(e){return a.a.post("/ApiManagerService/findApiBaseInfo",JSON.stringify(e))},verifyApiSummaryFull:function(e){return a.a.post("/ApiManagerService/verifyPublishApi",JSON.stringify([e]))},queryMethodListByInterfaceOrCnName:function(e){return a.a.post("/ApiManagerService/queryMethodListByInterfaceOrCnName",JSON.stringify(e))},addApiMethod:function(e){return a.a.post("/ApiManagerService/addApiMethod",JSON.stringify(e))},findApiDoc:function(e){return a.a.post("/ApiManagerService/findApiDoc",JSON.stringify(e))},queryAliasByInterface:function(e){return a.a.post("/JsfApiMetaService/queryAliasByInterface",JSON.stringify(e))},quickMaintainApiDocByJsf:function(e){return a.a.post("/ApiManagerService/quickMaintainApiDocByJsf",JSON.stringify(e))},updateApiDoc:function(e){return a.a.post("/ApiManagerService/updateApiDoc",JSON.stringify(e))},quickMaintainApiDocByXml:function(e){return a.a.post("/ApiManagerService/quickMaintainApiDocByXml",JSON.stringify(e))},quickMaintainApiDocByJson:function(e){return a.a.post("/ApiManagerService/quickMaintainApiDocByJson",JSON.stringify(e))},findMethodConfig:function(e){return a.a.post("/JsfApiService/findMethodConfig",JSON.stringify(e))},saveMethodConfig:function(e){return a.a.post("/JsfApiService/saveMethodConfig",JSON.stringify(e))},queryOneLevelParamTypeForMethod:function(e){return a.a.post("/JsfApiService/queryOneLevelParamTypeForMethod",JSON.stringify(e))}};t.a=s},"996a":function(e,t,i){},"9f10":function(e,t,i){"use strict";i("a33e")},a33e:function(e,t,i){},a75e:function(e,t,i){},a8e2:function(e,t,i){"use strict";i("996a")},ae76:function(e,t,i){"use strict";i("768f")},b6b6:function(e,t,i){"use strict";i("84ab")},c1ab:function(e,t,i){"use strict";i.r(t);var a=i("6ea4"),s=i("3835"),r=i("c7eb"),n=(i("96cf"),i("1da1")),o=i("7562"),l=(i("c5f6"),i("bc3a")),c=i.n(l),p=i("7a3a"),u=i("3cfb"),f=i("c24f"),d=i("a78e"),m=i.n(d),h=i("2a53"),v=0,g=c.a.create({baseURL:window.env.gatewayBaseApi,withCredentials:!0,timeout:1e4,headers:{"LOP-DN":"inner.cloud.com",AppParams:window.env.gatewayPtnr,"X-Requested-With":"XMLHttpRequest"}}),b=(c.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayUploadLopDn}}),c.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayUploadLopDnXml}}));function y(){return y=Object(n.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.a.dispatch("user/resetUser"),sessionStorage.setItem("store",JSON.stringify(u.a.state)),p.MessageBox.confirm("您的登录状态已失效，是否重新登录？","提示",{confirmButtonText:"登录",cancelButtonText:"不登录",type:"warning"}).then(Object(n.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=0,e.next=3,Object(f.a)();case 3:if(!Object(h.a)()){e.next=8;break}return e.next=6,u.a.dispatch("user/handleIntranetGetUserInfo");case 6:e.next=9;break;case 8:window.location.reload();case 9:case"end":return e.stop()}}),e)})))).catch((function(){v=0}));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}g.interceptors.request.use((function(e){return e.headers.supplierId=Number(m.a.get("supplierId"))||-1,e}),(function(e){return Promise.reject(e)})),g.interceptors.response.use((function(e){if(e.data.error_response&&p.Message.error("服务异常"),401!==status&&520!==status)return e;0===v&&(v+=1,function(){y.apply(this,arguments)}())}),(function(e){return Promise.reject(e)}));var A={props:{apiMessage:Object},data:function(){return{fileList:[],registerPath:"",registerType:"1",apiPublishPath:"",jsfDate:{qualifiedName:"",methodList:[],jsfAlias:""},methodMap:[],methodName:"",jsfAliasList:[],uploadXML:!1,rules:{qualifiedName:[{required:!0,message:"请填写【JSF接口名】"}],methodList:[{required:!0,message:"请填写【JSF方法名】"}],jsfAlias:[{required:!0,message:"请选择【JSF别名】"}]}}},methods:{queryAliasByInterface:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/JsfApiMetaService/queryAliasByInterface",t=(t=this.jsfDate.qualifiedName).trim(),i=[{qualifiedName:t}],e.next=6,o.a.post("/JsfApiMetaService/queryAliasByInterface",JSON.stringify(i));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryMethodByCondition:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,s,n,l=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,"/JsfApiMetaService/queryMethodByCondition",i=this.jsfDate,a=i.qualifiedName,s=i.jsfAlias,n=[{qualifiedName:a,jsfAlias:s,method:t}],void 0===t&&delete n[0].method,e.next=7,o.a.post("/JsfApiMetaService/queryMethodByCondition",JSON.stringify(n));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findApiXmlDoc:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,s,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/JsfApiMetaService/findApiXmlDoc",t=this.jsfDate,i=t.qualifiedName,a=t.jsfAlias,s=t.methodList,n=[{qualifiedName:i,jsfAlias:a,methodList:s}],e.next=5,o.a.post("/JsfApiMetaService/findApiXmlDoc",JSON.stringify(n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryApiByCondition:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/queryApiByCondition",1,1,null,null,t=[{pageSize:1,pageNumb:1},{searchKeyWord:null,businessCategoryId:null,sceneType:1}],e.next=5,o.a.post("/ApiManagerService/queryApiByCondition",JSON.stringify(t));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),upload:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i,a=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={"LOP-DN":window.env.gatewayUploadLopDnXml},e.next=3,b.post("/lop/mulfile/upload",t,{params:i}).catch((function(e){throw a.fileList=[],a.$message.error("上传失败，请重新上传"),new Error("upload")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),verifyApi:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t],e.next=3,o.a.post("/ApiManagerService/verifyApi",JSON.stringify(i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),initRegisterType:function(){this.apiMessage.registerType?this.registerType=this.apiMessage.registerType:this.getRegisterType(),this.initQualifiedName()},getRegisterType:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryApiByCondition().catch((function(){throw new Error("getRegisterType queryApiByCondition")}));case 2:t=e.sent,i=t.data,(a=i.list)&&a.length>0&&(this.registerType=JSON.stringify(a[0].registerType)),this.apiMessage.registerType=this.registerType;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initQualifiedName:function(){null!==this.apiMessage.jsfDate.qualifiedName&&void 0!==this.apiMessage.jsfDate.qualifiedName&&(this.jsfDate.qualifiedName=this.apiMessage.jsfDate.qualifiedName,this.initJsfAlias())},initJsfAlias:function(){null!==this.apiMessage.jsfDate.jsfAlias&&void 0!==this.apiMessage.jsfDate.jsfAlias&&this.getJsfAliasList()},initMethodList:function(){null!==this.apiMessage.jsfDate.methodList&&void 0!==this.apiMessage.jsfDate.methodList&&(this.getAllMethodList(),this.fillJsfDateMethodList())},imageOnChange:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t,i){var a,n,o,l,c,p,u,f,d=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("text/xml"===t.raw.type){e.next=4;break}return this.$message.error("只支持xml格式的文件！"),this.fileList=[],e.abrupt("return",!1);case 4:return(a=new FormData).append("file",t.raw),e.next=8,this.upload(a).catch((function(){throw new Error("imageOnChange upload")}));case 8:return n=e.sent,o=Object(s.a)(n.data.fileName,1),l=o[0],e.next=12,this.verifyApi(l).catch((function(){throw d.fileList=[],new Error("imageOnChange verifyApi")}));case 12:c=e.sent,p=c.data,u=p.qualifiedName,f=p.apiXml,u.length>=255?(this.fileList=[],this.$message.error("服务名称必须小于255个字符!")):(this.$message({duration:2e3,message:"上传API文件成功",type:"success"}),sessionStorage.removeItem("apiXml"),sessionStorage.setItem("apiXml",escape(f)),this.apiMessage.qualifiedName=u,this.apiMessage.registerType=this.registerType,this.uploadXML=!0);case 16:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),updateRegisterType:function(){sessionStorage.removeItem("apiXml"),this.apiMessage.qualifiedName="",this.apiMessage.cnName="",this.apiMessage.registerType="",this.apiMessage.jsfDate=new Object,this.methodMap=[],this.methodName="",this.jsfAliasList=[],this.jsfDate.qualifiedName="",this.jsfDate.methodList=[],this.jsfDate.jsfAlias=""},updateQualifiedName:function(){this.jsfDate.qualifiedName,this.methodMap=[],this.jsfDate.methodList=[],this.methodName="",this.jsfDate.jsfAlias="",this.jsfAliasList=[],this.getJsfAliasList()},getJsfAliasList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.jsfDate.qualifiedName&&""!==this.jsfDate.qualifiedName.trim()){e.next=3;break}return this.$message.error("请填写【JSF接口名】"),e.abrupt("return");case 3:return e.next=5,this.queryAliasByInterface().catch((function(){throw new Error("getJsfAliasList queryAliasByInterface")}));case 5:t=e.sent,(i=t.data)&&i.length>0&&(this.jsfAliasList=i,-1!==this.jsfAliasList.indexOf(this.apiMessage.jsfDate.jsfAlias)?(this.jsfDate.jsfAlias=this.apiMessage.jsfDate.jsfAlias,this.initMethodList()):this.apiMessage.jsfDate.jsfAlias="");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updatejsfAlias:function(){this.methodName="",this.jsfDate.methodList,this.getAllMethodList()},getAllMethodList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryMethodByCondition().catch((function(){throw new Error("getAllMethodList queryMethodByCondition")}));case 2:t=e.sent,i=t.data,this.methodMap=i.map((function(e){return{value:e}}))||[],i&&i.length>0||(this.apiMessage.jsfDate.methodList=[]);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fillJsfDateMethodList:function(){this.jsfDate.methodList=[];for(var e=0;e<this.apiMessage.jsfDate.methodList.length;e++)this.jsfDate.methodList.push(this.apiMessage.jsfDate.methodList[e])},querySearch:function(e,t){this.getBlurryMethodList(e),t(this.methodMap)},getBlurryMethodList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.jsfDate.qualifiedName&&""!==this.jsfDate.qualifiedName.trim()){e.next=3;break}return this.$message.error("请填写【JSF接口名】"),e.abrupt("return");case 3:if(void 0!==this.jsfDate.jsfAlias&&""!==this.jsfDate.jsfAlias){e.next=6;break}return this.$message.error("请选择【JSF别名】"),e.abrupt("return");case 6:return e.next=8,this.queryMethodByCondition(t).catch((function(){throw new Error("getBlurryMethodList queryMethodByCondition")}));case 8:i=e.sent,a=i.data,this.putMethodMap(a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),putMethodMap:function(e){for(var t=[],i=0;i<e.length;i++)t.push({value:e[i]});this.$set(this,"methodMap",t)},handleSelect:function(e){this.jsfDate.methodList.indexOf(e.value)<0&&this.jsfDate.methodList.push(e.value),this.methodName=""},handleClose:function(e){this.jsfDate.methodList.splice(this.jsfDate.methodList.indexOf(e),1)},previous:function(){this.$emit("previous")},nextStep:function(){this.uploadXML?this.$emit("next"):this.$message.error("请上传API描述文件！")},next:function(){void 0!==this.jsfDate.qualifiedName&&""!==this.jsfDate.qualifiedName.trim()?void 0!==this.jsfDate.jsfAlias&&""!==this.jsfDate.jsfAlias?void 0===this.jsfDate.methodList||this.jsfDate.methodList.length<1?this.$message.error("请填写【JSF方法名】"):(sessionStorage.removeItem("apiXml"),this.getApiXml()):this.$message.error("请选择【JSF别名】"):this.$message.error("请填写【JSF接口名】")},getApiXml:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiXmlDoc().catch((function(){throw new Error("getApiXml findApiXmlDoc")}));case 2:t=e.sent,i=t.data,sessionStorage.removeItem("apiXml"),sessionStorage.setItem("apiXml",escape(i)),this.apiMessage.registerType=this.registerType,this.apiMessage.qualifiedName=this.jsfDate.qualifiedName,this.apiMessage.jsfDate=this.jsfDate,this.$emit("next");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},mounted:function(){sessionStorage.removeItem("apiXml"),this.registerPath=window.location.protocol+"//"+"".concat(window.location.host,"/#")+"".concat(window.env.docDescription),this.apiPublishPath=window.location.protocol+"//"+"".concat(window.location.host,"/#")+"".concat(window.env.docApiPublish),this.initRegisterType()}},j=A,w=(i("b6b6"),i("2877")),x=Object(w.a)(j,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{push:5,span:4}},[i("span",{staticStyle:{"font-weight":"bold",color:"#666"}},[e._v("请选择API文档生成方式:")])]),i("el-col",{attrs:{push:5,span:2}},[i("el-radio",{attrs:{label:"1"},on:{change:function(t){return e.updateRegisterType()}},model:{value:e.registerType,callback:function(t){e.registerType=t},expression:"registerType"}},[i("span",{staticStyle:{"font-weight":"normal"}},[e._v("IDEA插件")])])],1),i("el-col",{attrs:{push:5,span:3}},[i("el-radio",{attrs:{label:"2"},on:{change:function(t){return e.updateRegisterType()}},model:{value:e.registerType,callback:function(t){e.registerType=t},expression:"registerType"}},[i("span",{staticStyle:{"font-weight":"normal"}},[e._v(" 拉取JSF元数据")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"若方法中含有泛型参数，不建议使用此种方式",placement:"bottom"}},[i("i",{staticClass:"el-icon-help-solid"})])],1)],1)],1),1==e.registerType?i("div",{staticClass:"idea-content"},[i("el-upload",{staticClass:"entrySuccess dlk-inline",attrs:{drag:"",action:"upload","auto-upload":!1,"on-change":e.imageOnChange,"file-list":e.fileList}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" 将IDEA插件生成的API描述文件拖到此处，或 "),i("em",[e._v("点击上传")])]),i("div",{staticStyle:{color:"blue"},attrs:{slot:"tip"},slot:"tip"},[i("a",{attrs:{href:this.registerPath,target:"_blank"}},[e._v("如何获取API描述文件?")])])]),i("div",{staticClass:"footer"},[i("el-button",{on:{click:function(t){return e.previous()}}},[e._v("上一步")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStep()}}},[e._v("下一步")])],1)],1):e._e(),2==e.registerType?i("div",[i("div",[i("el-row",[i("el-col",{attrs:{push:7,span:9}},[i("p",{staticClass:"font-content"},[e._v(" 填写以下信息之前，请确保JSF服务已按 "),i("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:this.apiPublishPath,target:"_blank"}},[e._v("《API部署手册》")]),e._v(" 部署完成 ")])])],1)],1),i("el-form",{ref:"jsfDate",attrs:{model:e.jsfDate,rules:e.rules,"show-message":!1}},[i("el-row",[i("el-col",{attrs:{push:7,span:7}},[i("el-form-item",{attrs:{label:"JSF接口名","label-width":"30%",prop:"qualifiedName"}},[i("el-input",{attrs:{placeholder:"示例：com.jd.lcp.xxx.api.xxx",maxlength:"500"},on:{change:function(t){return e.updateQualifiedName()}},model:{value:e.jsfDate.qualifiedName,callback:function(t){e.$set(e.jsfDate,"qualifiedName","string"==typeof t?t.trim():t)},expression:"jsfDate.qualifiedName"}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{push:7,span:7}},[i("el-form-item",{attrs:{label:"JSF别名","label-width":"30%",prop:"jsfAlias"}},[i("el-select",{staticClass:"inline-input",attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.updatejsfAlias()}},model:{value:e.jsfDate.jsfAlias,callback:function(t){e.$set(e.jsfDate,"jsfAlias",t)},expression:"jsfDate.jsfAlias"}},e._l(this.jsfAliasList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{push:7,span:7}},[i("el-form-item",{staticStyle:{"margin-bottom":"1px"},attrs:{label:"JSF方法名","label-width":"30%",prop:"methodList"}},[i("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入",debounce:0},on:{select:e.handleSelect},model:{value:e.methodName,callback:function(t){e.methodName="string"==typeof t?t.trim():t},expression:"methodName"}})],1)],1)],1),i("el-row",[i("el-col",{staticStyle:{"text-align":"left"},attrs:{push:9,span:7}},e._l(this.jsfDate.methodList,(function(t){return i("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),i("div",{staticClass:"footer"},[i("el-button",{on:{click:function(t){return e.previous()}}},[e._v("上一步")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next()}}},[e._v("下一步")])],1)],1):e._e()],1)}),[],!1,null,"248dca77",null),S=x.exports,D={props:{apiMessage:Object},data:function(){return{intervalID:"",qualifiedName:""}},methods:{findApiForWeb:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiDepotService/findApiForWeb",t=this.qualifiedName,i=[{qualifiedName:t}],e.next=5,o.a.post("/ApiDepotService/findApiForWeb",JSON.stringify(i));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),next:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiForWeb().catch((function(){throw new Error("next findApiForWeb")}));case 2:t=e.sent,(i=t.data).length>0&&(a=Object(s.a)(i,1),n=a[0],this.$router.push({name:"ApiManagerDetail",params:{id:n.id,type:"jsf"},query:{tabName:"basic-data"}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.qualifiedName=this.apiMessage.qualifiedName}},O=D,C=(i("d4cf"),Object(w.a)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),i("p",{staticClass:"title"},[e._v("注册成功")]),i("p",{staticClass:"c-666",staticStyle:{margin:"10px 0 50px"}},[e._v(" 快去完善API基础数据吧，完善后发布即可对外生效 ")]),i("el-row",[i("el-button",{on:{click:e.next}},[e._v("继续注册API")]),i("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("去完善API基础数据")])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"entrySuccess"},[t("i",{staticClass:"el-icon-success"})])}],!1,null,"4928d961",null)),F=C.exports,M={data:function(){return{apiSeivece:1}},mounted:function(){var e=(this.$route||{}).query;"jsf"===e.type&&(this.apiSeivece=1),"http"===e.type&&(this.apiSeivece=2)},methods:{nextStep:function(){this.$emit("next"),this.$emit("apiService",this.apiSeivece)}}},I=M,N=(i("e8c8"),Object(w.a)(I,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"protocol-desc"},[e._v("调用API时，通过哪种协议调用？")]),i("div",{staticClass:"protocol-content"},[i("el-radio-group",{model:{value:e.apiSeivece,callback:function(t){e.apiSeivece=t},expression:"apiSeivece"}},[i("div",{staticClass:"protocol-radio"},[i("el-radio",{attrs:{label:1,disabled:2==+e.apiSeivece}},[e._v("JSF协议")])],1),i("div",{staticClass:"protocol-radio"},[i("el-radio",{attrs:{label:2,disabled:1==+e.apiSeivece}},[e._v("HTTP协议")])],1)])],1),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)}),[],!1,null,"8cb4b364",null)),q=N.exports,k={data:function(){return{jsfForm:{},rules:{},appForm:{},groupForm:{},showAppDialog:!1,showGroupDialog:!1}},mounted:function(){},methods:{nextStep:function(){this.$emit("next")},previous:function(){this.$emit("previous")},createGroup:function(){this.showGroupDialog=!0},createApp:function(){this.showAppDialog=!0}}},_=(i("10d1"),Object(w.a)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"protocol-desc"},[e._v("请填写API基本信息")]),i("div",{staticClass:"protocol-content"},[i("el-form",{ref:"ruleForm",attrs:{model:e.jsfForm,rules:e.rules,"label-width":"110px"}},[i("el-form-item",{attrs:{prop:"pass"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" JSF接口名 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-input",{model:{value:e.jsfForm.pass,callback:function(t){e.$set(e.jsfForm,"pass",t)},expression:"jsfForm.pass"}})],1)],1),i("el-form-item",{attrs:{prop:"checkPass"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" API中文名称 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-input",{attrs:{placeholder:"请输入API中文名称"},model:{value:e.jsfForm.checkPass,callback:function(t){e.$set(e.jsfForm,"checkPass",t)},expression:"jsfForm.checkPass"}})],1)],1),i("el-form-item",{attrs:{prop:"age"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属应用 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择API所属应用"},model:{value:e.jsfForm.value,callback:function(t){e.$set(e.jsfForm,"value",t)},expression:"jsfForm.value"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("el-form-item",{attrs:{prop:"age"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属分组 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择API所属分组"},model:{value:e.jsfForm.value,callback:function(t){e.$set(e.jsfForm,"value",t)},expression:"jsfForm.value"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("el-form-item",[i("el-button",{on:{click:e.previous}},[e._v("上一步")]),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1),i("el-dialog",{attrs:{title:"创建应用",width:"440px",visible:e.showAppDialog},on:{"update:visible":function(t){e.showAppDialog=t}}},[i("el-form",{attrs:{model:e.appForm}},[i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 应用名称 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入应用中文名称"},model:{value:e.appForm.name,callback:function(t){e.$set(e.appForm,"name",t)},expression:"appForm.name"}})],1),i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 应用描述 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{type:"textarea",placeholder:"请输入应用使用场景的描述",autocomplete:"off"},model:{value:e.appForm.name,callback:function(t){e.$set(e.appForm,"name",t)},expression:"appForm.name"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showAppDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAppDialog=!1}}},[e._v("保 存")])],1)],1),i("el-dialog",{attrs:{title:"创建分组",width:"500px",visible:e.showGroupDialog},on:{"update:visible":function(t){e.showGroupDialog=t}}},[i("el-form",{attrs:{model:e.groupForm}},[i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组英文名称"),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入分组编码"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name",t)},expression:"groupForm.name"}})],1),i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组中文名称"),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入分组中文名称"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name",t)},expression:"groupForm.name"}})],1),i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组描述 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{type:"textarea",placeholder:"请输入分组使用场景的描述",autocomplete:"off"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name",t)},expression:"groupForm.name"}})],1),i("el-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 发布范围 "),i("el-tooltip",{staticClass:"item",attrs:{content:"请求方式",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-radio",{attrs:{label:"1"},model:{value:e.groupForm.radio,callback:function(t){e.$set(e.groupForm,"radio",t)},expression:"groupForm.radio"}},[e._v("发布到内网")]),i("el-radio",{attrs:{label:"2"},model:{value:e.groupForm.radio,callback:function(t){e.$set(e.groupForm,"radio",t)},expression:"groupForm.radio"}},[e._v("发布到公网")])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showGroupDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showGroupDialog=!1}}},[e._v("保 存")])],1)],1)],1)])}),[],!1,null,"ecebb112",null)),L=_.exports,P=(i("7f7f"),i("ade3")),J=i("c2d0"),$={props:{type:Number},data:function(){var e;return e={apiId:0,httpForm:{domain:{}},httpFormrules:{name:[{required:!0,message:"API中文名称不能为空"}],lcpApp:[{required:!0,message:"所属应用不能为空"}],domain:[{required:!0,message:"所属分组不能为空"}],url:[{required:!0,message:"URI不能为空",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符"},{pattern:/^\//,message:"格式不正确,以“/”开头！"},{pattern:/^\/[a-zA-Z0-9_\{\}\.\/-]*$/,message:"请输入'/'、英文字母、数字、'_'、'-'、'.'、'{'、'}'"}]},appForm:{},groupForm:{intr:"",cnName:"",code:"",serviceType:1,uatClusterId:null,uatClusterName:null,testClusterId:null,testClusterName:null,prodClusterId:null,prodClusterName:null},groupFormRules:{intr:[{required:!0,message:"分组描述不能为空"}],cnName:[{required:!0,message:"分组中文名称不能为空"}],code:[{required:!0,message:"分组英文名称不能为空"},{min:2,max:30,message:"请输入2-30个字符"},{pattern:/^[A-Za-z_]*$/,message:"请输入英文字母、_"}],serviceType:[{required:!0,message:"发布范围不能为空"}]},showAppDialog:!1,showGroupDialog:!1,domainOptions:[],appOptions:[]},Object(P.a)(e,"apiId",0),Object(P.a)(e,"fullscreenLoading",!1),Object(P.a)(e,"loading",!1),e},mounted:function(){this.fetchAppListForSelect(),this.remoteDomain()},methods:{fetchAppListForSelect:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findAppListForSelect();case 2:t=e.sent,(i=t.data.data)&&i.length>0&&(i=i.map((function(e){return{lcpAppId:e.value,lcpAppKey:e.code,lcpAppName:e.label}}))),this.appOptions=i;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findAppListForSelect:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.findAppListForSelect().catch((function(e){var i=e.data.message;throw i&&t.$message.error(i),new Error(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),remoteDomain:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i,a,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=10;break}return e.next=3,this.queryCloudDomainList(t);case 3:i=e.sent,a=i.data,(s=a.rows)&&s.length>0&&(s=s.map((function(e){return{domainId:e.id,domainCode:e.code,domainName:e.cnName}}))),this.domainOptions=s,e.next=11;break;case 10:this.domainOptions=[];case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),queryCloudDomainList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i,a,s,n=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,null,1,1e4,a=this.type,s=[{page:1,pageSize:1e4},{queryLike:i,type:a,isOnline:null,sceneType:1}],e.next=8,J.a.queryCloudDomainList(s).catch((function(e){var t=e.data.message;throw t&&n.$message.error(t),new Error(e)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),nextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.getGroupCluster(t.httpForm.domain.domainId)}))},submit:function(){var e=this;this.fullscreenLoading=!0;var t=this.type,i=this.httpForm.name,a={type:t,lcpAppId:this.httpForm.lcpApp.lcpAppId,name:i,lcpAppName:this.httpForm.lcpApp.lcpAppName,lcpAppKey:this.httpForm.lcpApp.lcpAppKey,domainCode:this.httpForm.domain.domainCode,domainId:this.httpForm.domain.domainId,domainName:this.httpForm.domain.domainName,url:this.httpForm.url,testClusterId:this.groupForm.testClusterId,testClusterName:this.groupForm.testClusterName,uatClusterId:this.groupForm.uatClusterId,uatClusterName:this.groupForm.uatClusterName,prodClusterId:this.groupForm.prodClusterId,prodClusterName:this.groupForm.prodClusterName,sceneType:1};this.groupForm,J.a.httpRegister.addHttpApi([a]).then((function(t){e.apiId=t.data,e.fullscreenLoading=!1,e.$emit("getApiId",e.apiId),e.$emit("next")})).catch((function(t){e.fullscreenLoading=!1}))},previous:function(){this.$emit("previous")},createGroup:function(){this.showGroupDialog=!0},createApp:function(){this.showAppDialog=!0},onCancle:function(){this.$refs.groupForm.resetFields(),this.showGroupDialog=!1},closeGroupForm:function(){this.$refs.groupForm.resetFields()},saveGroupForm:function(e){var t=this;this.$refs[e].validate((function(i){if(!i)return!1;t.loading=!0;var a=[{description:t.groupForm.intr,type:t.type,name:t.groupForm.cnName,code:t.groupForm.code,serviceType:t.groupForm.serviceType,sceneType:1}];J.a.httpRegister.saveCloudDomain(a).then((function(i){var a=i.data,s={domainCode:a.code,domainId:a.id,domainName:a.name};t.httpForm.domain=s,t.loading=!1,t.showGroupDialog=!1,t.$refs[e].resetFields(),t.remoteDomain()})).catch((function(e){t.loading=!1}))}))},getGroupCluster:function(e){var t=this,i=[{id:e}];J.a.apiGroup.getCloudDomainBase(i).then((function(e){e.data.testClusterId>0&&(t.groupForm.testClusterId=e.data.testClusterId,t.groupForm.testClusterName=e.data.testClusterName),e.data.uatClusterId>0&&(t.groupForm.uatClusterId=e.data.uatClusterId,t.groupForm.uatClusterName=e.data.uatClusterName),e.data.prodClusterId>0&&(t.groupForm.prodClusterId=e.data.prodClusterId,t.groupForm.prodClusterName=e.data.prodClusterName),t.groupForm,t.submit()})).catch((function(e){}))}}},T=$,B=(i("5fd0"),Object(w.a)(T,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"protocol-desc"},[e._v("请填写API基本信息")]),i("div",{staticClass:"protocol-content"},[i("el-form",{ref:"httpForm",attrs:{model:e.httpForm,rules:e.httpFormrules,"label-width":"126px"}},[i("el-form-item",{attrs:{prop:"name"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" API中文名称 "),i("el-tooltip",{staticClass:"item",attrs:{content:"API的中文名称，如：快运纯配下单接口",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-input",{attrs:{placeholder:"请输入API中文名称"},model:{value:e.httpForm.name,callback:function(t){e.$set(e.httpForm,"name",t)},expression:"httpForm.name"}})],1)],1),i("el-form-item",{attrs:{prop:"lcpApp"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属应用 "),i("el-tooltip",{staticClass:"item",attrs:{content:"API发布者调用自己的API时，可使用此应用进行签名认证。",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,"value-key":"lcpAppId",placeholder:"请选择API所属应用"},model:{value:e.httpForm.lcpApp,callback:function(t){e.$set(e.httpForm,"lcpApp",t)},expression:"httpForm.lcpApp"}},e._l(e.appOptions,(function(e){return i("el-option",{key:e.lcpAppId,attrs:{label:e.lcpAppName,value:e}})})),1)],1)],1),i("el-form-item",{attrs:{prop:"domain"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属分组 "),i("el-tooltip",{staticClass:"item",attrs:{content:"同一使用场景的API组成分组，可在分组维度下配置策略/集群，对分组下更新的API进行批量的发布。",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,"value-key":"domainId",placeholder:"请选择API所属分组"},model:{value:e.httpForm.domain,callback:function(t){e.$set(e.httpForm,"domain",t)},expression:"httpForm.domain"}},e._l(e.domainOptions,(function(e){return i("el-option",{key:e.domainId,attrs:{label:e.domainName+"("+e.domainCode+")",value:e}})})),1)],1),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{type:"text"},on:{click:e.createGroup}},[e._v("+创建分组")])],1)],1),i("el-form-item",{attrs:{prop:"url"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" URI "),i("el-tooltip",{staticClass:"item",attrs:{content:"HTTP接口的URI，调用方会根据URI进行调用，如：/order/cancelOrder",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-col",{attrs:{span:18}},[i("el-input",{attrs:{placeholder:"发布后的请求路径，例如：/u1"},model:{value:e.httpForm.url,callback:function(t){e.$set(e.httpForm,"url",t)},expression:"httpForm.url"}})],1)],1),i("el-button",{on:{click:e.previous}},[e._v("上一步")]),i("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.nextStep("httpForm")}}},[e._v("确认注册 ")])],1),i("el-dialog",{attrs:{title:"创建应用",width:"440px",visible:e.showAppDialog},on:{"update:visible":function(t){e.showAppDialog=t}}},[i("el-form",{attrs:{model:e.appForm}},[i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 应用名称 "),i("el-tooltip",{staticClass:"item",attrs:{content:"应用的中文名称，如：京东物流小程序",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{placeholder:"请输入应用中文名称"},model:{value:e.appForm.name,callback:function(t){e.$set(e.appForm,"name",t)},expression:"appForm.name"}})],1),i("el-form-item",{attrs:{"label-width":"110px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 应用描述 "),i("el-tooltip",{staticClass:"item",attrs:{content:"应用使用场景的描述，如：用于京东物流小程序注册API、调用API",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{type:"textarea",placeholder:"请输入应用使用场景的描述"},model:{value:e.appForm.name,callback:function(t){e.$set(e.appForm,"name",t)},expression:"appForm.name"}})],1)],1),i("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showAppDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAppDialog=!1}}},[e._v("保 存 ")])],1)],1)],1),i("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"创建分组",width:"500px","close-on-click-modal":!1,visible:e.showGroupDialog},on:{close:e.closeGroupForm,"update:visible":function(t){e.showGroupDialog=t}}},[i("el-form",{ref:"groupForm",attrs:{model:e.groupForm,rules:e.groupFormRules}},[i("el-form-item",{attrs:{"label-width":"130px",prop:"code"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组英文名称 "),i("el-tooltip",{staticClass:"item",attrs:{content:"分组的英文编码，调用API时需要在LOP-DN字段中传。",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{placeholder:"请输入分组编码"},model:{value:e.groupForm.code,callback:function(t){e.$set(e.groupForm,"code",t)},expression:"groupForm.code"}})],1),i("el-form-item",{attrs:{"label-width":"130px",prop:"cnName"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组中文名称 "),i("el-tooltip",{staticClass:"item",attrs:{content:"分组的中文名称，如：技术开放平台产品组的分组。",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{placeholder:"请输入分组中文名称"},model:{value:e.groupForm.cnName,callback:function(t){e.$set(e.groupForm,"cnName",t)},expression:"groupForm.cnName"}})],1),i("el-form-item",{attrs:{"label-width":"130px",prop:"intr"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 分组描述 "),i("el-tooltip",{staticClass:"item",attrs:{content:"具体描述分组下一类API的应用场景，如：基础平台组为云仓物控平台项目提供的API组，调用方设备为PC端，账号体系为passport。",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-input",{attrs:{type:"textarea",placeholder:"请输入分组使用场景的描述"},model:{value:e.groupForm.intr,callback:function(t){e.$set(e.groupForm,"intr",t)},expression:"groupForm.intr"}})],1),i("el-form-item",{attrs:{"label-width":"130px",prop:"serviceType"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 发布范围 "),i("el-tooltip",{staticClass:"item",attrs:{content:"发布到内网，仅内网可用。发布到公网，内网、公网均可用",placement:"top"}},[i("i",{staticClass:"el-icon-help",staticStyle:{color:"#3c6ef0"}})])],1),i("el-radio",{attrs:{label:1},model:{value:e.groupForm.serviceType,callback:function(t){e.$set(e.groupForm,"serviceType",t)},expression:"groupForm.serviceType"}},[e._v("发布到内网 ")]),i("el-radio",{attrs:{label:2},model:{value:e.groupForm.serviceType,callback:function(t){e.$set(e.groupForm,"serviceType",t)},expression:"groupForm.serviceType"}},[e._v("发布到公网 ")])],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.onCancle}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.saveGroupForm("groupForm")}}},[e._v("确认创建 ")])],1)],1)],1)}),[],!1,null,"6a1dc2b0",null)),X=B.exports,E={data:function(){return{type:2}},mounted:function(){},methods:{nextStep:function(){this.$emit("next"),this.$emit("provideMethod",this.type)},previous:function(){this.$emit("previous")}}},R=(i("ae76"),Object(w.a)(E,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"protocol-desc"},[e._v("请选择通过哪种方式提供这个接口")]),i("div",{staticClass:"protocol-content"},[i("el-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[i("div",{staticClass:"radio-item"},[i("el-radio",{attrs:{disabled:"",label:1}},[e._v("一个JSF服务的接口方法")])],1),i("div",{staticClass:"radio-item"},[i("el-radio",{attrs:{label:2}},[e._v("IP端口组成的服务器集群")])],1)])],1),i("div",{staticClass:"footer"},[i("el-button",{on:{click:e.previous}},[e._v("上一步")]),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)])}),[],!1,null,"0e4b36ec",null)),G=R.exports,H={props:{apiId:Number},data:function(){return{}},mounted:function(){},methods:{registerApi:function(){this.$router.go(0)},next:function(){this.$router.push({name:"ApiManagerDetail",params:{type:"http",id:this.apiId}})}}},U=(i("51c7"),Object(w.a)(H,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),i("p",{staticClass:"title"},[e._v("注册成功")]),i("p",{staticClass:"c-666",staticStyle:{margin:"10px 0 50px"}},[e._v(" 快去完善API基础数据吧，完善后发布即可对外生效 ")]),i("el-row",[i("el-button",{on:{click:e.registerApi}},[e._v("继续注册API")]),i("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("去完善API基础数据")])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"entrySuccess"},[t("i",{staticClass:"el-icon-success"})])}],!1,null,"6492951b",null)),W=U.exports,Q={props:{apiMessage:Object},data:function(){return{fileList:[],registerPath:"",registerType:"1",apiPublishPath:"",jsfDate:{qualifiedName:"",methodList:[],jsfAlias:""},methodMap:[],methodName:"",jsfAliasList:[],rules:{qualifiedName:[{required:!0,message:"请填写【JSF接口名】"}],methodList:[{required:!0,message:"请填写【JSF方法名】"}],jsfAlias:[{required:!0,message:"请选择【JSF别名】"}]}}},methods:{queryAliasByInterface:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/JsfApiMetaService/queryAliasByInterface",t=(t=this.jsfDate.qualifiedName).trim(),i=[{qualifiedName:t}],e.next=6,o.a.post("/JsfApiMetaService/queryAliasByInterface",JSON.stringify(i));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryMethodByCondition:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,s,n,l=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,"/JsfApiMetaService/queryMethodByCondition",i=this.jsfDate,a=i.qualifiedName,s=i.jsfAlias,n=[{qualifiedName:a,jsfAlias:s,keyWords:t}],void 0===t&&delete n[0].keyWords,e.next=7,o.a.post("/JsfApiMetaService/queryMethodByCondition",JSON.stringify(n));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findApiXmlDoc:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,s,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/JsfApiMetaService/findApiXmlDoc",t=this.jsfDate,i=t.qualifiedName,a=t.jsfAlias,s=t.methodList,n=[{qualifiedName:i,jsfAlias:a,methodList:s}],e.next=5,o.a.post("/JsfApiMetaService/findApiXmlDoc",JSON.stringify(n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryApiByCondition:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/queryApiByCondition",1,1,null,null,t=[{pageSize:1,pageNumb:1},{searchKeyWord:null,businessCategoryId:null,sceneType:1}],e.next=5,o.a.post("/ApiManagerService/queryApiByCondition",JSON.stringify(t));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),upload:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i,a=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={"LOP-DN":window.env.gatewayUploadLopDnXml},e.next=3,b.post("/lop/mulfile/upload",t,{params:i}).catch((function(e){throw a.fileList=[],a.$message.error("上传失败，请重新上传"),new Error("upload")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),verifyApi:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t],e.next=3,o.a.post("/ApiManagerService/verifyApi",JSON.stringify(i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onMethodListVisibleChange:function(e){e||this.getBlurryMethodList("")},initRegisterType:function(){null===this.apiMessage.registerType||void 0===this.apiMessage.registerType||""===this.apiMessage.registerType?this.getRegisterType():this.registerType=this.apiMessage.registerType,this.initQualifiedName()},getRegisterType:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryApiByCondition().catch((function(){throw new Error("getRegisterType queryApiByCondition")}));case 2:t=e.sent,i=t.data,(a=i.list)&&a.length>0&&(this.registerType=JSON.stringify(a[0].registerType)),this.apiMessage.registerType=this.registerType;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initQualifiedName:function(){null!==this.apiMessage.jsfDate.qualifiedName&&void 0!==this.apiMessage.jsfDate.qualifiedName&&(this.jsfDate.qualifiedName=this.apiMessage.jsfDate.qualifiedName,this.initJsfAlias())},initJsfAlias:function(){null!==this.apiMessage.jsfDate.jsfAlias&&void 0!==this.apiMessage.jsfDate.jsfAlias&&this.getJsfAliasList()},initMethodList:function(){null!==this.apiMessage.jsfDate.methodList&&void 0!==this.apiMessage.jsfDate.methodList&&(this.getAllMethodList(),this.fillJsfDateMethodList())},imageOnChange:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t,i){var a,n,o,l,c,p,u,f,d=this;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("text/xml"===t.raw.type){e.next=4;break}return this.$message.error("只支持xml格式的文件！"),this.fileList=[],e.abrupt("return",!1);case 4:return(a=new FormData).append("file",t.raw),e.next=8,this.upload(a).catch((function(){throw new Error("imageOnChange upload")}));case 8:return n=e.sent,o=Object(s.a)(n.data.fileName,1),l=o[0],e.next=12,this.verifyApi(l).catch((function(){throw d.fileList=[],new Error("imageOnChange verifyApi")}));case 12:c=e.sent,p=c.data,u=p.qualifiedName,f=p.apiXml,u.length>=255?(this.fileList=[],this.$message.error("服务名称必须小于255个字符!")):(this.$message({duration:2e3,message:"上传API文件成功",type:"success"}),sessionStorage.removeItem("apiXml"),sessionStorage.setItem("apiXml",escape(f)),this.apiMessage.qualifiedName=u,this.apiMessage.registerType=this.registerType,this.$emit("next"));case 16:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),updateRegisterType:function(){sessionStorage.removeItem("apiXml"),this.apiMessage.qualifiedName="",this.apiMessage.cnName="",this.apiMessage.registerType="",this.apiMessage.jsfDate=new Object,this.methodMap=[],this.methodName="",this.jsfAliasList=[],this.jsfDate.qualifiedName="",this.jsfDate.methodList=[],this.jsfDate.jsfAlias=""},updateQualifiedName:function(){this.jsfDate.qualifiedName,this.methodMap=[],this.jsfDate.methodList=[],this.methodName="",this.jsfDate.jsfAlias="",this.jsfAliasList=[],this.getJsfAliasList()},getJsfAliasList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.jsfDate.qualifiedName&&""!==this.jsfDate.qualifiedName.trim()){e.next=3;break}return this.$message.error("请填写【JSF接口名】"),e.abrupt("return");case 3:return e.next=5,this.queryAliasByInterface().catch((function(){throw new Error("getJsfAliasList queryAliasByInterface")}));case 5:t=e.sent,(i=t.data)&&i.length>0&&(this.jsfAliasList=i,-1!==this.jsfAliasList.indexOf(this.apiMessage.jsfDate.jsfAlias)?(this.jsfDate.jsfAlias=this.apiMessage.jsfDate.jsfAlias,this.initMethodList()):this.apiMessage.jsfDate.jsfAlias="");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updatejsfAlias:function(){this.methodName="",this.jsfDate.methodList,this.getAllMethodList()},getAllMethodList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryMethodByCondition().catch((function(){throw new Error("getAllMethodList queryMethodByCondition")}));case 2:t=e.sent,i=t.data,this.methodMap=i.map((function(e){return{label:e,value:e}}))||[],i&&i.length>0||(this.apiMessage.jsfDate.methodList=[]);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fillJsfDateMethodList:function(){this.jsfDate.methodList=[];for(var e=0;e<this.apiMessage.jsfDate.methodList.length;e++)this.jsfDate.methodList.push(this.apiMessage.jsfDate.methodList[e])},querySearch:function(e){this.getBlurryMethodList(e)},getBlurryMethodList:function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var i,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.jsfDate.qualifiedName&&""!==this.jsfDate.qualifiedName.trim()){e.next=3;break}return this.$message.error("请填写【JSF接口名】"),e.abrupt("return");case 3:if(void 0!==this.jsfDate.jsfAlias&&""!==this.jsfDate.jsfAlias){e.next=6;break}return this.$message.error("请选择【JSF别名】"),e.abrupt("return");case 6:return e.next=8,this.queryMethodByCondition(t).catch((function(){throw new Error("getBlurryMethodList queryMethodByCondition")}));case 8:i=e.sent,a=i.data,this.putMethodMap(a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),putMethodMap:function(e){for(var t=[],i=0;i<e.length;i++)t.push({value:e[i]});this.$set(this,"methodMap",t)},handleSelect:function(e){this.jsfDate.methodList.indexOf(e.value)<0&&this.jsfDate.methodList.push(e.value),this.methodName=""},handleClose:function(e){this.jsfDate.methodList.splice(this.jsfDate.methodList.indexOf(e),1)},previous:function(){this.$emit("previous")},next:function(){void 0!==this.jsfDate.qualifiedName&&""!==this.jsfDate.qualifiedName.trim()?void 0!==this.jsfDate.jsfAlias&&""!==this.jsfDate.jsfAlias?void 0===this.jsfDate.methodList||this.jsfDate.methodList.length<1?this.$message.error("请填写【JSF方法名】"):(sessionStorage.removeItem("apiXml"),this.getApiXml()):this.$message.error("请选择【JSF别名】"):this.$message.error("请填写【JSF接口名】")},getApiXml:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiXmlDoc().catch((function(){throw new Error("getApiXml findApiXmlDoc")}));case 2:t=e.sent,i=t.data,sessionStorage.removeItem("apiXml"),sessionStorage.setItem("apiXml",escape(i)),this.apiMessage.registerType=this.registerType,this.apiMessage.qualifiedName=this.jsfDate.qualifiedName,this.apiMessage.jsfDate=this.jsfDate,this.jsfDate,this.$emit("next");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},mounted:function(){sessionStorage.removeItem("apiXml"),this.registerPath=window.location.protocol+"//"+"".concat(window.location.host,"/#")+"".concat(window.env.docDescription),this.apiPublishPath=window.location.protocol+"//"+"".concat(window.location.host,"/#")+"".concat(window.env.docApiPublish),this.initRegisterType()}},z=Q,K=(i("e4b7"),Object(w.a)(z,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"submit-xml"},[i("div",{staticClass:"xml-way"},[i("span",{staticClass:"xml-way-label"},[e._v("请选择API文档生成方式:")]),i("el-radio",{attrs:{label:"1"},on:{change:function(t){return e.updateRegisterType()}},model:{value:e.registerType,callback:function(t){e.registerType=t},expression:"registerType"}},[i("span",[e._v("IDEA插件")])]),i("el-radio",{attrs:{label:"2"},on:{change:function(t){return e.updateRegisterType()}},model:{value:e.registerType,callback:function(t){e.registerType=t},expression:"registerType"}},[i("span",[e._v(" 拉取JSF元数据")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"若方法中含有泛型参数，不建议使用此种方式",placement:"bottom"}},[i("i",{staticClass:"el-icon-help-solid"})])],1)],1),1==e.registerType?i("div",[i("el-upload",{staticClass:"entrySuccess dlk-inline",attrs:{drag:"",action:"upload","auto-upload":!1,"on-change":e.imageOnChange,"file-list":e.fileList}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" 将IDEA插件生成的API描述文件拖到此处，或 "),i("em",[e._v("点击上传")])]),i("div",{staticStyle:{color:"blue"},attrs:{slot:"tip"},slot:"tip"},[i("a",{attrs:{href:this.registerPath,target:"_blank"}},[e._v("如何获取API描述文件?")])])])],1):e._e(),2==e.registerType?i("div",[i("p",{staticClass:"xml-desc"},[e._v(" 填写以下信息之前，请确保JSF服务已按 "),i("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:this.apiPublishPath,target:"_blank"}},[e._v("《API部署手册》")]),e._v(" 部署完成 ")]),i("el-form",{ref:"jsfDate",attrs:{model:e.jsfDate,rules:e.rules,"show-message":!1,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"JSF接口名",prop:"qualifiedName"}},[i("el-input",{attrs:{placeholder:"示例：com.jd.lcp.xxx.api.xxx",maxlength:"500"},on:{change:function(t){return e.updateQualifiedName()}},model:{value:e.jsfDate.qualifiedName,callback:function(t){e.$set(e.jsfDate,"qualifiedName","string"==typeof t?t.trim():t)},expression:"jsfDate.qualifiedName"}})],1),i("el-form-item",{attrs:{label:"JSF别名",prop:"jsfAlias"}},[i("el-select",{staticClass:"inline-input",attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.updatejsfAlias()}},model:{value:e.jsfDate.jsfAlias,callback:function(t){e.$set(e.jsfDate,"jsfAlias",t)},expression:"jsfDate.jsfAlias"}},e._l(this.jsfAliasList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),i("el-form-item",{attrs:{label:"JSF方法名",prop:"methodList"}},[i("el-select",{staticClass:"inline-input",attrs:{multiple:"",placeholder:"请选择",filterable:"",remote:!0,"reserve-keyword":!0,"remote-method":e.querySearch},on:{"visible-change":e.onMethodListVisibleChange},model:{value:e.jsfDate.methodList,callback:function(t){e.$set(e.jsfDate,"methodList",t)},expression:"jsfDate.methodList"}},e._l(e.methodMap,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),i("div",{staticClass:"xml-button"},[i("el-button",{on:{click:function(t){return e.previous()}}},[e._v("上一步")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next()}}},[e._v("下一步")])],1)],1):e._e()])}),[],!1,null,"6e13ddb2",null)),V=K.exports,Z=i("b775"),Y={props:{apiMessage:Object},data:function(){return{openIsDisabled:!1,xmlStr:"",ruleForm:{options:"",value:"",cnName:"",qualifiedName:""},rules:{value:[{required:!0,message:"请选择应用",trigger:"change"}],cnName:[{required:!0,message:"请填写API名称",trigger:"blur"},{min:2,max:255,message:"长度在 2 到 255 个字符",trigger:"blur"}],qualifiedName:[{required:!0,message:"API不能为空",trigger:"blur"}]}}},methods:{saveApi:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,s,n,l,c,p,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ruleForm,i=t.qualifiedName,a=t.cnName,s=t.value,n=s,l=this.xmlStr,c=this.apiMessage.registerType,p=this.apiMessage.jsfDate.jsfAlias,u=[{qualifiedName:i,cnName:a,appCode:n,apiXml:l,registerType:c,jsfAlias:p,sceneType:1}],e.next=8,o.a.post("/ApiManagerService/saveApi",JSON.stringify(u));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),submitForm:function(e){var t=this;if(this.ruleForm.xmlStr="")return this.$message.error("文件为空!"),!1;this.$refs[e].validate(function(){var e=Object(n.a)(Object(r.a)().mark((function e(i){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=10;break}return t.openIsDisabled=!0,e.next=4,t.saveApi().catch((function(e){var i=t,a=5,s=window.setInterval((function(){--a<=0&&(clearInterval(s),i.openIsDisabled=!1)}),1e3);throw new Error("submitForm saveApi"+e)}));case 4:sessionStorage.removeItem("apiXml"),t.apiMessage.qualifiedName=t.ruleForm.qualifiedName,t.$emit("next"),t.openIsDisabled=!1,e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},prestep:function(){this.$emit("previous")}},created:function(){var e=this;this.ruleForm.qualifiedName=this.apiMessage.qualifiedName,this.xmlStr=unescape(sessionStorage.getItem("apiXml"));Object(Z.a)({url:"/select/findAppListForSelect",method:"get"}).then((function(t){e.ruleForm.options=t.data})).catch((function(e){}))}},ee=Y,te=(i("70c0"),Object(w.a)(ee,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-wrap"},[i("el-form",{ref:"ruleForm",staticClass:"myEntryFormBox",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"API",prop:"qualifiedName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.qualifiedName,callback:function(t){e.$set(e.ruleForm,"qualifiedName",t)},expression:"ruleForm.qualifiedName"}})],1),i("el-form-item",{attrs:{label:"中文名称",prop:"cnName"}},[i("el-input",{model:{value:e.ruleForm.cnName,callback:function(t){e.$set(e.ruleForm,"cnName",t)},expression:"ruleForm.cnName"}})],1),i("el-form-item",{attrs:{label:"所属应用",prop:"value"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择应用"},model:{value:e.ruleForm.value,callback:function(t){e.$set(e.ruleForm,"value",t)},expression:"ruleForm.value"}},e._l(e.ruleForm.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.code}})})),1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{disabled:e.openIsDisabled,type:""},on:{click:function(t){return e.prestep()}}},[e._v("上一步")]),i("el-button",{attrs:{disabled:e.openIsDisabled,type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认注册")])],1)],1)],1)}),[],!1,null,"5b342fa9",null)),ie=te.exports,ae={props:{apiMessage:Object},data:function(){return{time:3,intervalID:"",qualifiedName:""}},methods:{findApiForWeb:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiDepotService/findApiForWeb",t=this.qualifiedName,i=[{qualifiedName:t}],e.next=5,o.a.post("/ApiDepotService/findApiForWeb",JSON.stringify(i));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),next:function(){var e=Object(n.a)(Object(r.a)().mark((function e(){var t,i,a,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(this.intervalID),e.next=3,this.findApiForWeb().catch((function(){throw new Error("next findApiForWeb")}));case 3:t=e.sent,(i=t.data).length>0&&(a=Object(s.a)(i,1),n=a[0],this.$router.push({name:"ApiManagerDetail",params:{id:n.id,type:"jsf"},query:{tabName:"basic-data"}}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.qualifiedName=this.apiMessage.qualifiedName;var e=this;e.intervalID=window.setInterval(Object(n.a)(Object(r.a)().mark((function t(){var i,a,n,o;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.time--,!(e.time<=0)){t.next=8;break}return clearInterval(e.intervalID),t.next=5,e.findApiForWeb().catch((function(){throw new Error("mounted findApiForWeb")}));case 5:i=t.sent,(a=i.data).length>0&&(n=Object(s.a)(a,1),o=n[0],e.$router.push({name:"ApiManagerDetail",params:{id:o.id,type:"jsf"},query:{tabName:"basic-data"}}));case 8:case"end":return t.stop()}}),t)}))),1e3)},beforeRouteLeave:function(e,t,i){clearInterval(this.intervalID),i()}},se=ae,re=(i("9f10"),Object(w.a)(se,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),i("h3",[e._v("注册成功")]),i("p",{staticClass:"c-666",staticStyle:{margin:"10px 0 50px"}},[e._v(" 快去管理API吧， "),i("span",{staticClass:"primary"},[e._v(e._s(e.time)+"s")]),e._v("后自动跳转到API管理页 ")]),i("el-row",[i("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("去管理API")])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"entrySuccess"},[t("i",{staticClass:"el-icon-success"})])}],!1,null,"8f135394",null)),ne=re.exports,oe={components:{steps:a.a,JsfSubmitXml:S,JsfSubmitFinish:F,JsfApiProtocol:q,JsfApiInfo:L,HttpApiInfo:X,HttpProvider:G,HttpSubmitFinish:W,SubmitXml:V,SubmitApiMessage:ie,SubmitFinish:ne},data:function(){return{apiMessage:{qualifiedName:"",cnName:"",registerType:"",jsfDate:Object},apiId:0,stepsObj:{},httpStepsObj:{},jsfStepsList:[{active:0,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]},{active:1,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]},{active:2,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]},{active:3,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]}],httpStepsList:[{active:0,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]},{active:1,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]},{active:2,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]},{active:3,title:"注册API",tiptitle:["选择API调用协议","提供API的方式","填写API基本信息","注册成功"]}],progress:0,showJsf:!1,showHttp:!1,type:1}},created:function(){this.stepsObj=this.jsfStepsList[this.progress],this.httpStepsObj=this.httpStepsList[this.progress]},methods:{previous:function(){this.progress>0&&(this.progress--,this.stepsObj=this.jsfStepsList[this.progress],this.httpStepsObj=this.httpStepsList[this.progress])},next:function(){this.progress<3&&(this.progress++,this.stepsObj=this.jsfStepsList[this.progress],this.httpStepsObj=this.httpStepsList[this.progress])},apiService:function(e){1===e?(this.showJsf=!0,this.showHttp=!1):2===e&&(this.showHttp=!0,this.showJsf=!1)},getApiId:function(e){this.apiId=e},provideMethod:function(e){this.type=e}}},le=oe,ce=(i("a8e2"),Object(w.a)(le,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("steps",e._b({},"steps",e.stepsObj,!1)),i("div",{staticClass:"entryFormBox tc"},[0===e.progress?i("JsfApiProtocol",{on:{next:e.next,apiService:e.apiService}}):e._e(),e.showJsf?i("div",[1===e.progress?i("SubmitXml",{attrs:{apiMessage:e.apiMessage},on:{previous:e.previous,next:e.next}}):e._e(),2===e.progress?i("SubmitApiMessage",{attrs:{apiMessage:e.apiMessage},on:{previous:e.previous,next:e.next}}):e._e(),3===e.progress?i("SubmitFinish",{attrs:{apiMessage:e.apiMessage}}):e._e()],1):e._e(),e.showHttp?i("div",[1===e.progress?i("HttpProvider",{on:{previous:e.previous,next:e.next,provideMethod:e.provideMethod}}):e._e(),2===e.progress?i("HttpApiInfo",{attrs:{type:e.type},on:{previous:e.previous,next:e.next,getApiId:e.getApiId}}):e._e(),3===e.progress?i("HttpSubmitFinish",{attrs:{apiId:e.apiId}}):e._e()],1):e._e()],1)],1)}),[],!1,null,"64cdf618",null));t.default=ce.exports},c2d0:function(e,t,i){"use strict";var a=i("964d"),s=i("1667"),r=(i("b775"),i("7562")),n={saveCloudDomain:function(e){return r.a.post("/CloudDomainService/fontSave",e)},addHttpApi:function(e){return r.a.post("/HttpApiService/addApi",e)},getApiDomain:function(e){return r.a.post("/CloudDomainService/getApiDomain",e)}},o=n,l=i("d128"),c={getCloudDomainBase:function(e){return r.a.post("/CloudDomainService/info",e)}},p=c,u=i("7aef"),f={jsfDetail:a.a,httpDetail:s.a,httpRegister:o,cloudCluster:l.a,apiGroup:p,findAppListForSelect:function(){return u.a.get("/select/findAppListForSelect")},queryCloudDomainList:function(e){return r.a.post("/CloudDomainService/query",e)},saveCloudDomain:function(e){return r.a.post("/CloudDomainService/fontSave",e)},checkDomainIsExist:function(e){return r.a.post("/CloudDomainService/checkDomainIsExist",e)}};t.a=f},d128:function(e,t,i){"use strict";var a=i("7562"),s={queryListPage:function(e){return a.a.post("/ApiManagerService/queryCloudClusterListPage",e)},queryCloudClusterDetails:function(e){return a.a.post("/ApiManagerService/findCloudClusterDetail",[e])}};t.a=s},d4cf:function(e,t,i){"use strict";i("29d4")},d6a5:function(e,t,i){},e4b7:function(e,t,i){"use strict";i("6b5a")},e7be:function(e,t,i){"use strict";i("d6a5")},e8c8:function(e,t,i){"use strict";i("3774")}}]);