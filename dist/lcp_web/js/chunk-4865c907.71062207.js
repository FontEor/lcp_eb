(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4865c907"],{"1e14":function(e,t,n){},"256c":function(e,t,n){"use strict";n("1e14")},"2f6a":function(e,t,n){},"43b3":function(e,t,n){"use strict";var o={name:"Title",props:{text:{type:String,default:""}}},i=(n("b61a"),n("2877")),a=Object(i.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("div",{staticClass:"title__icon"}),n("div",{staticClass:"title__text"},[e._v(e._s(e.text))])])}),[],!1,null,"3d118947",null);t.a=a.exports},"547a":function(e,t,n){"use strict";var o=n("3266");t.a={methods:{clstag:function(e,t){return Object(o.a)(e,t)}}}},"748f":function(e,t,n){"use strict";var o=(n("5df3"),n("1c4c"),n("aef6"),n("f559"),n("a481"),n("28a5"),n("c7eb")),i=n("3835"),a=(n("96cf"),n("1da1")),r=(n("6b54"),{name:"InputTextareaDescription",props:{value:{type:String,default:""},placeholder:{type:String,default:""},tooltipContent:{type:String,default:"放大编辑"},dialogTitle:{type:String,default:"参数描述"}},data:function(){return{inputIconVisible:!1,dialogVisible:!1,dialogContentInnerHtml:"",selectionchangeDocumentDebounceTimer:null,clickDialogContentAnchorDebounceTimer:null,mouseoverDialogContentAnchorDebounceTimer:null,mouseoutDialogContentAnchorDebounceTimer:null,mouseoverDialogPopoverDebounceTimer:null,mouseoutDialogPopoverDebounceTimer:null,selectionString:"",selectionRange:null,dialogPromptInputValue:"",linkIconDisabled:!0,promptHrefDebounceTimer:null,dialogPopoverVisible:!1,currentAnchorOffsetLeft:0,currentAnchorOffsetTop:0,currentAnchorElement:null,dialogPopoverText:""}},methods:{onInputValue:function(e){this.$emit("update:value",e)},onMouseoverInput:function(){this.inputIconVisible=!0},onMouseoutInput:function(){this.inputIconVisible=!1},onClickInputIcon:function(){this.dialogVisible=!0},onSelectionchangeDocument:function(){var e=this;clearTimeout(this.selectionchangeDocumentDebounceTimer),this.selectionchangeDocumentDebounceTimer=setTimeout((function(){var t=window.getSelection(),n=t.anchorNode,o=t.focusNode;if(!(t.rangeCount<1)){var i=t.toString(),a=t.getRangeAt(0);i&&i.trim()&&e.$refs.dialogContent.contains(n)&&e.$refs.dialogContent.contains(o)&&n.parentNode===o.parentNode&&(e.selectionString=i,e.selectionRange=a,e.linkIconDisabled=!1)}}),800)},onOpenDialog:function(){var e=this.onSelectionchangeDocument;this.initDialogContentInnerHtml(),document.addEventListener("selectionchange",e)},onClickDialogContentAnchor:function(e){clearTimeout(this.clickDialogContentAnchorDebounceTimer),this.clickDialogContentAnchorDebounceTimer=setTimeout((function(){var t=e.target;if("A"===t.nodeName){var n=t.dataset.selection;window.open(n,"_blank")}}),300)},onMouseoverDialogContentAnchor:function(e){var t=this;clearTimeout(this.mouseoverDialogContentAnchorDebounceTimer),this.mouseoverDialogContentAnchorDebounceTimer=setTimeout((function(){var n=e.target;if("A"===n.nodeName){var o=n.dataset.selection,i=n.offsetTop,a=n.offsetLeft;t.currentAnchorOffsetLeft=a,t.currentAnchorOffsetTop=i,t.dialogPopoverText=o,t.currentAnchorElement=n,t.dialogPopoverVisible=!0}}),300)},onMouseoutDialogContentAnchor:function(e){var t=this;clearTimeout(this.mouseoutDialogContentAnchorDebounceTimer),this.mouseoutDialogContentAnchorDebounceTimer=setTimeout((function(){"A"===e.target.nodeName&&(t.dialogPopoverVisible=!1,t.dialogPopoverText="")}),300)},onOpenedDialog:function(){var e=this.onClickDialogContentAnchor,t=this.onMouseoverDialogContentAnchor,n=this.onMouseoutDialogContentAnchor;this.$refs.dialogContent.addEventListener("click",e),this.$refs.dialogContent.addEventListener("mouseover",t),this.$refs.dialogContent.addEventListener("mouseout",n)},onCloseDialog:function(){var e=this.onSelectionchangeDocument,t=this.onClickDialogContentAnchor,n=this.onMouseoverDialogContentAnchor,o=this.onMouseoutDialogContentAnchor;this.linkIconDisabled=!0,this.dialogContentInnerHtml="",document.removeEventListener("selectionchange",e),this.$refs.dialogContent.removeEventListener("click",t),this.$refs.dialogContent.removeEventListener("mouseover",n),this.$refs.dialogContent.removeEventListener("mouseout",o)},onClickDialogSaveButton:function(){this.dialogContentInnerHtml=this.$refs.dialogContent.innerHTML,this.parseDialogContentInnerHtml(),this.dialogVisible=!1},onClickLinkIcon:function(){var e=this;clearTimeout(this.promptHrefDebounceTimer),this.promptHrefDebounceTimer=setTimeout((function(){e.linkIconDisabled||(e.linkIconDisabled=!0,e.openPromptHref())}),30)},onMouseoverDialogPopover:function(){var e=this;clearTimeout(this.mouseoutDialogContentAnchorDebounceTimer),clearTimeout(this.mouseoverDialogPopoverDebounceTimer),this.mouseoverDialogPopoverDebounceTimer=setTimeout((function(){e.dialogPopoverVisible=!0}),300)},onMouseoutDialogPopover:function(){var e=this;clearTimeout(this.mouseoverDialogContentAnchorDebounceTimer),clearTimeout(this.mouseoutDialogPopoverDebounceTimer),this.mouseoverDialogPopoverDebounceTimer=setTimeout((function(){e.dialogPopoverVisible=!1}),300)},onClickPopoverEditIcon:function(){var e=Object(a.a)(Object(o.a)().mark((function e(){var t,n,a,r,c,s,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dialogPopoverVisible=!1,window.getSelection().removeAllRanges(),t=this.currentAnchorElement,n=t.childNodes,a=t.dataset.selection,r=Object(i.a)(n,1),c=r[0],(s=document.createRange()).setStart(c,0),s.setEnd(c,c.textContent.length),window.getSelection().addRange(s),this.dialogPromptInputValue=a,l=window.getSelection(),this.selectionString=l.toString(),this.selectionRange=l.getRangeAt(0),this.openPromptHref();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickPopoverDeleteIcon:function(){var e=this.currentAnchorElement,t=this.currentAnchorElement,n=t.textContent,o=t.parentNode,i=t.previousSibling,a=t.nextSibling,r=n;i&&"#text"===i.nodeName&&(r=i.textContent+r,o.removeChild(i)),a&&"#text"===a.nodeName&&(r+=a.textContent,o.removeChild(a));var c=document.createTextNode(r);o.replaceChild(c,e),this.dialogPopoverVisible=!1},initDialogContentInnerHtml:function(){var e=this.value.split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a data-selection"),"</div>"):"<div><br></div>"})).join("");this.dialogContentInnerHtml=e},parseDialogContentInnerHtml:function(){var e=this.dialogContentInnerHtml.replace(/<div><br><\/div>/g,"\n").replace(/<br>/g,"");e.startsWith("<div>")||(e=e.replace("<div>","\n")),e.endsWith("</div>")&&(e=e.replace(/<\/div>$/,"")),e=e.replace(/<div>/g,"").replace(/<\/div>/g,"\n").replace(/&nbsp;/g," "),this.$emit("update:value",e)},formatPromptHrefConfirmValue:function(e){return/^http(s)?:\/\//.test(e)||(e="https://".concat(e)),e},parseConfirmValueToInnerHtml:function(e){var t=this.selectionRange,n=t.startOffset,o=t.endOffset,i=t.startContainer,a=t.endContainer,r=t.commonAncestorContainer,c=this.selectionString,s="#text"===r.nodeName?r.parentNode:r,l=s.childNodes,u=!1,p=Array.from(l,(function(t){t===i&&(u=!0);var r=t.nodeName,s="";if(u)if(i===a){var l=t.textContent.slice(0,n).replace(/\s/g,"&nbsp;"),p=t.textContent.slice(o).replace(/\s/g,"&nbsp;");s="".concat(l,'<a data-selection="').concat(e,'">').concat(c,"</a>").concat(p)}else if(t===i){var d=t.textContent.slice(0,n).replace(/\s/g,"&nbsp;"),g=t.textContent.slice(n).replace(/\s/g,"&nbsp;");s="".concat(d,'<a data-selection="').concat(e,'">').concat(g)}else if(t===a){var h=t.textContent.slice(0,o).replace(/\s/g,"&nbsp;"),m=t.textContent.slice(o).replace(/\s/g,"&nbsp;");s="".concat(h,"</a>").concat(m)}else s=t.textContent.replace(/\s/g,"&nbsp;");else s="#text"===r?t.textContent.replace(/\s/g,"&nbsp;"):'<a data-selection="'.concat(t.dataset.selection,'">').concat(t.innerHTML,"</a>");return t===a&&(u=!1),s})).join("");s.innerHTML=p},openPromptHref:function(){var e=Object(a.a)(Object(o.a)().mark((function e(){var t,n,i=this;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"链接","dialog-content-prompt","请输入链接",t=this.dialogPromptInputValue,!1,!1,!1,n={customClass:"dialog-content-prompt",inputPlaceholder:"请输入链接",inputValue:t,showClose:false,showCancelButton:false,modal:false},e.next=10,this.$prompt("链接",n).then((function(e){var t=e.value;(t=t.trim())&&(t=i.formatPromptHrefConfirmValue(t),i.parseConfirmValueToInnerHtml(t))})).catch((function(){}));case 10:this.dialogPromptInputValue="";case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}}),c=r,s=(n("bc44"),n("256c"),n("2877")),l=Object(s.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-textarea-description"},[n("div",{staticClass:"input-textarea-description__input-wrapper",on:{mouseover:e.onMouseoverInput,mouseout:e.onMouseoutInput}},[n("el-input",{staticClass:"input-wrapper__input",attrs:{value:e.value,placeholder:e.placeholder,rows:1,type:"textarea",resize:"none"},on:{input:e.onInputValue}}),n("el-tooltip",{attrs:{content:e.tooltipContent,effect:"dark",placement:"top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.inputIconVisible,expression:"inputIconVisible"}],staticClass:"input-wrapper__icon",on:{click:e.onClickInputIcon}},[n("i",{staticClass:"el-icon-full-screen"})])])],1),n("el-dialog",{staticClass:"input-textarea-description__dialog",attrs:{visible:e.dialogVisible,title:e.dialogTitle,"close-on-click-modal":!1,"destroy-on-close":!0,"max-height":400,width:"720px"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.onOpenDialog,opened:e.onOpenedDialog,close:e.onCloseDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{type:"primary"},on:{click:e.onClickDialogSaveButton}},[e._v("保 存")])]},proxy:!0}])},[n("div",{staticClass:"dialog__dialog-wrapper"},[n("div",{staticClass:"dialog-wrapper__top-bar"},[n("i",{class:{"el-icon-link":!0,disabled:e.linkIconDisabled},on:{click:e.onClickLinkIcon}})]),n("div",{ref:"dialogContent",staticClass:"dialog-wrapper__content",attrs:{contenteditable:"true"},domProps:{innerHTML:e._s(e.dialogContentInnerHtml)}}),n("p",{staticClass:"dialog-wrapper__tip"},[e._v("选中文字即可设置跳转链接")]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogPopoverVisible,expression:"dialogPopoverVisible"}],staticClass:"dialog-wrapper__popover",style:{"--current-anchor-offset-left":e.currentAnchorOffsetLeft+"px","--current-anchor-offset-top":e.currentAnchorOffsetTop+"px"},on:{mouseover:e.onMouseoverDialogPopover,mouseout:e.onMouseoutDialogPopover}},[n("div",{staticClass:"popover__text"},[e._v(e._s(e.dialogPopoverText))]),n("div",{staticClass:"popover__icon-wrapper"},[n("i",{staticClass:"el-icon-edit icon-wrapper__icon",on:{click:e.onClickPopoverEditIcon}}),n("i",{staticClass:"el-icon-delete icon-wrapper__icon",on:{click:e.onClickPopoverDeleteIcon}})])])])],1)])],1)}),[],!1,null,"5380eda6",null);t.a=l.exports},aef6:function(e,t,n){"use strict";var o=n("5ca1"),i=n("9def"),a=n("d2c8"),r="endsWith",c=""[r];o(o.P+o.F*n("5147")(r),"String",{endsWith:function(e){var t=a(this,e,r),n=arguments.length>1?arguments[1]:void 0,o=i(t.length),s=void 0===n?o:Math.min(i(n),o),l=String(e);return c?c.call(t,l,s):t.slice(s-l.length,s)===l}})},b61a:function(e,t,n){"use strict";n("2f6a")},bc44:function(e,t,n){"use strict";n("eb4c")},eb4c:function(e,t,n){}}]);