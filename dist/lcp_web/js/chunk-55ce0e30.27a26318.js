(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-55ce0e30"],{"1c72":function(e,t,i){"use strict";var a=i("7aef"),s=i("b775"),o={isExistMerchant:function(e){var t={url:"/merchant/isExistMerchant/".concat(e),method:"get",code:e};return Object(a.a)(t)},isCorrectBusinessCode:function(e){var t={url:"/merchant/isCorrectBusinessCode",method:"get",params:e};return Object(a.a)(t)},createMerchant:function(e){return s.a.post("/merchant/createMerchant",e)},echoMerchant:function(e){return s.a.get("/merchant/selectMerchant/".concat(e))},updateMerchant:function(e){return s.a.post("/merchant/updateMerchant",e)}};t.a=o},"2a9a":function(e,t,i){"use strict";i("98551")},"3d85":function(e,t,i){"use strict";var a=(i("c5f6"),{name:"Steps",props:{titleList:{type:Array,default:function(){return[]}},active:{type:Number,required:!0}}}),s=(i("e75f"),i("2877")),o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-steps",{staticClass:"steps",attrs:{active:e.active,"align-center":!0,"finish-status":"success"}},e._l(e.titleList,(function(e,t){return i("el-step",{key:t,attrs:{title:e}})})),1)}),[],!1,null,"443b202a",null);t.a=o.exports},6363:function(e,t,i){"use strict";i.r(t);var a=(i("c5f6"),i("7f7f"),i("c7eb")),s=(i("96cf"),i("1da1")),o=i("3d85"),r=i("1c72"),n=i("a78e"),c=i.n(n),l={name:"NewMerchant",components:{Steps:o.a},data:function(){var e=this,t=function(){var t=Object(s.a)(Object(a.a)().mark((function t(i,s,o){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s,t.next=3,r.a.isExistMerchant(n).then((function(e){var t=e.data,i=t.code,a=t.data;2e4===i&&(a?o(new Error("商家编码已存在，请输入新的商家编码")):o())})).catch((function(t){var i=t.data.message;i&&e.$message.error(i),o(new Error(" "))}));case 3:case"end":return t.stop()}}),t)})));return function(e,i,a){return t.apply(this,arguments)}}(),i=function(){var t=Object(s.a)(Object(a.a)().mark((function t(i,s,o){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={businessCode:s,businessCodeType:e.basicInfoForm.businessCodeType},t.next=3,r.a.isCorrectBusinessCode(n).then((function(e){var t=e.data,i=t.code,a=t.data;2e4===i&&(a?o():o(new Error("请输入正确的业务编码")))})).catch((function(t){var i=t.data.message;i&&e.$message.error(i),o(new Error(" "))}));case 3:case"end":return t.stop()}}),t)})));return function(e,i,a){return t.apply(this,arguments)}}();return{titleList:["填写基本信息","填写特殊配置","完成"],active:0,basicInfoForm:{code:"",name:"",businessCode:"",businessCodeType:1,businessDescription:""},basicInfoRules:{name:[{required:!0,message:"商家名称不能为空"}],code:[{required:!0,message:"商家编码不能为空"},{validator:t,trigger:"blur"}],businessCodeType:[{required:!0,message:"业务编码不能为空"}],businessCode:[{required:!0,message:"业务编码不能为空"},{validator:i,trigger:"blur"}],businessDescription:[{required:!0,message:"对接业务不能为空"},{min:10,max:200,message:"请输入10-200个字符",trigger:"blur"}]},specialConfigurationForm:{},specialConfigurationRules:{},code:"",name:"",supplierId:-1}},methods:{validateNextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.active<3&&t.active++}))},previousStep:function(){this.active>0&&this.active--},createMerchant:function(){var e=Object(s.a)(Object(a.a)().mark((function e(){var t,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign(this.basicInfoForm,this.specialConfigurationForm),e.next=3,r.a.createMerchant(t);case 3:(i=e.sent)&&(this.code=i.data.code,this.name=i.data.name,this.active<3&&this.active++);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changeBusinessCodeType:function(){this.$refs.basicInfoForm.validateField("businessCode")}},created:function(){this.supplierId=Number(c.a.get("supplierId"))}},p=l,u=(i("2a9a"),i("2877")),m=Object(u.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return-1!==e.supplierId?i("el-container",[i("el-header",{staticClass:"header-info",staticStyle:{height:"80px"}},[i("div",{staticClass:"header-wrapper"},[i("div",{staticClass:"text-wrapper"},[i("div",{staticClass:"title-wrapper"},[i("p",{staticClass:"title"},[e._v("新增商家")])])])])]),i("el-main",{staticClass:"container"},[i("Steps",{attrs:{active:e.active,titleList:e.titleList}}),i("div",{staticClass:"form-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],staticClass:"basic-form"},[i("p",{staticClass:"step-title"},[e._v("为了更好地服务商家，请认真填写以下信息")]),i("el-form",{ref:"basicInfoForm",attrs:{model:e.basicInfoForm,rules:e.basicInfoRules,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"商家编码",prop:"code"}},[i("el-input",{attrs:{placeholder:"请输入EDI中要使用的商家编码"},model:{value:e.basicInfoForm.code,callback:function(t){e.$set(e.basicInfoForm,"code","string"==typeof t?t.trim():t)},expression:"basicInfoForm.code"}})],1),i("el-form-item",{attrs:{label:"商家名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入EDI中要使用的商家名称"},model:{value:e.basicInfoForm.name,callback:function(t){e.$set(e.basicInfoForm,"name","string"==typeof t?t.trim():t)},expression:"basicInfoForm.name"}})],1),i("el-form-item",{attrs:{label:"业务编码",prop:"businessCodeType"}},[i("el-radio-group",{on:{change:e.changeBusinessCodeType},model:{value:e.basicInfoForm.businessCodeType,callback:function(t){e.$set(e.basicInfoForm,"businessCodeType",t)},expression:"basicInfoForm.businessCodeType"}},[i("el-radio",{attrs:{label:1}},[e._v("青龙业主号")]),i("el-radio",{attrs:{label:2}},[e._v("事业部编码")])],1)],1),i("el-form-item",{attrs:{prop:"businessCode"}},[i("el-input",{attrs:{placeholder:"请输入商家业务编码"},model:{value:e.basicInfoForm.businessCode,callback:function(t){e.$set(e.basicInfoForm,"businessCode","string"==typeof t?t.trim():t)},expression:"basicInfoForm.businessCode"}})],1),i("el-form-item",{attrs:{label:"对接业务",prop:"businessDescription"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入对接业务介绍，10-200个字符"},model:{value:e.basicInfoForm.businessDescription,callback:function(t){e.$set(e.basicInfoForm,"businessDescription","string"==typeof t?t.trim():t)},expression:"basicInfoForm.businessDescription"}})],1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.validateNextStep("basicInfoForm")}}},[e._v("下一步")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],staticClass:"special-configuration-form"},[i("p",{staticClass:"special-configuration-title"},[e._v(" 为了给商家提供稳定可靠的服务，请务必完善以下信息 ")]),i("p",{staticClass:"special-configuration-desc"},[e._v(" 您可在当前页面填写，或稍后在【EDI-商家管理】编辑 ")]),i("el-form",{ref:"specialConfigurationForm",attrs:{model:e.specialConfigurationForm,rules:e.specialConfigurationRules,"label-width":"140px"}},[i("p",{staticClass:"special-configuration-content"},[e._v(" 1. 【商家系统】特殊配置：是否配置了京东物流网关域名host？ ")]),i("el-form-item",{attrs:{prop:"isHostDomainName"}},[i("el-radio",{attrs:{label:!0},model:{value:e.specialConfigurationForm.isHostDomainName,callback:function(t){e.$set(e.specialConfigurationForm,"isHostDomainName",t)},expression:"specialConfigurationForm.isHostDomainName"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.specialConfigurationForm.isHostDomainName,callback:function(t){e.$set(e.specialConfigurationForm,"isHostDomainName",t)},expression:"specialConfigurationForm.isHostDomainName"}},[e._v("否")])],1),!0===e.specialConfigurationForm.isHostDomainName?i("div",[i("el-form-item",{attrs:{label:"域名：",prop:"hostDomainName"}},[i("el-input",{attrs:{placeholder:"示例：api.jdwl.jd.local"},model:{value:e.specialConfigurationForm.hostDomainName,callback:function(t){e.$set(e.specialConfigurationForm,"hostDomainName","string"==typeof t?t.trim():t)},expression:"specialConfigurationForm.hostDomainName"}})],1),i("el-form-item",{attrs:{label:"IP：",prop:"hostIp"}},[i("el-input",{attrs:{placeholder:"示例：10.126.211.234 , 11.70.215.191, 11.60.217.127"},model:{value:e.specialConfigurationForm.hostIp,callback:function(t){e.$set(e.specialConfigurationForm,"hostIp","string"==typeof t?t.trim():t)},expression:"specialConfigurationForm.hostIp"}})],1),i("el-form-item",{attrs:{label:"备注：",prop:"hostRemark"}},[i("el-input",{attrs:{placeholder:"示例：库房是4层协议不支持域名访问，直接使用网关的实例ip"},model:{value:e.specialConfigurationForm.hostRemark,callback:function(t){e.$set(e.specialConfigurationForm,"hostRemark","string"==typeof t?t.trim():t)},expression:"specialConfigurationForm.hostRemark"}})],1)],1):e._e(),i("p",{staticClass:"special-configuration-content"},[e._v(" 2. 【商家系统】特殊配置：是否配置了京东物流网关域名VIP白名单？ ")]),i("el-form-item",{attrs:{prop:"isVipWhitelist"}},[i("el-radio",{attrs:{label:!0},model:{value:e.specialConfigurationForm.isVipWhitelist,callback:function(t){e.$set(e.specialConfigurationForm,"isVipWhitelist",t)},expression:"specialConfigurationForm.isVipWhitelist"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.specialConfigurationForm.isVipWhitelist,callback:function(t){e.$set(e.specialConfigurationForm,"isVipWhitelist",t)},expression:"specialConfigurationForm.isVipWhitelist"}},[e._v("否")])],1),!0===e.specialConfigurationForm.isVipWhitelist?i("div",[i("el-form-item",{attrs:{label:"域名：",prop:"vipWhitelist"}},[i("el-input",{attrs:{placeholder:"示例：api.jdwl.jd.local"},model:{value:e.specialConfigurationForm.vipWhitelist,callback:function(t){e.$set(e.specialConfigurationForm,"vipWhitelist","string"==typeof t?t.trim():t)},expression:"specialConfigurationForm.vipWhitelist"}})],1),i("el-form-item",{attrs:{label:"IP：",prop:"vipIp"}},[i("el-input",{attrs:{placeholder:"示例：10.126.211.234 , 11.70.215.191, 11.60.217.127"},model:{value:e.specialConfigurationForm.vipIp,callback:function(t){e.$set(e.specialConfigurationForm,"vipIp","string"==typeof t?t.trim():t)},expression:"specialConfigurationForm.vipIp"}})],1)],1):e._e(),i("p",{staticClass:"special-configuration-content"},[e._v(" 3. 【商家系统】特殊配置： 是否绑定了京东物流网关域名SSL证书？ ")]),i("el-form-item",{attrs:{prop:"isDomainNameCertificate"}},[i("el-radio",{attrs:{label:!0},model:{value:e.specialConfigurationForm.isDomainNameCertificate,callback:function(t){e.$set(e.specialConfigurationForm,"isDomainNameCertificate",t)},expression:"specialConfigurationForm.isDomainNameCertificate"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.specialConfigurationForm.isDomainNameCertificate,callback:function(t){e.$set(e.specialConfigurationForm,"isDomainNameCertificate",t)},expression:"specialConfigurationForm.isDomainNameCertificate"}},[e._v("否")])],1),i("p",{staticClass:"special-configuration-content"},[e._v(" 4. 【京东物流网关】特殊配置：是否配置了商家IP白名单？ ")]),i("el-form-item",{attrs:{prop:"isIpWhitelist"}},[i("el-radio",{attrs:{label:!0},model:{value:e.specialConfigurationForm.isIpWhitelist,callback:function(t){e.$set(e.specialConfigurationForm,"isIpWhitelist",t)},expression:"specialConfigurationForm.isIpWhitelist"}},[e._v("是")]),i("el-radio",{attrs:{label:!1},model:{value:e.specialConfigurationForm.isIpWhitelist,callback:function(t){e.$set(e.specialConfigurationForm,"isIpWhitelist",t)},expression:"specialConfigurationForm.isIpWhitelist"}},[e._v("否")])],1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:e.previousStep}},[e._v("上一步")]),i("el-button",{on:{click:e.createMerchant}},[e._v("暂时跳过")]),i("el-button",{attrs:{type:"primary"},on:{click:e.createMerchant}},[e._v("下一步")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],staticClass:"finish-wrapper"},[i("i",{staticClass:"el-icon-success"}),i("p",{staticClass:"finish-title"},[e._v(" 商家创建完成，请耐心等待平台工作人员审核（咚咚群：82490630） ")]),i("p",{staticClass:"finish-content"},[e._v(" 商家编码："+e._s(e.code)+"，商家名称："+e._s(e.name)+" ")]),i("p",{staticClass:"finish-content"},[e._v(" 审核通过后，您接下来可以继续在EDI IDE中导入商家，开始接口的开发工作（"),i("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"http://edi.com/help",target:"_blank"}},[e._v("查看操作手册")]),e._v(" ） ")])])])],1)],1):e._e()}),[],!1,null,"26bb09a3",null);t.default=m.exports},98551:function(e,t,i){},"9f9e":function(e,t,i){},e75f:function(e,t,i){"use strict";i("9f9e")}}]);