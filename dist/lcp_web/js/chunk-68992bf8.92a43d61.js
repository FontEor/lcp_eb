(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-68992bf8"],{3026:function(e,t,a){"use strict";a("4d88")},"3b2b":function(e,t,a){var n=a("7726"),s=a("5dbc"),o=a("86cc").f,i=a("9093").f,c=a("aae3"),r=a("0bfb"),l=n.RegExp,u=l,f=l.prototype,p=/a/g,d=/a/g,m=new l(p)!==p;if(a("9e1e")&&(!m||a("79e5")((function(){return d[a("2b4c")("match")]=!1,l(p)!=p||l(d)==d||"/a/i"!=l(p,"i")})))){l=function(e,t){var a=this instanceof l,n=c(e),o=void 0===t;return!a&&n&&e.constructor===l&&o?e:s(m?new u(n&&!o?e.source:e,t):u((n=e instanceof l)?e.source:e,n&&o?r.call(e):t),a?this:f,l)};for(var b=function(e){e in l||o(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},h=i(u),v=0;h.length>v;)b(h[v++]);f.constructor=l,l.prototype=f,a("2aba")(n,"RegExp",l)}a("7a56")("RegExp")},"4d88":function(e,t,a){},"7cf5":function(e,t,a){"use strict";var n=a("b775"),s=a("7aef"),o={getQualificationStatus:function(e){return n.a.get("supplierIsv/getQualificationStatus",{params:e})},getUserRole:function(e){return n.a.get("user/getUserRole",{params:e})},haveBaseInfoFlag:function(e){return n.a.post("supplierIsv/haveBaseInfoFlag",e)},getAuthCode:function(e){var t={url:"/user/getAuthCode",method:"post",params:e};return Object(s.a)(t)},companyCodeExistedFlag:function(e){var t={url:"/supplierIsv/companyCodeExistedFlag",method:"get",params:e};return Object(s.a)(t)},addBaseInfo:function(e){var t={url:"/supplierIsv/addBaseInfo",method:"post",data:e};return Object(s.a)(t)}};t.a=o},be9f:function(e,t,a){"use strict";a.r(t);var n=(a("a481"),a("28a5"),a("7f7f"),a("3b2b"),a("c7eb")),s=(a("96cf"),a("1da1")),o=a("b775"),i=a("7cf5"),c={syncOutDeveloperFromIdaas:function(e){return o.a.get("/user/syncOutDeveloperFromIdaas",{params:e})}},r=c,l={name:"UserBaseInfo",data:function(){var e=this,t=function(){var t=Object(s.a)(Object(n.a)().mark((function t(a,s,o){var c;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==s&&""!==s.trim()){t.next=3;break}return o(new Error("统一社会信用代码或营业执照号不能为空")),t.abrupt("return");case 3:if(e.baseInfo.companyCode!==e.desensitizationData.companyCode){t.next=6;break}return o(),t.abrupt("return");case 6:return c={companyCode:s},t.next=10,i.a.companyCodeExistedFlag(c).then((function(){o()})).catch((function(t){var a=t.data,n=a.message;10001===a.code?o(new Error("统一社会信用代码或营业执照号已经被占用")):(n&&e.$message.error(n),o(new Error(" ")))}));case 10:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}();return{modifyPhoneUrl:window.env.idaasModifyPhone,source:null,baseInfo:{pin:"",name:"",phone:"",roleType:1,supplierCode:"",companyName:"",companyCode:"",contactsName:"",contactsPhone:"",contactsEmail:"",verificationCode:"",cascaderOptions:[],cascaderData:[],cascaderLabel:[],scale:null,businessScope:[]},scaleOptionList:[{value:1,label:"0-50人"},{value:2,label:"51-100人"},{value:3,label:"101-500人"},{value:4,label:"500人以上"}],businessScopeOptionList:["软件和信息技术服务业","电商零售","服饰","食品","酒水","3C数码","母婴","家电","家居","生鲜","汽车配件","物流","办公用品","图书","运动户外","医药保健","美妆个护","餐饮","玩具乐器","建材","制造业","日用品","服务业","其他"],desensitizationData:{companyName:"",companyCode:"",contactsName:"",contactsPhone:"",contactsEmail:"",cascaderOptions:[],scale:null,businessScope:[]},editerStatus:!1,verificationStatus:!1,verificationButtonContent:"获取验证码",verificationButtonStatus:!1,verificationButtonTime:60,verificationIsStart:!1,rules:{companyName:[{validator:function(e,t,a){null===t||""===t.trim()?a(new Error("企业名称不能为空")):a()}}],companyCode:[{pattern:/^([0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}|[1-9]\d{14})$/,message:"请输入正确的统一社会信用代码或营业执照号"},{validator:t}],contactsName:[{validator:function(t,a,n){if(null===a||""===a.trim())n(new Error("联系人姓名不能为空"));else if(a!==e.desensitizationData.contactsName){RegExp(/^[\u4e00-\u9fa5a-zA-Z]*$/).test(a)?n():n(new Error("请输入正确的姓名"))}else n()}}],contactsEmail:[{validator:function(t,a,n){if(null===a||""===a.trim())n(new Error("联系人邮箱不能为空"));else if(a!==e.desensitizationData.contactsEmail){/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a)?n():n(new Error("请输入正确的邮箱账号"))}else n()}}],contactsPhone:[{validator:function(t,a,n){if(null===a||""===a.trim())n(new Error("联系人手机号码不能为空"));else if(a!==e.desensitizationData.contactsPhone){RegExp(/^1[3456789]\d{9}$/).test(a)?n():n(new Error("请输入正确的手机号"))}else n()}}],verificationCode:[{validator:function(t,a,n){if(e.verificationStatus){var s=RegExp(/^(\d{6})$/);null===a||""===a.trim()?n(new Error("短信验证码不能为空")):s.test(a)?n():n(new Error("请输入正确的短信验证码"))}else n()}}],cascaderOptions:[{required:!0,message:"企业所在地区不能为空",trigger:"change"}]}}},filters:{formatProvinceNameText:function(e){return e||""},formatCityNameText:function(e,t){return e?t?"".concat(e,"/").concat(t):e:"-"},formatScaleText:function(e){return{1:"0-50人",2:"51-100人",3:"101-500人",4:"500人以上"}[e]||"-"},formatBusinessScopeText:function(e){return e.join("/")||"-"}},computed:{roleTypeName:function(){return 1===this.baseInfo.roleType?"管理员":"普通用户"},computeUrl:function(){var e=window.location.href;return"".concat(this.modifyPhoneUrl).concat(encodeURIComponent(e+"?from=modifyPhoneUrl"))}},watch:{"baseInfo.contactsPhone":function(){this.baseInfo.contactsPhone!==this.desensitizationData.contactsPhone?this.verificationStatus=!0:this.verificationStatus=!1}},methods:{syncOutDeveloperFromIdaas:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.syncOutDeveloperFromIdaas();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),showAreaList:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,a,s,i=this,c=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,a=c.length>1&&void 0!==c[1]?c[1]:"",s=this.baseInfo.cascaderOptions,"/supplierIsv/getAreaList",e.next=6,Object(o.a)({url:"/supplierIsv/getAreaList",method:"get",params:{queryLevel:t,areaCode:a}}).then((function(e){if(2e4===e.code){var a=e.data;1===t?i.baseInfo.cascaderData=a.map((function(e,t){return{areaCode:e.areaCode,areaName:e.areaName,cities:[]}})):2===t&&i.baseInfo.cascaderData.map((function(e,t){e.areaCode===s[0]&&(e.cities.length||(e.cities=a.map((function(e,t){return{areaCode:e.areaCode,areaName:e.areaName}}))))}))}else i.$message.error("服务器获取数据失败!")})).catch((function(e){}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getAreaList:function(e){var t,a,n=this;e?1===e.length?(t=2,a=e[0]):2===e.length&&(t=3,a=e[1]):(t=1,a="");Object(o.a)({url:"/supplierIsv/getAreaList",method:"get",params:{queryLevel:t,areaCode:a}}).then((function(a){if(2e4===a.code){var s=a.data;1===t?n.baseInfo.cascaderData=s.map((function(e,t){return{areaCode:e.areaCode,areaName:e.areaName,cities:[]}})):2===t&&n.baseInfo.cascaderData.map((function(t,a){t.areaCode===e[0]&&(t.cities.length||(t.cities=s.map((function(e,t){return{areaCode:e.areaCode,areaName:e.areaName}}))))}))}else n.$message.error("服务器获取数据失败!")})).catch((function(e){}))},onAreaItemChange:function(e){this.getAreaList(e)},onAreaChange:function(){this.$refs.cascader.getCheckedNodes()[0]&&this.$refs.cascader.getCheckedNodes()[0].pathLabels&&(this.baseInfo.cascaderLabel=this.$refs.cascader.getCheckedNodes()[0].pathLabels)},updateEditerStatus:function(){this.verificationIsStart=!1,this.editerStatus?(this.baseInfo.verificationCode="",this.editerStatus=!1,this.$refs.baseInfo.clearValidate(),this.initBaseInfo()):this.editerStatus=!0},initBaseInfo:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/supplierIsv/getBaseInfo",e.next=3,Object(o.a)({url:"/supplierIsv/getBaseInfo",method:"post"}).then(function(){var e=Object(s.a)(Object(n.a)().mark((function e(a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:2e4===a.code?(t.source=a.data.source,t.baseInfo.pin=a.data.pin,t.baseInfo.name=a.data.name,t.baseInfo.phone=a.data.phone,t.baseInfo.roleType=a.data.roleType,t.baseInfo.supplierCode=a.data.supplierCode,t.baseInfo.companyName=a.data.companyName,t.baseInfo.companyCode=a.data.companyCode,t.baseInfo.contactsName=a.data.contactsName,t.baseInfo.contactsPhone=a.data.contactsPhone,t.baseInfo.contactsEmail=a.data.contactsEmail,t.baseInfo.cascaderOptions=[a.data.provinceCode||"",a.data.cityCode||""],t.baseInfo.cascaderLabel=[a.data.provinceName,a.data.cityName],t.baseInfo.scale=a.data.scale,t.baseInfo.businessScope=a.data.businessScope?a.data.businessScope.split("/"):[],t.desensitizationData.companyName=a.data.companyName,t.desensitizationData.companyCode=a.data.companyCode,t.desensitizationData.contactsName=a.data.contactsName,t.desensitizationData.contactsPhone=a.data.contactsPhone,t.desensitizationData.contactsEmail=a.data.contactsEmail,t.desensitizationData.cascaderOptions=[a.data.provinceCode||"",a.data.cityCode||""],t.desensitizationData.cascaderLabel=[a.data.provinceName,a.data.cityName],t.desensitizationData.scale=a.data.scale,t.desensitizationData.businessScope=a.data.businessScope?a.data.businessScope.split("/"):[]):t.$message({message:a.message,type:"error"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendVerificationCode:function(){var e=this;if(RegExp(/^1[3456789]\d{9}$/).test(this.baseInfo.contactsPhone)){this.updateVerificationButtonStatus();Object(o.a)({url:"/user/getAuthCode",method:"post",params:{phone:this.baseInfo.contactsPhone}}).then((function(t){2e4===t.code||e.$message({message:t.message,type:"error"})})).catch((function(e){}))}else this.$message({message:"请输入正确的手机号",type:"error"})},updateVerificationButtonStatus:function(){var e=this;this.verificationIsStart=!0,this.verificationButtonStatus=!0,this.verificationButtonContent=this.verificationButtonTime+"s";var t=window.setInterval((function(){e.verificationButtonTime--,e.verificationButtonContent=e.verificationButtonTime+"s",(e.verificationButtonTime<0||!1===e.verificationIsStart)&&(window.clearInterval(t),e.verificationButtonContent="获取验证码",e.verificationButtonStatus=!1,e.verificationButtonTime=60)}),1e3)},saveBaseInfo:function(){var e=this;this.$refs.baseInfo.validate((function(t){t&&e.submitBaseInfo()}))},submitBaseInfo:function(){var e=this,t={};this.baseInfo.companyName!=this.desensitizationData.companyName&&(t.companyName=this.baseInfo.companyName),this.baseInfo.companyCode!=this.desensitizationData.companyCode&&(t.companyCode=this.baseInfo.companyCode),this.baseInfo.contactsName!=this.desensitizationData.contactsName&&(t.contactsName=this.baseInfo.contactsName),this.baseInfo.contactsPhone!=this.desensitizationData.contactsPhone&&(t.contactsPhone=this.baseInfo.contactsPhone),this.baseInfo.contactsEmail!=this.desensitizationData.contactsEmail&&(t.contactsEmail=this.baseInfo.contactsEmail),this.baseInfo.cascaderOptions[0]!==this.desensitizationData.cascaderOptions[0]&&(t.provinceCode=this.baseInfo.cascaderOptions[0]),this.baseInfo.cascaderOptions[1]!==this.desensitizationData.cascaderOptions[1]&&(t.cityCode=this.baseInfo.cascaderOptions[1]),this.baseInfo.cascaderLabel[0]!==this.desensitizationData.cascaderLabel[0]&&(t.provinceName=this.baseInfo.cascaderLabel[0]),this.baseInfo.cascaderLabel[1]!==this.desensitizationData.cascaderLabel[1]&&(t.cityName=this.baseInfo.cascaderLabel[1]),this.baseInfo.scale!==this.desensitizationData.scale&&(t.scale=this.baseInfo.scale),this.baseInfo.businessScope.join("/")!==this.desensitizationData.businessScope.join("/")&&(t.businessScope=this.baseInfo.businessScope.join("/")),this.verificationStatus&&(t.verificationCode=this.baseInfo.verificationCode);Object(o.a)({url:"/supplierIsv/updateBaseInfo",method:"post",data:t}).then((function(t){2e4===t.code&&(e.updateEditerStatus(),e.initBaseInfo(),e.$message({message:t.message,type:"success"}))})).catch((function(e){}))}},created:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modifyPhoneUrl"!==this.$route.query.from){e.next=4;break}return e.next=3,this.syncOutDeveloperFromIdaas();case 3:this.$router.replace({query:""});case 4:return e.next=6,this.initBaseInfo();case 6:return e.next=8,this.showAreaList();case 8:if(e.t0=this.baseInfo.cascaderOptions.length>0&&this.baseInfo.cascaderOptions[0],!e.t0){e.next=12;break}return e.next=12,this.showAreaList(2,this.baseInfo.cascaderOptions[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},u=l,f=(a("3026"),a("2877")),p=Object(f.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-base-info app-container"},[e._m(0),a("br"),a("el-form",{staticStyle:{"margin-left":"35px"},attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"账号:"}},[a("span",[e._v(e._s(e.baseInfo.pin))])]),a("el-form-item",{attrs:{label:"姓名:"}},[a("span",[e._v(e._s(e.baseInfo.name))])]),a("el-form-item",{attrs:{label:"手机号:"}},[a("span",[e._v(e._s(e.baseInfo.phone))]),a("a",{staticStyle:{"margin-left":"20px",color:"#3c6ef0"},attrs:{href:e.computeUrl,target:"_blank"}},[e._v("更改")])]),a("el-form-item",{attrs:{label:"角色:"}},[a("span",[e._v(e._s(e.roleTypeName))])]),a("el-form-item",{attrs:{label:"团队编码:"}},[a("span",[e._v(e._s(e.baseInfo.supplierCode))])])],1),e._m(1),a("br"),a("el-form",{ref:"baseInfo",staticStyle:{"margin-left":"35px"},attrs:{model:e.baseInfo,"label-width":"120px",rules:e.rules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"企业名称:",prop:"companyName"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?a("el-input",{model:{value:e.baseInfo.companyName,callback:function(t){e.$set(e.baseInfo,"companyName","string"==typeof t?t.trim():t)},expression:"baseInfo.companyName"}}):e._e(),e.editerStatus?e._e():a("span",[e._v(e._s(e.baseInfo.companyName))])],1)],1)],1),a("el-form-item",{attrs:{label:"统一社会信用代码或营业执照号:",prop:"companyCode"}},[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?e._e():a("span",[e._v(e._s(e.baseInfo.companyCode))]),e.editerStatus?a("el-input",{model:{value:e.baseInfo.companyCode,callback:function(t){e.$set(e.baseInfo,"companyCode",t)},expression:"baseInfo.companyCode"}}):e._e()],1)],1),a("el-form-item",{attrs:{label:"企业所在地区:"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?a("el-cascader",{ref:"cascader",staticStyle:{width:"100%"},attrs:{options:e.baseInfo.cascaderData,placeholder:"请选择地区",props:{value:"areaCode",label:"areaName",children:"cities"}},on:{"expand-change":e.onAreaItemChange,change:e.onAreaChange},model:{value:e.baseInfo.cascaderOptions,callback:function(t){e.$set(e.baseInfo,"cascaderOptions",t)},expression:"baseInfo.cascaderOptions"}}):a("span",[e._v(" "+e._s(e._f("formatCityNameText")(e._f("formatProvinceNameText")(e.baseInfo.cascaderLabel[0]),e.baseInfo.cascaderLabel[1]))+" ")])],1)],1)],1),a("el-form-item",{attrs:{label:"企业规模:"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择企业规模"},model:{value:e.baseInfo.scale,callback:function(t){e.$set(e.baseInfo,"scale",t)},expression:"baseInfo.scale"}},e._l(e.scaleOptionList,(function(e){var t=e.value,n=e.label;return a("el-option",{key:t,attrs:{value:t,label:n}})})),1):a("span",[e._v(e._s(e._f("formatScaleText")(e.baseInfo.scale)))])],1)],1)],1),a("el-form-item",{attrs:{label:"主营业务:"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!0,placeholder:"请选择主营业务"},model:{value:e.baseInfo.businessScope,callback:function(t){e.$set(e.baseInfo,"businessScope",t)},expression:"baseInfo.businessScope"}},e._l(e.businessScopeOptionList,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1):a("span",[e._v(" "+e._s(e._f("formatBusinessScopeText")(e.baseInfo.businessScope))+" ")])],1)],1)],1),a("el-form-item",{attrs:{label:"联系人姓名:",prop:"contactsName"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?e._e():a("span",[e._v(e._s(e.baseInfo.contactsName))]),e.editerStatus?a("el-input",{model:{value:e.baseInfo.contactsName,callback:function(t){e.$set(e.baseInfo,"contactsName",t)},expression:"baseInfo.contactsName"}}):e._e()],1)],1)],1),a("el-form-item",{attrs:{label:"联系人邮箱:",prop:"contactsEmail"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?e._e():a("span",[e._v(e._s(e.baseInfo.contactsEmail))]),e.editerStatus?a("el-input",{model:{value:e.baseInfo.contactsEmail,callback:function(t){e.$set(e.baseInfo,"contactsEmail",t)},expression:"baseInfo.contactsEmail"}}):e._e()],1)],1)],1),a("el-form-item",{attrs:{label:"联系人手机号:",prop:"contactsPhone"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[e.editerStatus?e._e():a("span",[e._v(e._s(e.baseInfo.contactsPhone))]),e.editerStatus?a("el-input",{model:{value:e.baseInfo.contactsPhone,callback:function(t){e.$set(e.baseInfo,"contactsPhone",t)},expression:"baseInfo.contactsPhone"}}):e._e()],1)],1)],1),e.verificationStatus?a("el-form-item",{attrs:{label:"手机号验证码:",prop:"verificationCode"}},[a("el-row",[a("el-col",{staticStyle:{width:"200px"},attrs:{span:5}},[a("el-input",{attrs:{placeholder:"填写手机验证码"},model:{value:e.baseInfo.verificationCode,callback:function(t){e.$set(e.baseInfo,"verificationCode",t)},expression:"baseInfo.verificationCode"}})],1),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:2}},[a("el-button",{staticClass:"sendButton",attrs:{type:"primary",disabled:e.verificationButtonStatus},on:{click:function(t){return e.sendVerificationCode()}}},[e._v(e._s(e.verificationButtonContent))])],1)],1)],1):e._e()],1),1===e.baseInfo.roleType&&e.baseInfo.supplierCode&&"clps"!==e.source?a("div",{staticStyle:{"margin-left":"33px"}},[e.editerStatus?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateEditerStatus()}}},[e._v("编辑 ")]),e.editerStatus?a("el-button",{on:{click:function(t){return e.updateEditerStatus()}}},[e._v("取消 ")]):e._e(),e.editerStatus?a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:function(t){return e.saveBaseInfo()}}},[e._v("保存 ")]):e._e()],1):e._e()],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menuHeader"},[a("h2",{staticClass:"menuTitle"},[e._v("个人基本信息")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menuHeader"},[a("h2",{staticClass:"menuTitle"},[e._v("企业信息")])])}],!1,null,"1d2484ea",null);t.default=p.exports}}]);