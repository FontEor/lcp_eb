(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8bdba2a4"],{"328c":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a("b775");var i=a("7562");function r(e){return i.a.post("/ApiManagerService/queryApiCategory",JSON.stringify(e))}function n(e){return i.a.post("/HttpApiService/queryApiList",e)}},"333d":function(e,t,a){"use strict";a("c5f6"),Math.easeInOutQuad=function(e,t,a,i){return(e/=i/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function r(e,t,a){var r=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=e-r,s=0;t=void 0===t?500:t;!function e(){s+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(s,r,n,t)),s<t?i(e):a&&"function"==typeof a&&a()}()}var n={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},s=n,p=(a("8d79"),a("2877")),o=Object(p.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"0a87263c",null);t.a=o.exports},"547a":function(e,t,a){"use strict";var i=a("3266");t.a={methods:{clstag:function(e,t){return Object(i.a)(e,t)}}}},"753e":function(e,t,a){},7562:function(e,t,a){"use strict";var i=a("c7eb"),r=(a("96cf"),a("1da1")),n=a("bc3a"),s=a.n(n),p=a("7a3a"),o=a("3cfb"),l=a("c24f"),c=a("2a53"),u=a("a78e"),m=a.n(u),d=!1,f=s.a.create({baseURL:window.env.gatewayApiDecoupling,withCredentials:!0,timeout:1e4,headers:{"LOP-DN":window.env.gatewayApiDecouplingLop,"Account-Type":Object(c.a)()?"erp":"passport","X-Requested-With":"XMLHttpRequest"}});function y(){return h.apply(this,arguments)}function h(){return h=Object(r.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.a.dispatch("user/resetUser"),sessionStorage.setItem("store",JSON.stringify(o.a.state)),p.MessageBox.confirm("您的登录状态已失效，是否重新登录？","提示",{confirmButtonText:"登录",cancelButtonText:"不登录",type:"warning"}).then(Object(r.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=!1,e.next=3,Object(l.a)();case 3:if(!c.a){e.next=8;break}return e.next=6,o.a.dispatch("user/handleIntranetGetUserInfo");case 6:e.next=9;break;case 8:window.location.reload();case 9:case"end":return e.stop()}}),e)})))).catch((function(){d=!1}));case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}f.interceptors.request.use((function(e){return e.headers.groupCode=m.a.get("groupCode")||"",e}),(function(e){return Promise.reject(e)})),f.interceptors.response.use((function(e){var t=e.status;if(e.data.error_response)return p.Message.error("服务异常"),Promise.reject(e);if(401===t||520===t)return d||(d=!0,y()),Promise.reject(e);if(e.data.response){var a=e.data.response,i=a.code,r=a.message;return 2e4===i?e.data.response:(10003===i||r&&p.Message.error(r),Promise.reject(e.data.response))}return Promise.reject(e)}),(function(e){var t=e.response.status;return e.response.data.error_response&&p.Message.error("服务异常"),401!==t&&520!==t||d||(d=!0,y()),Promise.reject(e.response)})),t.a=f},"8d79":function(e,t,a){"use strict";a("753e")},a3e7:function(e,t,a){"use strict";a("f4bf")},b1d3:function(e,t,a){"use strict";a("d055")},d055:function(e,t,a){},e675:function(e,t,a){"use strict";a.r(t);var i=(a("7f7f"),a("b775")),r=a("7a3a"),n={computed:{computeAppTypeText:function(){return 3===this.appSummaryForm.type?this.$t("app.appOverView.5ix5wo2kdq81"):4===this.appSummaryForm.type?this.$t("app.appOverView.5ix5wo2kdq80"):5===this.appSummaryForm.type?this.$t("app.appOverView.5ix5wo2kdx40"):void 0},secretMeg:function(){return 3===this.appSummaryForm.type||4===this.appSummaryForm.type||5===this.appSummaryForm.type?this.appSummaryForm.gatewaySecret:this.appSummaryForm.secret}},data:function(){return{editer:{status:!0},appSummaryForm:{id:"",name:"",code:"",secret:"",gatewaySecret:"",remark:"",type:"",pkiid:""},systemSource:null,secretDisplay:!1,publicSecretDisplay:!1,publicSecret:"",oldAppSummaryForm:{oldName:"",oldRemark:""},rules:{name:[{required:!0,message:this.$t("app.appOverView.5ix5wo2ke3s0"),trigger:"blur"},{min:2,max:20,message:this.$t("app.appOverView.5ix5wo2keak0"),trigger:"blur"}],remark:[{required:!0,message:this.$t("app.appOverView.5ix5wo2kef00"),trigger:"blur"},{min:10,max:200,message:this.$t("app.appOverView.5ix5wo2kej40"),trigger:"blur"}]},submitButtonLoading:!1,submitButtonDebounceTimer:null}},created:function(){this.fetchAppSummary()},methods:{fetchAppSummary:function(){var e=this;Object(i.a)({url:"/app/getApp",method:"get",params:{id:this.$route.params.id}}).then((function(t){e.appSummaryForm=t.data,e.$emit("updateTitle",e.appSummaryForm),delete e.appSummaryForm.createTime,delete e.appSummaryForm.updateTime,delete e.appSummaryForm.ts,e.oldAppSummaryForm.oldName=e.appSummaryForm.name,e.oldAppSummaryForm.oldRemark=e.appSummaryForm.remark,e.systemSource=e.appSummaryForm.systemSource})).catch((function(e){}))},onClickSubmitButton:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;clearTimeout(t.submitButtonDebounceTimer),t.submitButtonDebounceTimer=setTimeout((function(){t.submitButtonLoading=!0,Object(i.a)({url:"/app/saveAppBaseInfo",method:"post",params:t.appSummaryForm,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){r.Message.success(t.$t("app.appOverView.5ix5wo2kemw0")),t.editer.status=!0,t.submitButtonLoading=!1,t.fetchAppSummary()})).catch((function(e){t.submitButtonLoading=!1}))}),300)}))},cancelAppForm:function(e){this.$refs[e].clearValidate(),this.editer.status=!0,this.appSummaryForm.name=this.oldAppSummaryForm.oldName,this.appSummaryForm.remark=this.oldAppSummaryForm.oldRemark},editerForm:function(e){this.editer.status=!1},copyAppKey:function(){var e=document.createElement("input");e.value=this.appSummaryForm.code,document.body.appendChild(e),e.select(),!0===document.execCommand("Copy")?(e.className="appKeyInput",e.style.display="none",r.Message.success(this.$t("app.appOverView.5ix5wo2keqo0"))):r.Message.error(this.$t("app.appOverView.5ix5wo2kf9g0"))},copyAppSecret:function(){var e=document.createElement("input");e.value=3==this.appSummaryForm.type||4==this.appSummaryForm.type||5==this.appSummaryForm.type?this.appSummaryForm.gatewaySecret:this.appSummaryForm.secret,document.body.appendChild(e),e.select(),!0===document.execCommand("Copy")?(e.className="appSecretInput",e.style.display="none",r.Message.success(this.$t("app.appOverView.5ix5wo2kffw0"))):r.Message.error(this.$t("app.appOverView.5ix5wo2kflc0"))},displayAppSecret:function(e){this.secretDisplay=e},copyRSAIdKey:function(){var e=document.createElement("input");e.value=this.appSummaryForm.pkiid,document.body.appendChild(e),e.select(),!0===document.execCommand("Copy")?(e.className="rsaIdInput",e.style.display="none",r.Message.success(this.$t("app.appOverView.5ix5wo2kfp00"))):r.Message.error(this.$t("app.appOverView.5ix5wo2kfsg0"))},copyPublicSecret:function(){var e=document.createElement("input");e.value=this.publicSecret,document.body.appendChild(e),e.select(),!0===document.execCommand("Copy")?(e.className="rsaPublicSecretInput",e.style.display="none",r.Message.success(this.$t("app.appOverView.5ix5wo2kfp00"))):r.Message.error(this.$t("app.appOverView.5ix5wo2kfsg0"))},displayPublicSecret:function(e){var t=this;Object(i.a)({url:"/app/getPKI",method:"get",params:{id:this.$route.params.id,PKIId:this.appSummaryForm.pkiid}}).then((function(e){e.data,t.publicSecret=e.data})).catch((function(e){})),this.publicSecretDisplay=e}}},s=n,p=(a("b1d3"),a("2877")),o=Object(p.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"appSummaryForm",staticClass:"overview-appSummaryForm",attrs:{model:e.appSummaryForm,rules:e.rules,"label-width":"130px",disabled:e.editer.status}},[a("el-form-item",{attrs:{label:e.$t("app.appOverView.5ix5wo2kfsg1"),prop:"name"}},[e.editer.status?e._e():a("el-input",{attrs:{placeholder:e.$t("app.appOverView.5ix5wo2k9vk0")},model:{value:e.appSummaryForm.name,callback:function(t){e.$set(e.appSummaryForm,"name",t)},expression:"appSummaryForm.name"}}),e.editer.status?a("span",[e._v(e._s(""===e.appSummaryForm.name?e.$t("app.appOverView.5ix5wo2kbww0"):e.appSummaryForm.name))]):e._e()],1),a("el-form-item",{attrs:{label:e.$t("app.appOverView.5ix5wo2kfsg2"),prop:"remark"}},[e.editer.status?e._e():a("el-input",{attrs:{type:"textarea",placeholder:e.$t("app.appOverView.5ix5wo2kc6g0")},model:{value:e.appSummaryForm.remark,callback:function(t){e.$set(e.appSummaryForm,"remark",t)},expression:"appSummaryForm.remark"}}),e.editer.status?a("span",[e._v(e._s(""===e.appSummaryForm.remark?e.$t("app.appOverView.5ix5wo2kbww0"):e.appSummaryForm.remark))]):e._e()],1),a("el-form-item",{attrs:{label:"appKey:",prop:"code"}},[a("span",[e._v(e._s(e.appSummaryForm.code)+" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("app.appOverView.5ix5wo2kcc40"),placement:"top"}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.copyAppKey}},[a("i",{staticClass:"el-icon-document-copy"})])])],1)]),a("el-form-item",{attrs:{label:"appSecret:"}},[!0===e.secretDisplay?a("span",[e._v(" "+e._s(e.secretMeg)+" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("app.appOverView.5ix5wo2kch40"),placement:"top"}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.copyAppSecret}},[a("i",{staticClass:"el-icon-document-copy"})])]),a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.displayAppSecret(!1)}}},[e._v(" "+e._s(e.$t("app.appOverView.5ix5wo2kcn40")))])],1):a("span",[a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.displayAppSecret(!0)}}},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kcs80")))])])]),a("el-form-item",{attrs:{prop:"pkiid"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kfsg4"))+" "),a("el-tooltip",{staticClass:"el-icon-help-solid",attrs:{content:e.$t("app.appOverView.5ix5wo2kcx40"),placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})]),e._v(":")],1),a("span",[e._v(e._s(e.appSummaryForm.pkiid)+" "),a("el-tooltip",{staticClass:"el-icon-question",attrs:{effect:"dark",content:e.$t("app.appOverView.5ix5wo2kd280"),placement:"top"}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.copyRSAIdKey}},[a("i",{staticClass:"el-icon-document-copy"})])])],1)]),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kcx41"))+" "),a("el-tooltip",{staticClass:"el-icon-help-solid",attrs:{content:e.$t("app.appOverView.5ix5wo2kcx40"),placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})]),e._v(":")],1),!0===e.publicSecretDisplay?a("span",[e._v(" "+e._s(e.publicSecret)+" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("app.appOverView.5ix5wo2kde80"),placement:"top"}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.copyPublicSecret}},[a("i",{staticClass:"el-icon-document-copy"})])]),a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.displayPublicSecret(!1)}}},[e._v(" "+e._s(e.$t("app.appOverView.5ix5wo2kcn40")))])],1):a("span",[a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.displayPublicSecret(!0)}}},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kcs80")))])])]),a("el-form-item",[e.editer.status||"clps"===e.systemSource?e._e():a("div",[a("el-button",{attrs:{loading:e.submitButtonLoading,type:"primary"},on:{click:function(t){return e.onClickSubmitButton("appSummaryForm")}}},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kcx42"))+" ")]),a("el-button",{on:{click:function(t){return e.cancelAppForm("appSummaryForm")}}},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kcx43"))+" ")])],1)])],1),e.editer.status&&"clps"!==e.systemSource?a("div",[a("el-button",{staticStyle:{"margin-left":"8%"},attrs:{type:"primary"},on:{click:function(t){return e.editerForm("appSummaryForm")}}},[e._v(e._s(e.$t("app.appOverView.5ix5wo2kcx44"))+" ")])],1):e._e()],1)}),[],!1,null,"fd88e70e",null),l=o.exports,c=a("333d"),u=a("7562"),m={components:{Pagination:c.a},props:["appKey"],data:function(){return{tableDatas:[],listQuery:{total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]}}},created:function(){this.queryApiOfProvider(1,this.listQuery.limit)},methods:{rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},queryApiOfProvider:function(){var e=this;Object(u.a)({method:"post",url:"/ApiManagerService/queryApiInApp",data:JSON.stringify([{appKey:this.appKey},{pageSize:this.listQuery.pageSize,pageNumb:this.listQuery.pageNumb}])}).then((function(t){e.listQuery.total=t.data.total,e.tableDatas=t.data.list})).catch((function(e){}))},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.queryApiOfProvider()},onGotoApiOverView:function(e){this.$router.push({name:"ApiManagerDetail",params:{id:e,type:"jsf"},query:{tabName:"basic-data"}})}}},d=m,f=Object(p.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0px"},attrs:{meta:"x:241.0,y:121.0,width:600.0,height:326.0"}},[a("el-table",{staticClass:"my-table mb2",attrs:{data:e.tableDatas,"row-class-name":e.rowClassName,"empty-text":"暂没有发布成功的API"}},[a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center","min-width":"13.21%"}}),a("el-table-column",{attrs:{label:"API",prop:"qualifiedName",align:"left","min-width":"41.47%","show-tooltip-when-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link",staticStyle:{color:"rgb(60, 110, 240)"},attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.onGotoApiOverView(t.row.id)}}},[e._v(" "+e._s(t.row.qualifiedName)+" ")])]}}])}),a("el-table-column",{attrs:{label:"中文名称",prop:"cnName",align:"center","show-tooltip-when-overflow":!0}})],1),a("el-row",[a("el-col",{attrs:{span:24,push:17}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1)}),[],!1,null,null,null),y=f.exports,h=a("328c"),g={props:{appKey:String},components:{Pagination:c.a},data:function(){return{tableDatas:[],listQuery:{total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]}}},created:function(){this.queryApiOfProvider(1,this.listQuery.limit)},methods:{rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},queryApiOfProvider:function(){var e=this,t=this.listQuery.pageSize,a=[{page:this.listQuery.pageNumb,pageSize:t,sord:"desc",sidx:"updateTime"},{appKey:this.appKey}];Object(h.b)(a).then((function(t){e.listQuery.total=t.data.total,e.tableDatas=t.data.rows})).catch((function(e){}))},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.queryApiOfProvider()},onGotoApiOverView:function(e){this.$router.push({name:"ApiManagerDetail",params:{type:"http",id:e}})}}},b=g,w=Object(p.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0px"},attrs:{meta:"x:241.0,y:121.0,width:600.0,height:326.0"}},[a("el-table",{staticClass:"my-table mb2",attrs:{data:e.tableDatas,"row-class-name":e.rowClassName,"empty-text":"暂没有发布成功的API"}},[a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center","min-width":"13.21%"}}),a("el-table-column",{attrs:{label:"API",prop:"url",align:"left","min-width":"41.47%","show-tooltip-when-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link",staticStyle:{color:"rgb(60, 110, 240)"},attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.onGotoApiOverView(t.row.id)}}},[e._v(" "+e._s(t.row.url)+" ")])]}}])}),a("el-table-column",{attrs:{label:"中文名称",prop:"name",align:"center","show-tooltip-when-overflow":!0}})],1),a("el-row",[a("el-col",{attrs:{span:24,push:17}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1)}),[],!1,null,null,null),v={components:{JsfList:y,HttpList:w.exports},data:function(){return{isSwitch:!1,appKey:""}},methods:{getAppKey:function(){var e=this;Object(i.a)({url:"/app/getApp",method:"get",params:{id:this.$route.params.id}}).then((function(t){t.data&&(e.appKey=t.data.code)})).catch((function(e){}))}},mounted:function(){this.getAppKey()}},S=v,x=Object(p.a)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.isSwitch,callback:function(t){e.isSwitch=t},expression:"isSwitch"}},[a("el-radio-button",{attrs:{label:!1}},[e._v("JSF协议")]),a("el-radio-button",{attrs:{label:!0}},[e._v("HTTP协议")])],1),!e.isSwitch&&e.appKey?a("JsfList",{attrs:{appKey:e.appKey}}):e.isSwitch&&e.appKey?a("HttpList",{attrs:{appKey:e.appKey}}):e._e()],1)}),[],!1,null,"2a4f9dbe",null),k=x.exports,C=a("c7eb"),A=(a("96cf"),a("1da1")),O={components:{pagination:c.a},props:{appKey:{type:String,required:!0}},data:function(){return{tableDatas:[],aliasTableDatas:[],listQuery:{total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},aliasDialogListVisible:!1,jsfConfigInnerDialogVisible:!1,currentJsfConfig:"",loading:!0,emptyAliasText:"",qualifiedName:"",mvnDialogText:"",mvnDialogDisplay:!1}},methods:{queryConsumerApiInApp:function(){var e=Object(A.a)(Object(C.a)().mark((function e(){var t,a,i,r,n;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiDepotService/queryConsumerApiInApp",t=this.listQuery,a=t.pageSize,i=t.pageNumb,r=this.appKey,n=[{pageSize:a,pageNumb:i},{appKey:r}],e.next=6,u.a.post("/ApiDepotService/queryConsumerApiInApp",JSON.stringify(n));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findPrincipalByQualifiedName:function(){var e=Object(A.a)(Object(C.a)().mark((function e(){var t,a;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/findPrincipalByQualifiedName",t=this.qualifiedName,a=[{qualifiedName:t}],e.next=5,u.a.post("/ApiManagerService/findPrincipalByQualifiedName",JSON.stringify(a));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findJsfApiConfig:function(){var e=Object(A.a)(Object(C.a)().mark((function e(t,a){var i;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/ApiManagerService/findJsfApiConfig",i=[{apiApplyId:t,alias:a}],e.next=4,u.a.post("/ApiManagerService/findJsfApiConfig",JSON.stringify(i));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},queryApiOfCallee:function(){var e=Object(A.a)(Object(C.a)().mark((function e(){var t,a,i,r;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryConsumerApiInApp().catch((function(){throw new Error("queryApiOfCallee queryConsumerApiInApp")}));case 2:t=e.sent,a=t.data,i=a.total,r=a.list,this.listQuery.total=i,this.tableDatas=r,this.qualifiedName=r[0].qualifiedName;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.queryApiOfCallee()},copyJSFConfig:function(){var e=Object(A.a)(Object(C.a)().mark((function e(t){var a,i,n,s,p,o;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.applyInterfaceInfoId,i=t.alias,e.next=3,this.findJsfApiConfig(a,i).catch((function(){throw new Error("copyJSFConfig findJsfApiConfig")}));case 3:n=e.sent,s=n.data,p=s,(o=document.createElement("textarea")).value=p,document.body.appendChild(o),o.select(),!0===document.execCommand("Copy")?(o.className="configInput",o.style.display="none",r.Message.success("已经成功复制")):r.Message.error("复制失败");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),displayJSFConfig:function(){var e=Object(A.a)(Object(C.a)().mark((function e(t){var a,i,n,s,p,o=this;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.jsfConfigInnerDialogVisible=!0,a=t.applyInterfaceInfoId,i=t.alias,e.next=4,this.findJsfApiConfig(a,i).catch((function(){throw o.loading=!1,r.Message.error("获取JSF配置信息失败"),new Error("displayJSFConfig findJsfApiConfig")}));case 4:n=e.sent,s=n.data,(p=s)&&(this.currentJsfConfig=p),this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),onGotoApiOverView:function(e){window.open(window.location.protocol+"//"+"".concat(window.location.host,"/#/apiMethodList?qualifiedName=")+e)},onShowAlias:function(e){this.aliasDialogListVisible=!0,this.aliasTableDatas=e.applyInterfaceAliasList,this.handleFindPrincipalByQualifiedName()},handleFindPrincipalByQualifiedName:function(){var e=Object(A.a)(Object(C.a)().mark((function e(){var t,a;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findPrincipalByQualifiedName().catch((function(){throw new Error("handleFindPrincipalByQualifiedName findPrincipalByQualifiedName")}));case 2:t=e.sent,a=t.data,this.emptyAliasText="当前API的研发负责人【".concat(a.pin||"","】还没为您分配别名");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleCloseAliasDialog:function(){this.aliasDialogListVisible=!1},handleCloseJSFConfigDialog:function(){this.currentJsfConfig="",this.aliasDialogListVisible=!1},displayMvnDialog:function(e){this.mvnDialogText=e,this.mvnDialogDisplay=!0},copyMvnDependency:function(e){this.$copyText(e).then((function(){r.Message.success("复制成功")}))}},created:function(){this.queryApiOfCallee()}},_=O,N=Object(p.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0px"},attrs:{meta:"x:216.0,y:81.0,width:600.0,height:321.0"}},[a("el-table",{staticClass:"my-table mb2",attrs:{data:e.tableDatas,"row-class-name":e.rowClassName,"empty-text":"暂无审批通过的API"}},[a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center","min-width":"13.21%"}}),a("el-table-column",{attrs:{label:"API",prop:"qualifiedName",align:"left","min-width":"32.61%","show-tooltip-when-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link",staticStyle:{color:"rgb(60, 110, 240)"},attrs:{href:"javascript:void(0)",target:"_blank"},on:{click:function(a){return e.onGotoApiOverView(t.row.qualifiedName)}}},[e._v(" "+e._s(t.row.qualifiedName)+" ")])]}}])}),a("el-table-column",{attrs:{label:"中文名称",prop:"apiCnName",align:"left","min-width":"39.47%","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{align:"left",label:"Maven坐标",prop:"mvn"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"javascript:void(0)",type:"primary"},on:{click:function(a){return e.displayMvnDialog(t.row.mvn)}}},[e._v("查看")]),e._v(" "),a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:"javascript:void(0)",type:"primary"},on:{click:function(a){return e.copyMvnDependency(t.row.mvn)}}},[e._v("一键复制")])]}}])}),a("el-table-column",{attrs:{label:"别名",prop:"id",align:"center","min-width":"14.21%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"document",type:"text"},on:{click:function(a){return e.onShowAlias(t.row)}}},[e._v(" 查看别名 ")])]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24,push:17}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1),a("el-dialog",{attrs:{visible:e.mvnDialogDisplay,title:"Maven坐标",width:"30%"},on:{"update:visible":function(t){e.mvnDialogDisplay=t}}},[a("pre",[e._v(e._s(e.mvnDialogText))])]),a("el-dialog",{attrs:{title:"别名信息",visible:this.aliasDialogListVisible,"before-close":this.handleCloseAliasDialog,width:"850px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(this,"aliasDialogListVisible",t)}}},[a("el-table",{staticClass:"my-table mb2",attrs:{data:e.aliasTableDatas,"empty-text":e.emptyAliasText,"row-class-name":e.rowClassName}},[a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center","min-width":"13.21%"}}),a("el-table-column",{attrs:{label:"别名",prop:"alias",align:"center","min-width":"32.61%","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"别名描述",prop:"remark",align:"center","min-width":"35%","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"操作",prop:"id",align:"center","min-width":"20.21%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"document"},on:{click:function(a){return e.displayJSFConfig(t.row)}}},[e._v("查看JSF配置信息")])]}}])}),a("el-dialog",{attrs:{width:"37%",title:"JSF配置信息",visible:e.jsfConfigInnerDialogVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.jsfConfigInnerDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"before-close":this.handleCloseJSFConfigDialog}},[a("el-input",{attrs:{type:"textarea",rows:5,resize:"none",spellcheck:"false",readonly:!0},model:{value:e.currentJsfConfig,callback:function(t){e.currentJsfConfig=t},expression:"currentJsfConfig"}})],1)])],1)],1)],1)}),[],!1,null,null,null),$=N.exports,j={props:{appKey:String},components:{Pagination:c.a},data:function(){return{tableDatas:[],listQuery:{total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]}}},created:function(){this.queryApiOfCallee()},methods:{rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},queryApiOfCallee:function(){var e=this,t=this.listQuery.pageSize,a=[{page:this.listQuery.pageNumb,pageSize:t,sord:"desc",sidx:"updateTime"},{appKey:this.appKey}];u.a.post("/HttpApiService/queryApplyApiList",a).then((function(t){t.data&&(e.listQuery.total=t.data.total,e.tableDatas=t.data.rows)})).catch((function(e){}))},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.queryApiOfCallee()},onGotoApiOverView:function(e){this.$router.push({name:"ApiManagerDetail",params:{type:"http",id:e}})}}},Q=j,z=Object(p.a)(Q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0px"},attrs:{meta:"x:241.0,y:121.0,width:600.0,height:326.0"}},[a("el-table",{staticClass:"my-table mb2",attrs:{data:e.tableDatas,"row-class-name":e.rowClassName,"empty-text":"暂无审批通过的API"}},[a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center","min-width":"13.21%"}}),a("el-table-column",{attrs:{label:"API",prop:"url",align:"left","min-width":"41.47%","show-tooltip-when-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"link",staticStyle:{color:"rgb(60, 110, 240)"},attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.onGotoApiOverView(t.row.instanceId)}}},[e._v(" "+e._s(t.row.url)+" ")])]}}])}),a("el-table-column",{attrs:{label:"中文名称",prop:"apiName",align:"center","show-tooltip-when-overflow":!0}})],1),a("el-row",[a("el-col",{attrs:{span:24,push:17}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1)}),[],!1,null,null,null),F={components:{JsfList:$,HttpList:z.exports},data:function(){return{isSwitch:!1,appKey:""}},methods:{getAppKey:function(){var e=this;Object(i.a)({url:"/app/getApp",method:"get",params:{id:this.$route.params.id}}).then((function(t){t.data&&(e.appKey=t.data.code)})).catch((function(e){}))}},created:function(){this.getAppKey()}},D=F,V=Object(p.a)(D,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.isSwitch,callback:function(t){e.isSwitch=t},expression:"isSwitch"}},[a("el-radio-button",{attrs:{label:!1}},[e._v("JSF协议")]),a("el-radio-button",{attrs:{label:!0}},[e._v("HTTP协议")])],1),!e.isSwitch&&e.appKey?a("JsfList",{attrs:{appKey:e.appKey}}):e._e(),e.isSwitch&&e.appKey?a("HttpList",{attrs:{appKey:e.appKey}}):e._e()],1)}),[],!1,null,"29c4f01e",null),P=V.exports,T=a("547a"),I=a("ed08"),q={components:{Overview:l,ProvidedApiList:k,CalledApiList:P},mixins:[T.a],data:function(){return{tabPosition:"top",appId:"",appName:"",appRemark:"",appCreateUser:"",appCreateTime:"",tabName:"302",appKey:"",appType:0}},methods:{updateTitle:function(e){this.appId=e.id,this.appName=e.name,this.appRemark=e.remark,this.appCreateUser=e.createUser,this.appCreateTime=Object(I.c)(e.createTime,"{y}-{m}-{d} {h}:{i}"),this.appKey=e.code,this.appType=e.type},fetchAppSummary:function(){var e=this;Object(i.a)({url:"/app/getApp",method:"get",params:{id:this.$route.params.id}}).then((function(t){t.data&&e.updateTitle(t.data)})).catch((function(e){}))},leaveTab:function(e,t){this.tabName=e,this.$router.push({name:"AppManagerAppTabs",params:{id:this.appId},query:{tabName:this.tabName}})},goBack:function(){this.$router.push("/appManager")}},created:function(){this.appId=this.$route.params.id,this.tabName=this.$route.query.tabName,this.fetchAppSummary()}},K=q,M=(a("a3e7"),Object(p.a)(K,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tit-view"},[a("h2",{staticClass:"big-tit"},[e._v(e._s(e.appName))]),a("p",{staticClass:"tip"},[e._v(" "+e._s(e.appCreateUser)+e._s(e.$t("app.appTabs.5ix1z3aotes1"))+e._s(e.appCreateTime)+" ")])]),a("div",{staticClass:"my-tabs"},[a("el-tabs",{attrs:{"tab-position":e.tabPosition,"before-leave":e.leaveTab},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:e.$t("app.appTabs.5ix1z3aotes0"),name:"302"}},["302"===e.tabName?a("Overview",{on:{updateTitle:e.updateTitle}}):e._e()],1),a("el-tab-pane",{attrs:{label:e.$t("app.appTabs.5ix1z3apcuc0"),name:"303"}},["303"===e.tabName?a("ProvidedApiList"):e._e()],1),a("el-tab-pane",{attrs:{label:e.$t("app.appTabs.5ix1z3apd600"),name:"304"}},["304"===e.tabName?a("CalledApiList"):e._e()],1)],1)],1)])}),[],!1,null,"41fd435c",null));t.default=M.exports},f4bf:function(e,t,a){}}]);