(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aaef4e42"],{"0679":function(e,t,a){"use strict";a("3f77")},1799:function(e,t,a){"use strict";var n=(a("c5f6"),{name:"Pagination",props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},total:{type:Number,default:0},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},reloadTableData:{type:Function,default:function(){}}},methods:{onCurrentChange:function(e){this.$emit("update:currentPage",e),this.reloadTableData()},onSizeChange:function(e){this.$emit("update:pageSize",e),this.reloadTableData()}}}),r=n,i=(a("3fca"),a("2877")),o=Object(i.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{staticClass:"pagination",attrs:{background:!0,"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})}),[],!1,null,"52f386a2",null);t.a=o.exports},18989:function(e,t,a){},"1c4c":function(e,t,a){"use strict";var n=a("9b43"),r=a("5ca1"),i=a("4bf8"),o=a("1fa8"),s=a("33a4"),c=a("9def"),l=a("f1ae"),p=a("27ee");r(r.S+r.F*!a("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,r,u,d=i(e),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,v=void 0!==h,b=0,g=p(d);if(v&&(h=n(h,f>2?arguments[2]:void 0,2)),null==g||m==Array&&s(g))for(a=new m(t=c(d.length));t>b;b++)l(a,b,v?h(d[b],b):d[b]);else for(u=g.call(d),a=new m;!(r=u.next()).done;b++)l(a,b,v?o(u,h,[r.value,b],!0):r.value);return a.length=b,a}})},"1cfa":function(e,t,a){"use strict";a("ea27")},"1d09":function(e,t,a){"use strict";a("c0f9")},"218e":function(e,t,a){"use strict";a("798b")},"23bf":function(e,t,a){"use strict";var n=a("7aef"),r={getAuth:function(){return n.a.get("/user/getAuth")},findSecondDevProductList:function(){return n.a.get("/product/release/findSecondDevProductList")},queryVersionListByProductCode:function(e){return n.a.get("/sysVersion/queryHaveSpiReleaseVersionListByProductCode",{params:e})},findExistedAppList:function(e){return n.a.get("/app/findExistedAppList",{params:e})},addProductAppInfo:function(e){return n.a.post("/app/addProductAppInfo",e)},getAppBaseInfo:function(e){return n.a.get("/app/getAppBaseInfo",{params:e})},updateProductAppInfo:function(e){return n.a.post("/app/updateProductAppInfo",e)},queryList:function(e){return n.a.get("/spiInstance/queryList",{params:e})},enable:function(e){return n.a.post("/spiInstance/enable",e)},queryOperateLog:function(e){return n.a.get("/spiInstance/queryOperateLog".concat(e))},publishProductApp:function(e){return n.a.post("/app/publishProductApp",null,{params:e,timeout:2e4})},pushTenantList:function(e,t){return n.a.get("/spiInstance/pushTenantList".concat(t),{params:e})},pushTenant:function(e){return n.a.post("/spiInstance/pushTenant",e)},pushTenantRevoke:function(e){return n.a.post("/spiInstance/pushTenantRevoke".concat(e))},survivalCheck:function(e){return n.a.post("/spiInstance/survivalCheck".concat(e))},queryListAll:function(e){return n.a.get("/spiInstance/queryListAll",{params:e})},source:function(e){return n.a.get("/logSearch/spi/source",{params:e})},traceId:function(e){return n.a.get("/logSearch/spi/traceId",{params:e})}};t.a=r},"2a6f":function(e,t,a){"use strict";var n={name:"StickyWrapper"},r=(a("1cfa"),a("2877")),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"sticky-wrapper"},[e._t("default")],2)}),[],!1,null,"73348bd4",null);t.a=i.exports},3434:function(e,t,a){"use strict";a("baf0")},"3c94":function(e,t,a){"use strict";a.r(t);var n={name:"TagTip",props:{text:{type:String,default:""},closable:{type:Boolean,default:!0}},data:function(){return{tagList:["tag"]}},methods:{handleCloseTag:function(e){this.tagList.splice(this.tagList.indexOf(e),1)}}},r=n,i=(a("1d09"),a("2877")),o=Object(i.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tagTip"},e._l(e.tagList,(function(t,n){return a("el-tag",{key:n,staticClass:"tagTip__tag",attrs:{closable:e.closable,"disable-transitions":!0,type:"info"},on:{close:function(a){return e.handleCloseTag(t)}}},[a("p",{staticClass:"tagTip__content"},[a("i",{staticClass:"el-icon-info"}),e._v(" "),e._t("default",[e._v(e._s(e.text))])],2)])})),1)}),[],!1,null,"0c343daa",null);t.default=o.exports},"3f77":function(e,t,a){},"3fca":function(e,t,a){"use strict";a("848d")},4239:function(e,t,a){},"4f7f":function(e,t,a){"use strict";var n=a("c26b"),r=a("b39a9");e.exports=a("e0b8")("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(r(this,"Set"),e=0===e?0:e,e)}},n)},"5df3":function(e,t,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})}))},"67ab":function(e,t,a){var n=a("ca5a")("meta"),r=a("d3f4"),i=a("69a8"),o=a("86cc").f,s=0,c=Object.isExtensible||function(){return!0},l=!a("79e5")((function(){return c(Object.preventExtensions({}))})),p=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},u=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!c(e))return"F";if(!t)return"E";p(e)}return e[n].i},getWeak:function(e,t){if(!i(e,n)){if(!c(e))return!0;if(!t)return!1;p(e)}return e[n].w},onFreeze:function(e){return l&&u.NEED&&c(e)&&!i(e,n)&&p(e),e}}},"6c05":function(e,t,a){},"735d":function(e,t,a){},"798b":function(e,t,a){},"848d":function(e,t,a){},ad2b:function(e,t,a){"use strict";a("28a5"),a("a481");var n={timeInTable:function(e){"string"==typeof e&&e.replace(".000+0000","");var t=new Date(e);return e?"".concat(t.toLocaleDateString().replaceAll("/","-")," ").concat(t.toTimeString().split(" ")[0]):""}};t.a=n},b39a9:function(e,t,a){var n=a("d3f4");e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},b617:function(e,t,a){"use strict";a("ba40")},ba40:function(e,t,a){},baf0:function(e,t,a){},c0f9:function(e,t,a){},c26b:function(e,t,a){"use strict";var n=a("86cc").f,r=a("2aeb"),i=a("dcbc"),o=a("9b43"),s=a("f605"),c=a("4a59"),l=a("01f9"),p=a("d53b"),u=a("7a56"),d=a("9e1e"),m=a("67ab").fastKey,f=a("b39a9"),h=d?"_s":"size",v=function(e,t){var a,n=m(t);if("F"!==n)return e._i[n];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,l){var p=e((function(e,n){s(e,p,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[h]=0,null!=n&&c(n,a,e[l],e)}));return i(p.prototype,{clear:function(){for(var e=f(this,t),a=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete a[n.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var a=f(this,t),n=v(a,e);if(n){var r=n.n,i=n.p;delete a._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),a._f==n&&(a._f=r),a._l==n&&(a._l=i),a[h]--}return!!n},forEach:function(e){f(this,t);for(var a,n=o(e,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(n(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!v(f(this,t),e)}}),d&&n(p.prototype,"size",{get:function(){return f(this,t)[h]}}),p},def:function(e,t,a){var n,r,i=v(e,t);return i?i.v=a:(e._l=i={i:r=m(t,!0),k:t,v:a,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[h]++,"F"!==r&&(e._i[r]=i)),e},getEntry:v,setStrong:function(e,t,a){l(e,t,(function(e,a){this._t=f(e,t),this._k=a,this._l=void 0}),(function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?p(0,"keys"==t?a.k:"values"==t?a.v:[a.k,a.v]):(e._t=void 0,p(1))}),a?"entries":"values",!a,!0),u(t)}}},cafa:function(e,t,a){"use strict";a("735d")},d3e4:function(e,t,a){"use strict";a("6c05")},e0b8:function(e,t,a){"use strict";var n=a("7726"),r=a("5ca1"),i=a("2aba"),o=a("dcbc"),s=a("67ab"),c=a("4a59"),l=a("f605"),p=a("d3f4"),u=a("79e5"),d=a("5cc5"),m=a("7f20"),f=a("5dbc");e.exports=function(e,t,a,h,v,b){var g=n[e],y=g,w=v?"set":"add",x=y&&y.prototype,_={},C=function(e){var t=x[e];i(x,e,"delete"==e||"has"==e?function(e){return!(b&&!p(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!p(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,a){return t.call(this,0===e?0:e,a),this})};if("function"==typeof y&&(b||x.forEach&&!u((function(){(new y).entries().next()})))){var S=new y,L=S[w](b?{}:-0,1)!=S,E=u((function(){S.has(1)})),O=d((function(e){new y(e)})),P=!b&&u((function(){for(var e=new y,t=5;t--;)e[w](t,t);return!e.has(-0)}));O||(y=t((function(t,a){l(t,y,e);var n=f(new g,t,y);return null!=a&&c(a,v,n[w],n),n})),y.prototype=x,x.constructor=y),(E||P)&&(C("delete"),C("has"),v&&C("get")),(P||L)&&C(w),b&&x.clear&&delete x.clear}else y=h.getConstructor(t,e,v,w),o(y.prototype,a),s.NEED=!0;return m(y,e),_[e]=y,r(r.G+r.W+r.F*(y!=g),_),b||h.setStrong(y,e,v),y}},e573:function(e,t,a){"use strict";a("4239")},ea27:function(e,t,a){},f1ae:function(e,t,a){"use strict";var n=a("86cc"),r=a("4630");e.exports=function(e,t,a){t in e?n.f(e,t,r(0,a)):e[t]=a}},fb6d:function(e,t,a){"use strict";a.r(t);var n=(a("7f7f"),a("c7eb")),r=(a("96cf"),a("1da1")),i=(a("c5f6"),a("ad2b")),o={name:"HeaderInfo",props:{imagePath:{type:String|Function},url:{type:String,default:""},name:{type:String,default:""},createUser:{type:String,default:""},createTime:{type:String|Date,default:function(){return new Date}},showStatus:{type:Number,default:1}},computed:{computeCreateTime:function(){return i.a.timeInTable(this.createTime)},computeStatusText:function(){return this.$store.state.tools.dictionary.appStatus[this.showStatus].value},computeStatusClass:function(){return{1:"showStatus normalBtnColor",2:"showStatus initBtnColor",3:"showStatus updateBtnColor"}[this.showStatus]},computeImageWrapperClass:function(){return this.imagePath?"image-wrapper":"image-wrapper no-image"}}},s=(a("cafa"),a("2877")),c=Object(s.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header-info"},[a("div",{staticClass:"header-info__content"},[a("div",{class:e.computeImageWrapperClass},[e.imagePath?a("img",{staticStyle:{width:"100%"},attrs:{src:e.imagePath}}):e._e()]),a("div",{staticClass:"text-wrapper"},[a("div",{staticClass:"title-wrapper"},[a("p",{staticClass:"title"},[e._v(e._s(e.name))]),a("span",{class:e.computeStatusClass},[e._v(e._s(e.computeStatusText))])]),a("p",{staticClass:"subtitle"},[e._v(e._s(e.createUser)+" 创建于 "+e._s(e.computeCreateTime))])])]),a("div",{staticClass:"header-info__button-wrapper"},[e._t("default")],2)])}),[],!1,null,"7d96da7b",null),l=c.exports,p=a("2a6f"),u=a("23bf"),d={name:"Overview",components:{StickyWrapper:p.a},props:{appBasicForm:{type:Object,required:!0}},data:function(){return{editable:!1,appBasicRules:{name:[{required:!0,message:"请输入应用中文名称",trigger:"blur"},{min:2,max:20,message:"长度在2到20个字符",trigger:"blur"}],remark:[{required:!0,message:"请输入应用描述信息",trigger:"blur"},{min:10,max:200,message:"长度在10到200个字符",trigger:"blur"}]},secretDisplay:!1,env:window.env.buildEnv}},computed:{secretMeg:function(){return 3===this.appBasicForm.type||4===this.appBasicForm.type||5===this.appBasicForm.type||7===this.appBasicForm.type?this.appBasicForm.gatewaySecret:this.appBasicForm.secret}},methods:{handleEdit:function(){this.editable=!0},handleCancel:function(){this.$emit("updateAppStatus"),this.$refs.appBasicForm.resetFields(),this.editable=!1},handleSave:function(){var e=this;this.$refs.appBasicForm.validate((function(t){if(!t)return!1;e.updateProductAppInfo()}))},updateProductAppInfo:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a=this.appBasicForm.name,r=this.appBasicForm.remark,i={id:t,name:a,remark:r},e.next=6,u.a.updateProductAppInfo(i);case 6:e.sent&&(this.$message.success("应用信息修改成功"),this.editable=!1,this.$emit("updateAppStatus"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),copyAppKey:function(){var e=document.createElement("input");e.value=this.appBasicForm.code,document.body.appendChild(e),e.select(),!0===document.execCommand("Copy")?(e.className="appKeyInput",e.style.display="none",this.$message.success("已经成功复制AppKey")):this.$message.error("复制AppKey失败")},copyAppSecret:function(){var e=document.createElement("input");e.value=3==this.appBasicForm.type||4==this.appBasicForm.type||5==this.appBasicForm.type||7==this.appBasicForm.type?this.appBasicForm.gatewaySecret:this.appBasicForm.secret,document.body.appendChild(e),e.select(),!0===document.execCommand("Copy")?(e.className="appSecretInput",e.style.display="none",this.$message.success("已经成功复制AppSecret")):this.$message.error("复制AppSecret失败")},onCopy:function(e){this.$message.success("复制成功")},onError:function(e){this.$message.error("复制失败")}}},m=d,f=(a("0679"),Object(s.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overview"},[a("div",{staticClass:"overview-container"},[a("p",{staticClass:"sub-title"},[e._v("基础信息")]),a("el-form",{ref:"appBasicForm",attrs:{model:e.appBasicForm,rules:e.appBasicRules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"应用中文名称:",prop:"name"}},[e.editable?a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入当前APP应用中文名称,2-20个字符."},model:{value:e.appBasicForm.name,callback:function(t){e.$set(e.appBasicForm,"name",t)},expression:"appBasicForm.name"}}):e._e(),e.editable?e._e():a("span",[e._v(e._s(""===e.appBasicForm.name?"未填写":e.appBasicForm.name))])],1),a("el-form-item",{attrs:{label:"应用描述:",prop:"remark"}},[e.editable?a("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",placeholder:"请描述当前APP应用,10-200个字符."},model:{value:e.appBasicForm.remark,callback:function(t){e.$set(e.appBasicForm,"remark",t)},expression:"appBasicForm.remark"}}):e._e(),e.editable?e._e():a("span",[e._v(e._s(""===e.appBasicForm.remark?"未填写":e.appBasicForm.remark))])],1),a("el-form-item",{attrs:{label:"appKey:",prop:"code"}},[a("span",[e._v(e._s(e.appBasicForm.code)+" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制AppKey",placement:"top"}},[a("a",{on:{click:e.copyAppKey}},[a("i",{staticClass:"el-icon-document-copy"})])])],1)]),a("el-form-item",{attrs:{label:"appSecret:"}},[!0===e.secretDisplay?a("span",[e._v(" "+e._s(e.secretMeg)+" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制AppSecret",placement:"top"}},[a("a",{on:{click:e.copyAppSecret}},[a("i",{staticClass:"el-icon-document-copy"})])]),a("a",{staticStyle:{color:"#3c6ef0"},on:{click:function(t){e.secretDisplay=!1}}},[e._v(" 隐藏")])],1):a("span",[a("a",{staticStyle:{color:"#3c6ef0"},on:{click:function(t){e.secretDisplay=!0}}},[e._v("查看")])])]),a("el-form-item",{attrs:{label:"应用分类:"}},[e._v(" "+e._s(e.appBasicForm.productCode+"-"+e.appBasicForm.sysVersionName))]),"local"===e.env||"devtest"===e.env||"publictest"===e.env?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境应用域名:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.appDomain))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.appDomain,expression:"appBasicForm.appDomain",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境JSF别名:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.jsfAlias))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.jsfAlias,expression:"appBasicForm.jsfAlias",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1)],1):e._e(),"uat"===e.env||"prod"===e.env?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境应用域名:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.appDomainUat))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.appDomainUat,expression:"appBasicForm.appDomainUat",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境JSF别名:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.jsfAliasUat))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.jsfAliasUat,expression:"appBasicForm.jsfAliasUat",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1)],1):e._e(),"uat"===e.env||"prod"===e.env?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境应用域名:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.appDomain))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.appDomain,expression:"appBasicForm.appDomain",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境JSF别名:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.jsfAlias))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.jsfAlias,expression:"appBasicForm.jsfAlias",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1)],1):e._e()],1),a("p",{staticClass:"sub-title"},[e._v("测试验证")]),a("el-form",{attrs:{"label-width":"130px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租户名:"}},[a("span",[e._v(e._s(e.appBasicForm.supplierName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租户编码:"}},[a("span",[e._v(e._s(e.appBasicForm.supplierCode))])])],1)],1),"local"===e.env||"devtest"===e.env||"publictest"===e.env?a("el-row",[a("el-form-item",{attrs:{label:"测试环境:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.productDomainName))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.productDomainName,expression:"appBasicForm.productDomainName",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1):"uat"===e.env||"prod"===e.env?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.productUatDomainName))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.productUatDomainName,expression:"appBasicForm.productUatDomainName",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境:"}},[a("span",{staticClass:"copy-text"},[e._v(e._s(e.appBasicForm.productDomainName))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.appBasicForm.productDomainName,expression:"appBasicForm.productDomainName",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])],1)],1):e._e()],1)],1),a("StickyWrapper",[e.editable?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1):a("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("编辑")])],1)],1)}),[],!1,null,"5e6d5f68",null)),h=f.exports,v=(a("6762"),a("1799")),b={name:"ConfigExtensionPoint",components:{Pagination:v.a},props:{basicInfo:{type:Object,required:!0}},data:function(){return{env:window.env.buildEnv,tableData:[],tableDataLoading:!0,dialogVisible:!1,pageNum:1,pageSize:10,total:0}},computed:{computeExtensionPointManualHref:function(){var e=this.$store.state.tools.dictionary;try{return e.docLink.spiDevelopProjectSpecific.value}catch(e){return""}},computeCurrentEnvTitleText:function(){return{local:"开发环境：",devtest:"开发环境：",publictest:"测试环境：",uat:"生产环境：",prod:"生产环境："}[this.env]||""},computeSandboxEnvTitleText:function(){return{publictest:"开发环境：",uat:"预发环境：",prod:"预发环境："}[this.env]||""},computeSandboxEnvVisible:function(){return["publictest","uat","prod"].includes(this.env)}},methods:{survivalCheck:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfo.code,e.next=3,u.a.survivalCheck(t).catch((function(e){var t=e.data.message;throw t&&a.$message.error(t),new Error("survivalCheck")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfo.code,a=this.pageSize,r=this.pageNum,i={appCode:t,pageSize:a,pageNum:r},e.next=5,u.a.queryList(i).catch((function(e){var t=e.data.message;throw t&&o.$message.error(t),new Error("queryList")}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),enable:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a,r){var i,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={id:t,spiInstanceIsEnable:a=!a,envMark:r},"uat"!==r&&delete i.envMark,e.next=5,u.a.enable(i).catch((function(e){var t=e.data.message;throw t&&o.$message.error(t),new Error("enable")}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),judgeSpiIsOffline:function(e){return 0===e},judgeIsHideTagVisible:function(e){var t=this,a=this.env,n=e.isHide,r=e.spiIsOnline,i=e.spiUatIsOnline;return 1===n&&{local:function(){return!t.judgeSpiIsOffline(r)},devtest:function(){return this.local()},publictest:function(){return!t.judgeSpiIsOffline(r)&&!t.judgeSpiIsOffline(i)},uat:function(){return!t.judgeSpiIsOffline(r)&&!t.judgeSpiIsOffline(i)},prod:function(){return!t.judgeSpiIsOffline(r)&&!t.judgeSpiIsOffline(i)}}[a]()},formatSpiInstanceIsEnableText:function(e,t){var a=this.$store.state.tools.dictionary;try{return a[t][e].value}catch(t){return e||""}},judgeSpiInstanceIsEnableButtonVisible:function(e){return[!0,!1].includes(e)},reloadTableData:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("updateAppStatus"),this.tableDataLoading=!0,e.next=4,this.queryList().catch((function(){throw new Error("reloadTableData")}));case 4:t=e.sent,a=t.data.data,r=a.list,i=a.total,this.tableData=r||[],this.total=i||0,this.tableDataLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleEnableOrDisable:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a,r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enable(t,a,r).catch((function(){throw new Error("handleEnableOrDisable")}));case 2:this.$message.success("操作成功！"),this.reloadTableData();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}(),onCopySuccess:function(e){this.$message.success("复制成功")},onCopyError:function(e){this.$message.error("复制失败")}},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.survivalCheck();case 2:this.reloadTableData();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},g=b,y=(a("e573"),Object(s.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"config-extension-point"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,align:"left"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=n.id,i=n.spiIsOnline,o=n.spiUatIsOnline,s=n.spiInstanceIsEnable,c=n.uatSpiInstanceIsEnable,l=n.spiInstanceIsOnLine,p=n.uatSpiInstanceIsOnLine;return[a("p",{class:["expand-row__title",e.judgeSpiIsOffline(i)?"is-offline":""]},[e._v(" "+e._s(e.computeCurrentEnvTitleText)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.judgeSpiIsOffline(i),expression:"judgeSpiIsOffline(spiIsOnline)"}]},[e._v("（该扩展点已下线）")])]),a("el-form",{class:["expand-row__form",e.judgeSpiIsOffline(i)?"is-offline":""],attrs:{"label-position":"left",model:{},inline:!0}},[a("el-form-item",{staticStyle:{width:"280px"},attrs:{label:"启用状态："}},[a("span",[e._v(" "+e._s(e.formatSpiInstanceIsEnableText(s,"spiInstanceIsEnable"))+" ")]),e.judgeSpiInstanceIsEnableButtonVisible(s)?[s?a("el-popconfirm",{attrs:{width:"200",title:"停用后将影响功能使用，是否仍要继续？","confirm-button-text":"停用"},on:{onConfirm:function(t){return e.handleEnableOrDisable(r,s)}}},[a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{slot:"reference",type:"text",disabled:e.judgeSpiIsOffline(i)},slot:"reference"},[e._v(" 停用 ")])],1):a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"text",disabled:e.judgeSpiIsOffline(i)},on:{click:function(t){return e.handleEnableOrDisable(r,s)}}},[e._v(" 启用 ")])]:e._e()],2),a("el-form-item",{attrs:{label:"部署状态："}},[l?a("span",[e._v("已部署")]):a("span",[e._v("未部署 "),a("el-button",{staticClass:"el-icon-info-empty",attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}})],1)])],1),e.computeSandboxEnvVisible?[a("p",{class:["expand-row__title",e.judgeSpiIsOffline(o)?"is-offline":""]},[e._v(" "+e._s(e.computeSandboxEnvTitleText)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.judgeSpiIsOffline(o),expression:"judgeSpiIsOffline(spiUatIsOnline)"}]},[e._v("（该扩展点已下线）")])]),a("el-form",{class:["expand-row__form",e.judgeSpiIsOffline(o)?"is-offline":""],attrs:{"label-position":"left",model:{},inline:!0}},[a("el-form-item",{staticStyle:{width:"280px"},attrs:{label:"启用状态："}},[a("span",[e._v(" "+e._s(e.formatSpiInstanceIsEnableText(c,"uatSpiInstanceIsEnable"))+" ")]),e.judgeSpiInstanceIsEnableButtonVisible(c)?[c?a("el-popconfirm",{attrs:{width:"200",title:"停用后将影响功能使用，是否仍要继续？","confirm-button-text":"停用"},on:{onConfirm:function(t){return e.handleEnableOrDisable(r,c,"uat")}}},[a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{slot:"reference",type:"text",disabled:e.judgeSpiIsOffline(o)},slot:"reference"},[e._v(" 停用 ")])],1):a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"text",disabled:e.judgeSpiIsOffline(o)},on:{click:function(t){return e.handleEnableOrDisable(r,c,"uat")}}},[e._v(" 启用 ")])]:e._e()],2),a("el-form-item",{attrs:{label:"部署状态："}},[p?a("span",[e._v("已部署")]):a("span",[e._v("未部署 "),a("el-button",{staticClass:"el-icon-info-empty",attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}})],1)])],1)]:e._e()]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{"show-tooltip-when-overflow":!0,prop:"cnName",label:"中文名称"}}),a("el-table-column",{attrs:{"show-tooltip-when-overflow":!0,prop:"url",label:"URL"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.url;return[a("div",{staticClass:"table-cell__url"},[a("p",{staticClass:"url__text"},[e._v(" "+e._s(n)+" ")]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:n,expression:"url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}]},[a("i",{staticClass:"el-icon-document-copy"})])])]}}])}),a("el-table-column",{attrs:{"show-tooltip-when-overflow":!0,prop:"groupName",label:"所属分类"}}),a("el-table-column",{attrs:{prop:"isHide",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.judgeIsHideTagVisible(n)?a("el-tag",{staticStyle:{color:"#999"},attrs:{type:"info",effect:"lightBorder"}},[e._v("该扩展点即将下线")]):e._e()]}}])})],1),e.total>0?a("Pagination",{attrs:{currentPage:e.pageNum,pageSize:e.pageSize,total:e.total,reloadTableData:e.reloadTableData},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e(),a("el-dialog",{staticClass:"extension-dialog",attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-wrapper"},[a("div",[a("i",{staticClass:"el-icon-warning"})]),a("h1",{staticClass:"dialog-subtitle"},[e._v("未检测到扩展点的实现")]),a("p",{staticClass:"dialog-content"},[e._v(" 请按 "),a("a",{staticStyle:{color:"#3c6ef0"},attrs:{href:e.computeExtensionPointManualHref,target:"_blank"}},[e._v("扩展点使用手册")]),e._v(" 实现扩展点，并按手册内容部署应用，部署成功后，平台即可检测到扩展点的实现。 ")])])])],1)}),[],!1,null,"736079f5",null)),w=y.exports,x=a("3c94"),_={name:"PushApp",components:{TagTip:x.default,Pagination:v.a},props:{appCode:{type:String,required:!0}},data:function(){return{dialogVisible:!1,createPushFormData:{tenantName:"",tenantCode:"",remark:""},createPushFormRules:{tenantName:[{required:!0,message:"请输入租户名称"}],tenantCode:[{required:!0,message:"请输入租户编码"}]},tableDataLoading:!0,tableData:[],tableList:[{prop:"tenantName",label:"租户名称","min-width":"180"},{prop:"tenantCode",label:"租户编码","min-width":"180"},{prop:"remark",label:"备注","min-width":"300"},{prop:"updateUser",label:"操作人","min-width":"180"},{prop:"updateTime",label:"推送时间","min-width":"180"}],currentPage:1,pageSize:10,total:0,disabled:!1}},methods:{pushTenantList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.appCode,a=this.currentPage,r=this.pageSize,i={pageNum:a,pageSize:r},e.next=5,u.a.pushTenantList(i,t).catch((function(e){var t=e.data.message;throw t&&o.$message.error(t),new Error("pushTenantList")}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),pushTenant:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.appCode,a=this.createPushFormData,r=a.tenantName,i=a.tenantCode,o=a.remark,s={appCode:t,tenantName:r,tenantCode:i,remark:o},e.next=5,u.a.pushTenant(s).catch((function(e){var t=e.data.message;throw t&&c.$message.error(t),new Error("pushTenant")}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),pushTenantRevoke:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.pushTenantRevoke(t).catch((function(e){var t=e.data.message;throw t&&a.$message.error(t),new Error("pushTenantRevoke")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reloadTableData:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableDataLoading=!0,e.next=3,this.pushTenantList().catch((function(){throw new Error("reloadTableData")}));case 3:t=e.sent,(a=t.data.data).total>=5?this.disabled=!0:a.total<5&&(this.disabled=!1),r=a.total,i=a.list,this.total=r,this.tableData=i,this.tableDataLoading=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),closeDialog:function(){this.$refs.createPushForm.resetFields()},handleConfirmCreatePush:function(){var e=this;this.$refs.createPushForm.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return t.next=3,e.pushTenant().catch((function(){throw new Error("handleConfirmCreatePush")}));case 3:e.$message.success("新建推送成功！"),e.$emit("updateAppStatus"),e.reloadTableData(),e.dialogVisible=!1,t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleRepeal:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,this.pushTenantRevoke(a).catch((function(){throw new Error("handleRepeal")}));case 3:this.$message.success("撤销推送成功！"),this.$emit("updateAppStatus"),this.reloadTableData();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},created:function(){this.reloadTableData()}},C=_,S=(a("218e"),Object(s.a)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"push-app"},[a("TagTip",{attrs:{closable:!1}},[e._v(" 您可将应用主动推送给客户使用，推送成功后，客户端将自动加载该应用的个性化逻辑。 ")]),a("div",{staticClass:"search-wrapper"},[a("div"),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新建推送")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"button-wrapper"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"最多支持推送5个租户",placement:"top"}},[a("el-button",{attrs:{type:"info"}},[e._v("新建推送")])],1)],1)]),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,title:"新增推送",width:"480px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[a("div",{staticClass:"dialog-content"},[a("el-form",{ref:"createPushForm",staticClass:"create-push-form",attrs:{model:e.createPushFormData,rules:e.createPushFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"租户名称",prop:"tenantName"}},[a("el-input",{attrs:{placeholder:"请输入租户名称"},model:{value:e.createPushFormData.tenantName,callback:function(t){e.$set(e.createPushFormData,"tenantName","string"==typeof t?t.trim():t)},expression:"createPushFormData.tenantName"}})],1),a("el-form-item",{attrs:{label:"租户编码",prop:"tenantCode"}},[a("el-input",{attrs:{placeholder:"请输入租户编码"},model:{value:e.createPushFormData.tenantCode,callback:function(t){e.$set(e.createPushFormData,"tenantCode","string"==typeof t?t.trim():t)},expression:"createPushFormData.tenantCode"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",type:"textarea",resize:"none",rows:4},model:{value:e.createPushFormData.remark,callback:function(t){e.$set(e.createPushFormData,"remark","string"==typeof t?t.trim():t)},expression:"createPushFormData.remark"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmCreatePush}},[e._v("确认新建")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,hideEmptyImg:!0}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"80"}}),e._l(e.tableList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,"min-width":e["min-width"],"show-tooltip-when-overflow":!0}})})),a("el-table-column",{attrs:{prop:"handle",label:"操作","min-width":"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-popconfirm",{attrs:{width:"200",title:"撤销后该租户将无法继续使用扩展功能，是否仍要继续？",hideIcon:!0},on:{onConfirm:function(t){return e.handleRepeal(n)}}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("撤销")])],1)]}}])})],2),e.total>0?a("Pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total,reloadTableData:e.reloadTableData},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e()],1)}),[],!1,null,"454c0c10",null)),L=S.exports,E=(a("ac6a"),a("4f7f"),a("5df3"),a("1c4c"),a("3835")),O=(a("2fdb"),{name:"ExtensionPointLog",components:{TagTip:x.default},props:{appCode:{type:String,required:!0},productCode:{type:String,required:!0},productDomainName:{type:String,required:!0},productUatDomainName:{type:String,required:!0}},data:function(){return{env:window.env.buildEnv,alertVisibleList:JSON.parse(localStorage.getItem("alertVisibleList"))||[],tipContent:"日志工具使用方法：\n1.每次扩展点调用都会产生三段日志（底层通用SaaS系统触发扩展点、开放平台寻找扩展点的实现、执行应用中的扩展点的实现），您可通过日志定位问题出现在哪个阶段。\n2.建议您先通过左侧日志工具，定位到某次扩展点调用的traceID，再通过右侧日志工具查看本次扩展点调用的三段日志，如果缺失了哪段日志，证明这段日志对应的系统出了问题。\n3.如果您可以完整地看到三段日志，但系统仍未按您预期的逻辑运行，请先自行排查扩展应用中的问题，再联系SaaS系统提供方排查问题。",mainExtensionPointLogFormData:{env:"",tenementCode:"",spiCode:"",params:"",result:"",pin:"",timeRange:[]},mainExtensionPointLogFormRules:{env:[{required:!0,message:"请选择运行环境"}],tenementCode:[{required:!0,message:"请选择租户编码"}]},spiCodeOptionList:[],mainLog:"",mainLogLoading:!1,asideExtensionPointLogFormData:{traceId:""},asideExtensionPointLogFormRules:{traceId:[{required:!0,message:"请输入traceID"}]},asideLogPartOne:"",asideLogPartOneLoading:!1,asideLogPartTwo:"",asideLogPartTwoLoading:!1,asideLogPartThree:"",asideLogPartThreeLoading:!1}},computed:{computeAlertVisible:function(){return!this.alertVisibleList.includes("extensionPointLog")}},methods:{queryListAll:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.appCode,a={appCode:t},e.next=4,u.a.queryListAll(a).catch((function(e){var t=e.data.message;throw t&&r.$message.error(t),new Error("queryListAll")}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),source:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,p,d,m,f,h,v,b,g,y,w=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.productCode,a=this.mainExtensionPointLogFormData,r=a.env,i=a.tenementCode,o=a.params,s=a.result,c=a.pin,l=a.timeRange,p=Object(E.a)(l,2),d=p[0],m=p[1],f=this.mainExtensionPointLogFormData.spiCode,h=void 0===f?"":f,v=this.productDomainName,b=this.productUatDomainName,g={test:b,uat:b,production:v},h=h&&"".concat(g[r]).concat(h),y={productCode:t,env:r,tenementCode:i,spiCode:h,params:o,result:s,pin:c,startTime:d,endTime:m},e.next=11,u.a.source(y).catch((function(e){var t=e.data.message;throw t&&w.$message.error(t),new Error("source")}));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),traceId:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,p,d=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.productCode,a=this.mainExtensionPointLogFormData,r=a.env,i=a.timeRange,o=Object(E.a)(i,2),s=o[0],c=o[1],l=this.asideExtensionPointLogFormData.traceId,p={productCode:t,env:r,startTime:s,endTime:c,traceId:l},e.next=7,u.a.traceId(p).catch((function(e){var t=e.data.message;throw t&&d.$message.error(t),new Error("traceId")}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),closeAlert:function(){this.alertVisibleList.push("extensionPointLog"),this.alertVisibleList=Array.from(new Set(this.alertVisibleList)),localStorage.setItem("alertVisibleList",JSON.stringify(this.alertVisibleList))},reloadSpiCodeOptionList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryListAll().catch((function(){throw new Error("reloadSpiCodeOptionList")}));case 2:t=e.sent,a=t.data.data,r=a.list,this.spiCodeOptionList=r||[];case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchSource:function(){var e=this;this.$refs.mainExtensionPointLogForm.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return e.mainLogLoading=!0,t.next=4,e.source().catch((function(){throw new Error("handleSearchSource")}));case 4:r=t.sent,i=r.data.data,e.mainLog=i&&i.length>0&&i.join("\n\n")||"",setTimeout((function(){e.mainLogLoading=!1}),1e3),t.next=11;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleSearchTraceId:function(){var e=this,t=!0;this.$refs.mainExtensionPointLogForm.validateField(["env"],function(){var a=Object(r.a)(Object(n.a)().mark((function a(r){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=4;break}e.$refs.asideExtensionPointLogForm.validateField("traceId",(function(e){if(e)return!1;t=!1})),a.next=6;break;case 4:return e.$refs.asideExtensionPointLogForm.validateField("traceId"),a.abrupt("return",!1);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),t||this.$refs.asideExtensionPointLogForm.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o,s,c;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=15;break}return e.asideLogPartOneLoading=!0,e.asideLogPartTwoLoading=!0,e.asideLogPartThreeLoading=!0,t.next=6,e.traceId().catch((function(){throw new Error("handleSearchTraceId")}));case 6:r=t.sent,i=r.data.data,o=i.Source,s=i.Route,c=i.Handler,e.asideLogPartOne=o&&o.length>0&&o.join("\n\n")||"",e.asideLogPartTwo=s&&s.length>0&&s.join("\n\n")||"",e.asideLogPartThree=c&&c.length>0&&c.join("\n\n")||"",setTimeout((function(){e.asideLogPartOneLoading=!1,e.asideLogPartTwoLoading=!1,e.asideLogPartThreeLoading=!1}),1e3),t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){this.reloadSpiCodeOptionList()}}),P=O,D=(a("d3e4"),Object(s.a)(P,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"extension-point-log"},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.computeAlertVisible,expression:"computeAlertVisible"}],staticClass:"extension-point-log__alert",attrs:{effect:"dark",type:"info","show-icon":""},on:{close:e.closeAlert}},[a("pre",{staticClass:"pre"},[e._v(e._s(e.tipContent))])]),a("el-row",{staticClass:"extension-point-log__content"},[a("el-col",{staticClass:"content__main-extension-point-log",attrs:{span:16}},[a("el-form",{ref:"mainExtensionPointLogForm",staticClass:"main-extension-point-log-form",attrs:{model:e.mainExtensionPointLogFormData,rules:e.mainExtensionPointLogFormRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运行环境",prop:"env"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择运行环境"},model:{value:e.mainExtensionPointLogFormData.env,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"env",t)},expression:"mainExtensionPointLogFormData.env"}},["local"===e.env||"devtest"===e.env||"publictest"===e.env?[a("el-option",{attrs:{label:"测试环境",value:"test"}})]:"uat"===e.env||"prod"===e.env?[a("el-option",{attrs:{label:"预发环境",value:"uat"}}),a("el-option",{attrs:{label:"生产环境",value:"production"}})]:e._e()],2)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"租户编码",prop:"tenementCode"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入租户编码"},model:{value:e.mainExtensionPointLogFormData.tenementCode,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"tenementCode","string"==typeof t?t.trim():t)},expression:"mainExtensionPointLogFormData.tenementCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"扩展点",prop:"spiCode"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入扩展点",clearable:!0},model:{value:e.mainExtensionPointLogFormData.spiCode,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"spiCode",t)},expression:"mainExtensionPointLogFormData.spiCode"}},e._l(e.spiCodeOptionList,(function(t,n){return a("el-option",{key:n,attrs:{label:t.cnName,value:t.url}},[a("span",{staticStyle:{float:"left","margin-right":"8px"}},[e._v(e._s(t.cnName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(" "+e._s(t.url)+" ")])])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入参",prop:"params"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入关键词"},model:{value:e.mainExtensionPointLogFormData.params,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"params","string"==typeof t?t.trim():t)},expression:"mainExtensionPointLogFormData.params"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出参",prop:"result"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入关键词"},model:{value:e.mainExtensionPointLogFormData.result,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"result","string"==typeof t?t.trim():t)},expression:"mainExtensionPointLogFormData.result"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"账号",prop:"pin"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入用户账号"},model:{value:e.mainExtensionPointLogFormData.pin,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"pin","string"==typeof t?t.trim():t)},expression:"mainExtensionPointLogFormData.pin"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"时间范围",prop:"timeRange"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.mainExtensionPointLogFormData.timeRange,callback:function(t){e.$set(e.mainExtensionPointLogFormData,"timeRange",t)},expression:"mainExtensionPointLogFormData.timeRange"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:e.handleSearchSource}},[e._v("查询")])],1)],1)],1),a("pre",{directives:[{name:"loading",rawName:"v-loading",value:e.mainLogLoading,expression:"mainLogLoading"}],staticClass:"main-extension-point-log-text"},[e._v(e._s(e.mainLog))])],1),a("el-col",{staticClass:"content__aside-extension-point-log",attrs:{span:8}},[a("el-form",{ref:"asideExtensionPointLogForm",staticClass:"aside-extension-point-log-form",attrs:{model:e.asideExtensionPointLogFormData,rules:e.asideExtensionPointLogFormRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"traceID",prop:"traceId"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入traceID"},model:{value:e.asideExtensionPointLogFormData.traceId,callback:function(t){e.$set(e.asideExtensionPointLogFormData,"traceId",t)},expression:"asideExtensionPointLogFormData.traceId"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearchTraceId}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"aside-extension-point-log-text-wrapper"},[a("p",{staticClass:"aside-extension-point-log-title"},[e._v(" 日志第一段：底层通用SaaS系统触发扩展点 ")]),a("pre",{directives:[{name:"loading",rawName:"v-loading",value:e.asideLogPartOneLoading,expression:"asideLogPartOneLoading"}],staticClass:"aside-extension-point-log-text"},[e._v(e._s(e.asideLogPartOne))]),a("p",{staticClass:"aside-extension-point-log-title"},[e._v(" 日志第二段：平台转发扩展点请求 ")]),a("pre",{directives:[{name:"loading",rawName:"v-loading",value:e.asideLogPartTwoLoading,expression:"asideLogPartTwoLoading"}],staticClass:"aside-extension-point-log-text"},[e._v(e._s(e.asideLogPartTwo))]),a("p",{staticClass:"aside-extension-point-log-title"},[e._v(" 日志第三段：扩展应用执行扩展逻辑 ")]),a("pre",{directives:[{name:"loading",rawName:"v-loading",value:e.asideLogPartThreeLoading,expression:"asideLogPartThreeLoading"}],staticClass:"aside-extension-point-log-text"},[e._v(e._s(e.asideLogPartThree))])])],1)],1)],1)}),[],!1,null,"07af66eb",null)),F={name:"loggingTools",components:{ExtensionPointLog:D.exports},props:{appCode:{type:String,required:!0},productCode:{type:String,required:!0},productDomainName:{type:String,required:!0},productUatDomainName:{type:String,required:!0}},data:function(){return{radioValue:"扩展点日志"}},methods:{}},k=(a("3434"),Object(s.a)(F,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logging-tools"},[a("el-radio-group",{staticClass:"second-tabs",model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[a("el-radio-button",{attrs:{label:"扩展点日志"}})],1),"扩展点日志"===e.radioValue?a("ExtensionPointLog",{attrs:{appCode:e.appCode,productCode:e.productCode,productDomainName:e.productDomainName,productUatDomainName:e.productUatDomainName}}):e._e()],1)}),[],!1,null,"44c61368",null)),j={name:"SoftwareSystemApp",components:{HeaderInfo:l,Overview:h,ConfigExtensionPoint:w,PushApp:L,LoggingTools:k.exports},data:function(){return{loading:!0,id:this.$route.params.id,type:this.$route.params.type,appCode:"",productCode:"",activeName:"first",name:"",createUser:"",createTime:"",status:1,basicInfo:{},productDomainName:"",productUatDomainName:""}},computed:{computeShowStatus:function(){return this.status}},methods:{getAppBaseInfo:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a={id:t},e.next=4,u.a.getAppBaseInfo(a).catch((function(e){var t=e.data.message;throw t&&r.$message.error(t),new Error("getAppBaseInfo")}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),tabClick:function(e){var t=e.name;this.$router.push({query:{tab:t}})},reloadAppBaseInfo:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,p,u;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getAppBaseInfo().catch((function(){throw new Error("reloadAppBaseInfo")}));case 3:t=e.sent,a=t.data.data,r=a.code,i=a.name,o=a.createUser,s=a.createTime,c=a.status,l=a.productCode,p=a.productDomainName,u=a.productUatDomainName,this.basicInfo=a,this.name=i,this.createUser=o,this.createTime=s,this.status=c,this.appCode=r,this.productCode=l,this.productDomainName=p,this.productUatDomainName=u,this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reloadAppBaseInfo();case 2:this.activeName=this.$route.query.tab||"overview";case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},I=j,N=(a("fc68"),Object(s.a)(I,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"software-system-app"},[a("HeaderInfo",{attrs:{name:e.name,createUser:e.createUser,createTime:e.createTime,showStatus:e.computeShowStatus}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.status||3===e.status,expression:"status === 2 || status === 3"}],attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"AppManagerDetailPublish",params:{id:e.id,type:e.type}})}}},[e._v("发 布")])],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"概览",name:"overview"}},["overview"===e.activeName?a("Overview",{attrs:{appBasicForm:e.basicInfo},on:{updateAppStatus:e.reloadAppBaseInfo}}):e._e()],1),a("el-tab-pane",{attrs:{label:"配置扩展点",name:"configExtensionPoint"}},["configExtensionPoint"===e.activeName?a("ConfigExtensionPoint",{attrs:{basicInfo:e.basicInfo},on:{updateAppStatus:e.reloadAppBaseInfo}}):e._e()],1),a("el-tab-pane",{attrs:{label:"推送应用",name:"pushApp"}},["pushApp"===e.activeName?a("PushApp",{attrs:{appCode:e.appCode},on:{updateAppStatus:e.reloadAppBaseInfo}}):e._e()],1),a("el-tab-pane",{attrs:{label:"日志工具",name:"loggingTools"}},["loggingTools"===e.activeName?a("LoggingTools",{attrs:{appCode:e.appCode,productCode:e.productCode,productDomainName:e.productDomainName,productUatDomainName:e.productUatDomainName}}):e._e()],1)],1)],1)}),[],!1,null,"e8a8f8a2",null)),T={name:"Detail",components:{SoftwareSystemApp:N.exports},data:function(){return{serviceType:this.$route.params.type}}},B=(a("b617"),Object(s.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},["softwareSystemApp"===e.serviceType?a("SoftwareSystemApp"):e._e()],1)}),[],!1,null,"6bd66d4c",null));t.default=B.exports},fc68:function(e,t,a){"use strict";a("18989")}}]);