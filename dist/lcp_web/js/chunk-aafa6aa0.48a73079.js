(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aafa6aa0"],{1799:function(e,t,a){"use strict";var i=(a("c5f6"),{name:"Pagination",props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},total:{type:Number,default:0},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},reloadTableData:{type:Function,default:function(){}}},methods:{onCurrentChange:function(e){this.$emit("update:currentPage",e),this.reloadTableData()},onSizeChange:function(e){this.$emit("update:pageSize",e),this.reloadTableData()}}}),n=i,s=(a("3fca"),a("2877")),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{staticClass:"pagination",attrs:{background:!0,"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})}),[],!1,null,"52f386a2",null);t.a=r.exports},"365c":function(e,t,a){"use strict";var i=a("b775"),n={postFindByAppKeyData:function(e){return Object(i.a)({url:"/bizmsg/findByAppKey",method:"post",data:e})},postSubscribeData:function(e){return Object(i.a)({url:"/bizmsg/subMessage",method:"post",data:e})},postUnsubscribeData:function(e){return Object(i.a)({url:"/bizmsg/unsubscribe",method:"post",data:e})}},s=n,r=a("3835"),p={postCreateBizUnitAccessData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizaccess/insertBizAccessPre",method:"post",data:t})},postBizUnitAccessData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizaccess/getBizAccessByUnitId",method:"get",params:{bizUnitId:t}})},postApiChangeSeqData:function(e){return Object(i.a)({url:"/bizapinterface/updateApiSeq",method:"post",data:e})},postApiHideData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizapinterface/hiddenApi",method:"get",params:t})},postApiHideCancelData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizapinterface/hiddenCancelApi",method:"get",params:t})},postUnitCheckPrincipalData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizunit/checkPrincipal",method:"get",params:{id:t}})},postSdkHideData:function(e){return Object(i.a)({url:"/sdk/hide",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postSdkHideCancelData:function(e){return Object(i.a)({url:"/sdk/hideCancel",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postMessageHideData:function(e){return Object(i.a)({url:"/bizmsg/hide",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postMessageHideCancelData:function(e){return Object(i.a)({url:"/bizmsg/hideCancel ",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postBizUnitData:function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(i.a)({url:"/bizUnits",method:"post",data:[a,n]})}},o={getAppData:function(e){return Object(i.a)({url:"/app/getApp",method:"get",params:e})},postFindBizUnitVoListData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizunit/findBizUnitVoList",method:"get",params:{appKey:t}})},findBizUnitVoListByPage:function(e){return Object(i.a)({url:"/bizunit/findBizUnitVoListByPage",method:"get",params:e})},postSubscribeBizData:function(e){var t=Object(r.a)(e,1)[0];return Object(i.a)({url:"/bizunit/submitRecord",method:"post",data:t})},getCustomerGroupListData:function(e){return Object(i.a)({url:"/app/findAppGroupList",method:"get",params:e})},getCustomerGroupDetailData:function(e){return Object(i.a)({url:"/app/getAppGroupDetail",method:"get",params:e})},postCustomerGroupSaveData:function(e){return Object(i.a)({url:"/app/saveAppGroup",method:"post",data:e})},postCustomerGroupDeleteData:function(e){return Object(i.a)({url:"/app/deleteAppGroup",method:"post",params:e})},getCustomerGroupListNoPageData:function(e){return Object(i.a)({url:"/app/findAppGroupListWithNoPage",method:"get",params:e})},getCustomerGroupMessageCallbackInfoData:function(e){return Object(i.a)({url:"/app/getMessageCallbackInfoList",method:"get",params:e})},postCustomerGroupMessageCallbackInfoSaveData:function(e){return Object(i.a)({url:"/app/saveMessageCallbackInfo",method:"post",data:e})}},c={findSupplierUserByErp:function(e){return Object(i.a)({url:"/supplier/findSupplierUserByErp",method:"get",params:e})}},u={message:s,openBiz:p,appManager:o,apiManager:c};t.a=u},"3fca":function(e,t,a){"use strict";a("848d")},"6ea4":function(e,t,a){"use strict";var i=(a("c5f6"),{name:"steps",props:{active:{required:!0,type:Number},title:{required:!1,type:String},tiptitle:{required:!0,type:Array}}}),n=(a("e7be"),a("2877")),s=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.title?a("h2",{staticClass:"com-tit-mini"},[e._v(e._s(e.title))]):e._e(),a("div",{staticClass:"my-step-bar"},[a("el-steps",{staticClass:"my-steps",attrs:{active:e.active,"finish-status":"success","align-center":""}},e._l(e.tiptitle,(function(e,t){return a("el-step",{key:t,attrs:{title:e}})})),1)],1)])}),[],!1,null,"16bbb482",null);t.a=s.exports},7e3:function(e,t,a){"use strict";a("f3ef")},"848d":function(e,t,a){},a7a7:function(e,t,a){"use strict";a.r(t);var i=(a("ac6a"),a("7f7f"),a("6ea4")),n=a("365c"),s=a("1799"),r=a("3266"),p={name:"SubscribeDockingScheme",components:{Steps:i.a,Pagination:s.a},data:function(){return{loading:!0,intervalId:null,time:5,unitId:0,unitName:"",appKey:"",appName:"",appType:0,bizName:"",typeToAppTypeTable:[,2,2,2,2,4],appTypeTextTable:[,,this.$t("appManager.subscribeDockingScheme.5izk54nwi9k1"),,this.$t("appManager.subscribeDockingScheme.5izk54nwi9k0")],steps:{active:0,tiptitle:[this.$t("appManager.subscribeDockingScheme.5izk54nwid00"),this.$t("appManager.subscribeDockingScheme.5izk54nwigo0"),this.$t("appManager.subscribeDockingScheme.5izk54nwik00")]},table:{data:[],itemList:[{label:this.$t("appManager.subscribeDockingScheme.5izk54nwinc0"),prop:"name"},{label:this.$t("appManager.subscribeDockingScheme.5izk54nwiqg0"),prop:"remark"}]},form:{data:{bizName:"",appName:"",remark:""},itemList:[{label:this.$t("appManager.subscribeDockingScheme.5izk54nwits0"),prop:"bizName",disabled:!0},{label:this.$t("appManager.subscribeDockingScheme.5izk54nwix80"),prop:"appName",disabled:!0},{label:this.$t("appManager.subscribeDockingScheme.5izk54nwj040"),prop:"remark",type:"textarea",rows:2}],rules:{bizName:[{required:!0,message:this.$t("appManager.subscribeDockingScheme.5izk54nwhdc0")}],appName:[{required:!0,message:this.$t("appManager.subscribeDockingScheme.5izk54nwj3k0")}],remark:[{required:!0,message:this.$t("appManager.subscribeDockingScheme.5izk54nwj8c0")},{min:10,max:200,message:this.$t("appManager.subscribeDockingScheme.5izk54nwjb00")}]}},pageNumb:1,pageSize:10,total:0,submitButtonLoading:!1,submitButtonDebounceTimer:null}},methods:{clstag:function(e,t){return Object(r.a)(e,t)},previousStep:function(){this.steps.active-=1,this.$refs.form.resetFields()},onClickSubmitButton:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;clearTimeout(e.submitButtonDebounceTimer),e.submitButtonDebounceTimer=setTimeout((function(){e.submitButtonLoading=!0;var t=[{unitId:e.unitId,appKey:e.appKey,appName:e.appName,remark:e.form.data.remark}];n.a.appManager.postSubscribeBizData(t).then((function(t){if(2e4===t.code){e.$message.success(e.$t("appManager.subscribeDockingScheme.5izk54nwjeg0")),e.steps.active+=1;var a=e;e.intervalId=window.setInterval((function(){a.time-=1,a.time<=0&&a.goToRoute()}),1e3)}else e.$message.error(t.data.message);e.submitButtonLoading=!1})).catch((function(t){e.submitButtonLoading=!1}))}),300)}))},applyToUse:function(e){this.unitId=e.unitId,this.form.data.bizName=e.name,this.form.data.appName=this.appName,this.steps.active+=1},goToRoute:function(){var e=this.intervalId,t=parseInt(this.$route.params.id);window.clearInterval(e),this.$router.push({name:"AppManagerAppTabs",params:{id:t},query:{id:t,tabName:"302"}})},findBizUnitVoListByPage:function(e){var t=this;this.pageNumb=e||this.pageNumb;var a=this.pageNumb,i=this.pageSize,s={appKey:this.appKey,unitName:this.unitName,pageNumb:a,pageSize:i};n.a.appManager.findBizUnitVoListByPage(s).then((function(e){var a=e.data,i=a.list,n=a.total,s=[];i.forEach((function(e){e.appType=t.appTypeTextTable[t.appType],s.push(e)})),t.table.data=s,t.total=n,t.loading=!1})).catch((function(e){}))}},mounted:function(){var e=this,t={id:parseInt(this.$route.params.id)};n.a.appManager.getAppData(t).then((function(t){e.appKey=t.data.code,e.appName=t.data.name,e.appType=e.typeToAppTypeTable[t.data.type],e.findBizUnitVoListByPage()})).catch((function(e){}))}},o=p,c=(a("7000"),a("2877")),u=Object(c.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"subscribe-docking-scheme"},[a("div",{staticClass:"app-container"},[a("h2",{staticClass:"menuTitle"},[e._v(" "+e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwgl00"))+" ")]),a("Steps",{staticClass:"subscribe-steps",attrs:{active:e.steps.active,tiptitle:e.steps.tiptitle}}),a("div",{staticClass:"stepForm"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.steps.active,expression:"steps.active === 0"}],staticClass:"step-form-table"},[a("div",{staticClass:"table-search"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:e.$t("appManager.subscribeDockingScheme.5izk54nwhdc0"),clearable:!0,"suffix-icon":"el-icon-search"},on:{input:function(t){return e.findBizUnitVoListByPage(1)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findBizUnitVoListByPage(1)}},model:{value:e.unitName,callback:function(t){e.unitName="string"==typeof t?t.trim():t},expression:"unitName"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.table.data}},[a("el-table-column",{attrs:{type:"index",label:e.$t("appManager.subscribeDockingScheme.5izk54nwhmg0"),width:"80",align:"center"}}),e._l(e.table.itemList,(function(e,t){return a("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop,align:"center","show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{label:e.$t("appManager.subscribeDockingScheme.5izk54nwhpk0"),prop:"orderStatus",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{disabled:0===i.orderStatus||1===i.orderStatus,type:"text"},on:{click:function(t){return e.applyToUse(i)}}},[e._v(e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwht40")))])]}}])})],2),a("Pagination",{attrs:{currentPage:e.pageNumb,pageSize:e.pageSize,total:e.total,reloadTableData:e.findBizUnitVoListByPage},on:{"update:currentPage":function(t){e.pageNumb=t},"update:current-page":function(t){e.pageNumb=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}})],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.steps.active,expression:"steps.active === 1"}],ref:"form",attrs:{model:e.form.data,rules:e.form.rules}},e._l(e.form.itemList,(function(t,i){return a("el-form-item",{key:i,attrs:{label:t.label,prop:t.prop,"label-width":"120px"}},[a("el-input",{attrs:{type:t.type,disabled:t.disabled,rows:t.rows,resize:"vertical"},model:{value:e.form.data[t.prop],callback:function(a){e.$set(e.form.data,t.prop,a)},expression:"form.data[item.prop]"}})],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.steps.active,expression:"steps.active === 2"}],staticClass:"successWrapper"},[a("i",{staticClass:"el-icon-success"}),a("p",{staticClass:"successTitle"},[e._v(" "+e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwhw40"))+" ")]),a("p",{staticClass:"successTip"},[e._v(" "+e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwhw41"))+","+e._s(e.time)+e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwhw42"))+" ")])]),e.steps.active>0?a("div",{staticClass:"buttonWrapper"},[1===e.steps.active?a("el-button",{on:{click:e.previousStep}},[e._v(e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwhz80")))]):e._e(),1===e.steps.active?a("el-button",{attrs:{loading:e.submitButtonLoading,type:"primary"},on:{click:e.onClickSubmitButton}},[e._v(e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwi340")))]):e._e(),2===e.steps.active?a("el-button",{attrs:{type:"primary"},on:{click:e.goToRoute}},[e._v(e._s(e.$t("appManager.subscribeDockingScheme.5izk54nwi6c0")))]):e._e()],1):e._e()],1)],1)])}),[],!1,null,"6a640928",null);t.default=u.exports},d6a5:function(e,t,a){},e7be:function(e,t,a){"use strict";a("d6a5")},f3ef:function(e,t,a){}}]);