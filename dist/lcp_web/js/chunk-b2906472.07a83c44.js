(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b2906472"],{"0d36":function(e,a,t){"use strict";t.r(a);var n=(t("3b2b"),t("c7eb")),o=(t("96cf"),t("1da1")),r=t("7cf5"),c=t("b775"),i={name:"BasicInfo",data:function(){var e=this,a=function(){var a=Object(o.a)(Object(n.a)().mark((function a(t,o,c){var i;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i={companyCode:o},a.next=4,r.a.companyCodeExistedFlag(i).then((function(){c()})).catch((function(a){var t=a.data,n=t.message;10001===t.code?c(new Error("统一社会信用代码或营业执照号已经被占用")):(n&&e.$message.error(n),c(new Error(" ")))}));case 4:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}();return{verificationCodeLoading:!1,verificationCodeTime:0,basicInfoData:{companyName:"",companyCode:"",contactsName:"",contactsEmail:"",contactsPhone:"",verificationCode:"",cascaderOptions:[],cascaderData:[],cascaderLabel:[],scale:null,businessScope:[]},basicInfoList:[{label:"企业名称",prop:"companyName",placeholder:"请填写营业执照上的公司名称"},{label:"统一社会信用代码或营业执照号",prop:"companyCode",placeholder:"请填写统一社会信用代码或营业执照号"},{label:"企业所在地区",prop:"cascaderOptions",placeholder:"请选择企业所在地区"},{label:"企业规模",prop:"scale",placeholder:"请选择企业规模"},{label:"主营业务",prop:"businessScope",placeholder:"请选择主营业务"},{label:"联系人姓名",prop:"contactsName",placeholder:"请填写贵公司的联系人姓名"},{label:"联系人邮箱",prop:"contactsEmail",placeholder:"用于接收平台的重要消息"},{label:"联系人电话",prop:"contactsPhone",placeholder:"用于接收平台的重要通知"}],basicInfoRules:{companyName:[{required:!0,message:"企业名称不能为空"}],companyCode:[{required:!0,message:"统一社会信用代码或营业执照号不能为空"},{pattern:/^([0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}|[1-9]\d{14})$/,message:"请输入正确的统一社会信用代码或营业执照号"},{validator:a,trigger:"blur"}],cascaderOptions:[{required:!0,message:"企业所在地区不能为空"}],scale:[{required:!0,message:"企业规模不能为空"}],businessScope:[{required:!0,message:"主营业务不能为空"}],contactsName:[{required:!0,message:"联系人姓名不能为空"},{validator:function(e,a,t){""===a?t(new Error("联系人姓名不能为空")):RegExp(/^[\u4e00-\u9fa5a-zA-Z]*$/).test(a)?t():t(new Error("请输入正确的姓名"))}}],contactsEmail:[{required:!0,message:"联系人邮箱不能为空"},{validator:function(e,a,t){if(""===a)t(new Error("联系人邮箱不能为空"));else{/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a)?t():t(new Error("请输入正确的邮箱账号"))}}}],contactsPhone:[{required:!0,message:"联系人电话不能为空"},{validator:function(e,a,t){""===a?t(new Error("联系人手机号码不能为空")):RegExp(/^1[3456789]\d{9}$/).test(a)?t():t(new Error("请输入正确的手机号"))}}],verificationCode:[{required:!0,message:"手机验证码不能为空"},{validator:function(e,a,t){var n=RegExp(/^(\d{6})$/);null===a||""===a?t(new Error("短信验证码不能为空")):n.test(a)?t():t(new Error("请输入正确的短信验证码"))}}]},scaleOptionList:[{value:1,label:"0-50人"},{value:2,label:"51-100人"},{value:3,label:"101-500人"},{value:4,label:"500人以上"}],businessScopeOptionList:["软件和信息技术服务业","电商零售","服饰","食品","酒水","3C数码","母婴","家电","家居","生鲜","汽车配件","物流","办公用品","图书","运动户外","医药保健","美妆个护","餐饮","玩具乐器","建材","制造业","日用品","服务业","其他"],submitButtonLoading:!1,submitButtonDebounceTimer:null}},computed:{computeVerificationCodeText:function(){return this.verificationCodeLoading?"重新发送（".concat(this.verificationCodeTime,"s）"):"获取验证码"}},methods:{getAuthCode:function(){var e=Object(o.a)(Object(n.a)().mark((function e(){var a,t,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.basicInfoData.contactsPhone,t={phone:a},e.next=4,r.a.getAuthCode(t).catch((function(e){var a=e.data.message;throw a&&o.$message.error(a),new Error(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onAreaChange:function(){this.$refs.cascader[0].getCheckedNodes()[0]&&this.$refs.cascader[0].getCheckedNodes()[0].pathLabels&&(this.basicInfoData.cascaderLabel=this.$refs.cascader[0].getCheckedNodes()[0].pathLabels)},onAreaItemChange:function(e){this.getAreaList(e)},getAreaList:function(e){var a,t,n=this;e?1===e.length?(a=2,t=e[0]):2===e.length&&(a=3,t=e[1]):(a=1,t="");Object(c.a)({url:"/supplierIsv/getAreaList",method:"get",params:{queryLevel:a,areaCode:t}}).then((function(t){if(2e4===t.code){var o=t.data;1===a?n.basicInfoData.cascaderData=o.map((function(e,a){return{areaCode:e.areaCode,areaName:e.areaName,cities:[]}})):2===a&&n.basicInfoData.cascaderData.map((function(a,t){a.areaCode===e[0]&&(a.cities.length||(a.cities=o.map((function(e,a){return{areaCode:e.areaCode,areaName:e.areaName}}))))}))}else n.$message.error("服务器获取数据失败!")})).catch((function(e){}))},showAreaList:function(){var e=this;this.basicInfoData.cascaderOptions;Object(c.a)({url:"/supplierIsv/getAreaList",method:"get",params:{queryLevel:1,areaCode:""}}).then((function(a){if(2e4===a.code){var t=a.data;e.basicInfoData.cascaderData=t.map((function(e,a){return{areaCode:e.areaCode,areaName:e.areaName,cities:[]}}))}else e.$message.error("服务器获取数据失败!")})).catch((function(e){}))},handleGetVerificationCode:function(){var e=this;this.$refs.basicInfo.validateField("contactsPhone",function(){var a=Object(o.a)(Object(n.a)().mark((function a(t){var o;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=7;break}return e.verificationCodeLoading=!0,e.verificationCodeTime=60,a.next=5,e.getAuthCode();case 5:o=function a(){setTimeout((function(){e.verificationCodeTime>0?(e.verificationCodeTime-=1,a()):e.verificationCodeLoading=!1}),1e3)},o();case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},onClickSubmitButton:function(){var e=Object(o.a)(Object(n.a)().mark((function e(){var a=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$refs.basicInfo.validate((function(e){if(!e)return!1;clearTimeout(a.submitButtonDebounceTimer),a.submitButtonDebounceTimer=setTimeout(Object(o.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.submitButtonLoading=!0,e.next=3,a.addBaseInfo().catch((function(e){throw a.submitButtonLoading=!1,new Error("onClickSubmitButton, ".concat(e))}));case 3:a.$router.push({path:"/qualificationManagement"}),a.submitButtonLoading=!1;case 5:case"end":return e.stop()}}),e)}))),300)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),addBaseInfo:function(){var e=Object(o.a)(Object(n.a)().mark((function e(){var a,t,o,c,i,s,u,l,p,d,f,b,m,h=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.basicInfoData.companyName,t=this.basicInfoData.companyCode,o=this.basicInfoData.contactsName,c=this.basicInfoData.contactsEmail,i=this.basicInfoData.contactsPhone,s=this.basicInfoData.verificationCode,u=this.basicInfoData.cascaderOptions[0],l=this.basicInfoData.cascaderOptions[1],p=this.basicInfoData.cascaderLabel[0],d=this.basicInfoData.cascaderLabel[1],f=this.basicInfoData.scale,b=this.basicInfoData.businessScope.join("/"),m={companyName:a,companyCode:t,contactsName:o,contactsEmail:c,contactsPhone:i,verificationCode:s,provinceCode:u,cityCode:l,provinceName:p,cityName:d,scale:f,businessScope:b},e.next=15,r.a.addBaseInfo(m).catch((function(e){var a=e.data.message;throw a&&h.$message.error(a),new Error(e)}));case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},created:function(){this.showAreaList()}},s=i,u=(t("dbbd"),t("2877")),l=Object(u.a)(s,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"content"},[t("p",{staticClass:"desc"},[e._v("为了尽快通过资质审核，请如实填写以下信息")]),t("el-form",{ref:"basicInfo",attrs:{model:e.basicInfoData,rules:e.basicInfoRules,"label-width":"140px"}},[e._l(e.basicInfoList,(function(a,n){return t("el-form-item",{key:n,attrs:{label:a.label,prop:a.prop}},["companyCode"===a.prop?t("el-input",{attrs:{placeholder:a.placeholder},model:{value:e.basicInfoData[a.prop],callback:function(t){e.$set(e.basicInfoData,a.prop,"string"==typeof t?t.trim():t)},expression:"basicInfoData[item.prop]"}}):"cascaderOptions"===a.prop?t("el-cascader",{ref:"cascader",refInFor:!0,staticStyle:{width:"100%"},attrs:{options:e.basicInfoData.cascaderData,props:{value:"areaCode",label:"areaName",children:"cities"},placeholder:"请选择地区"},on:{change:e.onAreaChange,"expand-change":e.onAreaItemChange},model:{value:e.basicInfoData.cascaderOptions,callback:function(a){e.$set(e.basicInfoData,"cascaderOptions",a)},expression:"basicInfoData.cascaderOptions"}}):"scale"===a.prop?t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:a.placeholder},model:{value:e.basicInfoData[a.prop],callback:function(t){e.$set(e.basicInfoData,a.prop,t)},expression:"basicInfoData[item.prop]"}},e._l(e.scaleOptionList,(function(e){var a=e.value,n=e.label;return t("el-option",{key:a,attrs:{value:a,label:n}})})),1):"businessScope"===a.prop?t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:a.placeholder,multiple:!0},model:{value:e.basicInfoData[a.prop],callback:function(t){e.$set(e.basicInfoData,a.prop,t)},expression:"basicInfoData[item.prop]"}},e._l(e.businessScopeOptionList,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1):t("el-input",{attrs:{placeholder:a.placeholder},model:{value:e.basicInfoData[a.prop],callback:function(t){e.$set(e.basicInfoData,a.prop,"string"==typeof t?t.trim():t)},expression:"basicInfoData[item.prop]"}})],1)})),t("el-form-item",{attrs:{label:"手机验证码",prop:"verificationCode"}},[t("div",{staticClass:"auth-code-wrapper"},[t("el-input",{attrs:{placeholder:"请填写手机验证码"},model:{value:e.basicInfoData.verificationCode,callback:function(a){e.$set(e.basicInfoData,"verificationCode","string"==typeof a?a.trim():a)},expression:"basicInfoData.verificationCode"}}),t("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:e.verificationCodeLoading,type:"primary"},on:{click:e.handleGetVerificationCode}},[e._v(e._s(e.computeVerificationCodeText))])],1)])],2),t("div",{staticClass:"footer"},[t("el-button",{attrs:{loading:e.submitButtonLoading,type:"primary"},on:{click:e.onClickSubmitButton}},[e._v("提交")])],1)],1)])}),[],!1,null,"0b72a298",null);a.default=l.exports},"3b2b":function(e,a,t){var n=t("7726"),o=t("5dbc"),r=t("86cc").f,c=t("9093").f,i=t("aae3"),s=t("0bfb"),u=n.RegExp,l=u,p=u.prototype,d=/a/g,f=/a/g,b=new u(d)!==d;if(t("9e1e")&&(!b||t("79e5")((function(){return f[t("2b4c")("match")]=!1,u(d)!=d||u(f)==f||"/a/i"!=u(d,"i")})))){u=function(e,a){var t=this instanceof u,n=i(e),r=void 0===a;return!t&&n&&e.constructor===u&&r?e:o(b?new l(n&&!r?e.source:e,a):l((n=e instanceof u)?e.source:e,n&&r?s.call(e):a),t?this:p,u)};for(var m=function(e){e in u||r(u,e,{configurable:!0,get:function(){return l[e]},set:function(a){l[e]=a}})},h=c(l),v=0;h.length>v;)m(h[v++]);p.constructor=u,u.prototype=p,t("2aba")(n,"RegExp",u)}t("7a56")("RegExp")},"7cf5":function(e,a,t){"use strict";var n=t("b775"),o=t("7aef"),r={getQualificationStatus:function(e){return n.a.get("supplierIsv/getQualificationStatus",{params:e})},getUserRole:function(e){return n.a.get("user/getUserRole",{params:e})},haveBaseInfoFlag:function(e){return n.a.post("supplierIsv/haveBaseInfoFlag",e)},getAuthCode:function(e){var a={url:"/user/getAuthCode",method:"post",params:e};return Object(o.a)(a)},companyCodeExistedFlag:function(e){var a={url:"/supplierIsv/companyCodeExistedFlag",method:"get",params:e};return Object(o.a)(a)},addBaseInfo:function(e){var a={url:"/supplierIsv/addBaseInfo",method:"post",data:e};return Object(o.a)(a)}};a.a=r},dbbd:function(e,a,t){"use strict";t("ebfd0")},ebfd0:function(e,a,t){}}]);