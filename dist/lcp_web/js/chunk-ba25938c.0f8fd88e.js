(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ba25938c"],{1799:function(t,e,a){"use strict";var r=(a("c5f6"),{name:"Pagination",props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},total:{type:Number,default:0},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},reloadTableData:{type:Function,default:function(){}}},methods:{onCurrentChange:function(t){this.$emit("update:currentPage",t),this.reloadTableData()},onSizeChange:function(t){this.$emit("update:pageSize",t),this.reloadTableData()}}}),n=r,s=(a("3fca"),a("2877")),i=Object(s.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-pagination",{staticClass:"pagination",attrs:{background:!0,"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.onCurrentChange,"size-change":t.onSizeChange}})}),[],!1,null,"52f386a2",null);e.a=i.exports},"20d6":function(t,e,a){"use strict";var r=a("5ca1"),n=a("0a49")(6),s="findIndex",i=!0;s in[]&&Array(1)[s]((function(){i=!1})),r(r.P+r.F*i,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},2909:function(t,e,a){"use strict";var r=a("6b75");var n=a("06c5");function s(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Object(n.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(e,"a",(function(){return s}))},"3d85":function(t,e,a){"use strict";var r=(a("c5f6"),{name:"Steps",props:{titleList:{type:Array,default:function(){return[]}},active:{type:Number,required:!0}}}),n=(a("e75f"),a("2877")),s=Object(n.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-steps",{staticClass:"steps",attrs:{active:t.active,"align-center":!0,"finish-status":"success"}},t._l(t.titleList,(function(t,e){return a("el-step",{key:e,attrs:{title:t}})})),1)}),[],!1,null,"443b202a",null);e.a=s.exports},"3fca":function(t,e,a){"use strict";a("848d")},"5df3":function(t,e,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=r(e,a),this._i+=t.length,{value:t,done:!1})}))},"63e2":function(t,e,a){},"65d1":function(t,e,a){},"67ab":function(t,e,a){var r=a("ca5a")("meta"),n=a("d3f4"),s=a("69a8"),i=a("86cc").f,o=0,c=Object.isExtensible||function(){return!0},u=!a("79e5")((function(){return c(Object.preventExtensions({}))})),l=function(t){i(t,r,{value:{i:"O"+ ++o,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!s(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return u&&f.NEED&&c(t)&&!s(t,r)&&l(t),t}}},"7af5":function(t,e,a){"use strict";a("65d1")},"7b06":function(t,e,a){"use strict";a("ddf5")},"848d":function(t,e,a){},"8ae0":function(t,e,a){"use strict";a("63e2")},"9f9e":function(t,e,a){},a3f3:function(t,e,a){},b39a9:function(t,e,a){var r=a("d3f4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},b570:function(t,e,a){},c26b:function(t,e,a){"use strict";var r=a("86cc").f,n=a("2aeb"),s=a("dcbc"),i=a("9b43"),o=a("f605"),c=a("4a59"),u=a("01f9"),l=a("d53b"),f=a("7a56"),p=a("9e1e"),d=a("67ab").fastKey,h=a("b39a9"),b=p?"_s":"size",m=function(t,e){var a,r=d(e);if("F"!==r)return t._i[r];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,u){var l=t((function(t,r){o(t,l,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[b]=0,null!=r&&c(r,a,t[u],t)}));return s(l.prototype,{clear:function(){for(var t=h(this,e),a=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete a[r.i];t._f=t._l=void 0,t[b]=0},delete:function(t){var a=h(this,e),r=m(a,t);if(r){var n=r.n,s=r.p;delete a._i[r.i],r.r=!0,s&&(s.n=n),n&&(n.p=s),a._f==r&&(a._f=n),a._l==r&&(a._l=s),a[b]--}return!!r},forEach:function(t){h(this,e);for(var a,r=i(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(r(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!m(h(this,e),t)}}),p&&r(l.prototype,"size",{get:function(){return h(this,e)[b]}}),l},def:function(t,e,a){var r,n,s=m(t,e);return s?s.v=a:(t._l=s={i:n=d(e,!0),k:e,v:a,p:r=t._l,n:void 0,r:!1},t._f||(t._f=s),r&&(r.n=s),t[b]++,"F"!==n&&(t._i[n]=s)),t},getEntry:m,setStrong:function(t,e,a){u(t,e,(function(t,a){this._t=h(t,e),this._k=a,this._l=void 0}),(function(){for(var t=this,e=t._k,a=t._l;a&&a.r;)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?l(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,l(1))}),a?"entries":"values",!a,!0),f(e)}}},c29d:function(t,e,a){"use strict";a("d570")},d570:function(t,e,a){},d675:function(t,e,a){"use strict";a("b570")},d92e:function(t,e,a){"use strict";a.r(e);var r=(a("ac6a"),a("5df3"),a("c7eb")),n=(a("96cf"),a("1da1")),s={name:"SearchForm",props:{searchFormData:{type:Object,required:!0}},data:function(){return{statusOptionList:[{label:"-",value:null},{label:"审核中",value:1},{label:"通过",value:2},{label:"驳回",value:3},{label:"已取消",value:4}]}}},i=(a("df92"),a("2877")),o=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"search-form",attrs:{type:"flex",justify:"space-between",tag:"section"}},[a("el-form",{staticClass:"search-form__left-form",attrs:{model:t.searchFormData,inline:!0},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("keyupEnter")}}},[a("el-form-item",[a("el-input",{staticStyle:{width:"320px"},attrs:{clearable:!0,placeholder:"请输入申请主题"},model:{value:t.searchFormData.subject,callback:function(e){t.$set(t.searchFormData,"subject",e)},expression:"searchFormData.subject"}})],1),a("el-form-item",{attrs:{label:"申请状态"}},[a("el-select",{staticStyle:{width:"160px"},model:{value:t.searchFormData.status,callback:function(e){t.$set(t.searchFormData,"status",e)},expression:"searchFormData.status"}},t._l(t.statusOptionList,(function(t){var e=t.label,r=t.value;return a("el-option",{key:r,attrs:{label:e,value:r}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.$emit("keyupEnter")}}},[t._v("搜索")])],1)],1),a("div",{staticClass:"search-form__right-container"},[t._t("default")],2)],1)}),[],!1,null,"dc0c4142",null),c=o.exports,u=(a("f400"),{name:"SearchTable",props:{searchTableLoading:{type:Boolean,required:!0},searchTableData:{type:Array,required:!0}},data:function(){return{searchTableList:[{label:"申请主题",prop:"subject",showOverflowTooltip:!0},{label:"接收方类型",prop:"transferType",width:"100"},{label:"接收方",prop:"targetName",width:"100",showOverflowTooltip:!0},{label:"申请状态",prop:"status",width:"100"},{label:"申请时间",prop:"createTime",width:"160"}]}},filters:{formatTableColumnTransferTypeText:function(t){return(new Map).set(1,"个人").set(2,"团队").get(t)||"-"},formatTableColumnStatusClassName:function(t){return(new Map).set(1,"updateColor").set(2,"normalColor").set(3,"unknownColor").set(4,"deadColor").get(t)||""},formatTableColumnStatusText:function(t){return(new Map).set(1,"审核中").set(2,"通过").set(3,"驳回").set(4,"已取消").get(t)||"-"}}}),l=u,f=(a("7af5"),Object(i.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"search-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.searchTableLoading,expression:"searchTableLoading"}],attrs:{data:t.searchTableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._l(t.searchTableList,(function(e){var r=e.label,n=e.prop,s=e.width,i=e.showOverflowTooltip;return a("el-table-column",{key:n,attrs:{label:r,prop:n,width:s,"show-overflow-tooltip":i},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return["transferType"===n?a("span",[t._v(" "+t._s(t._f("formatTableColumnTransferTypeText")(r[n]))+" ")]):"status"===n?a("span",{class:t._f("formatTableColumnStatusClassName")(r[n])},[t._v(" "+t._s(t._f("formatTableColumnStatusText")(r[n]))+" ")]):a("span",[t._v(t._s(r[n]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("actionColumn",null,null,e)]}}],null,!0)})],2),t._t("default")],2)}),[],!1,null,"0e64733b",null)),p=f.exports,d=a("1799"),h=(a("7514"),a("3d85")),b=(a("7f7f"),a("5530")),m=a("96e0"),g={name:"StepBasicInfo",props:{basicInfoFormData:{type:Object,required:!0},isAdmin:{type:Boolean,required:!0}},data:function(){var t=this;return{basicInfoFormItemList:[{label:"申请主题",prop:"subject",placeholder:"如：将字节快手工作内容移交给XXX"},{label:"资产接收方",prop:"transferType"},{label:" ",prop:"target"}],basicInfoFormRules:{subject:[{required:!0,message:"请输入申请主题"},{min:5,max:20,message:"请输入5-20个字符"}],transferType:[{required:!0,message:"请选择资产接收方"}],target:[{validator:function(e,a,r){"{}"!==JSON.stringify(a)&&"null"!==JSON.stringify(a)&&""!==JSON.stringify(a)||!t.basicInfoFormData||1!=t.basicInfoFormData.transferType?"{}"!==JSON.stringify(a)&&"null"!==JSON.stringify(a)&&""!==JSON.stringify(a)||!t.basicInfoFormData||2!=t.basicInfoFormData.transferType||r(new Error("请选择资产接收团队")):r(new Error("请选择资产接收方账号")),r()}},{required:!0,message:"请选择资产接收方账号"}]},targetLoading:!1,erpTargetOptionList:[],teamTargetOptionList:[]}},watch:{"basicInfoFormData.transferType":{handler:function(){var t=this.basicInfoFormData;this.$emit("update:basicInfoFormData",Object(b.a)(Object(b.a)({},t),{},{target:null}))}}},methods:{handleRadioChange:function(t){this.$refs.basicInfoForm.validate()},findUser:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={erp:e},t.next=3,m.a.hrInfo.findUser(a).catch((function(t){throw new Error("findUser, ".concat(t))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),queryInnerSupplier:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={supplierName:e},t.next=3,m.a.supplier.queryInnerSupplier(a).catch((function(t){throw new Error("queryInnerSupplier, ".concat(t))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),handleFindUser:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){var a,n,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.targetLoading=!0,t.next=3,this.findUser(e).catch((function(t){throw new Error("handleFindUser, ".concat(t))}));case 3:a=t.sent,n=a.data,s=void 0===n?[]:n,this.erpTargetOptionList=s instanceof Array?s.map((function(t){var e=t.userName,a=void 0===e?"":e,r=t.realName;return{targetCode:a,targetName:void 0===r?"":r}})):[],this.targetLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),handleQueryInnerSupplier:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){var a,n,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.targetLoading=!0,t.next=3,this.queryInnerSupplier(e).catch((function(t){throw new Error("handleQueryInnerSupplier, ".concat(t))}));case 3:a=t.sent,n=a.data,s=void 0===n?[]:n,this.teamTargetOptionList=s instanceof Array?s.map((function(t){var e=t.code,a=void 0===e?"":e,r=t.name;return{targetCode:a,targetName:void 0===r?"":r}})):[],this.targetLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),remoteMethodSearchErpTargetOptionList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=5;break}return t.next=3,this.handleFindUser(e).catch((function(t){throw new Error("remoteMethodSearchErpTargetOptionList, ".concat(t))}));case 3:t.next=6;break;case 5:this.erpTargetOptionList=[];case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),remoteMethodSearchTeamTargetOptionList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=5;break}return t.next=3,this.handleQueryInnerSupplier(e).catch((function(t){throw new Error("remoteMethodSearchTeamTargetOptionList, ".concat(t))}));case 3:t.next=6;break;case 5:this.teamTargetOptionList=[];case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),initTargetOptionList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.basicInfoFormData.target.targetName,!(a=void 0===e?"":e)){t.next=7;break}if(n=this.basicInfoFormData.transferType,!(s=(new Map).set(1,this.remoteMethodSearchErpTargetOptionList).set(2,this.remoteMethodSearchTeamTargetOptionList)).get(n)){t.next=7;break}return t.next=7,s.get(n)(a).catch((function(t){throw new Error("initTargetOptionList, ".concat(t))}));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},created:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initTargetOptionList().catch((function(t){throw new Error("created, ".concat(t))}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},v=g,y=(a("8ae0"),Object(i.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"step-basic-info"},[a("el-form",{ref:"basicInfoForm",staticClass:"step-basic-info__form",attrs:{model:t.basicInfoFormData,rules:t.basicInfoFormRules,"label-width":"100px"}},t._l(t.basicInfoFormItemList,(function(e){var r=e.label,n=e.prop,s=e.placeholder;return a("el-form-item",{key:n,attrs:{label:r,prop:n}},["subject"===n?a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:s},model:{value:t.basicInfoFormData.subject,callback:function(e){t.$set(t.basicInfoFormData,"subject","string"==typeof e?e.trim():e)},expression:"basicInfoFormData.subject"}}):"transferType"===n?[a("el-radio-group",{on:{change:t.handleRadioChange},model:{value:t.basicInfoFormData.transferType,callback:function(e){t.$set(t.basicInfoFormData,"transferType",e)},expression:"basicInfoFormData.transferType"}},[a("el-radio",{attrs:{label:1}},[t._v("个人")]),a("el-radio",{attrs:{label:2}},[t._v("团队")])],1)]:"target"===n?[1===t.basicInfoFormData.transferType?a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:!0,filterable:!0,remote:!0,"remote-method":t.remoteMethodSearchErpTargetOptionList,loading:t.targetLoading,"value-key":"targetCode",placeholder:"请输入资产接收人ERP账号"},model:{value:t.basicInfoFormData.target,callback:function(e){t.$set(t.basicInfoFormData,"target","string"==typeof e?e.trim():e)},expression:"basicInfoFormData.target"}},t._l(t.erpTargetOptionList,(function(e){return a("el-option",{key:e.targetCode,attrs:{label:e.targetCode,value:e}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.targetCode))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(" "+t._s(e.targetName)+" ")])])})),1):2===t.basicInfoFormData.transferType?a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:!0,filterable:!0,remote:!0,"remote-method":t.remoteMethodSearchTeamTargetOptionList,loading:t.targetLoading,"value-key":"targetCode",placeholder:"输入资产接收团队名称"},model:{value:t.basicInfoFormData.target,callback:function(e){t.$set(t.basicInfoFormData,"target","string"==typeof e?e.trim():e)},expression:"basicInfoFormData.target"}},t._l(t.teamTargetOptionList,(function(e){return a("el-option",{key:e.targetCode,attrs:{label:e.targetCode,value:e}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.targetCode))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(" "+t._s(e.targetName)+" ")])])})),1):t._e()]:t._e()],2)})),1)],1)}),[],!1,null,"3c7715bd",null)),w=y.exports,T=(a("20d6"),a("6762"),a("2fdb"),a("2909")),O=(a("c5f6"),{name:"StepSelectAsset",props:{selectAssetData:{type:Array,required:!0},transferData:{type:Array,required:!0},transferType:{type:Number,required:!0}},data:function(){return{transferLoading:!0,titleList:["当前用户负责的资产清单","已选择的资产清单"],assetBizType:null,customFilter:!1,transferProps:{key:"customId",label:"assetName"}}},computed:{computePlaceholder:function(){var t=this.transferType;return(new Map).set(1,"请输入方案/API/API分组中文名称/回传API").set(2,"请输入方案/API/API分组中文名称/消息").get(t)||[]},computeAssetBizTypeList:function(){var t=this.transferType;return(new Map).set(1,[{label:"对接方案",value:102},{label:"API分组-外部调用京东",value:232},{label:"API-HTTP协议API",value:231},{label:"API-JSF服务API",value:242},{label:"API-回传API",value:243}]).set(2,[{label:"对接方案",value:102},{label:"API分组-外部调用京东",value:232},{label:"内网应用",value:103},{label:"API-JSF服务API",value:242},{label:"消息",value:244}]).get(t)||[]},computeAssetBizTypeOptionList:function(){var t=this.computeAssetBizTypeList;return[{label:"全部",value:null}].concat(Object(T.a)(t))}},methods:{queryAssetList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.transferType,a={assetBelong:e},t.next=5,m.a.asset.queryAssetList(a).catch((function(t){throw new Error("queryAssetList, ".concat(t))}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleQueryAssetList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n,s,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.selectAssetData,this.transferLoading=!0,t.next=4,this.queryAssetList().catch((function(t){throw new Error("handleQueryAssetList, ".concat(t))}));case 4:a=t.sent,n=a.data.list,i=((s=void 0===n?[]:n)instanceof Array?s:[]).map((function(t){var a=t.id,r=t.assetBizType,n=t.assetName,s=t.assetDesc,i=t.owner,o=t.locked,c=a,u="".concat(r,"-").concat(a);return{assetId:c,assetBizType:r,assetName:n,assetDesc:s,owner:i,customId:u,onRight:e.includes(u),disabled:Boolean(o)}})),this.$emit("update:transferData",i),this.transferLoading=!1;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),filterMethod:function(t,e){var a=this.customFilter,r=this.assetBizType,n=e.onRight,s=e.owner.indexOf(t)>-1||e.assetName.indexOf(t)>-1;return a?(n||e.assetBizType===r)&&s:s},renderContent:function(t,e){var a=e.assetBizType,r=e.assetName,n=e.owner,s=this.computeAssetBizTypeList.find((function(t){return t.value===a})).label||"";return t("span",["【",s,"】",n," - ",r])},onChangeAssetBizType:function(t){this.customFilter=Boolean(t)},onChangeSelectAssetData:function(t,e,a){this.transferData.some((function(t){var r=t.customId,n=a.findIndex((function(t){return t===r}));if(n>-1)return t.onRight="right"===e,a.splice(n,1),0===a.length}))}},created:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handleQueryAssetList().catch((function(t){throw new Error("created, ".concat(t))}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}),D=O,S=(a("d675"),Object(i.a)(D,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"step-select-asset"},[a("el-transfer",{directives:[{name:"loading",rawName:"v-loading",value:t.transferLoading,expression:"transferLoading"}],ref:"stepSelectAssetTransfer",staticClass:"step-select-asset__transfer",attrs:{"filter-placeholder":t.computePlaceholder,value:t.selectAssetData,data:t.transferData,titles:t.titleList,props:t.transferProps,filterable:!0,"filter-method":t.filterMethod,"render-content":t.renderContent},on:{input:function(e){return t.$emit("update:selectAssetData",e)},change:t.onChangeSelectAssetData},scopedSlots:t._u([{key:"left-footer",fn:function(){return[a("el-select",{staticClass:"transfer-footer__select",staticStyle:{width:"190px"},on:{change:t.onChangeAssetBizType},model:{value:t.assetBizType,callback:function(e){t.assetBizType=e},expression:"assetBizType"}},t._l(t.computeAssetBizTypeOptionList,(function(t){var e=t.label,r=t.value;return a("el-option",{key:r,attrs:{label:e,value:r}})})),1)]},proxy:!0}])})],1)}),[],!1,null,"0ccb7d66",null)),A=S.exports,_={name:"StepSuccess"},j=(a("7b06"),Object(i.a)(_,(function(){var t=this;t.$createElement;return t._self._c,t._m(0)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"step-success"},[a("i",{staticClass:"el-icon-success"}),a("p",[t._v("资产交接申请提交成功！")]),a("p",[t._v("你可以在【京ME/ERP-流程中心】查看申请进度。")])])}],!1,null,"02be238c",null)),x=j.exports,I={name:"ApplyAssetTransferDialog",components:{Steps:h.a,StepBasicInfo:w,StepSelectAsset:A,StepSuccess:x},props:{applyAssetTransferDialogVisible:{type:Boolean,required:!0},isAdmin:{type:Boolean,required:!0}},data:function(){return{active:0,titleList:["填写申请基本信息","选择交接的资产","申请成功"],basicInfoFormData:{subject:"",transferType:1,target:{}},selectAssetData:[],transferData:[],stepSelectAssetSubmitButtonLoading:!1,stepSelectAssetSubmitButtonDebounceTimer:null}},methods:{submitOrder:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n,s,i,o,c,u;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.basicInfoFormData,a=e.subject,n=e.transferType,s=e.target,i=s.targetCode,o=s.targetName,c=this.formatSubmitItems(),u={subject:a,transferType:n,targetCode:i,targetName:o,items:c},t.next=5,m.a.assetTransfer.submitOrder(u).catch((function(t){throw new Error("submitOrder, ".concat(t))}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleSubmitOrder:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.submitOrder().catch((function(t){throw new Error("handleSubmitOrder, ".concat(t))}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),formatSubmitItems:function(){var t=this.selectAssetData,e=this.transferData;return t.reduce((function(t,a){var r=e.find((function(t){return t.customId===a})),n=r.assetId,s=r.assetBizType,i=r.assetName,o=r.assetDesc;return t.concat({assetId:n,assetBizType:s,assetName:i,assetDesc:o})}),[])},resetApplyAssetTransferData:function(){this.basicInfoFormData={subject:"",transferType:1,target:{}},this.selectAssetData=[],this.active=0},onClickStepBasicInfoNextStepButton:function(){var t=this;this.$refs.StepBasicInfo.$refs.basicInfoForm.validate().then((function(){t.active=1})).catch((function(){}))},onClickStepSelectAssetSubmitButton:function(){var t=this;this.selectAssetData.length>0?(clearTimeout(this.stepSelectAssetSubmitButtonDebounceTimer),this.stepSelectAssetSubmitButtonDebounceTimer=setTimeout(Object(n.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stepSelectAssetSubmitButtonLoading=!0,e.next=3,t.handleSubmitOrder().catch((function(e){throw t.stepSelectAssetSubmitButtonLoading=!1,new Error("onClickStepSelectAssetSubmitButton, ".concat(e))}));case 3:t.active=2,t.stepSelectAssetSubmitButtonLoading=!1;case 5:case"end":return e.stop()}}),e)}))),300)):this.$message.warning("请选择需要移交的资产！")},onClickStepSuccessContinueCreateButton:function(){this.resetApplyAssetTransferData()},onCloseApplyAssetTransferDialog:function(){this.resetApplyAssetTransferData(),this.$emit("close")}}},k=I,L=Object(i.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"apply-asset-transfer-dialog",attrs:{title:"申请移交资产",width:"1200px",top:"5vh",visible:t.applyAssetTransferDialogVisible,"max-height":560,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$emit("update:applyAssetTransferDialogVisible",e)},close:t.onCloseApplyAssetTransferDialog},scopedSlots:t._u([{key:"footer",fn:function(){return[0===t.active?[a("el-button",{on:{click:function(e){return t.$emit("update:applyAssetTransferDialogVisible",!1)}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onClickStepBasicInfoNextStepButton}},[t._v("下一步")])]:1===t.active?a("div",[a("el-button",{on:{click:function(e){t.active=0}}},[t._v("上一步")]),a("el-button",{attrs:{loading:t.stepSelectAssetSubmitButtonLoading,type:"primary"},on:{click:t.onClickStepSelectAssetSubmitButton}},[t._v("提交申请")])],1):2===t.active?[a("el-button",{on:{click:function(e){return t.$emit("update:applyAssetTransferDialogVisible",!1)}}},[t._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onClickStepSuccessContinueCreateButton}},[t._v("继续创建资产交接申请")])]:t._e()]},proxy:!0}])},[a("Steps",{attrs:{active:t.active,titleList:t.titleList},on:{"update:active":function(e){t.active=e}}}),0===t.active?a("StepBasicInfo",{ref:"StepBasicInfo",attrs:{basicInfoFormData:t.basicInfoFormData,isAdmin:t.isAdmin},on:{"update:basicInfoFormData":function(e){t.basicInfoFormData=e},"update:basic-info-form-data":function(e){t.basicInfoFormData=e}}}):1===t.active?a("StepSelectAsset",{attrs:{selectAssetData:t.selectAssetData,transferData:t.transferData,transferType:t.basicInfoFormData.transferType},on:{"update:selectAssetData":function(e){t.selectAssetData=e},"update:select-asset-data":function(e){t.selectAssetData=e},"update:transferData":function(e){t.transferData=e},"update:transfer-data":function(e){t.transferData=e}}}):2===t.active?a("StepSuccess"):t._e()],1)}),[],!1,null,"5ee6687e",null),F=L.exports,C={name:"DetailDialog",components:{Pagination:d.a},props:{detailDialogVisible:{type:Boolean,required:!0},currentRowData:{type:Object,required:!0}},data:function(){return{tableLoading:!0,tableData:[],tableColumnList:[{label:"移交项明细",prop:"assetName"}],pageNumb:1,pageSize:10,total:0}},filters:{formatAssetBizType:function(t){var e=[{label:"对接方案",value:102},{label:"API分组-外部调用京东",value:232},{label:"API-HTTP协议API",value:231},{label:"API-JSF服务API",value:242},{label:"API-回传API",value:243},{label:"内网应用",value:103},{label:"消息",value:244}].find((function(e){if(e.value===t)return e.label}));return e&&e.label}},methods:{queryAssetTransferOrderItemList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.currentRowData.id,a={orderId:e},t.next=5,m.a.assetTransfer.queryAssetTransferOrderItemList(a).catch((function(t){throw new Error("queryAssetTransferOrderItemList, ".concat(t))}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleQueryAssetTransferOrderItemList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n,s,i,o;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.tableLoading=!0,t.next=3,this.queryAssetTransferOrderItemList().catch((function(t){throw new Error("handleQueryAssetTransferOrderItemList, ".concat(t))}));case 3:e=t.sent,a=e.data,n=a.list,s=void 0===n?[]:n,i=a.total,o=void 0===i?0:i,this.tableData=s instanceof Array?s:[],this.total=o||0,this.tableLoading=!1;case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),onOpenDetailDialog:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handleQueryAssetTransferOrderItemList().catch((function(t){throw new Error("onOpenDetailDialog, ".concat(t))}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}},E=C,N=Object(i.a)(E,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"detail-dialog",attrs:{title:"详情",width:"800px",visible:t.detailDialogVisible,"max-height":520,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$emit("update:detailDialogVisible",e)},open:t.onOpenDetailDialog},scopedSlots:t._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("update:detailDialogVisible",!1)}}},[t._v("关 闭")])]},proxy:!0}])},[a("p",[a("span",[t._v("资产接收方："+t._s(t.currentRowData.targetName))]),a("span",[t._v("（"+t._s(t.currentRowData.targetCode)+"）")])]),a("br"),a("p",[t._v("资产清单")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),a("el-table-column",{attrs:{label:"移交项明细"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" 【"+t._s(t._f("formatAssetBizType")(e.row.assetBizType))+"】"+t._s(e.row.source)+" - "+t._s(e.row.assetName)+" ")])]}}])})],1),a("Pagination",{attrs:{currentPage:t.pageNumb,pageSize:t.pageSize,total:t.total,reloadTableData:t.handleQueryAssetTransferOrderItemList},on:{"update:currentPage":function(e){t.pageNumb=e},"update:current-page":function(e){t.pageNumb=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:total":function(e){t.total=e}}})],1)}),[],!1,null,"197c3d85",null),B=N.exports,z={name:"AssetTransfer",components:{SearchForm:c,SearchTable:p,Pagination:d.a,ApplyAssetTransferDialog:F,DetailDialog:B},data:function(){return{searchFormData:{subject:"",status:null},searchTableLoading:!0,searchTableData:[],pageNumb:1,pageSize:10,total:0,applyAssetTransferDialogVisible:!1,isAdmin:!1,detailDialogVisible:!1,currentRowData:{}}},methods:{getUserRole:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.user.getUserRole().catch((function(t){throw new Error("getUserRole, ".concat(t))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),queryAssetTransferOrderList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n,s,i,o;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.searchFormData,a=e.subject,n=e.status,s=this.pageNumb,i=this.pageSize,o={subject:a,status:n,pageNumb:s,pageSize:i},t.next=5,m.a.assetTransfer.queryAssetTransferOrderList(o).catch((function(t){throw new Error("queryAssetTransferOrderList, ".concat(t))}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleGetUserRole:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUserRole().catch((function(t){throw new Error("handleGetUserRole,".concat(t))}));case 2:e=t.sent,a=e.data,n=void 0===a?0:a,this.isAdmin=Boolean(n)||!1;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleQueryAssetTransferOrderList:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){var e,a,n,s,i,o,c,u=arguments;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:0,this.pageNumb=e||this.pageNumb,this.searchTableLoading=!0,t.next=5,this.queryAssetTransferOrderList().catch((function(t){throw new Error("handleQueryAssetTransferOrderList, ".concat(t))}));case 5:a=t.sent,n=a.data,s=n.list,i=void 0===s?[]:s,o=n.total,c=void 0===o?0:o,this.searchTableData=i||[],this.total=c||0,this.searchTableLoading=!1;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),onKeyupEnterSearchForm:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.handleQueryAssetTransferOrderList(1).catch((function(t){throw new Error("onKeyupEnterSearchForm, ".concat(t))}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),onClickDetailButton:function(){var t=Object(n.a)(Object(r.a)().mark((function t(e){var a,n,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.id,n=e.targetCode,s=e.targetName,this.currentRowData={id:a,targetCode:n,targetName:s},this.detailDialogVisible=!0;case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},created:function(){var t=Object(n.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.handleGetUserRole(),this.handleQueryAssetTransferOrderList()]).catch((function(t){throw new Error("created, ".concat(t))}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},P=z,q=(a("c29d"),Object(i.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"asset-transfer app-container"},[a("SearchForm",{attrs:{searchFormData:t.searchFormData},on:{"update:searchFormData":function(e){t.searchFormData=e},"update:search-form-data":function(e){t.searchFormData=e},keyupEnter:t.onKeyupEnterSearchForm}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.applyAssetTransferDialogVisible=!0}}},[t._v("申请移交资产")])],1),a("SearchTable",{attrs:{searchTableLoading:t.searchTableLoading,searchTableData:t.searchTableData},on:{"update:searchTableData":function(e){t.searchTableData=e},"update:search-table-data":function(e){t.searchTableData=e}},scopedSlots:t._u([{key:"actionColumn",fn:function(e){var r=e.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.onClickDetailButton(r)}}},[t._v("详情")])]}}])},[a("Pagination",{attrs:{currentPage:t.pageNumb,pageSize:t.pageSize,total:t.total,reloadTableData:t.handleQueryAssetTransferOrderList},on:{"update:currentPage":function(e){t.pageNumb=e},"update:current-page":function(e){t.pageNumb=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:total":function(e){t.total=e}}})],1),a("ApplyAssetTransferDialog",{attrs:{applyAssetTransferDialogVisible:t.applyAssetTransferDialogVisible,isAdmin:t.isAdmin},on:{"update:applyAssetTransferDialogVisible":function(e){t.applyAssetTransferDialogVisible=e},"update:apply-asset-transfer-dialog-visible":function(e){t.applyAssetTransferDialogVisible=e},close:t.onKeyupEnterSearchForm}}),a("DetailDialog",{attrs:{detailDialogVisible:t.detailDialogVisible,currentRowData:t.currentRowData},on:{"update:detailDialogVisible":function(e){t.detailDialogVisible=e},"update:detail-dialog-visible":function(e){t.detailDialogVisible=e}}})],1)}),[],!1,null,"1e3acc24",null));e.default=q.exports},ddf5:function(t,e,a){},df92:function(t,e,a){"use strict";a("a3f3")},e0b8:function(t,e,a){"use strict";var r=a("7726"),n=a("5ca1"),s=a("2aba"),i=a("dcbc"),o=a("67ab"),c=a("4a59"),u=a("f605"),l=a("d3f4"),f=a("79e5"),p=a("5cc5"),d=a("7f20"),h=a("5dbc");t.exports=function(t,e,a,b,m,g){var v=r[t],y=v,w=m?"set":"add",T=y&&y.prototype,O={},D=function(t){var e=T[t];s(T,t,"delete"==t||"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof y&&(g||T.forEach&&!f((function(){(new y).entries().next()})))){var S=new y,A=S[w](g?{}:-0,1)!=S,_=f((function(){S.has(1)})),j=p((function(t){new y(t)})),x=!g&&f((function(){for(var t=new y,e=5;e--;)t[w](e,e);return!t.has(-0)}));j||(y=e((function(e,a){u(e,y,t);var r=h(new v,e,y);return null!=a&&c(a,m,r[w],r),r})),y.prototype=T,T.constructor=y),(_||x)&&(D("delete"),D("has"),m&&D("get")),(x||A)&&D(w),g&&T.clear&&delete T.clear}else y=b.getConstructor(e,t,m,w),i(y.prototype,a),o.NEED=!0;return d(y,t),O[t]=y,n(n.G+n.W+n.F*(y!=v),O),g||b.setStrong(y,t,m),y}},e75f:function(t,e,a){"use strict";a("9f9e")},f400:function(t,e,a){"use strict";var r=a("c26b"),n=a("b39a9"),s="Map";t.exports=a("e0b8")(s,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(n(this,s),t);return e&&e.v},set:function(t,e){return r.def(n(this,s),0===t?0:t,e)}},r,!0)}}]);