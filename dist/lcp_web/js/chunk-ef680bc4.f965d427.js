(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ef680bc4"],{"00ce":function(e,t,a){},"0676":function(e,t,a){},"0b21":function(e,t,a){var n=a("5ca1");n(n.S,"Math",{sign:a("96fb")})},"0b3ce":function(e,t,a){},"0d51":function(e,t,a){},1199:function(e,t,a){"use strict";a("d560")},"12b3":function(e,t,a){},"12f8":function(e,t,a){},"131f":function(e,t,a){},"13d1":function(e,t,a){"use strict";a("e4c6")},"13fb":function(e,t,a){},1490:function(e,t,a){},"14b9":function(e,t,a){var n=a("5ca1");n(n.P,"String",{repeat:a("9744")})},"154a":function(e,t,a){},"155c":function(e,t,a){"use strict";a("d1d0")},"15ff":function(e,t,a){"use strict";a("80fc")},"160a":function(e,t,a){"use strict";a("83db")},"16d8":function(e,t,a){"use strict";var n=(a("7f7f"),a("c5f6"),a("2a53")),r={name:"MarkdownEditor",props:{value:{type:String,default:""},height:{type:Number,default:400},placeholder:{type:String,default:""}},data:function(){return{contentEditor:""}},mounted:function(){var e=this,t=this;this.contentEditor=new Vditor("vditor",{mode:"wysiwyg",height:this.height,placeholder:this.placeholder,toolbarConfig:{pin:!0},cdn:"/vditor",cache:{enable:!1},fullscreen:{index:1e4},after:function(){e.contentEditor.setValue(e.value)},upload:{accept:"image/*,.mp3, .wav, .rar",headers:{"Account-Type":Object(n.a)()?"erp":"passport"},url:"/lcp-rest/api/imageUpload",fieldName:"imageFile",format:function(e,a){var n=JSON.parse(a),r=n.code,i=n.message,o=e[0].name;if(2e4===r){var s=n.data,c={};return c[o]=s,JSON.stringify({msg:i,code:r,data:{errFiles:[],succMap:c}})}t.$message.error("图片上传失败！")}}})},methods:{getValue:function(){return this.contentEditor.getValue()},setValue:function(e){return this.contentEditor.setValue(e)}}},i=r,o=(a("155c"),a("2877")),s=Object(o.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"vditor"}})}),[],!1,null,"31aae780",null);t.a=s.exports},17757:function(e,t,a){"use strict";a("5fc7")},1799:function(e,t,a){"use strict";var n=(a("c5f6"),{name:"Pagination",props:{currentPage:{type:Number,required:!0},pageSize:{type:Number,required:!0},total:{type:Number,default:0},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},reloadTableData:{type:Function,default:function(){}}},methods:{onCurrentChange:function(e){this.$emit("update:currentPage",e),this.reloadTableData()},onSizeChange:function(e){this.$emit("update:pageSize",e),this.reloadTableData()}}}),r=n,i=(a("3fca"),a("2877")),o=Object(i.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{staticClass:"pagination",attrs:{background:!0,"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.onCurrentChange,"size-change":e.onSizeChange}})}),[],!1,null,"52f386a2",null);t.a=o.exports},"1a14":function(e,t,a){"use strict";a("1e9d")},"1ad6":function(e,t,a){"use strict";a("84f23")},"1b29":function(e,t,a){"use strict";a("329d")},"1cee":function(e,t,a){"use strict";a("87fc")},"1d09":function(e,t,a){"use strict";a("c0f9")},"1d55":function(e,t,a){"use strict";a("60f2")},"1e9d":function(e,t,a){},"1ea8":function(e,t,a){"use strict";a("cba4")},"1ec9a":function(e,t,a){},"1fb8":function(e,t,a){"use strict";a("fe27")},"20d6":function(e,t,a){"use strict";var n=a("5ca1"),r=a("0a49")(6),i="findIndex",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),n(n.P+n.F*o,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},2105:function(e,t,a){},"23b3":function(e,t,a){},"241b":function(e,t,a){"use strict";a("2847")},"24ec":function(e,t,a){e.exports=a.p+"img/noData.aadb7b7d.png"},2847:function(e,t,a){},"2ad9":function(e,t,a){"use strict";a("90a4")},"2ce9":function(e,t,a){},"2da1":function(e,t,a){},"2e4f":function(e,t,a){},"2f21":function(e,t,a){"use strict";var n=a("79e5");e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"329d":function(e,t,a){},"333d":function(e,t,a){"use strict";a("c5f6"),Math.easeInOutQuad=function(e,t,a,n){return(e/=n/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function r(e,t,a){var r=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,i=e-r,o=0;t=void 0===t?500:t;!function e(){o+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(o,r,i,t)),o<t?n(e):a&&"function"==typeof a&&a()}()}var i={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},o=i,s=(a("8d79"),a("2877")),c=Object(s.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)}),[],!1,null,"0a87263c",null);t.a=c.exports},"33c2":function(e,t,a){"use strict";a("1490")},"34e6":function(e,t,a){"use strict";a("131f")},3553:function(e,t,a){},"35a1":function(e,t,a){},"365c":function(e,t,a){"use strict";var n=a("b775"),r={postFindByAppKeyData:function(e){return Object(n.a)({url:"/bizmsg/findByAppKey",method:"post",data:e})},postSubscribeData:function(e){return Object(n.a)({url:"/bizmsg/subMessage",method:"post",data:e})},postUnsubscribeData:function(e){return Object(n.a)({url:"/bizmsg/unsubscribe",method:"post",data:e})}},i=r,o=a("3835"),s={postCreateBizUnitAccessData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizaccess/insertBizAccessPre",method:"post",data:t})},postBizUnitAccessData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizaccess/getBizAccessByUnitId",method:"get",params:{bizUnitId:t}})},postApiChangeSeqData:function(e){return Object(n.a)({url:"/bizapinterface/updateApiSeq",method:"post",data:e})},postApiHideData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizapinterface/hiddenApi",method:"get",params:t})},postApiHideCancelData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizapinterface/hiddenCancelApi",method:"get",params:t})},postUnitCheckPrincipalData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizunit/checkPrincipal",method:"get",params:{id:t}})},postSdkHideData:function(e){return Object(n.a)({url:"/sdk/hide",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postSdkHideCancelData:function(e){return Object(n.a)({url:"/sdk/hideCancel",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postMessageHideData:function(e){return Object(n.a)({url:"/bizmsg/hide",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postMessageHideCancelData:function(e){return Object(n.a)({url:"/bizmsg/hideCancel ",method:"post",data:e,headers:{"Content-Type":"application/json"}})},postBizUnitData:function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.a)({url:"/bizUnits",method:"post",data:[a,r]})}},c={getAppData:function(e){return Object(n.a)({url:"/app/getApp",method:"get",params:e})},postFindBizUnitVoListData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizunit/findBizUnitVoList",method:"get",params:{appKey:t}})},findBizUnitVoListByPage:function(e){return Object(n.a)({url:"/bizunit/findBizUnitVoListByPage",method:"get",params:e})},postSubscribeBizData:function(e){var t=Object(o.a)(e,1)[0];return Object(n.a)({url:"/bizunit/submitRecord",method:"post",data:t})},getCustomerGroupListData:function(e){return Object(n.a)({url:"/app/findAppGroupList",method:"get",params:e})},getCustomerGroupDetailData:function(e){return Object(n.a)({url:"/app/getAppGroupDetail",method:"get",params:e})},postCustomerGroupSaveData:function(e){return Object(n.a)({url:"/app/saveAppGroup",method:"post",data:e})},postCustomerGroupDeleteData:function(e){return Object(n.a)({url:"/app/deleteAppGroup",method:"post",params:e})},getCustomerGroupListNoPageData:function(e){return Object(n.a)({url:"/app/findAppGroupListWithNoPage",method:"get",params:e})},getCustomerGroupMessageCallbackInfoData:function(e){return Object(n.a)({url:"/app/getMessageCallbackInfoList",method:"get",params:e})},postCustomerGroupMessageCallbackInfoSaveData:function(e){return Object(n.a)({url:"/app/saveMessageCallbackInfo",method:"post",data:e})}},l={findSupplierUserByErp:function(e){return Object(n.a)({url:"/supplier/findSupplierUserByErp",method:"get",params:e})}},u={message:i,openBiz:s,appManager:c,apiManager:l};t.a=u},"36b3":function(e,t,a){"use strict";a("d48a")},"386d":function(e,t,a){"use strict";var n=a("cb7c"),r=a("83a1"),i=a("5f1b");a("214f")("search",1,(function(e,t,a,o){return[function(a){var n=e(this),r=null==a?void 0:a[t];return void 0!==r?r.call(a,n):new RegExp(a)[t](String(n))},function(e){var t=o(a,e,this);if(t.done)return t.value;var s=n(e),c=String(this),l=s.lastIndex;r(l,0)||(s.lastIndex=0);var u=i(s,c);return r(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},"38de":function(e,t,a){},"3ac1":function(e,t,a){"use strict";a("f019")},"3b3f":function(e,t,a){},"3bec":function(e,t,a){"use strict";a("f07c")},"3c94":function(e,t,a){"use strict";a.r(t);var n={name:"TagTip",props:{text:{type:String,default:""},closable:{type:Boolean,default:!0}},data:function(){return{tagList:["tag"]}},methods:{handleCloseTag:function(e){this.tagList.splice(this.tagList.indexOf(e),1)}}},r=n,i=(a("1d09"),a("2877")),o=Object(i.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tagTip"},e._l(e.tagList,(function(t,n){return a("el-tag",{key:n,staticClass:"tagTip__tag",attrs:{closable:e.closable,"disable-transitions":!0,type:"info"},on:{close:function(a){return e.handleCloseTag(t)}}},[a("p",{staticClass:"tagTip__content"},[a("i",{staticClass:"el-icon-info"}),e._v(" "),e._t("default",[e._v(e._s(e.text))])],2)])})),1)}),[],!1,null,"0c343daa",null);t.default=o.exports},"3d85":function(e,t,a){"use strict";var n=(a("c5f6"),{name:"Steps",props:{titleList:{type:Array,default:function(){return[]}},active:{type:Number,required:!0}}}),r=(a("e75f"),a("2877")),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-steps",{staticClass:"steps",attrs:{active:e.active,"align-center":!0,"finish-status":"success"}},e._l(e.titleList,(function(e,t){return a("el-step",{key:t,attrs:{title:e}})})),1)}),[],!1,null,"443b202a",null);t.a=i.exports},"3e1f":function(e,t,a){"use strict";a("8064")},"3fca":function(e,t,a){"use strict";a("848d")},"431d":function(e,t,a){"use strict";a("7c67")},4331:function(e,t,a){"use strict";a("2e4f")},"43dd":function(e,t,a){"use strict";a("821d")},"462d":function(e,t,a){"use strict";a("da91")},"46bc":function(e,t,a){"use strict";a("23b3")},4770:function(e,t,a){"use strict";a("617b")},4810:function(e,t,a){"use strict";a("a1bd")},4902:function(e,t,a){},"493e":function(e,t,a){"use strict";a("d672")},"4b3b":function(e,t,a){"use strict";a("0b3ce")},"4c18":function(e,t,a){"use strict";a("e91f")},"4e75":function(e,t,a){"use strict";a("154a")},5013:function(e,t,a){"use strict";a("e85c")},5378:function(e,t,a){},5407:function(e,t,a){"use strict";a("3553")},"55dd":function(e,t,a){"use strict";var n=a("5ca1"),r=a("d8e8"),i=a("4bf8"),o=a("79e5"),s=[].sort,c=[1,2,3];n(n.P+n.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),r(e))}})},"565f":function(e,t,a){"use strict";a("ddbc")},"5c40":function(e,t,a){"use strict";a("35a1")},"5cc4":function(e,t,a){"use strict";a("2ce9")},"5cc5f":function(e,t,a){},"5fc7":function(e,t,a){},"60f2":function(e,t,a){},"617b":function(e,t,a){},6378:function(e,t,a){},"637b":function(e,t,a){"use strict";a("6f0c")},"645f":function(e,t,a){"use strict";a("7aa3")},"66ad":function(e,t,a){},"67a3":function(e,t,a){"use strict";a("ddab")},"6a9e":function(e,t,a){},"6bb0":function(e,t,a){"use strict";a("0d51")},"6d1f":function(e,t,a){"use strict";a("38de")},"6dc0":function(e,t,a){"use strict";a("e830")},"6dd7":function(e,t,a){},"6ea4":function(e,t,a){"use strict";var n=(a("c5f6"),{name:"steps",props:{active:{required:!0,type:Number},title:{required:!1,type:String},tiptitle:{required:!0,type:Array}}}),r=(a("e7be"),a("2877")),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.title?a("h2",{staticClass:"com-tit-mini"},[e._v(e._s(e.title))]):e._e(),a("div",{staticClass:"my-step-bar"},[a("el-steps",{staticClass:"my-steps",attrs:{active:e.active,"finish-status":"success","align-center":""}},e._l(e.tiptitle,(function(e,t){return a("el-step",{key:t,attrs:{title:e}})})),1)],1)])}),[],!1,null,"16bbb482",null);t.a=i.exports},"6eb5":function(e,t,a){},"6f0c":function(e,t,a){},"71fd":function(e,t,a){"use strict";a("8327")},"753e":function(e,t,a){},"757f":function(e,t,a){"use strict";a("aebe")},"76fd":function(e,t,a){"use strict";a("13fb")},"76ff":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAMNklEQVR4nO2dzVEjPxPGpwr3nH2kakdThLAZLBksGbzOADKADJYMcAZ/MjAZ4Jvk3YPJwM6A9zAzYGM8n5JaUj9P1e8IZbfc0x9qabIMcqZ/xezXv2L2a1Pm95syv98oejKKVh+U+XsvDv5mo+ip+X/N/+f+nhB0Vtt5Nv9wgsYB+v7wbXPgQP+K2a/tPJtz2wcSpr8/6Kcp6dao/D9T5ls2Z+jPtvqsdPv3B/3kth+UmPRldnXgENw/dkuRpnIYfZldcdsXilC6mF0bRX8iiRAWIgz90cXsmtvuUMD6+4N+CnKKVmdBKgZlWValT5syvxfuFGedZVPm90jDBMqoi99J1RSuUfl/Rl385l43yKG282xuSro1iBZT2G5K+h/axwnpM42iXQA/sESgHdKvyLWdZ/O6vgjgB5UqlaMgokSkT8dAxICjQEeCY3BTOQr37wD6oo26uDEovkNii43HAKQvsyvW4UDQjqIVCnkmIZ2KBaRdXlVP077yLzwY6CivGGFxLLRt4wfRxIHqkXNEjWSgV9QmlqQVLVBrpAjttKIF9+8ram0UPfEvJHDJRtET9+8sOiGlkgZSrt7SxewaKZVEaIfNxQ5V9Qb3QgFOUJecUX3clX2BWFC01opeDjGK1uyfi88ef7h/j0FJUjGuy/xNK1pqRYs+ebe+zK60ooVWtNRl/sb9+X2B4j37OOUnohjXipYbdXEz1WYbdXGjFS25v48f6FXsCL0U59CKli46NHVkEeAoAp1EhHMoWvvoytR3eCVerwhyEgnOoRUtfS7odp7N048mApxEiHMsuOybfps8YSeBc/gRnCRSwTn8SYKTcNvYqtLf56A7bht/lSnpjt8u7khmn8QU9MhtTKeo/JnbxudkVP7Mbh+XFPTIbeNJSj3U6zJ/Czkfruu+PbednK5BQKntIFVTufwGdImNnXHXqq9EYreVUyeJbQq4Ps+R9Mi6VvTCbee+0opeuO3lFtpFdZ4k9Y6VKeN6akmI5tF0ttLvWOXvRtGa285Dlf44SgSdrdSL8k/Ca+t2KfW2b0OwRbuEuqMh5M7VOVXrw2879wRaj0ioO0yZR5leNZKQZtVOElY9osv8gd8onoh4cyr5TdsDdJk/cNs7y7Lmrlx+g3gzfKg5bg/JqRErgrgLWExq1ThIRO3dr5LR7j2EOdUSlVrVsBrcgrjt5xu2VEtS1woOEjNMXS2pb3bybmjL4rYfC4pWXo0sYQAODpIWXmtHI/iFmd6M7Ejc9mNk68XAEgtzOEgaOC/Y6wM44grzQ4LorY+UtD2rU2jndExIevQwJfZBYsdZFEH0gIOkgaMoguhRO0goMz4jhDV0tIZyRqUZjOtRcJAGy1EEhj0g4Gt+upT8NUADsPagQ+3xxbARXdbwVelf3jAES1FEylHNIYa18FtlER50x1g5umAE75qfY/pPlUfcdguQabvrkmeu2ohxsxCbhN8z6fI/FHXfE+NeCPZAzjC26YLW7nlibPWiE9mynmPOi8CgLUR4cYOkCxuGMuqBZ1CcnzdohK1etHhbGVaso6DrIr5WL1q87QxqvCAcd+Pwt2xd1WYvv82CZkjabJBedRJTJwsdrF70S7Ow99GPmC6QwzREP3qlWUivehJRJwtranFNDdKrXsTUyUIHqzftaRY2B4cQTycLHaz+tG4aIlcdRgzvCcFDbygtL0fC7NUwYuhkoYM1kLbZLPYPFxkxzGRhZGgoZ1Jn7J6PIILjt8gKhvNtuxf1xyj8XGc5QQZdyRF8U4fgSTOOkAt1jJiMQytanhjT4EkzzpgBF+oo0EdznBngSTOekAt1FOjjOcoM8KSZQMCFOtLm8RxlBnjSTCLYQt0gbZ7AQaGuFS35P1C8sLwDr0PYQZ+4poeFOobZpjHp6hhHwrGFaRwNo3J/mOgJcPQdI+7T+TRmAB8mZkIcfTclvXLbJXayLEMHy6oxAxK3PVJAF7NrOIhNYwYirKnFNUWL15IxA9owxJpaXFMY05IxA6pD0JW0tKZl/oA9EItwO0YjbjskQ0GPeNpYJIQ6BPWHxfVU9AIHsWnQAOoQpMwW1xMO4sCg3A6C9bS7ntwfIjU4D1Dh2IJtaAcHsQznXBbmr+wDB7EN41wWOpL2gYPYh+18iMH5D+vAQRzA8RZcXNvkBjiIE1qur3QkXNvkBjiIE+iVwUEw3u4AOIgjfB7DxfFad8BBHOHzDVRIr9wBB3GFx+uAjKIV+/dNEtpjNMEhPtIspFcO1w+zWK5x381CeuUOOIhz3Hez0L1yR+MgGE9waWSHaRbSK8cU9IjzAz6M7Ei4+8otOJPuBXdvw8Xba91SOQiOaLo3tIM9Ea1owf29Ugf3YvlC0cq2g2Dvwz0fdwxwfxAJ2LzQAQ81P3w+jQL4MMljMYogevjh84mEvRAv2IgiiB6e1urwAg7shXjCQhRB9PDD8Qt00Or1Z/gJUQTRwyeHr2CD4X0y+sy6wZlzbxw9yHCfkmfjj7iBEVHeLyf3m+kyf+P+UJIYkmohwntemzJ/Ow3feKe2Z2jX5/aT6rYSjJT45KhA/3AQnCtgoN1J4Bxs63J6jgf3KrEtxs6UdHuY81Y1Id3COXg4+9Di/mCyoZ1RtKr2OeAYjOuwP5vvog4B4mm7bAN1CAAt9wjgCCeQTucRaeyHAKl8u/9xkmbhnDOQSp/7A7BrC6TS+7UVSLOANHqlV0izgFiGXM+EXXUgjcFvBUOaBaQwKL06cBCcP3CNorUp6FGX+YMuZtdHlPmDKejRKFqzf87EGXM+B5uGrhZD0YtWtDg5kNOi7Tyba0ULXK7haE3G3p+M2SyLqPzZxkXW+jK7wrrYXZfRi7FRFzfsXyBydJm/2bw0rlGdhqFOnMhGXdxMWwgswnhU/jwklRqq7TybI5qMZ1Rx/lWY8B2Jw9cefBXuNRuHlUvF69Nte+4vExOjuiIThc3dodDeWnRHy7c/3x749yREkgHrZPMhVrV8EUU6UbR2WXN0qapJsG/SjcXo0QhRpJvB4woOhDGhbpykwKhFOvBYlHcJ9UgbDqJHI0QRBqOPEB5m53HaQIHhzxBQ9GiEgv07PDzIEEVOCaH2+CrUIt/RcmOJTWF3/RMru7GOhHViWiecWz8wPOO+R5eQZh2sk4N5uC7jY/S6dPMOdFvCu9Q/1ujFv/GxeVgZ3/eTaYAQ6fN3U9LexjGDcQuAgv2920q84rYPNxxzcccLIHy0gdX4PcRtH1YUrbntL76dyG3/LnHbh5Ng2u+SUy1u27dJ8r0C7KnVV0lNtdgKwB6SWqSzdK26JLWrhS5WaDB2rbokse8eXCg/kMTUN+R9qSzLBO7eTrk2xrFMSa/s9vHrHEtum/eSrHqEdiGNujcSV6CH0NLtK2n1SIhhXVa6G3DdcU6iCkRFK257f5Up8y27XTwRcqOkVZKeYiEtkii7Bxi9B0nO+Wh65bZ1IyMlegR4knOU5HS2PJ1Ya7O1kNZuNB2rvpLS2eKc/xFz2XhMHau+knOpGe04OirV0Cjt+L+/e+cIsa1uRYKc5NXnItZ7Hlv+7w3nmCxBTrLzkW5V7XREjqQkyUlctiHFtHMlOUcjOU6SvxtFK5t1iS5m10bRiv17wTncSpSTlPn7RtHTlLRLlGNId45Dydkn+WC7KfP7f8XsV5dtjLr4vVH0ZCQU4Qckt88xVXJ23L+DdkbR6gNhznBCKjvktiWm6ARniX62yrXqtqWYUXnQQPuQBj6Dlr7MriQV7+JRtI7uPEcIEli8iwPF+ERVdQlSrvSgPeoNS0LKlRZa0QtSKgeSctYhZUK+JikJ/f1BPxFNIkTROpi7ciWoiiaoTcKH9ogaTNKX2RXedBUuqDUCkS5m13hhZTjoMn/Dpl+AQtrFDdKp4LWdZ3M4Co9jYDQ9IsFR4BhQD+nL7AqOAseAOrSdZ3OtaIFifjy6zN+0ogUcI3Ft1MWNUfkz9w8uGlT+vFEXN9zrBnlWk34hqpyiy/xNl/kD9jGgLMvqEZaCHiU7iy7zN1PQI0ZCoFZJchY4BTRJ9duy7qqaJYVOGO3r73KH9AmyrvqS6Duj8ucYIkzdeVqaku4QJSDv2s6zeX3RxJ1WtOQcntSKXhpn0MXsGu1YKGjpYnZdD1I+6DJ/MAU91j/il8qR+qRstD/6m6o2etBl/tD8f+7vmbL+D5iNOf2tv4j8AAAAAElFTkSuQmCC"},"7aa3":function(e,t,a){},"7bb8":function(e,t,a){"use strict";a.r(t);var n=(a("7f7f"),a("c7eb")),r=(a("96cf"),a("1da1")),i=(a("ac6a"),a("5df3"),a("f400"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"overview",staticClass:"over-view"},[a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"bizUnitSummary",staticClass:"overview-apiSummaryForm",staticStyle:{"margin-bottom":"24px"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading",model:e.bizUnitSummary,rules:e.rules,"label-width":"118px",disabled:!e.editor.status,size:"small"}},[a("el-row",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"sub-title"},[e._v("基本信息")]),a("el-form-item",{attrs:{label:"方案类型",prop:"solutionType"}},[a("el-col",{attrs:{span:24}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:e.changeCheckType},model:{value:e.bizUnitSummary.solutionType,callback:function(t){e.$set(e.bizUnitSummary,"solutionType",t)},expression:"bizUnitSummary.solutionType"}},e._l(e.typeoptions,(function(e){return a("el-option",{key:e.dictName,attrs:{label:e.dictValue,value:e.dictName}})})),1)],1)],1),a("el-form-item",{attrs:{label:"所属分类",prop:"businessTypeCode"}},[a("el-col",{attrs:{span:24}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.bizUnitSummary.businessTypeCode,callback:function(t){e.$set(e.bizUnitSummary,"businessTypeCode",t)},expression:"bizUnitSummary.businessTypeCode"}},e._l(e.businesstypesoptions,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("el-form-item",{attrs:{label:"名称",prop:"name",placeholder:"2-30个字符"}},[a("el-col",{attrs:{span:24}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.bizUnitSummary.name,callback:function(t){e.$set(e.bizUnitSummary,"name",t)},expression:"bizUnitSummary.name"}})],1)],1),a("el-form-item",{attrs:{label:"方案编码",prop:"code",placeholder:"方案编码"}},[a("el-col",{attrs:{span:24}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:1!==e.publishStatus},model:{value:e.bizUnitSummary.code,callback:function(t){e.$set(e.bizUnitSummary,"code",t)},expression:"bizUnitSummary.code"}})],1)],1),a("el-form-item",{attrs:{label:"产品负责人",prop:"productPrincipal"}},[a("el-col",{attrs:{span:24}},[e.productPrincipalDisabled||!e.editor.status?a("el-tooltip",{attrs:{effect:"dark",content:"修改对接方案负责人请前往【个人中心-资产交接】操作“个人资产交接”。如负责人已离职，请联系管理员进行操作“个人资产交接”。",placement:"top"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入产品负责人京东账号","remote-method":e.searchProdPin,loading:e.addProdPinData.loading,disabled:e.productPrincipalDisabled},on:{change:e.prodPinSelectChange},model:{value:e.addProdPinData.value,callback:function(t){e.$set(e.addProdPinData,"value",t)},expression:"addProdPinData.value"}},e._l(e.addProdPinData.account,(function(t){return a("el-option",{key:t.userName,staticClass:"select-drop",attrs:{label:t.userName,value:t.userName}},[a("div",{staticClass:"j-v-center"},[a("div",{staticClass:"avatar__wrapper",staticStyle:{display:"inline-flex",height:"34px"}},[a("div",{style:{display:"inlineFlex",margin:"2px",width:"30px",height:"30px",borderRadius:"50%",lineHeight:"31px",fontWeight:"bold",alignItems:"center",justifyContent:"center",textASSSSlign:"center",background:"url("+t.headImg+") 0% 0% / 30px 30px no-repeat scroll content-box border-box transparent"}})]),a("div",{staticClass:"inputUsers__input__autocomplete--info"},[a("span",[e._v(e._s(t.userName)+" ("+e._s(t.realName)+")")]),a("span",[e._v(e._s(t.organizationFullName))])])])])})),1)],1):a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入产品负责人京东账号","remote-method":e.searchProdPin,loading:e.addProdPinData.loading,disabled:e.productPrincipalDisabled},on:{change:e.prodPinSelectChange},model:{value:e.addProdPinData.value,callback:function(t){e.$set(e.addProdPinData,"value",t)},expression:"addProdPinData.value"}},e._l(e.addProdPinData.account,(function(t){return a("el-option",{key:t.userName,staticClass:"select-drop",attrs:{label:t.userName,value:t.userName}},[a("div",{staticClass:"j-v-center"},[a("div",{staticClass:"avatar__wrapper",staticStyle:{display:"inline-flex",height:"34px"}},[a("div",{style:{display:"inlineFlex",margin:"2px",width:"30px",height:"30px",borderRadius:"50%",lineHeight:"31px",fontWeight:"bold",alignItems:"center",justifyContent:"center",textASSSSlign:"center",background:"url("+t.headImg+") 0% 0% / 30px 30px no-repeat scroll content-box border-box transparent"}})]),a("div",{staticClass:"inputUsers__input__autocomplete--info"},[a("span",[e._v(e._s(t.userName)+" ("+e._s(t.realName)+")")]),a("span",[e._v(e._s(t.organizationFullName))])])])])})),1)],1)],1),a("el-form-item",{attrs:{label:"研发负责人",prop:"developPrincipal"}},[a("el-col",{attrs:{span:24}},[e.developPrincipalDisabled||!e.editor.status?a("el-tooltip",{attrs:{effect:"dark",content:"修改对接方案负责人请前往【个人中心-资产交接】操作“个人资产交接”。如负责人已离职，请联系管理员进行操作“个人资产交接”。",placement:"top"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入研发负责人京东账号","remote-method":e.searchDevPin,loading:e.addDevPinData.loading,disabled:e.developPrincipalDisabled},on:{change:e.devPinSelectChange},model:{value:e.addDevPinData.value,callback:function(t){e.$set(e.addDevPinData,"value",t)},expression:"addDevPinData.value"}},e._l(e.addDevPinData.account,(function(t){return a("el-option",{key:t.userName,staticClass:"select-drop",attrs:{label:t.userName,value:t.userName}},[a("div",{staticClass:"j-v-center"},[a("div",{staticClass:"avatar__wrapper",staticStyle:{display:"inline-flex",height:"34px"}},[a("div",{style:{display:"inlineFlex",margin:"2px",width:"30px",height:"30px",borderRadius:"50%",lineHeight:"31px",fontWeight:"bold",alignItems:"center",justifyContent:"center",textASSSSlign:"center",background:"url("+t.headImg+") 0% 0% / 30px 30px no-repeat scroll content-box border-box transparent"}})]),a("div",{staticClass:"inputUsers__input__autocomplete--info"},[a("span",[e._v(e._s(t.userName)+" ("+e._s(t.realName)+")")]),a("span",[e._v(e._s(t.organizationFullName))])])])])})),1)],1):a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入研发负责人京东账号","remote-method":e.searchDevPin,loading:e.addDevPinData.loading,disabled:e.developPrincipalDisabled},on:{change:e.devPinSelectChange},model:{value:e.addDevPinData.value,callback:function(t){e.$set(e.addDevPinData,"value",t)},expression:"addDevPinData.value"}},e._l(e.addDevPinData.account,(function(t){return a("el-option",{key:t.userName,staticClass:"select-drop",attrs:{label:t.userName,value:t.userName}},[a("div",{staticClass:"j-v-center"},[a("div",{staticClass:"avatar__wrapper",staticStyle:{display:"inline-flex",height:"34px"}},[a("div",{style:{display:"inlineFlex",margin:"2px",width:"30px",height:"30px",borderRadius:"50%",lineHeight:"31px",fontWeight:"bold",alignItems:"center",justifyContent:"center",textASSSSlign:"center",background:"url("+t.headImg+") 0% 0% / 30px 30px no-repeat scroll content-box border-box transparent"}})]),a("div",{staticClass:"inputUsers__input__autocomplete--info"},[a("span",[e._v(e._s(t.userName)+" ("+e._s(t.realName)+")")]),a("span",[e._v(e._s(t.organizationFullName))])])])])})),1)],1)],1),a("el-form-item",{attrs:{label:"简介",prop:"remark"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"描述对接方案的主要服务内容，10-200个字符."},model:{value:e.bizUnitSummary.remark,callback:function(t){e.$set(e.bizUnitSummary,"remark",t)},expression:"bizUnitSummary.remark"}})],1),a("el-form-item",{attrs:{label:"可见范围",prop:"publishRange"}},[a("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.changePublishRange},model:{value:e.bizUnitSummary.publishRange,callback:function(t){e.$set(e.bizUnitSummary,"publishRange",t)},expression:"bizUnitSummary.publishRange"}},[a("el-radio",{attrs:{label:2}},[e._v("所有人可见")]),a("el-radio",{attrs:{label:1}},[e._v("指定开发团队可见")])],1)],1),1==e.bizUnitSummary.publishRange?a("el-form-item",[a("el-select",{staticClass:"remote-style",staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",remote:"",placeholder:"请输入公司名称或社会信用代码，指定可见的开发团队","value-key":"supplierId","remote-method":e.remoteMethod},on:{"remove-tag":e.removeTag},model:{value:e.bizUnitSummary.visibleSupplierIsvList,callback:function(t){e.$set(e.bizUnitSummary,"visibleSupplierIsvList",t)},expression:"bizUnitSummary.visibleSupplierIsvList"}},e._l(e.options,(function(t,n){return a("el-option",{key:n,attrs:{label:t.supplierName+" "+t.companyCode,value:t}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.supplierName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.companyCode))])])})),1)],1):e._e()],1),a("el-col",[a("el-form-item",{attrs:{label:"对接环境"}},[a("el-checkbox-group",{on:{change:e.onChangeEnvCheckboxGroup},model:{value:e.formChooseEnv.data.environmentList,callback:function(t){e.$set(e.formChooseEnv.data,"environmentList",t)},expression:"formChooseEnv.data.environmentList"}},[a("el-checkbox",{attrs:{label:e._f("formatFormCurrentEnvLabel")(e.env),disabled:!0}},[e._v(e._s(e._f("formatFormCurrentEnvText")(e.env)))]),"uat"===e.env||"prod"===e.env?[0===e.oldbizUnitSummary.hasUat?[a("el-popover",{attrs:{placement:"top",width:"160",disabled:!e.editor.status},model:{value:e.hasUatVisible,callback:function(t){e.hasUatVisible=t},expression:"hasUatVisible"}},[a("p",[e._v("预发环境开启后将无法关闭，是否仍要开启？")]),a("div",{staticStyle:{"text-align":"right",margin:"10px 0 0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.hasUatVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onClickPopoverTurnOnButton}},[e._v("开启")])],1),a("el-checkbox",{staticStyle:{"margin-left":"30px"},attrs:{slot:"reference",label:"uat"},slot:"reference"},[e._v("预发环境（UAT）")])],1)]:1===e.oldbizUnitSummary.hasUat?[a("el-checkbox",{attrs:{label:"uat",disabled:!0}},[a("el-tooltip",{attrs:{effect:"dark",content:"预发环境开启后将无法再关闭。",placement:"right",disabled:!e.editor.status}},[a("span",[e._v("预发环境（UAT）")])])],1)]:e._e()]:e._e()],2)],1)],1),a("el-col",[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 订阅方案审批 "),a("el-tooltip",{attrs:{content:"开启后，开发者订阅对接方案需要产品负责人和研发负责人在【OA-流程中心】审批，审批通过后方可订阅成功。",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-switch",{attrs:{size:"big","active-inner-text":"开","inactive-inner-text":"关","active-value":1,"inactive-value":0},model:{value:e.bizUnitSummary.needApprove,callback:function(t){e.$set(e.bizUnitSummary,"needApprove",t)},expression:"bizUnitSummary.needApprove"}})],1)],1)],1)],1)],1),a("div",{ref:"editfooter",staticClass:"edit-footer"},[a("div",{staticClass:"edit-button"},[e.editor.status?a("el-button",{on:{click:function(t){return e.resetForm("bizUnitSummary")}}},[e._v("取消 ")]):e._e(),e.editor.status?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("bizUnitSummary")}}},[e._v("保存 ")]):e._e(),e.editor.status?e._e():a("el-button",{attrs:{type:"primary",disabled:e.editor.status},on:{click:function(t){return e.editorForm()}}},[e._v("编辑 ")])],1)])])}),o=(a("20d6"),a("4f7f"),a("1c4c"),a("28a5"),a("6762"),a("2fdb"),a("ade3")),s=(a("c5f6"),a("c24f")),c=a("b775"),l=a("7a3a"),u=a("96e0"),p={name:"overView",props:{publishStatus:Number},data:function(){var e,t=this,a=function(){var e=Object(r.a)(Object(n.a)().mark((function e(a,r,i){var o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r===t.oldbizUnitSummary.code){e.next=5;break}return e.next=3,t.handleIsCodeExist(r).catch((function(e){throw i(new Error("对接方案编码校验异常")),new Error("validateCode, ".concat(e))}));case 3:o=e.sent,i(o?void 0:new Error("对接方案编码已存在"));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return e={env:window.env.baseEnv,editor:{status:!1},hasUatVisible:!1,loading:!0,bizUnitSummary:{id:"",code:"",name:"",solutionType:"",businessTypeCode:"",publishRange:2,productPrincipal:"",developPrincipal:"",steps:[],remark:"",status:1,visibleSupplierIsvList:[],needApprove:1},oldbizUnitSummary:{id:"",code:"",name:"",solutionType:"",businessTypeCode:"",publishRange:2,productPrincipal:"",developPrincipal:"",steps:[{title:""},{title:""},{title:""},{title:""}],remark:"",status:1,visibleSupplierIsvList:[],needApprove:1},rules:{businessTypeCode:[{required:!0,message:"请输入",trigger:"blur"}],solutionType:[{required:!0,message:"请输入",trigger:"blur"}],name:[{required:!0,message:"请输入",trigger:"blur"}],code:[{required:!0,message:"请输入",trigger:"blur"},{min:2,max:30,message:"请输入2-30个字符"},{pattern:/^[A-Za-z_]*$/,message:"请输入英文字母、_"},{validator:a}],publishRange:[{required:!0,message:"请输入",trigger:"blur"}],productPrincipal:[{required:!0,message:"请输入",trigger:"blur"}],developPrincipal:[{required:!0,message:"请输入",trigger:"blur"}],remark:[{required:!0,message:"请输入",trigger:"blur"}]},accessControlRules:{appType:[{required:!0,message:"请选择应用类型",trigger:"blur"}]},showRuleError:{step0:!1,step1:!1,step2:!1,step3:!1,step4:!1,step5:!1},businessTypes:[],addProdPinData:{account:[],loading:!1,value:"",realName:"",mobile:"",email:"",realNameEdit:!0,mobileEdit:!0,emailEdit:!0},addDevPinData:{account:[],loading:!1,value:"",realName:"",mobile:"",email:"",realNameEdit:!0,mobileEdit:!0,emailEdit:!0},unitId:0,accessId:"",accessControl:{appType:2},options:[],list:[]},Object(o.a)(e,"loading",!1),Object(o.a)(e,"supplierArray",[]),Object(o.a)(e,"tempVisibleSupplierIsvList",[]),Object(o.a)(e,"formChooseEnv",{data:{environmentList:[]}}),Object(o.a)(e,"typeoptions",[]),Object(o.a)(e,"businesstypesoptions",[]),Object(o.a)(e,"productPrincipalDisabled",!1),Object(o.a)(e,"developPrincipalDisabled",!1),e},filters:{formatFormCurrentEnvLabel:function(e){return{test:"test",uat:"prod",prod:"prod"}[e]||""},formatFormCurrentEnvText:function(e){return{test:"测试环境",uat:"生产环境",prod:"生产环境"}[e]||"-"}},methods:{onChangeEnvCheckboxGroup:function(e){e.includes("uat")?(this.formChooseEnv.data.environmentList=["prod"],this.hasUatVisible=!0):this.hasUatVisible=!1},onClickPopoverTurnOnButton:function(){this.formChooseEnv.data.environmentList=["prod","uat"],this.hasUatVisible=!1},returnStepsIndex:function(e){return 0==e?"一":1==e?"二":2==e?"三":3==e?"四":4==e?"五":5==e?"六":6==e?"七":void 0},flowLableClass:function(e){return e>3?{"flow-lable":!0,"is-required-flow":!1}:{"flow-lable":!0,"is-required-flow":!0}},changeRuleErrorVisible:function(e,t){e.length<4||e.length>40?this.showRuleError["step"+t]=!0:this.showRuleError["step"+t]=!1},fetchBizUnitSummary:function(){var e=this,t=this;t.loading=!0,Object(c.a)({url:"/bizunit/getOverview",method:"get",params:{id:t.oldbizUnitSummary.id}}).then((function(a){a.data?(e.fetchBusinessTypes(a.data.solutionType+""),t.oldbizUnitSummary=a.data,e.oldbizUnitSummary.solutionType=t.oldbizUnitSummary.solutionType+"",e.bizUnitSummary.VisibleSupplierIsvList=a.data.visibleSupplierIsvList,e.options,e.options&&0===e.options.length&&(e.options=e.bizUnitSummary.VisibleSupplierIsvList),e.tempVisibleSupplierIsvList=a.data.visibleSupplierIsvList,t.bizUnitSummary=t.copyDeep(t.oldbizUnitSummary),t.bizUnitSummary.productPrincipal&&(e.productPrincipalDisabled=!0,t.addProdPinData.value=t.bizUnitSummary.productPrincipal.split(":")[0]),t.bizUnitSummary.developPrincipal&&(e.developPrincipalDisabled=!0,t.addDevPinData.value=t.bizUnitSummary.developPrincipal.split(":")[0]),e.loading=!1,e.formChooseEnv.data.environmentList=[e.env],"uat"!=e.env&&"prod"!=e.env||(1==t.oldbizUnitSummary.hasUat?e.formChooseEnv.data.environmentList=["prod","uat"]:0==t.oldbizUnitSummary.hasUat&&(e.formChooseEnv.data.environmentList=["prod"]))):l.Message.error("无权限查看数据")})).catch((function(t){e.loading=!1}))},searchProdPin:function(e){var t=this;""!==e?(this.addProdPinData.loading=!0,setTimeout((function(){Object(s.c)(e).then((function(e){t.addProdPinData.loading=!1,t.addProdPinData.account=e.data})).catch((function(e){}))}),200)):(this.addProdPinData.account=[],this.addDevPinData.account=[])},searchDevPin:function(e){var t=this;""!==e?(this.addDevPinData.loading=!0,setTimeout((function(){Object(s.c)(e).then((function(e){t.addDevPinData.loading=!1,t.addDevPinData.account=e.data})).catch((function(e){}))}),200)):(this.addProdPinData.account=[],this.addDevPinData.account=[])},prodPinSelectChange:function(e){var t=this;this.addProdPinData.realName="",this.addProdPinData.mobile="",this.addProdPinData.email="",this.addProdPinData.account.forEach((function(a,n){e===a.userName&&(a.realName?(t.addProdPinData.realNameEdit=!0,t.addProdPinData.realName=a.realName):t.addProdPinData.realNameEdit=!1,a.mobile?(t.addProdPinData.mobileEdit=!0,t.addProdPinData.mobile=a.mobile):t.addProdPinData.mobileEdit=!1,a.email?(t.addProdPinData.emailEdit=!0,t.addProdPinData.email=a.email):t.addProdPinData.emailEdit=!1,t.bizUnitSummary.productPrincipal=a.userName+":"+a.realName)}))},devPinSelectChange:function(e){var t=this;this.addDevPinData.realName="",this.addDevPinData.mobile="",this.addDevPinData.email="",this.addDevPinData.account.forEach((function(a,n){e===a.userName&&(a.realName?(t.addDevPinData.realNameEdit=!0,t.addDevPinData.realName=a.realName):t.addDevPinData.realNameEdit=!1,a.mobile?(t.addDevPinData.mobileEdit=!0,t.addDevPinData.mobile=a.mobile):t.addDevPinData.mobileEdit=!1,a.email?(t.addDevPinData.emailEdit=!0,t.addDevPinData.email=a.email):t.addDevPinData.emailEdit=!1,t.bizUnitSummary.developPrincipal=a.userName+":"+a.realName)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;1===t.publishStatus?t.updateOverview():t.$confirm('点击【确定】后，<span style="color: red;">方案类型、所属分类、名称、简介</span>和<span style="color: red;">可见范围</span>，将立即更新至前台，其余信息将随方案发布而更新。',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){t.updateOverview()})).catch((function(){t.loading=!1}))}))},updateOverview:function(){var e=this;this.bizUnitSummary.hasUat=0,"uat"!==this.env&&"prod"!==this.env||this.formChooseEnv.data.environmentList.includes("uat")&&(this.bizUnitSummary.hasUat=1),Object(c.a)({url:"/bizunit/updateOverview",method:"post",data:this.bizUnitSummary}).then((function(t){t.data?(l.Message.success("操作成功"),e.$emit("overviewEditEvent",e.bizUnitSummary.hasUat),e.fetchBizUnitSummary(),e.editor.status=!1):l.Message.error("操作失败")})).catch((function(t){l.Message.error("操作失败"),e.loading=!1}))},resetForm:function(e){this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.bizUnitSummary.id=this.oldbizUnitSummary.id,this.bizUnitSummary.name=this.oldbizUnitSummary.name,this.bizUnitSummary.code=this.oldbizUnitSummary.code,this.bizUnitSummary.solutionType=this.oldbizUnitSummary.solutionType,this.bizUnitSummary.businessTypeCode=this.oldbizUnitSummary.businessTypeCode,this.bizUnitSummary.publishRange=this.oldbizUnitSummary.publishRange,this.bizUnitSummary.productPrincipal=this.oldbizUnitSummary.productPrincipal,this.bizUnitSummary.developPrincipal=this.oldbizUnitSummary.developPrincipal,this.bizUnitSummary.steps=this.copyDeep(this.oldbizUnitSummary.steps),this.bizUnitSummary.remark=this.oldbizUnitSummary.remark,this.bizUnitSummary.visibleSupplierIsvList=this.oldbizUnitSummary.visibleSupplierIsvList,this.bizUnitSummary.needApprove=this.oldbizUnitSummary.needApprove,this.editor.status=!1,this.showRuleError={step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1}},editorForm:function(){3===this.oldbizUnitSummary.status?l.Message.error("信息正在审核中，不能编辑"):this.editor.status=!0},copyDeep:function(e){return JSON.parse(JSON.stringify(e))},fetchBizUnitAccess:function(){var e=this,t=this;Object(c.a)({url:"/bizaccess/getBizAccessByUnitId",method:"get",params:{bizUnitId:this.unitId}}).then((function(a){if(a.data){var n=a.data,r=JSON.parse(n.access);t.accessId=n.id,"oauth2"===r.type&&(t.accessControl.appType=2),e.accessControl.appType=a.data.appType}})).catch((function(t){e.loading=!1}))},remoteMethod:function(e){var t=this;""!==e?setTimeout((function(){t.findVisibleSuppliers(e)}),200):this.options=[]},changePublishRange:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.bizUnitSummary.publishRange){e.next=3;break}return e.next=3,this.queryOrder();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryOrder:function(){var e=this,t={pageSize:50,pageNumb:1,unitId:this.unitId,status:1};Object(c.a)({url:"/bizunit/findBizOrderList",method:"get",params:t}).then((function(t){if(t.data&&t.data.length>0){e.supplierArray=[];for(var a=0;a<t.data.length;a++)e.supplierArray.push(t.data[a].supplierName);e.supplierArray=Array.from(new Set(e.supplierArray)),e.$alert(e.supplierArray.join(",")+"开发商已订阅对接方案，对接方案私有后，如不被指定为可见开发商，将无法看到对接方案相关文档","提示",{confirmButtonText:"确定"})}})).catch((function(e){}))},findVisibleSuppliers:function(e){var t=this;Object(c.a)({url:"/bizvisiblesupplier/getBizVisibleSupplierPreList",method:"get",params:{unitId:this.unitId,name:e}}).then((function(e){e.data&&(t.options=e.data)})).catch((function(e){}))},checkSupplierOrder:function(e,t){var a=this,n={unitId:Number(this.unitId),supplierId:Number(t.supplierId)};Object(c.a)({url:"/bizunit/checkSupplierOrder",method:"post",data:n}).then((function(n){n.data&&(a.bizUnitSummary.visibleSupplierIsvList.splice(e,0,t),a.$alert(t.supplierName+"已订阅该对接方案，不允许删除","提示",{confirmButtonText:"确定"}))})).catch((function(n){a.bizUnitSummary.visibleSupplierIsvList.splice(e,0,t)}))},removeTag:function(e){var t=this.tempVisibleSupplierIsvList.findIndex((function(t){return t.supplierId==e.supplierId}));-1!==t&&this.checkSupplierOrder(t,e)},fetchSolutionType:function(){var e=this;Object(c.a)({url:"/lcpDict/getDicts",method:"get",params:{type:"solutionType"}}).then((function(t){2e4===t.code&&(e.typeoptions=t.data)})).catch((function(e){callback()}))},fetchBusinessTypes:function(e){var t=this;Object(c.a)({url:"/businesstype/findBySolutionType",method:"get",params:{solutionType:e}}).then((function(e){2e4===e.code&&(t.businesstypesoptions=e.data)})).catch((function(e){callback()}))},changeCheckType:function(e){var t=this;this.bizUnitSummary.businessTypeCode="",Object(c.a)({url:"/businesstype/findBySolutionType",method:"get",params:{solutionType:e}}).then((function(e){2e4===e.code&&(t.businesstypesoptions=e.data)})).catch((function(e){callback()}))},isCodeExist:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={code:t},e.next=3,u.a.bizunit.isCodeExist(a).catch((function(e){throw new Error("isCodeExist, ".concat(e))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleIsCodeExist:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isCodeExist(t).catch((function(e){throw new Error("handleIsCodeExist, ".concat(e))}));case 2:return a=e.sent,r=a.data,i=void 0!==r&&r,e.abrupt("return",i||!1);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},created:function(){this.oldbizUnitSummary.id=this.$route.params.id,this.fetchSolutionType(),this.fetchBizUnitSummary(),this.unitId=this.$route.params.id,this.fetchBizUnitAccess()},mounted:function(){var e=this;this.$nextTick((function(){setTimeout((function(){var t=e.$refs.overview.offsetWidth;e.$refs.editfooter.style.setProperty("width","".concat(t+40,"px"))}),500)}));var t=this;window.onresize=function(){var e=t.$refs.overview.offsetWidth;t.$refs.editfooter.style.setProperty("width","".concat(e+40,"px"))}}},d=p,m=(a("4c18"),a("2877")),f=Object(m.a)(d,i,[],!1,null,"3493b449",null),h=f.exports,b=a("3c94"),g=(a("7514"),a("1799")),v=a("3d85"),w=a("aa47"),y=a("bac4"),C=a("2687"),D=a("76ff"),k=a.n(D),x=a("a0e8"),_=a.n(x),O={name:"InterfaceList",components:{Pagination:g.a,Steps:v.a},props:{activeView:{type:String,required:!0},currentRowData:{type:Object,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),domainType:0,queryLike:"",tableLoading:!0,tableData:[],tableList:[{prop:"apiCode",label:"接口",minWidth:"300",showOverflowTooltip:!0},{prop:"apiName",label:"中文名称",minWidth:"180",showOverflowTooltip:!0},{prop:"apiRemark",label:"接口描述",minWidth:"180",showOverflowTooltip:!0},{prop:"apiUrl",label:"URL",minWidth:"300",showOverflowTooltip:!0},{prop:"alias",label:"测试环境JSF别名",minWidth:"180",showOverflowTooltip:!0},{prop:"isAuthorize",label:"用户授权",minWidth:"100",showOverflowTooltip:!1},{prop:"categoryCode",label:"所属分类",minWidth:"80",showOverflowTooltip:!1},{prop:"status",label:"状态",minWidth:"80",showOverflowTooltip:!1},{prop:"createUser",label:"创建人",minWidth:"100",showOverflowTooltip:!1},{prop:"updateUser",label:"更新人",minWidth:"100",showOverflowTooltip:!1}],categoryList:[],pageNumb:1,pageSize:10,total:0,hideOrCancelHideDialogVisible:!1,active:0}},filters:{formatIsAuthorizeText:function(e){return["不需要","需要"][e]||""},formatCategoryCodeText:function(e,t){var a=t.find((function(t){return t.code===e}));return a?a.name:""},formatStatusText:function(e){var t=e.hide,a=e.status;return t?"已隐藏":{1:"初始化",2:"审核中",4:"审核通过",5:"已发布",9:"审核未通过",10:"编辑中"}[a]||""},formatStatusClassName:function(e){var t=e.hide,a=e.status;return t?"deadColor":{1:"initColor",2:"updateColor",4:"normalColor",5:"normalColor",9:"deadColor",10:"updateColor"}[a]||""},formatHideOrCancelHideButtonText:function(e){return["隐藏","取消隐藏"][e]||""},formatHideOrCancelHideDialogTitleText:function(e){return["接口隐藏","接口取消隐藏"][e]||""},formatHideOrCancelHideDialogImageSource:function(e){return[k.a,_.a][e]||""},formatHideOrCancelHideDialogCancelButtonText:function(e){return["取 消","关 闭"][e]||""}},methods:{getApiCategory:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={unitId:t},e.next=4,y.a.getApiCategory(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getOverview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={id:t},e.next=5,C.a.getOverview(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateApiSeq:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={apiId:t,seq:a},e.next=3,y.a.updateApiSeq(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),queryInterfaceList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.pageNumb,r=this.pageSize,i=this.queryLike,1,"seq","asc",o={unitId:t,callDirection:1,pageNumb:a,pageSize:r,orderBy:"seq",orderType:"asc",queryLike:i},e.next=7,y.a.queryInterfaceList(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),checkPrincipal:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={id:t},e.next=5,C.a.checkPrincipal(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),hiddenApi:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentRowData.id,a={id:t},e.next=4,y.a.hiddenApi(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),hiddenCancelApi:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentRowData.id,a={id:t},e.next=4,y.a.hiddenCancelApi(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),deleteInterface:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t},e.next=3,y.a.deleteInterface(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),initializeTableList:function(){var e=this,t=window.env.baseEnv,a=this.domainType,n=this.tableList.findIndex((function(e){return"alias"===e.prop})),r={test:function(){e.tableList.splice(n,1,{prop:"alias",label:"测试环境JSF别名",minWidth:"180",showOverflowTooltip:!0})},uat:function(){e.tableList.splice(n,1,{prop:"shadowboxAlias",label:"预发环境JSF别名",minWidth:"180",showOverflowTooltip:!0},{prop:"alias",label:"生产环境JSF别名",minWidth:"180",showOverflowTooltip:!0})},prod:function(){e.tableList.splice(n,1,{prop:"shadowboxAlias",label:"预发环境JSF别名",minWidth:"180",showOverflowTooltip:!0},{prop:"alias",label:"生产环境JSF别名",minWidth:"180",showOverflowTooltip:!0})}},i={1:function(){r[t]&&r[t]()},2:function(){e.tableList.splice(n,1)}};i[a]&&i[a]()},handleSearchCategoryList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiCategory().catch((function(e){throw new Error("handleSearchCategoryList getApiCategory, ".concat(e))}));case 2:t=e.sent,a=t.data,this.categoryList=a||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchDomainType:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOverview().catch((function(e){throw new Error("handleSearchDomainType getOverview, ".concat(e))}));case 2:t=e.sent,a=t.data.domainType,this.domainType=a||0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchTableData:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s=this,c=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:0,this.tableLoading=!0,this.pageNumb=t||this.pageNumb,e.next=5,this.handleSearchCategoryList().catch((function(e){throw new Error("handleSearchTableData handleSearchCategoryList, ".concat(e))}));case 5:return e.next=7,this.queryInterfaceList().catch((function(e){throw new Error("handleSearchTableData queryInterfaceList, ".concat(e))}));case 7:a=e.sent,r=a.data,i=r.list,o=r.total,this.tableData=i||[],this.total=o||0,this.tableLoading=!1,this.$nextTick((function(){s.initializeTableDrag()})),this.$emit("updateDetailHeaderInfo");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initializeTableDrag:function(){var e=this,t=document.querySelector(".interface-list__table .el-table__body-wrapper tbody");w.a.create(t,{onEnd:function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o,s;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.oldIndex,i=a.newIndex,o=e.tableData[r].id,s=e.tableData[i].seq,t.next=5,e.updateApiSeq(o,s).catch((function(t){throw e.tableData=[],new Error("initializeTableDrag updateApiSeq, ".concat(t))}));case 5:return t.next=7,e.handleSearchTableData().catch((function(e){throw new Error("initializeTableDrag handleSearchTableData, ".concat(e))}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),delay:500})},handleClickAddInterfaceButton:function(){var e=this.domainType;this.$emit("update:currentRowData",{}),this.$emit("update:activeView",{1:"jsfAddOrEditInterface",2:"httpAddOrEditInterface"}[e]||"interfaceList")},handleLinkToApiCodeUrl:function(e){var t=e.interfaceName,a=e.interfaceMethod,n=e.methodId,r=this.domainType,i=window.location.origin,o={1:function(){window.open("".concat(i,"/#/apiMethodList?qualifiedName=").concat(t,"&methodName=").concat(a),"_blank")},2:function(){window.open("".concat(i,"/#/httpApiDetail?id=").concat(n),"_blank")}};o[r]&&o[r]()},judgeEditButtonVisible:function(e,t){return!e&&{1:!0,5:!0,10:!0}[t]},handleClickEditButton:function(e){var t=this.domainType;this.$emit("update:currentRowData",e),this.$emit("update:activeView",{1:"jsfAddOrEditInterface",2:"httpAddOrEditInterface"}[t]||"interfaceList")},handleClickExternalDocumentButton:function(e){this.$emit("update:currentRowData",e),this.$emit("update:activeView","externalDocument")},handleClickHideOrCancelHideButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("update:currentRowData",t),e.next=3,this.checkPrincipal().catch((function(e){throw new Error("handleClickHideOrCancelHideButton checkPrincipal, ".concat(e))}));case 3:this.active=0,this.hideOrCancelHideDialogVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleConfirmHideOrCancelHide:function(){var e=this,t=this.currentRowData.hide,a=[function(){return e.hiddenApi()},function(){return e.hiddenCancelApi()}];a[t]&&a[t]().then(Object(r.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.active=1,t.next=3,e.handleSearchTableData().catch((function(e){throw new Error("handleConfirmHideOrCancelHide handleSearchTableData, ".concat(e))}));case 3:case"end":return t.stop()}}),t)})))).catch((function(e){throw new Error("handleConfirmHideOrCancelHide, ".concat(e))}))},handleLinkToPortalUrl:function(){var e=window.env.extranetHost,t=this.currentRowData.unitId;window.open("//".concat(e,"/#/quick?id=").concat(t),"_blank")},judgeDeletePopoverVisible:function(e,t){return 1===t||!!e},handleClickDeleteButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteInterface(t).catch((function(e){throw new Error("handleClickDeleteButton deleteInterface, ".concat(e))}));case 2:return this.$message.success("删除成功"),e.next=5,this.handleSearchTableData().catch((function(e){throw new Error("handleClickDeleteButton handleSearchTableData, ".concat(e))}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleSearchDomainType().catch((function(e){throw new Error("created handleSearchDomainType, ".concat(e))}));case 2:return this.initializeTableList(),e.next=5,this.handleSearchTableData().catch((function(e){throw new Error("created handleSearchTableData, ".concat(e))}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},S=O,T=(a("1199"),Object(m.a)(S,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"interface-list"},[a("el-row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[a("el-col",[a("el-input",{staticStyle:{"margin-right":"8px",width:"320px"},attrs:{clearable:!0,placeholder:"请输入编码/名称/描述以搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearchTableData(1)}},model:{value:e.queryLike,callback:function(t){e.queryLike="string"==typeof t?t.trim():t},expression:"queryLike"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleSearchTableData(1)}}},[e._v("查询")])],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleClickAddInterfaceButton}},[e._v("添加接口")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"interface-list__table",attrs:{"row-key":"id",data:e.tableData,"hide-empty-img":!0}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._l(e.tableList,(function(t){return a("el-table-column",{key:t.id,attrs:{prop:t.prop,label:t.label,"min-width":t.minWidth,"show-overflow-tooltip":t.showOverflowTooltip},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.row,i=r.apiCode,o=r.isAuthorize,s=r.categoryCode,c=t.column;return["apiCode"===c.property?[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleLinkToApiCodeUrl(n)}}},[e._v(e._s(i))])]:"isAuthorize"===c.property?[a("span",[e._v(e._s(e._f("formatIsAuthorizeText")(o)))])]:"categoryCode"===c.property?[a("span",[e._v(e._s(e._f("formatCategoryCodeText")(s,e.categoryList)))])]:"status"===c.property?[a("span",{class:e._f("formatStatusClassName")(n)},[e._v(e._s(e._f("formatStatusText")(n)))])]:[a("span",[e._v(e._s(n[c.property]))])]]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.row,i=r.id,o=r.status,s=r.hide;return[e.judgeEditButtonVisible(s,o)?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleClickEditButton(n)}}},[e._v("编辑")]):e._e(),a("el-badge",{staticClass:"table__badge",attrs:{"is-dot":n.outOfDate}},[a("el-button",{staticClass:"badge__button",attrs:{type:"text"},on:{click:function(t){return e.handleClickExternalDocumentButton(n)}}},[e._v("对外文档")])],1),1!==o?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleClickHideOrCancelHideButton(n)}}},[e._v(e._s(e._f("formatHideOrCancelHideButtonText")(s)))]):e._e(),e.judgeDeletePopoverVisible(s,o)?a("el-popover",{staticStyle:{display:"inline-block","margin-left":"10px"},attrs:{placement:"left-start",width:"240",trigger:"click"}},[a("p",[e._v("若接口已经被发布过，则不可删除。确认删除此接口？")]),a("div",{staticStyle:{"text-align":"center","margin-top":"8px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:function(t){return e.handleClickDeleteButton(i)}}},[e._v("确认删除")])],1),a("el-button",{staticStyle:{color:"#e1251b"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1):e._e()]}}])})],2),a("Pagination",{attrs:{currentPage:e.pageNumb,pageSize:e.pageSize,total:e.total,reloadTableData:e.handleSearchTableData},on:{"update:currentPage":function(t){e.pageNumb=t},"update:current-page":function(t){e.pageNumb=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}),a("el-dialog",{staticClass:"interface-list__hide-or-cancel-hide-dialog",attrs:{title:e._f("formatHideOrCancelHideDialogTitleText")(e.currentRowData.hide),visible:e.hideOrCancelHideDialogVisible,width:"480px"},on:{"update:visible":function(t){e.hideOrCancelHideDialogVisible=t}}},[a("Steps",{attrs:{active:e.active,titleList:["确认","完成"]}}),a("div",{staticClass:"hide-or-cancel-hide-dialog__image-wrapper"},[a("img",{staticClass:"image-wrapper__warning",staticStyle:{margin:"8px auto",width:"36px"},attrs:{src:e._f("formatHideOrCancelHideDialogImageSource")(e.active)}})]),a("div",{staticClass:"hide-or-cancel-hide-dialog__text-wrapper"},[0===e.currentRowData.hide?[0===e.active?[a("p",[e._v("接口隐藏会立即生效")]),a("p",[e._v(" 前台将不再展示 "+e._s(e.currentRowData.apiCode)+" 接口，但不影响已接入用户的调用 ")]),a("p",[e._v("确认隐藏？")])]:1===e.active?[a("p",{staticStyle:{"font-size":"24px","font-weight":"600"}},[e._v("隐藏成功")]),a("p",[e._v("前台将不再展示 "+e._s(e.currentRowData.apiCode)+" 接口")])]:e._e()]:1===e.currentRowData.hide?[0===e.active?[a("p",[e._v("接口取消隐藏会立即生效")]),a("p",[e._v(" 前台将展示 "+e._s(e.currentRowData.apiCode)+" 接口，可能会有新用户接入并调用接口 ")]),a("p",[e._v("确认取消隐藏？")])]:1===e.active?[a("p",{staticStyle:{"font-size":"24px","font-weight":"600"}},[e._v("取消隐藏成功")]),a("p",[e._v("前台将展示 "+e._s(e.currentRowData.apiCode)+" 接口")])]:e._e()]:e._e()],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.hideOrCancelHideDialogVisible=!1}}},[e._v(e._s(e._f("formatHideOrCancelHideDialogCancelButtonText")(e.active)))]),0===e.active?a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmHideOrCancelHide}},[e._v("确 定")]):1===e.active?a("el-button",{attrs:{type:"primary"},on:{click:e.handleLinkToPortalUrl}},[e._v("前往前台查看")]):e._e()],1)],1)],1)}),[],!1,null,"3d593dbe",null)),j=T.exports,I=(a("6b54"),a("5530")),L=a("3835"),A=a("547a"),P=a("98ab"),N={name:"AlertCheckForUpdate",components:{Alert:P.a},props:{apiCode:{type:String,required:!0},outOfDate:{type:Boolean,required:!0}},data:function(){return{}},filters:{formatTipText:function(e){return e?"本文档由 ".concat(e," 的接口文档克隆生成，编辑仅影响当前文档"):""}},computed:{computeOutOfDateAlertVisible:function(){return this.outOfDate}}},B=N,F=(a("1a14"),Object(m.a)(B,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-check-for-update"},[a("p",{staticClass:"alert-check-for-update__tip"},[e._v(e._s(e._f("formatTipText")(e.apiCode)))]),e.computeOutOfDateAlertVisible?a("Alert",{attrs:{closable:!1,type:"warning"},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",[e._v("检测到当前接口文档元数据内容有更新，")]),a("el-button",{staticStyle:{"font-size":"inherit"},attrs:{type:"text"},on:{click:function(t){return e.$emit("clickViewUpdateContentButton")}}},[e._v("查看更新内容")])]},proxy:!0}],null,!1,2307502843)}):a("Alert",{attrs:{closable:!1,showIcon:!1,type:"default"},scopedSlots:e._u([{key:"title",fn:function(){return[a("el-button",{staticStyle:{"margin-right":"4px","font-size":"inherit"},attrs:{type:"text"},on:{click:function(t){return e.$emit("clickCheckForUpdateButton")}}},[e._v("检查更新")]),a("el-tooltip",{attrs:{content:"检查当前接口文档参数是否为最新版本",placement:"top"}},[a("i",{staticClass:"el-icon-info-empty"})])]},proxy:!0}])})],1)}),[],!1,null,"5acf16b4",null)),V=F.exports,E=a("43b3"),R={name:"VersionSwitchingHeader",components:{Title:E.a},props:{upcomingVersionSwitch:{type:Boolean,required:!0},firstTipVisible:{type:Boolean,required:!0}},data:function(){return{popoverVisible:!0,explainTextList:[{text:"新增",className:"create"},{text:"修改",className:"update"},{text:"删除",className:"delete"}]}},filters:{formatTitleText:function(e){return e?"待更新版本":"当前版本"},formatExplainClassName:function(e){return e?"explain-wrapper__explain ".concat(e):"explain-wrapper__explain"}},methods:{onChangeUpcomingVersionSwitch:function(e){this.$emit("update:upcomingVersionSwitch",e),this.$emit("update:firstTipVisible",!1);var t=this.$route.name,a="".concat(t,"/").concat("externalCallInternal","/ChangeContentDialog/firstTipVisible");localStorage.setItem(a,"".concat(this.firstTipVisible))}}},z=R,$=(a("8191"),Object(m.a)(z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"version-switching-header"},[a("div",{staticClass:"version-switching-header__title-wrapper"},[a("Title",{attrs:{text:e._f("formatTitleText")(e.upcomingVersionSwitch)}}),a("el-switch",{attrs:{value:e.upcomingVersionSwitch},on:{change:e.onChangeUpcomingVersionSwitch}}),a("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{content:"你可以通过切换开关对比API文档待更新版本、当前版本的差异。",effect:"dark",placement:"top"}},[a("i",{staticClass:"el-icon-info-empty"})])],1),a("div",{staticClass:"version-switching-header__explain-wrapper"},[a("p",[e._v("变更项说明：")]),e._l(e.explainTextList,(function(t){var n=t.text,r=t.className;return a("p",{key:n,class:e._f("formatExplainClassName")(r)},[e._v(" "+e._s(n)+" ")])}))],2)])}),[],!1,null,"2da5111a",null)),U=$.exports,M={name:"VersionSwitchingForm",props:{form:{type:Object,required:!0}},data:function(){return{formParagraphList:[{label:"接口名称:",prop:"apiName"},{label:"接口描述:",prop:"apiRemark",className:"pre-wrap"}]}},filters:{formatParagraphContentClassName:function(e){return e?"paragraph__content pre-wrap":"paragraph__content"}}},q=M,H=(a("5c40"),Object(m.a)(q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"version-switching-form",attrs:{model:e.form,"label-width":"80px"}},e._l(e.formParagraphList,(function(t){var n=t.label,r=t.prop,i=t.className;return a("div",{key:r,staticClass:"version-switching-form__paragraph"},[a("p",{staticClass:"paragraph__label"},[e._v(e._s(n))]),a("p",{class:e._f("formatParagraphContentClassName")(i)},[e._v(" "+e._s(e.form[r])+" ")])])})),0)}),[],!1,null,"3a02d573",null)),K=H.exports,G=(a("a481"),{name:"ComparisonTable",components:{Title:E.a},props:{title:{type:String,default:""},tableData:{type:Array,default:function(){return[]}},tableColumnList:{type:Array,required:!0},hashMapMutationAttributes:{type:Map,required:!0}},filters:{formatTableColumnRequiredText:function(e){return(new Map).set("0","否").set("1","是").set("2","条件").get(e)||""}},methods:{formatTableColumnClassName:function(e,t){var a=this.hashMapMutationAttributes,n=e.mutationAttributes;return(n=Array.isArray(n)?n:[]).includes(a.get(t)||null)?"update-column":""},formatTableColumnDescriptionClassName:function(e,t){var a=this.hashMapMutationAttributes,n=e.mutationAttributes;return(n=Array.isArray(n)?n:[]).includes(a.get(t)||null)?"update-column remark-text":"remark-text"},judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},formatTableRowClassName:function(e){var t=e.row.status;return(new Map).set(0,"").set(1,"create-row").set(2,"delete-row").set(3,"update-row").get(t)||""}}}),Q=G,W=(a("ff8f"),Object(m.a)(Q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"comparison-table"},[a("Title",{attrs:{text:e.title}}),a("el-table",{staticClass:"comparison-table__table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.formatTableRowClassName,"hide-empty-img":!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width,o=t.showOverflowTooltip;return a("el-table-column",{key:n,attrs:{label:n,prop:r,width:i,"show-overflow-tooltip":o},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[["required"].includes(i)?[a("span",{class:e.formatTableColumnClassName(n,i)},[e._v(e._s(e._f("formatTableColumnRequiredText")(n[i])))])]:"描述"===o?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                    width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}},[e._v(" "+e._s(n[i])+" ")])]},proxy:!0}],null,!0)},[a("div",{class:e.formatTableColumnDescriptionClassName(n,i),domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:[a("span",{class:e.formatTableColumnClassName(n,i)},[e._v(e._s(n[i]))])]]}}],null,!0)})})),1)],1)}),[],!1,null,"8bef6de4",null)),J=W.exports,X={name:"ChangeContentDialog",components:{VersionSwitchingHeader:U,VersionSwitchingForm:K,ComparisonTable:J},props:{dialogVisible:{type:Boolean,required:!0},id:{type:Number,required:!0},apiCode:{type:String,required:!0},updatePolicy:{type:Number,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),dialogLoading:!1,firstTipVisible:!1,changeLineQuantity:0,upcomingVersionSwitch:!0,versionSwitchingFormData:{apiName:"",apiRemark:""},newVersionSwitchingFormData:{apiName:"",apiRemark:""},inParams:[],outParams:[],errorCodes:[],newInParams:[],newOutParams:[],newErrorCodes:[],hashMapMutationAttributesParams:(new Map).set("name",1).set("oldType",2).set("required",3).set("exampleValue",4).set("remark",5),hashMapMutationAttributesErrorCodes:(new Map).set("errorMsg",1).set("prescription",2).set("errorCode",3),inParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"25%",showOverflowTooltip:!0},{label:"是否必填",prop:"required",minWidth:"15%"},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],outParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"30%",showOverflowTooltip:!0},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],errorCodesTableColumnList:[{label:"错误码",prop:"errorCode",minWidth:"35%"},{label:"错误消息",prop:"errorMsg",minWidth:"60%",showOverflowTooltip:!0},{label:"处理建议",prop:"prescription",minWidth:"60%",showOverflowTooltip:!0}],ruleForm:{updateRadioVal:""},rules:{updateRadioVal:[{required:!0,message:"请选择元数据的更新类型",trigger:"change"}]}}},filters:{formatDialogTitleText:function(e){return e?"".concat(e," 接口文档变更内容"):""},formatChangeRecordsTotalText:function(e){return"共 ".concat(e," 条变更记录")}},computed:{computeVersionSwitchingFormData:function(){var e=this.upcomingVersionSwitch,t=this.versionSwitchingFormData,a=this.newVersionSwitchingFormData;return e?a:t},computeInParams:function(){var e=this.upcomingVersionSwitch,t=this.inParams,a=this.newInParams;return e?a:t},computeOutParams:function(){var e=this.upcomingVersionSwitch,t=this.outParams,a=this.newOutParams;return e?a:t},computeErrorCodes:function(){var e=this.upcomingVersionSwitch,t=this.errorCodes,a=this.newErrorCodes;return e?a:t}},methods:{getBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,2,r={unitId:t,id:a,visible:2},e.next=5,y.a.getBizApiPreDetails(r).catch((function(e){throw new Error("getBizApiPreDetails, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getBizApiPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,2,r={unitId:t,id:a,visible:2},e.next=5,y.a.getBizApiPreDetailsLatestVersion(r).catch((function(e){throw new Error("getBizApiPreDetailsLatestVersion, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.getBizApiPreDetails().catch((function(e){throw new Error("handleGetBizApiPreDetails, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.apiName,i=a.apiRemark,o=a.inParams,s=a.outParams,c=a.errorCodes,this.versionSwitchingFormData.apiName=r||"",this.versionSwitchingFormData.apiRemark=i||"",this.inParams=Array.isArray(o)?o:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(s)?s:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.errorCodes=Array.isArray(c)?c:[],this.dialogLoading=!1;case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizApiPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.getBizApiPreDetailsLatestVersion().catch((function(e){throw new Error("handleGetBizApiPreDetailsLatestVersion, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.apiName,i=a.apiRemark,o=a.inParams,s=a.outParams,c=a.errorCodes,l=a.changeLineQuantity,this.newVersionSwitchingFormData.apiName=r||"",this.newVersionSwitchingFormData.apiRemark=i||"",this.newInParams=Array.isArray(o)?o:[],this.newInParams.length>0&&this.setSelectVal(this.newInParams),this.newOutParams=Array.isArray(s)?s:[],this.newOutParams.length>0&&this.setSelectVal(this.newOutParams),this.newErrorCodes=Array.isArray(c)?c:[],this.changeLineQuantity=l||0,this.dialogLoading=!1;case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),judgeFirstTipVisible:function(){var e=this.$route.name,t="".concat(e,"/").concat("externalCallInternal","/ChangeContentDialog/firstTipVisible");this.firstTipVisible=JSON.parse(localStorage.getItem(t)||"true")},setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},onOpenDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("update:updatePolicy",2),e.next=3,Promise.all([this.handleGetBizApiPreDetails(),this.handleGetBizApiPreDetailsLatestVersion()]).catch((function(e){throw new Error("onOpenDialog, ".concat(e))}));case 3:this.judgeFirstTipVisible();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onCloseDialog:function(){this.$emit("update:dialogVisible",!1),this.firstTipVisible=!1},onClosedDialog:function(){this.$emit("update:updatePolicy",3),this.upcomingVersionSwitch=!0,this.$refs.ruleForm.resetFields()},onClickISeeButton:function(){this.firstTipVisible=!1;var e=this.$route.name,t="".concat(e,"/").concat("externalCallInternal","/ChangeContentDialog/firstTipVisible");localStorage.setItem(t,"".concat(this.firstTipVisible))},onClickUpdateNowButton:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("updateNow"),t.$emit("update:dialogVisible",!1)}))},handleRadioClick:function(e){"1"===e?this.$emit("update:updatePolicy",1):this.$emit("update:updatePolicy",2)}}},Z=X,Y=(a("c421"),Object(m.a)(Z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"change-content-dialog",attrs:{visible:e.dialogVisible,title:e._f("formatDialogTitleText")(e.apiCode),"close-on-click-modal":!1,top:"5vh",width:"1200px"},on:{open:e.onOpenDialog,close:e.onCloseDialog,closed:e.onClosedDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"footer__change-records-total"},[e._v(e._s(e._f("formatChangeRecordsTotalText")(e.changeLineQuantity)))]),a("div",{staticClass:"footer__right-button-wrapper"},[a("el-tooltip",{staticStyle:{"margin-right":"0.5rem"},attrs:{effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",[e._v(" 部分更新：只更新字段结构(增删改、顺序、类型、必填)和错误码，不更新其他描述类内容。 ")]),a("p",[e._v(" 全部更新：部分更新基础上，额外更新字段描述、示例值、接口名称、接口描述等全部内容。 ")])]},proxy:!0}])},[a("i",{staticClass:"el-icon-info-empty"})]),a("div",{staticClass:"right-button-wrapper__update-method-switch-wrapper"},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"1.3rem"},attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"updateRadioVal"}},[a("el-radio",{staticStyle:{"margin-right":"0.5rem"},attrs:{label:"1"},on:{change:function(t){return e.handleRadioClick(e.ruleForm.updateRadioVal)}},model:{value:e.ruleForm.updateRadioVal,callback:function(t){e.$set(e.ruleForm,"updateRadioVal",t)},expression:"ruleForm.updateRadioVal"}},[e._v("全部更新")]),a("el-radio",{staticStyle:{"margin-right":"0.5rem"},attrs:{label:"2"},on:{change:function(t){return e.handleRadioClick(e.ruleForm.updateRadioVal)}},model:{value:e.ruleForm.updateRadioVal,callback:function(t){e.$set(e.ruleForm,"updateRadioVal",t)},expression:"ruleForm.updateRadioVal"}},[e._v("部分更新")])],1)],1)],1),a("div",{staticClass:"right-button-wrapper__update-button-wrapper"},[a("el-button",{on:{click:function(t){return e.$emit("update:dialogVisible",!1)}}},[e._v("暂不更新")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClickUpdateNowButton("ruleForm")}}},[e._v("立即更新")])],1)],1)]},proxy:!0}])},[e.firstTipVisible?a("div",{staticClass:"change-content-dialog__first-tip"},[a("p",[e._v("切换开关即可查看当前API文档内容，方便对比API仓库文档的参数差异。")]),a("el-button",{attrs:{type:"text"},on:{click:e.onClickISeeButton}},[e._v("我知道了")])],1):e._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"change-content-dialog__content"},[a("VersionSwitchingHeader",{attrs:{upcomingVersionSwitch:e.upcomingVersionSwitch,firstTipVisible:e.firstTipVisible},on:{"update:upcomingVersionSwitch":function(t){e.upcomingVersionSwitch=t},"update:upcoming-version-switch":function(t){e.upcomingVersionSwitch=t},"update:firstTipVisible":function(t){e.firstTipVisible=t},"update:first-tip-visible":function(t){e.firstTipVisible=t}}}),a("VersionSwitchingForm",{attrs:{form:e.computeVersionSwitchingFormData}}),a("ComparisonTable",{attrs:{tableData:e.computeInParams,tableColumnList:e.inParamsTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesParams,title:"请求参数"}}),a("ComparisonTable",{attrs:{tableData:e.computeOutParams,tableColumnList:e.outParamsTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesParams,title:"响应参数"}}),a("ComparisonTable",{attrs:{tableData:e.computeErrorCodes,tableColumnList:e.errorCodesTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesErrorCodes,title:"错误码"}})],1)])}),[],!1,null,"1c3f1480",null)),ee=Y.exports,te={name:"DocumentHeader",components:{AlertCheckForUpdate:V,ChangeContentDialog:ee},props:{id:{type:Number,required:!0},apiCode:{type:String,required:!0},outOfDate:{type:Boolean,required:!0},updatePolicy:{type:Number,required:!0}},data:function(){return{changeContentDialogVisible:!1}},filters:{formatPageHeaderContent:function(e){return e?"".concat(e," 的接口文档"):""}},methods:{checkForUpdate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a={id:t},e.next=4,y.a.checkForUpdate(a).catch((function(e){throw new Error("checkForUpdate, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleCheckForUpdate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkForUpdate().catch((function(e){throw new Error("handleCheckForUpdate, ".concat(e))}));case 2:return t=e.sent,a=t.data,e.abrupt("return",a||!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),openNoNewReleaseConfirm:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"当前接口文档已是最新版","success",!1,"关闭",t={type:"success",showConfirmButton:false,cancelButtonText:"关闭"},e.next=7,this.$confirm("当前接口文档已是最新版",t).catch((function(){}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickViewUpdateContentButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.changeContentDialogVisible=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickCheckForUpdateButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleCheckForUpdate().catch((function(e){throw new Error("onClickCheckForUpdateButton, ".concat(e))}));case 2:if(!e.sent){e.next=8;break}return e.next=6,this.onClickViewUpdateContentButton();case 6:e.next=10;break;case 8:return e.next=10,this.openNoNewReleaseConfirm();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},ae=te,ne=(a("1ea8"),Object(m.a)(ae,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-header"},[a("el-page-header",{staticClass:"page-header",attrs:{content:e._f("formatPageHeaderContent")(e.apiCode)},on:{back:function(t){return e.$emit("back")}}}),a("AlertCheckForUpdate",{attrs:{apiCode:e.apiCode,outOfDate:e.outOfDate},on:{clickViewUpdateContentButton:e.onClickViewUpdateContentButton,clickCheckForUpdateButton:e.onClickCheckForUpdateButton}}),a("ChangeContentDialog",{attrs:{dialogVisible:e.changeContentDialogVisible,id:e.id,apiCode:e.apiCode,updatePolicy:e.updatePolicy},on:{"update:dialogVisible":function(t){e.changeContentDialogVisible=t},"update:dialog-visible":function(t){e.changeContentDialogVisible=t},"update:updatePolicy":function(t){return e.$emit("update:updatePolicy",t)},updateNow:function(t){return e.$emit("updateNow")}}})],1)}),[],!1,null,"8faf9764",null)),re=ne.exports,ie=a("2909"),oe=a("748f"),se={name:"TreeTable",components:{InputTextareaDescription:oe.a},props:{tableColumnInfo:{type:Array,default:[]},tableData:{type:Array,default:[]},treeNodeList:{type:Array,default:function(){return[]}},editer:{type:Boolean,default:!0},selcolor:{type:String,default:"red"}},data:function(){return{options:[{value:"0",label:"否"},{value:"1",label:"是"},{value:"2",label:"条件"}]}},methods:{judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},tableRowClassName:function(e){var t=e.row;if(e.rowIndex,t.modify){if(1==t.modify)return"api_update_del";if(2==t.modify)return"api_update_modify";if(3==t.modify)return"api_update_add"}return""},changeTreeElement:function(e,t,a){if(e&&e.length)for(var n=0;n<e.length;n++)e[n].id===t?e.splice(n,1,a):this.changeTreeElement(e[n].children,t,a)},diaplayParentNode:function(e,t,a){if(e&&e.length)for(var n=0;n<e.length;n++)e[n].id===t&&(e[n].visible=1,this.diaplayParentNode(a,e[n].parentId,a)),e[n].children&&this.diaplayParentNode(e[n].children,t,a)},changeVisible:function(e){var t=e.id,a=e.parentId,n=JSON.parse("[".concat(JSON.stringify(e),"]"));1===e.visible?(this.displayNode(n),this.changeTreeElement.apply(this,[this.treeNodeList,t].concat(Object(ie.a)(n))),this.diaplayParentNode(this.treeNodeList,a,this.treeNodeList)):(this.hideNode(n),this.changeTreeElement.apply(this,[this.treeNodeList,t].concat(Object(ie.a)(n)))),this.$emit("changeUpdateStatus",e)},hideNode:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)1===e[t].visible&&(e[t].visible=0),e[t].children&&e[t].children.length>0&&this.hideNode(e[t].children)},displayNode:function(e){if(e.id,e&&e.length)for(var t=0;t<e.length;t++)0===e[t].visible&&(e[t].visible=1),e[t].children&&e[t].children.length>0&&this.displayNode(e[t].children)}}},ce=se,le=(a("e649"),Object(m.a)(ce,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticClass:"my-table mb2 tree-table",staticStyle:{"margin-bottom":"22px"},attrs:{data:e.tableData,"row-key":"id","row-class-name":e.tableRowClassName,stripe:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[e._t("customColumn",[e._l(e.tableColumnInfo,(function(t,n){return[t.modify?e._e():a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left","show-tooltip-when-overflow":e.editer}}),t.modify&&"input"==t.type?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){return["exampleValue"==t.column.property?a("div",["Long"==t.row.oldtype||"long"==t.row.type||"Integer"==t.row.oldtype||"int"==t.row.type||"java.math.BigInteger"==t.row.type?a("div",[e.editer||t.row.juageChildren?e._e():a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:t.column.label,size:"medium",precision:0,step:1},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}})],1):"Double"==t.row.oldtype||"double"==t.row.type||"Float"==t.row.oldtype||"float"==t.row.type||"java.math.BigDecimal"==t.row.type?a("div",[e.editer||t.row.juageChildren?e._e():a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:t.column.label,size:"medium",step:.1},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}})],1):"java.util.Date"==t.row.type||"java.sql.Timestamp"==t.row.type?a("div",[e.editer||t.row.juageChildren?e._e():a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:t.column.label,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}})],1):"java.lang.Boolean"==t.row.type||"boolean"==t.row.type?a("div",[e.editer||t.row.juageChildren?e._e():a("el-select",{attrs:{placeholder:t.column.label},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}},[a("el-option",{attrs:{value:"true"}}),a("el-option",{attrs:{value:"false"}})],1)],1):a("div",[e.editer||t.row.juageChildren?e._e():a("el-input",{attrs:{maxlength:"100",placeholder:t.column.label},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,"string"==typeof a?a.trim():a)},expression:"scope.row[scope.column.property]"}})],1)]):a("div",[e.editer?e._e():a("el-input",{attrs:{maxlength:"100",placeholder:t.column.label},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,"string"==typeof a?a.trim():a)},expression:"scope.row[scope.column.property]"}})],1),e.editer?a("div",[e._v(e._s(t.row[t.column.property]))]):e._e()]}}],null,!0)}):e._e(),t.modify&&"textarea"==t.type?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[e.editer?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                      width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"wb-doc-title",domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:["描述"===o?a("InputTextareaDescription",{attrs:{value:n[i],placeholder:o},on:{"update:value":function(t){return e.$set(n,i,t)}}}):a("el-input",{attrs:{type:"textarea",rows:1,placeholder:"错误消息"===o?"错误消息，长度不超过255":o,resize:"none",maxlength:"255"},model:{value:n[i],callback:function(t){e.$set(n,i,t)},expression:"row[property]"}})]]}}],null,!0)}):e._e(),t.modify&&"select"==t.type?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editer||"1"!=t.row.enableEdit?e._e():a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e.editer||"0"!=t.row.enableEdit?e._e():a("div",["0"===t.row[t.column.property]?a("span",[e._v("否")]):e._e(),"1"===t.row[t.column.property]?a("span",[e._v("是")]):e._e(),"2"===t.row[t.column.property]?a("span",[e._v("条件")]):e._e()]),e.editer&&"0"==t.row.enableEdit?a("div",["0"===t.row[t.column.property]?a("span",[e._v("否")]):e._e(),"1"===t.row[t.column.property]?a("span",[e._v("是")]):e._e(),"2"===t.row[t.column.property]?a("span",[e._v("条件")]):e._e()]):e._e(),e.editer&&"1"==t.row.enableEdit?a("div",["0"===t.row[t.column.property]?a("span",[e._v("否")]):e._e(),"1"===t.row[t.column.property]?a("span",{style:{color:e.selcolor}},[e._v("是")]):e._e(),"2"===t.row[t.column.property]?a("span",[e._v("条件")]):e._e()]):e._e()]}}],null,!0)}):e._e(),t.modify&&"button"===t.type&&!e.editer?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover",content:"源接口文档中该字段必填，不允许操作",disabled:1===t.row.enableEdit}},[a("el-switch",{attrs:{slot:"reference","active-value":1,"inactive-value":0,disabled:0===t.row.enableEdit},on:{change:function(a){return e.changeVisible(t.row)}},slot:"reference",model:{value:t.row.visible,callback:function(a){e.$set(t.row,"visible",a)},expression:"scope.row['visible']"}})],1)]}}],null,!0)}):e._e()]}))])],2)}),[],!1,null,"388d8e55",null)),ue=le.exports,pe=(a("55dd"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"radio-tags_wrap":e.dynTabMap.length,"radio-tags-wrap_editAble":e.editAble,"radio-tags-wrap_editDisable":!e.editAble}},[e.dynTabMap.length?[a("el-radio-group",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},e._l(e.dynTabMap,(function(t,n){return a("el-radio",{key:t.tag,class:e.radioClassName(n,t.tag),attrs:{label:t.tag,border:""}},[a("div",{on:{dblclick:function(a){return e.handleChangeTabItemEditStatus(t)}}},[t.tooltipInfo&&t.tooltipInfo.content?a("el-tooltip",{attrs:{content:t.tooltipInfo.content,placement:t.tooltipInfo.placement||"top",effect:t.tooltipInfo.effect||"dark"}},[a("div",[e._v(" "+e._s(t.tag)+" "),e.editAble&&n<e.dynTabMapLen-1?a("span",{staticClass:"el-icon-close close",on:{click:function(a){return e.handleDeleteTab(t.tag)}}}):e._e()])]):[e._v(" "+e._s(t.tag)+" "),e.editAble&&n<e.dynTabMapLen-1?a("span",{staticClass:"el-icon-close close",on:{click:function(a){return e.handleDeleteTab(t.tag)}}}):e._e()],a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.editAble&&n<e.dynTabMapLen-1&&t.edit,expression:"editAble && index < dynTabMapLen - 1 && item.edit"}],staticClass:"tab-item-input"},[a("el-form-item",{attrs:{error:t.errorMessage}},[a("el-input",{on:{change:function(){return e.handleEditTabItem(t)},input:function(a){return e.handleChangeTabName(t.tag,"errorMessage",t)},blur:function(){return e.handleEditTabItem(t)}},model:{value:t.tag,callback:function(a){e.$set(t,"tag",a)},expression:"item.tag"}})],1)],1)],2)])})),1),e.editAble?a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.addNewTab,expression:"!addNewTab"}],staticClass:"radio-last",attrs:{icon:"el-icon-plus"},on:{click:function(t){e.addNewTab=!0}}},[e._v("新增")]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.addNewTab,expression:"addNewTab"}],nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{error:e.addNewTabErrorMessage}},[a("el-input",{staticClass:"add-input",on:{change:e.handleAddNewTab,blur:e.handleAddNewTab,input:e.handleChangeTabName},model:{value:e.newTabName,callback:function(t){e.newTabName=t},expression:"newTabName"}})],1)],1)],1):e._e()]:e._e()],2)}),de=/^[0-9a-zA-Z\u4e00-\u9fa5]{2,6}$/,me={props:{dynTabList:{type:Array,default:function(){return[]}},currentTabName:{type:String,default:""},editAble:{type:Boolean,default:!1}},data:function(){return{addNewTab:!1,newTabName:"",dynTabMap:[],addNewTabErrorMessage:""}},computed:{dynTabMapLen:function(){return(this.dynTabMap||[]).length},activeTabName:{set:function(e){this.$emit("update:currentTabName",e)},get:function(){return this.currentTabName}}},watch:{activeTabName:function(){this.addNewTab=!1,this.addNewTabErrorMessage=""},dynTabList:{handler:function(e){this.dynTabMap=e.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{edit:!1})}))},immediate:!0}},methods:{radioClassName:function(e,t){var a=(this.dynTabMap||[]).length,n="";return 0==+e?this.editAble||1!==a?n+="radio-first ":n="":+e!=a-1||this.editAble?n+="radio-middle ":n+="radio-last ",t===this.activeTabName&&(n+="active-tab "),n},handleChangeTabItemEditStatus:function(e){this.editAble&&(e.edit=!0)},handleChangeTabName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.newTabName,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"addNewTabErrorMessage",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,n=de.test(e);return a[t]=n?"":"可输入数字、中文、英文字符，且长度为2-6",n},resetAddNewTabStatus:function(){this.addNewTab=!1,this.newTabName=""},handleAddNewTab:function(){var e=this;if(this.newTabName){if(this.handleChangeTabName()){if(this.dynTabList.length>=6)return this.$message({message:"最多6个标签",type:"warning"}),void this.resetAddNewTabStatus();if(this.dynTabList.find((function(t){return t.tag===e.newTabName})))return this.$message({message:"标签名称与其他名称重复，请输入新的标签名称",type:"warning"}),void(this.newTabName="");if(this.newTabName){var t={tag:this.newTabName,content:""},a=this.dynTabList.concat();a.splice(-1,0,t),this.$emit("update:dynTabList",a),this.$emit("setCurrentTabName",this.newTabName)}return this.resetAddNewTabStatus(),!1}}else this.resetAddNewTabStatus()},handleDeleteTab:function(e){this.$emit("update:dynTabList",this.dynTabList.filter((function(t){return t.tag!==e})))},handleEditTabItem:function(e){this.handleChangeTabName(e.tag,"errorMessage",e)&&e.tag&&this.$emit("update:dynTabList",this.dynTabMap.slice())}},name:"RadioTags"},fe=me,he=(a("b1fc"),Object(m.a)(fe,pe,[],!1,null,"f260213a",null)),be=he.exports,ge={props:{editable:{type:Boolean,default:!1},tabList:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},computed:{editTextArea:function(){return this.editable&&"模板示例"!==this.currentTabName},textAreaValue:{set:function(e){var t=this,a=this.tabList.find((function(e){return e.tag===t.currentTabName}))||{};a.content=e,this.$emit("update:tabList",this.tabList)},get:function(){var e=this;return(this.tabList.find((function(t){return t.tag===e.currentTabName}))||{content:""}).content}},tabInfo:{set:function(e){this.$emit("update:tabList",e)},get:function(){var e=this.tabList.length;return this.tabList.map((function(t){return"模板示例"===t.tag&&(t.order=e),t})).sort((function(e,t){return(e.order||0)-(t.order||0)}))}}},data:function(){return{currentTabName:""}},watch:{tabList:function(e){this.currentTabName=(e[0]||{}).tag||""}},methods:{setCurrentTabName:function(e){var t=this;this.$nextTick((function(){t.currentTabName=e}))}},components:{RadioTags:be},name:"ExamplePacket"},ve=ge,we=Object(m.a)(ve,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("RadioTags",{attrs:{dynTabList:e.tabInfo,currentTabName:e.currentTabName,editAble:e.editable},on:{"update:dynTabList":function(t){e.tabInfo=t},"update:dyn-tab-list":function(t){e.tabInfo=t},"update:currentTabName":function(t){e.currentTabName=t},"update:current-tab-name":function(t){e.currentTabName=t},setCurrentTabName:e.setCurrentTabName}}),a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:35},disabled:!e.editTextArea,placeholder:e.placeholder},model:{value:e.textAreaValue,callback:function(t){e.textAreaValue=t},expression:"textAreaValue"}})],1)}),[],!1,null,null,null),ye=we.exports,Ce=a("2a6f"),De=(a("0b21"),a("45e9")),ke=a.n(De),xe={getBusinessUnitDocByUnitId:function(e){return c.a.get("/doc/getBusinessUnitDocByUnitId",{params:e})},getDocById:function(e){return c.a.get("/doc/getDocById",{params:e})},deleteApiCategoryById:function(e){return c.a.post("/doc/deleteUnitDoc",e)},saveBusinessUnitDoc:function(e){return c.a.post("/doc/saveBusinessUnitDoc",e)},createBusinessUnitDoc:function(e){return c.a.post("/doc/createBusinessUnitDoc",e)},publishBusinessUnitDocById:function(e){return c.a.post("/doc/publishBusinessUnitDocById",e)},downDoc:function(e){return c.a.post("/doc/downDocById",e)},updateDocSeq:function(e){return c.a.post("/doc/updateDocSeq",e)}},_e=xe,Oe={getApiCategory:function(e){return c.a.get("/bizapinterface/getApiCategory",{params:e})},saveApiCategory:function(e){return c.a.post("/bizapinterface/saveApiCategory",e)},deleteApiCategoryById:function(e){return c.a.post("/bizapinterface/deleteApiCategoryById",e,{headers:{"Content-Type":"application/json"}})}},Se=Oe,Te={userManual:_e,interfaceList:Se},je=Te,Ie={name:"ClassificationDialog",props:{showClassificationDialog:{type:Boolean,required:!0},tableData:{type:Array,default:[]},queryTableList:{type:Function,default:null},unitId:{type:Number,default:0}},methods:{handleOpen:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryTableList();case 2:this.$nextTick((function(){t.initTableDrag()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initTableDrag:function(){var e=this,t=document.querySelector(".dialog__table .el-table__body-wrapper tbody");w.a.create(t,{handle:".operation-icon",onEnd:function(t){var a=t.oldIndex,n=t.newIndex,r=Object(ie.a)(e.tableData),i=r.splice(a,1)[0];r.splice(n,0,i),e.$emit("update:tableData",r)},delay:0})},handleClose:function(){this.$emit("update:showClassificationDialog",!1),this.$emit("update:queryTableList"),this.queryTableList()},newClassification:function(){this.tableData.push({id:-(new Date).getTime(),name:"",code:"",editNameState:!0,editCodeState:!0})},handleEdit:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editNameState=!0,t.editCodeState=!1;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleDelete:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a){var r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,i=t.code,!r||-1===Math.sign(r)){e.next=9;break}return e.next=4,je.interfaceList.deleteApiCategoryById({id:r}).catch((function(e){throw new Error("handleDelete deleteApiCategoryById")}));case 4:return this.$message.success("操作成功"),e.next=7,this.queryTableList();case 7:e.next=13;break;case 9:if(null!==r||"default"!==i){e.next=12;break}return this.$message.warning("无法删除默认分类！"),e.abrupt("return");case 12:this.tableData.splice(a,1);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),handleSave:ke.a.debounce(Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tableData.map((function(e){return e.id=-1===Math.sign(e.id)?null:e.id,{id:e.id,name:e.name,code:e.code,unitId:r.unitId}})),a={categoryList:t},e.next=4,this.saveSysGroup(a).catch((function(){throw new Error("handleSave saveSysGroup")}));case 4:this.$message.success("操作成功"),this.handleClose();case 6:case"end":return e.stop()}}),e,this)}))),300),saveSysGroup:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.interfaceList.saveApiCategory(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Le=Ie,Ae=(a("4770"),Object(m.a)(Le,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"classification-dialog",attrs:{width:"670px",title:"管理接口所属分类",visible:e.showClassificationDialog,"close-on-click-modal":!1},on:{opened:e.handleOpen,close:e.handleClose}},[a("div",{staticClass:"dialog__header"},[a("p",{staticClass:"header__desc"},[e._v(" 创建接口分类，便于使用方在API文档中根据分类快速找到目标API。 ")]),e.tableData.length>=50?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"最多可添加50个分类",placement:"top"}},[a("el-button",{staticStyle:{color:"#7f7f7f"},attrs:{type:"text"}},[e._v("+ 新增分类")])],1):a("el-button",{attrs:{type:"text"},on:{click:e.newClassification}},[e._v("+ 新增分类")])],1),a("el-table",{staticClass:"dialog__table",attrs:{data:e.tableData,height:"350","row-key":"id"}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editNameState?a("el-input",{attrs:{placeholder:"支持中英文，数字，2-15个字符"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"==typeof a?a.trim():a)},expression:"scope.row.name"}}):a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"code",label:"分类编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editCodeState?a("el-input",{attrs:{placeholder:"支持中英文，数字，2-15个字符"},model:{value:t.row.code,callback:function(a){e.$set(t.row,"code","string"==typeof a?a.trim():a)},expression:"scope.row.code"}}):a("span",[e._v(e._s(t.row.code))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.$index;return[n.editNameState?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{staticClass:"table__delete",attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n,r)}}},[e._v("删除")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击可拖动排序,前台API文档分类顺序将按照列表顺序展示",placement:"top"}},[a("span",{staticClass:"operation-icon"})])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("关闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)}),[],!1,null,"725a1366",null)),Pe=Ae.exports,Ne={name:"LeftVersionList",props:{emptyImageVisible:{type:Boolean,required:!0},list:{type:Array,required:!0},pageNum:{type:Number,required:!0},total:{type:Number,required:!0},currentVersionId:{type:Number,required:!0},currentVersionName:{type:String,required:!0},loadingTextVisible:{type:Boolean,required:!0}},computed:{computeInfiniteScrollDisabled:function(){var e=this.loadingTextVisible,t=this.computeNoMoreVisible;return e||t},computeNoMoreVisible:function(){var e=this.list.length,t=this.total;return e>30&&t<=e}},methods:{scrollLoad:function(){this.$emit("scrollLoad")},judgeListItemIsActiveClassName:function(e){return e===this.currentVersionId},onClickListItem:function(e,t){this.$emit("update:currentVersionId",e),this.$emit("update:currentVersionName",t),this.$emit("clickLeftVersionListItem")}}},Be=Ne,Fe=(a("c1d3"),Object(m.a)(Be,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-version-list",class:{"is-empty":e.emptyImageVisible}},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.scrollLoad,expression:"scrollLoad"}],staticClass:"left-version-list__list",attrs:{"infinite-scroll-disabled":e.computeInfiniteScrollDisabled,"infinite-scroll-immediate":!1}},e._l(e.list,(function(t){var n=t.id,r=t.version;return a("li",{key:n,ref:"listItem",refInFor:!0,staticClass:"list__item",class:{"is-active":e.judgeListItemIsActiveClassName(n)},on:{click:function(t){return e.onClickListItem(n,r)}}},[e._v(" "+e._s(r)+" ")])})),0),e.loadingTextVisible?a("p",{staticClass:"left-version-list__loading-text"},[e._v(" 加载中... ")]):e._e(),e.computeNoMoreVisible?a("p",{staticClass:"left-version-list__no-more-text"},[e._v(" 没有更多了 ")]):e._e()])}),[],!1,null,"15de8e44",null)),Ve=Fe.exports,Ee={name:"HeaderDocument",mixins:[A.a],props:{currentVersionName:{type:String,required:!0}},methods:{onClickRecoverButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentVersionName,a="确定要恢复到 ".concat(t," 的版本吗？"),"恢复文档","warning","确定恢复",r={type:"warning",confirmButtonText:"确定恢复"},e.next=8,this.$confirm(a,"恢复文档",r).then((function(){i.$emit("recoverDocument")})).catch((function(){}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Re=Ee,ze=(a("cdc8"),Object(m.a)(Re,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-document"},[a("p",{staticClass:"header-document__title"},[e._v("版本信息")]),a("el-button",{attrs:{clstag:e.clstag("OpenApi_1671105827529|2",""),main:!0},on:{click:e.onClickRecoverButton}},[e._v("恢 复")])],1)}),[],!1,null,"16eee4d1",null)),$e=ze.exports,Ue={name:"FormDocument",props:{form:{type:Object,required:!0},categoryList:{type:Array,required:!0}},data:function(){return{formParagraphList:[{label:"发布人",prop:"publisher"},{label:"对外接口名称",prop:"apiName"},{label:"对外接口描述",prop:"apiRemark",className:"pre-wrap"},{label:"所属分类",prop:"categoryCode"}]}},filters:{formatParagraphContentClassName:function(e){return e?"paragraph__content pre-wrap":"paragraph__content"}},methods:{formatParagraphContentText:function(e){return(this.categoryList.find((function(t){return t.code===e}))||{}).name||e}}},Me=Ue,qe=(a("f4ba"),Object(m.a)(Me,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"form-document",attrs:{model:e.form,"label-width":"80px"}},e._l(e.formParagraphList,(function(t){var n=t.label,r=t.prop,i=t.className;return a("div",{key:r,staticClass:"form-document__paragraph"},[a("p",{staticClass:"paragraph__label"},[e._v(e._s(n))]),a("p",{class:e._f("formatParagraphContentClassName")(i)},[e._v(" "+e._s(e.formatParagraphContentText(e.form[r]))+" ")])])})),0)}),[],!1,null,"32a48c7e",null)),He=qe.exports,Ke={name:"TableDocument",props:{title:{type:String,default:""},tableData:{type:Array,default:function(){return[]}},tableColumnList:{type:Array,required:!0}},filters:{formatTableColumnRequiredText:function(e){return(new Map).set("0","否").set("1","是").set("2","条件").get(e)||""}},methods:{judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},formatTableRowClassName:function(e){var t=e.row.visible;return(new Map).set(0,"hidden-row").set(1,"").get(t)||""}}},Ge=Ke,Qe=(a("34e6"),Object(m.a)(Ge,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"table-document"},[a("p",{staticClass:"table-document__title"},[e._v(e._s(e.title))]),a("el-table",{staticClass:"table-document__table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.formatTableRowClassName,"hide-empty-img":!0,stripe:!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width,o=t.showOverflowTooltip;return a("el-table-column",{key:n,attrs:{label:n,prop:r,width:i,"show-overflow-tooltip":o},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[["required"].includes(i)?[a("span",[e._v(e._s(e._f("formatTableColumnRequiredText")(n[i])))])]:"描述"===o?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                    width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}},[e._v(" "+e._s(n[i])+" ")])]},proxy:!0}],null,!0)},[a("div",{staticClass:"remark-text",domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:[a("span",[e._v(e._s(n[i]))])]]}}],null,!0)})})),1)],1)}),[],!1,null,"86034b36",null)),We=Qe.exports,Je={name:"ExampleDocument",components:{ExamplePacket:ye},props:{title:{type:String,default:""},tabVisible:{type:Boolean,default:!1},demo:{type:String,default:""},tabList:{type:Array,default:function(){return[]}}}},Xe=Je,Ze=(a("f252"),Object(m.a)(Xe,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"example-document"},[a("p",{staticClass:"example-document__title"},[e._v(e._s(e.title))]),e.tabVisible?a("ExamplePacket",{attrs:{editable:!1,tabList:e.tabList,placeholder:"平台建议示例中仅包含开发者必须要关注的字段,以便提升开发者的开发效率"}}):a("el-input",{attrs:{autosize:{minRows:10,maxRows:35},disabled:!0,type:"textarea",placeholder:"平台建议示例中仅包含开发者必传的字段,以便提升开发者的开发效率"},model:{value:e.demo,callback:function(t){e.demo=t},expression:"demo"}})],1)}),[],!1,null,"64b2315a",null)),Ye=Ze.exports,et={name:"RightDocument",components:{HeaderDocument:$e,FormDocument:He,TableDocument:We,ExampleDocument:Ye},props:{emptyImageVisible:{type:Boolean,required:!0},currentVersionName:{type:String,required:!0},form:{type:Object,required:!0},categoryList:{type:Array,required:!0},requestParamsTableData:{type:Array,required:!0},responseParamsTableData:{type:Array,required:!0},errorCodesTableData:{type:Array,required:!0},requestDemo:{type:Array,default:function(){return[]}},responseDemo:{type:Array,default:function(){return[]}},exceptionDemo:{type:Array,default:function(){return[]}}},data:function(){return{inParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"25%",showOverflowTooltip:!0},{label:"是否必填",prop:"required",minWidth:"15%"},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],outParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"30%",showOverflowTooltip:!0},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],errorCodesTableColumnList:[{label:"错误码",prop:"errorCode",minWidth:"35%"},{label:"错误消息",prop:"errorMsg",minWidth:"60%",showOverflowTooltip:!0},{label:"处理建议",prop:"prescription",minWidth:"60%",showOverflowTooltip:!0}]}},computed:{computeExceptionDemo:function(){var e=this.exceptionDemo;return(Object(L.a)(e,1)[0]||{}).content||""}}},tt=et,at=(a("1cee"),Object(m.a)(tt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"right-document"},[e.emptyImageVisible?a("section",{staticClass:"right-document__empty-image"},[a("p",{staticClass:"empty-image__text"},[e._v("暂无版本记录")])]):a("div",{staticClass:"right-document__content"},[a("HeaderDocument",{attrs:{currentVersionName:e.currentVersionName},on:{recoverDocument:function(){return e.$emit("recoverDocument")}}}),a("FormDocument",{attrs:{form:e.form,categoryList:e.categoryList}}),a("TableDocument",{attrs:{tableData:e.requestParamsTableData,tableColumnList:e.inParamsTableColumnList,title:"请求参数"}}),a("TableDocument",{attrs:{tableData:e.responseParamsTableData,tableColumnList:e.outParamsTableColumnList,title:"响应参数"}}),a("ExampleDocument",{attrs:{title:"请求报文示例",tabVisible:!0,tabList:e.requestDemo}}),a("ExampleDocument",{attrs:{title:"响应报文示例",tabVisible:!0,tabList:e.responseDemo}}),a("ExampleDocument",{attrs:{title:"异常示例",demo:e.computeExceptionDemo}}),a("TableDocument",{attrs:{tableData:e.errorCodesTableData,tableColumnList:e.errorCodesTableColumnList,title:"错误码"}})],1)])}),[],!1,null,"24eceeea",null)),nt=at.exports,rt=a("4128"),it={name:"DialogViewDocumentHistoricalVersions",components:{LeftVersionList:Ve,RightDocument:nt},props:{dialogVisible:{type:Boolean,required:!0},apiId:{type:Number,required:!0},categoryList:{type:Array,required:!0}},data:function(){return{dialogLoading:!1,pageNum:1,pageSize:30,total:0,emptyImageVisible:!0,leftVersionList:[],currentVersionId:0,currentVersionName:"",loadingTextVisible:!1,scrollLoadTime:0,rightDocumentFormData:{publisher:"",apiName:"",apiRemark:"",categoryCode:""},requestParamsTableData:[],responseParamsTableData:[],errorCodesTableData:[],requestDemo:[],responseDemo:[],exceptionDemo:[]}},methods:{api$apiId:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.apiId,a=this.pageNum,r=this.pageSize,i={pageNum:a,pageSize:r},e.next=4,rt.a.api$apiId(t,i).catch((function(e){throw new Error("api".concat(t,", ").concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),apiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentVersionId,a=t,e.next=4,rt.a.apiDetails$id(a).catch((function(e){throw new Error("apiDetails".concat(a,", ").concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleApi$apiId:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api$apiId().catch((function(e){throw new Error("handleApi$apiId, ".concat(e))}));case 2:t=e.sent,a=t.data,r=a.total,i=a.list,this.total=r||0,this.emptyImageVisible=Boolean(!this.total),this.leftVersionList=this.leftVersionList.concat(Array.isArray(i)?i:[]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleApiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.apiDetails$id().catch((function(e){throw new Error("handleApiDetails$id, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.publisher,i=a.apiName,o=a.apiRemark,s=a.categoryCode,c=a.inParams,l=a.outParams,u=a.errorCodes,p=a.requestDemo,d=a.reponseDemo,m=a.exceptionDemo,this.rightDocumentFormData.publisher=r||"",this.rightDocumentFormData.apiName=i||"",this.rightDocumentFormData.apiRemark=o||"",this.rightDocumentFormData.categoryCode=s||"",this.requestParamsTableData=Array.isArray(c)?c:[],this.requestParamsTableData.length>0&&this.setSelectVal(this.requestParamsTableData),this.responseParamsTableData=Array.isArray(l)?l:[],this.responseParamsTableData.length>0&&this.setSelectVal(this.responseParamsTableData),this.errorCodesTableData=Array.isArray(u)?u:[],this.requestDemo=Array.isArray(p)?p:[],this.responseDemo=Array.isArray(d)?d:[],this.exceptionDemo=Array.isArray(m)?m:[],this.dialogLoading=!1;case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},onOpenDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.handleApi$apiId().catch((function(e){throw new Error("onOpenDialog, ".concat(e))}));case 3:return e.next=5,this.$nextTick();case 5:this.leftVersionList.length>0&&(t=Object(L.a)(this.$refs.leftVersionList.$refs.listItem,1),t[0].click()),this.dialogLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onCloseDialog:function(){this.$emit("update:dialogVisible",!1)},onClosedDialog:function(){this.emptyImageVisible=!0,this.pageNum=1,this.total=0,this.leftVersionList=[],this.currentVersionId=0,this.currentVersionName="",this.loadingTextVisible=!1,this.scrollLoadTime=0,this.rightDocumentFormData={publisher:"",apiName:"",apiRemark:"",categoryCode:""},this.requestParamsTableData=[],this.responseParamsTableData=[],this.errorCodesTableData=[],this.requestDemo=[],this.responseDemo=[],this.exceptionDemo=[]},onScrollLoad:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,i,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scrollLoadTime,a=this.total,i=this.pageSize,!(t<1)){e.next=4;break}return this.scrollLoadTime+=1,e.abrupt("return");case 4:if(this.loadingTextVisible=!0,!(a<i)){e.next=8;break}return this.loadingTextVisible=!1,e.abrupt("return");case 8:setTimeout(Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.pageNum+=1,e.next=3,o.handleApi$apiId().catch((function(e){throw new Error("onScrollLoad, ".concat(e))}));case 3:o.loadingTextVisible=!1;case 4:case"end":return e.stop()}}),e)}))),1e3);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickLeftVersionListItem:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleApiDetails$id().catch((function(e){throw new Error("onClickLeftVersionListItem, ".concat(e))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onRecoverDocument:function(){var e=this.currentVersionId;this.$emit("recoverDocument",e)}}},ot=it,st=(a("76fd"),Object(m.a)(ot,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-view-document-historical-versions",attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,title:"查看文档历史版本",top:"5vh",width:"1200px"},on:{open:e.onOpenDialog,close:e.onCloseDialog,closed:e.onClosedDialog}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"dialog-view-document-historical-versions__content"},[a("LeftVersionList",{ref:"leftVersionList",attrs:{emptyImageVisible:e.emptyImageVisible,list:e.leftVersionList,pageNum:e.pageNum,total:e.total,currentVersionId:e.currentVersionId,currentVersionName:e.currentVersionName,loadingTextVisible:e.loadingTextVisible},on:{"update:pageNum":function(t){e.pageNum=t},"update:page-num":function(t){e.pageNum=t},"update:currentVersionId":function(t){e.currentVersionId=t},"update:current-version-id":function(t){e.currentVersionId=t},"update:currentVersionName":function(t){e.currentVersionName=t},"update:current-version-name":function(t){e.currentVersionName=t},scrollLoad:e.onScrollLoad,clickLeftVersionListItem:e.onClickLeftVersionListItem}}),a("RightDocument",{attrs:{emptyImageVisible:e.emptyImageVisible,currentVersionName:e.currentVersionName,form:e.rightDocumentFormData,categoryList:e.categoryList,requestParamsTableData:e.requestParamsTableData,responseParamsTableData:e.responseParamsTableData,errorCodesTableData:e.errorCodesTableData,requestDemo:e.requestDemo,responseDemo:e.responseDemo,exceptionDemo:e.exceptionDemo},on:{recoverDocument:e.onRecoverDocument}})],1)])}),[],!1,null,"5fcd9607",null)),ct=st.exports,lt={name:"ExternalDocument",mixins:[A.a],components:{DocumentHeader:re,TreeTable:ue,ExamplePacket:ye,StickyWrapper:Ce.a,ClassificationDialog:Pe,DialogViewDocumentHistoricalVersions:ct},props:{activeView:{type:String,required:!0},currentTableRowData:{type:Object,default:function(){return{}}}},data:function(){return{unitId:parseInt(this.$route.params.id),externalDocumentLoading:!0,editable:!1,apiCode:"",outOfDate:!1,metadataRenew:!1,getBizApiPreDetailsResponse:{},inParams:[],outParams:[],errorCodes:[],exceptionDemo:"",exceptionTabList:[],requestTabList:[],responseTabList:[],updatePolicy:3,visible:1,mapChangeVisible:new Map,mapVisible:new Map,showClassificationDialog:!1,manageCategoryData:[],manageCategoryProp:[],categoryName:"",saveButtonLoading:!1,saveButtonDebounceTimer:null,documentTitleForm:{apiName:"",apiRemark:"",categoryCode:""},documentTitleFormRules:{apiName:[{required:!0,message:"接口名称不能为空",trigger:"blur"},{min:2,max:255,message:"长度在 2 到 20 个字符",trigger:"blur"}],apiRemark:[{required:!0,message:"接口描述不能为空",trigger:"blur"},{min:2,max:500,message:"长度在 2 到 500 个字符",trigger:"change"}]},columnsErrorCode:[{prop:"errorCode",label:"错误码",modify:!0,min_width:"35%"},{prop:"errorMsg",label:"错误消息",modify:!0,min_width:"60%"}],columnsInParams:[{prop:"name",label:"名称",min_width:"30%"},{prop:"oldType",label:"类型",min_width:"25%"},{prop:"required",label:"是否必填",min_width:"15%",modify:!0,type:"select"},{prop:"exampleValue",label:"示例",min_width:"25%",modify:!0,type:"input"},{prop:"remark",label:"描述",min_width:"25%",modify:!0,type:"textarea"},{prop:"operate",label:"是否对外显示",min_width:"20%",modify:!0,type:"button"}],columnsOutParams:[{prop:"name",label:"名称",min_width:"30%"},{prop:"oldType",label:"类型",min_width:"30%"},{prop:"exampleValue",label:"示例",min_width:"25%",modify:!0,type:"input"},{prop:"remark",label:"描述",min_width:"25%",modify:!0,type:"textarea"},{prop:"operate",label:"是否对外显示",min_width:"20%",modify:!0,type:"button"}],viewDocumentHistoricalVersionsDialogVisible:!1}},watch:{exceptionDemo:{handler:function(e){var t=Object(L.a)(this.exceptionTabList,1)[0],a=e;this.exceptionTabList.splice(0,1,Object(I.a)(Object(I.a)({},t||{}),{},{content:a}))},immediate:!0}},methods:{getApiCategory:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={unitId:t},e.next=4,y.a.getApiCategory(a).catch((function(e){throw new Error("getApiCategory, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.visible,r=this.currentTableRowData.id,i={unitId:t,id:r,visible:a},e.next=5,y.a.getBizApiPreDetails(i).catch((function(e){throw new Error("getBizApiPreDetails, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),generateBizApiPreDetailsPreview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.visible,r=this.updatePolicy,i=this.currentTableRowData.id,o={unitId:t,id:i,visible:a,updatePolicy:r},e.next=5,y.a.generateBizApiPreDetailsPreview(o).catch((function(e){throw new Error("generateBizApiPreDetailsPreview, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getBizApiPreDetailsResponse,a=this.inParams,r=this.outParams,i=this.errorCodes,o=this.metadataRenew,s=this.updatePolicy,c=this.exceptionTabList,l=this.requestTabList,u=this.responseTabList,l.forEach((function(e){"模板示例"===e.tag&&delete e.tooltipInfo})),u.forEach((function(e){"模板示例"===e.tag&&delete e.tooltipInfo})),p=this.documentTitleForm,d=p.apiName,m=p.apiRemark,f=p.categoryCode,h=Object(I.a)(Object(I.a)({},t),{},{inParams:a,outParams:r,errorCodes:i,apiName:d,apiRemark:m,categoryCode:f,metadataRenew:o,updatePolicy:s,reponseDemo:u,requestDemo:l,exceptionDemo:c}),e.next=7,y.a.saveBizApiPreDetails(h).catch((function(e){throw new Error("saveBizApiPreDetails, ".concat(e))}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),apiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.a.apiDetails$id(t).catch((function(e){throw new Error("apiDetails".concat(t,", ").concat(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleGetApiCategory:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiCategory().catch((function(e){throw new Error("handleGetApiCategory, ".concat(e))}));case 2:t=e.sent,a=t.data,this.manageCategoryData=Array.isArray(a)?a.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{editNameState:!1,editCodeState:!1})})):[],this.manageCategoryProp=JSON.parse(JSON.stringify(this.manageCategoryData));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h,b,g,v,w,y;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalDocumentLoading=!0,e.next=3,this.getBizApiPreDetails().catch((function(e){throw new Error("handleGetBizApiPreDetails, ".concat(e))}));case 3:t=e.sent,a=t.data,r=t.data,i=r.apiCode,o=r.outOfDate,s=r.inParams,c=r.outParams,l=r.apiName,u=r.apiRemark,p=r.categoryCode,d=r.errorCodes,m=r.requestDemo,f=r.reponseDemo,h=r.exceptionDemo,this.getBizApiPreDetailsResponse=a||{},this.apiCode=i||"",this.outOfDate=o||!1,this.mapChangeVisible=new Map,this.inParams=Array.isArray(s)?s:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(c)?c:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.documentTitleForm.apiName=l||"",this.documentTitleForm.apiRemark=u||"",this.documentTitleForm.categoryCode=p||"",b=this.manageCategoryData.find((function(e){return e.code===p})),g=b.name,this.categoryName=g||"",this.errorCodes=Array.isArray(d)?d:[],this.externalDocumentLoading=!1,this.requestTabList=(Array.isArray(m)?m:[]).map((function(e){return"模板示例"===e.tag&&(e.tooltipInfo={content:"模板报文示例是系统根据API文档中非隐藏参数及参数的示例值生成的，用于帮助外部客户了解API的结构定义。"}),e})),this.responseTabList=(Array.isArray(f)?f:[]).map((function(e){return"模板示例"===e.tag&&(e.tooltipInfo={content:"模板报文示例是系统根据API文档中非隐藏参数及参数的示例值生成的，用于帮助外部客户了解API的结构定义。"}),e})),this.exceptionTabList=Array.isArray(h)?h:[],v=Object(L.a)(this.exceptionTabList,1),w=v[0],y=(w||{}).content,this.exceptionDemo=y||"";case 38:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGenerateBizApiPreDetailsPreview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalDocumentLoading=!0,e.next=3,this.generateBizApiPreDetailsPreview().catch((function(e){throw new Error("handleGenerateBizApiPreDetailsPreview, ".concat(e))}));case 3:t=e.sent,a=t.data,r=t.data,i=r.apiCode,o=r.outOfDate,s=r.inParams,c=r.outParams,l=r.apiName,u=r.apiRemark,p=r.categoryCode,d=r.errorCodes,this.getBizApiPreDetailsResponse=a||{},this.apiCode=i||"",this.outOfDate=o||!1,this.mapChangeVisible=new Map,this.inParams=Array.isArray(s)?s:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(c)?c:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.documentTitleForm.apiName=l||"",this.documentTitleForm.apiRemark=u||"",this.documentTitleForm.categoryCode=p||"",m=this.manageCategoryData.find((function(e){return e.code===p})),f=m.name,this.categoryName=f||"",this.errorCodes=Array.isArray(d)?d:[],this.externalDocumentLoading=!1,this.$message.success("文档数据更新成功，保存文档并发布后生效。");case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSaveBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveBizApiPreDetails().catch((function(e){throw new Error("handleSaveBizApiPreDetails, ".concat(e))}));case 2:0===this.mapChangeVisible.size?this.$message.success("保存成功!"):this.$message.success("保存成功,接口文档有更新，请到【方案管理-SDK信息】中同步更新SDK");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleApiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i,o,s,c,l,u,p,d,m,f,h,b,g,v,w,y,C;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalDocumentLoading=!0,e.next=3,this.apiDetails$id(t).catch((function(e){throw new Error("handleApiDetails$id, ".concat(e))}));case 3:a=e.sent,r=a.data,i=a.data,o=i.apiCode,s=i.outOfDate,c=i.inParams,l=i.outParams,u=i.apiName,p=i.apiRemark,d=i.categoryCode,m=i.errorCodes,f=i.requestDemo,h=i.reponseDemo,b=i.exceptionDemo,this.getBizApiPreDetailsResponse=r||{},this.apiCode=o||"",this.outOfDate=s||!1,this.mapChangeVisible=new Map,this.inParams=Array.isArray(c)?c:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(l)?l:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.documentTitleForm.apiName=u||"",this.documentTitleForm.apiRemark=p||"",this.documentTitleForm.categoryCode=d||"",g=this.manageCategoryData.find((function(e){return e.code===d})),v=g.name,this.categoryName=v||"",this.errorCodes=Array.isArray(m)?m:[],this.requestTabList=(Array.isArray(f)?f:[]).map((function(e){return"模板示例"===e.tag&&(e.tooltipInfo={content:"模板报文示例是系统根据API文档中非隐藏参数及参数的示例值生成的，用于帮助外部客户了解API的结构定义。"}),e})),this.responseTabList=(Array.isArray(h)?h:[]).map((function(e){return"模板示例"===e.tag&&(e.tooltipInfo={content:"模板报文示例是系统根据API文档中非隐藏参数及参数的示例值生成的，用于帮助外部客户了解API的结构定义。"}),e})),this.exceptionTabList=Array.isArray(b)?b:[],w=Object(L.a)(this.exceptionTabList,1),y=w[0],C=(y||{}).content,this.exceptionDemo=C||"",this.externalDocumentLoading=!1,this.$message.success("文档数据更新成功，保存文档并发布后生效。");case 39:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children),this.mapVisible.set(a.id,a.visible)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},changeUpdateStatus:function(e){this.mapVisible.get(e.id)!=e.visible?this.mapChangeVisible.set(e.id,e.visible):this.mapChangeVisible.delete(e.id)},onBack:function(){this.$emit("update:activeView","interfaceList")},onUpdateNow:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.visible=2,this.editable=!0,e.next=4,this.$nextTick();case 4:return e.next=6,this.handleGenerateBizApiPreDetailsPreview().catch((function(e){throw new Error("onUpdateNow, ".concat(e))}));case 6:this.metadataRenew=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickCancelButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.visible=1,this.editable=!1,e.next=4,this.handleGetBizApiPreDetails().catch((function(e){throw new Error("onClickCancelButton, ".concat(e))}));case 4:this.metadataRenew=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),afterSaveCheck:function(){var e=this;return new Promise(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o,s,c,l,u;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.currentTableRowData&&e.currentTableRowData.id,t.next=3,y.a.checkRisk(r).catch((function(e){}));case 3:i=t.sent,o=i.data,c=(s=o||{}).risk,l=s.paramList,c&&(u="",(l||[]).forEach((function(e,t){u+=0===t&&"".concat(e)||"，".concat(e)})),e.$alert("当前接口配置的参数映射值【".concat(u,"】已变更，为不影响运行时调用，请前往「接口列表-编辑-设置参数映射」调整参数！"),"接口参数替换变更提醒",{confirmButtonText:"我知道了",callback:function(e){a(c)}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onClickSaveButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.saveButtonDebounceTimer),this.saveButtonDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.documentTitleFormRef.validate(function(){var e=Object(r.a)(Object(n.a)().mark((function e(a){var r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return t.saveButtonLoading=!0,e.next=4,t.handleSaveBizApiPreDetails().catch((function(e){throw t.saveButtonLoading=!1,new Error("onClickSaveButton, ".concat(e))}));case 4:return t.saveButtonLoading=!1,e.next=7,t.onClickCancelButton().catch((function(e){throw new Error("onClickSaveButton, ".concat(e))}));case 7:return t.$emit("updateDetailHeaderInfo"),e.next=10,t.afterSaveCheck();case 10:e.next=24;break;case 12:if(t.saveButtonLoading=!1,r=t.documentTitleForm.apiName,i=t.documentTitleForm.apiRemark,null!=r&&""!==r.toString().trim()||null!=i&&""!==i.toString().trim()){e.next=18;break}return t.$message.error("【接口名称】、【接口描述】均不能为空"),e.abrupt("return");case 18:if(null!=r&&""!==r.toString().trim()){e.next=21;break}return t.$message.error("【接口名称】不能为空"),e.abrupt("return");case 21:if(null!=i&&""!==i.toString().trim()){e.next=24;break}return t.$message.error("【接口描述】不能为空"),e.abrupt("return");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),300);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickViewDocumentHistoricalVersionsButton:function(){this.viewDocumentHistoricalVersionsDialogVisible=!0},onClickEditButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editable=!0,this.visible=2,e.next=4,this.handleGetBizApiPreDetails().catch((function(e){throw new Error("onClickEditButton, ".concat(e))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onRecoverDocument:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.viewDocumentHistoricalVersionsDialogVisible=!1,this.visible=2,this.editable=!0,e.next=5,this.$nextTick();case 5:return e.next=7,this.handleApiDetails$id(t).catch((function(e){throw new Error("onRecoverDocument, ".concat(e))}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleGetApiCategory().catch((function(e){throw new Error("created, ".concat(e))}));case 2:return e.next=4,this.handleGetBizApiPreDetails().catch((function(e){throw new Error("created, ".concat(e))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},ut=lt,pt=(a("ab78"),Object(m.a)(ut,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.externalDocumentLoading,expression:"externalDocumentLoading"}],staticClass:"external-document"},[a("DocumentHeader",{attrs:{id:e.currentTableRowData.id,apiCode:e.apiCode,outOfDate:e.outOfDate,updatePolicy:e.updatePolicy},on:{"update:updatePolicy":function(t){e.updatePolicy=t},"update:update-policy":function(t){e.updatePolicy=t},back:e.onBack,updateNow:e.onUpdateNow}}),a("el-form",{ref:"documentTitleFormRef",staticClass:"api-wrapper",attrs:{model:e.documentTitleForm,rules:e.documentTitleFormRules,"label-width":"120px"}},[e.editable?a("span",[a("el-form-item",{attrs:{prop:"apiName",label:"对外接口名称"}},[a("el-input",{staticClass:"input-title",attrs:{placeholder:"请输入内容"},model:{value:e.documentTitleForm.apiName,callback:function(t){e.$set(e.documentTitleForm,"apiName","string"==typeof t?t.trim():t)},expression:"documentTitleForm.apiName"}})],1)],1):e._e(),e.editable?e._e():a("p",{staticClass:"api-desc"},[a("span",{staticClass:"method-content"},[e._v("对外接口名称")]),a("span",{staticClass:"api-desc-content"},[e._v(e._s(e.documentTitleForm.apiName))])]),e.editable?a("el-form-item",{attrs:{prop:"apiRemark",label:"对外接口描述"}},[a("el-input",{staticClass:"input-title",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.documentTitleForm.apiRemark,callback:function(t){e.$set(e.documentTitleForm,"apiRemark",t)},expression:"documentTitleForm.apiRemark"}})],1):e._e(),e.editable?e._e():a("div",{staticClass:"api-desc"},[a("span",{staticClass:"method-content"},[e._v("对外接口描述")]),a("p",{staticClass:"api-desc-content"},[e._v(e._s(e.documentTitleForm.apiRemark))])]),e.editable?a("el-form-item",{attrs:{prop:"categoryCode",label:"所属分类"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属分类 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建接口分类，便于使用方在API文档中根据分类快速找到目标API。",placement:"top"}},[a("i",{staticClass:"el-icon-help"})])],1),a("el-select",{attrs:{placeholder:"请选择所属分类"},model:{value:e.documentTitleForm.categoryCode,callback:function(t){e.$set(e.documentTitleForm,"categoryCode",t)},expression:"documentTitleForm.categoryCode"}},e._l(e.manageCategoryData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1),a("el-button",{staticClass:"management-classification",attrs:{type:"text"},on:{click:function(t){e.showClassificationDialog=!0}}},[e._v("管理分类")])],1):e._e(),e.editable?e._e():a("p",{staticClass:"api-desc"},[a("span",{staticClass:"method-content"},[e._v("所属分类")]),a("span",{staticClass:"api-desc-content"},[e._v(e._s(e.categoryName))])])],1),a("div",{ref:"docContent",staticClass:"document-content"},[e._m(0),a("TreeTable",{attrs:{tableData:e.inParams,treeNodeList:e.inParams,tableColumnInfo:e.columnsInParams,editer:!e.editable},on:{"update:treeNodeList":function(t){e.inParams=t},"update:tree-node-list":function(t){e.inParams=t}}}),a("h4",{staticClass:"unit-sub-title"},[e._v("响应参数")]),a("TreeTable",{attrs:{tableData:e.outParams,treeNodeList:e.outParams,tableColumnInfo:e.columnsOutParams,editer:!e.editable},on:{"update:treeNodeList":function(t){e.outParams=t},"update:tree-node-list":function(t){e.outParams=t}}}),a("h4",{staticClass:"unit-sub-title"},[e._v(" 请求报文示例"),e.editable?a("span",{staticClass:"unit-sub-title-title"},[e._v("如系统自动生成的【模板示例】报文无法满足外部客户可调用的要求，请自行新增可调用的报文示例")]):e._e()]),a("ExamplePacket",{attrs:{editable:e.editable,tabList:e.requestTabList,placeholder:"平台建议示例中仅包含开发者必传的字段,以便提升开发者的开发效率"},on:{"update:tabList":function(t){e.requestTabList=t},"update:tab-list":function(t){e.requestTabList=t}}}),a("h4",{staticClass:"unit-sub-title",staticStyle:{"margin-top":"30px"}},[e._v(" 响应报文示例"),e.editable?a("span",{staticClass:"unit-sub-title-title"},[e._v("如系统自动生成的【模板示例】报文无法满足外部客户可调用的要求，请自行新增可调用的报文示例")]):e._e()]),a("ExamplePacket",{attrs:{editable:e.editable,tabList:e.responseTabList,placeholder:"平台建议示例中仅包含开发者必须要关注的字段,以便提升开发者的开发效率"},on:{"update:tabList":function(t){e.responseTabList=t},"update:tab-list":function(t){e.responseTabList=t}}}),a("h4",{staticClass:"unit-sub-title",staticStyle:{"margin-top":"30px"}},[e._v(" 异常示例"),e.editable?a("span",{staticClass:"unit-sub-title-title"},[e._v("可根据需求自行录入报文示例,如不录入,前台的API文档将不展示该模块")]):e._e()]),a("el-input",{attrs:{autosize:{minRows:10,maxRows:35},disabled:!e.editable,type:"textarea",placeholder:"平台建议示例中仅包含开发者必须要关注的字段,以便提升开发者的开发效率"},model:{value:e.exceptionDemo,callback:function(t){e.exceptionDemo=t},expression:"exceptionDemo"}}),a("h4",{staticClass:"unit-sub-title",staticStyle:{"margin-top":"30px"}},[e._v("错误码")]),a("TreeTable",{attrs:{tableData:e.errorCodes,tableColumnInfo:e.columnsErrorCode,editer:!e.editable},scopedSlots:e._u([{key:"customColumn",fn:function(){return[a("el-table-column",{staticStyle:{margin:"0px",padding:"0px"},attrs:{prop:"errorCode",label:"错误码","min-width":"35%","show-tooltip-when-overflow":!e.editable},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.errorCode))])]}}])}),a("el-table-column",{staticStyle:{margin:"0px",padding:"0px"},attrs:{prop:"errorMsg",label:"错误消息","min-width":"60%","show-tooltip-when-overflow":!e.editable},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.errorMsg))])]}}])}),a("el-table-column",{staticStyle:{margin:"0px",padding:"0px"},attrs:{prop:"prescription",label:"处理建议","min-width":"60%","show-tooltip-when-overflow":!e.editable},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.prescription))])]}}])})]},proxy:!0}])})],1),a("StickyWrapper",[e.editable?a("div",{staticClass:"sticky-wrapper__button-wrapper"},[a("el-button",{on:{click:e.onClickCancelButton}},[e._v("取消")]),a("el-button",{attrs:{loading:e.saveButtonLoading,type:"primary"},on:{click:e.onClickSaveButton}},[e._v("保存")])],1):[a("el-button",{attrs:{clstag:e.clstag("OpenApi_1671105827529|1",""),type:"text"},on:{click:e.onClickViewDocumentHistoricalVersionsButton}},[e._v("查看文档历史版本")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onClickEditButton}},[e._v("编辑")])]],2),a("ClassificationDialog",{attrs:{showClassificationDialog:e.showClassificationDialog,tableData:e.manageCategoryProp,queryTableList:e.handleGetApiCategory,unitId:e.unitId},on:{"update:showClassificationDialog":function(t){e.showClassificationDialog=t},"update:show-classification-dialog":function(t){e.showClassificationDialog=t},"update:tableData":function(t){e.manageCategoryProp=t},"update:table-data":function(t){e.manageCategoryProp=t}}}),a("DialogViewDocumentHistoricalVersions",{attrs:{dialogVisible:e.viewDocumentHistoricalVersionsDialogVisible,apiId:e.currentTableRowData.id,categoryList:e.manageCategoryData},on:{"update:dialogVisible":function(t){e.viewDocumentHistoricalVersionsDialogVisible=t},"update:dialog-visible":function(t){e.viewDocumentHistoricalVersionsDialogVisible=t},recoverDocument:e.onRecoverDocument}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inparams-class"},[a("span",{staticClass:"unit-inparams-title"},[e._v("请求参数")])])}],!1,null,"21d2411f",null)),dt=pt.exports,mt=a("fd48"),ft={name:"HttpAddOrEditInterface",components:{Steps:v.a},props:{interfaceInfo:{type:Object,default:function(){return{}}}},data:function(){return{unitId:parseInt(this.$route.params.id),active:0,titleList:["选择接口","设置接口安全级别","设置公网URL","设置参数映射","完成"],debounceTimer:null,nextStepLoading:!1,interfaceFormData:{url:"",code:"",cnName:"",shadowboxClusterId:null,clusterId:null,shadowboxClusterName:"",clusterName:""},interfaceFormRules:{url:[{required:!0,message:"url不能为空",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符"},{pattern:/^\//,message:"格式不正确,以“/”开头！"},{validator:function(e,t,a){t.indexOf(":")>0||t.indexOf("：")>0?a(new Error("url不能包含“：”")):a()}}],code:[{required:!0,message:"请选择接口所属分组"}]},urlFormRules:{apiUrl:[{required:!0,message:"url不能为空",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符"},{pattern:/^\//,message:"请以“/”开头"},{pattern:/^[^:：]*$/,message:"url不能包含中英文冒号"}],apiResTimeout:[{required:!0,message:"接口响应超时时间不能为空",trigger:"blur"},{type:"number",message:"仅支持纯数字且数字需在1-30000范围之内",transform:function(e){return""!==e?!(e<1||e>3e4)&&e:null}}]},urlList:[],groupList:[],baseEnv:window.env.baseEnv,methodId:0,apiName:"",apiRemark:"",apiType:"",securityLevelFormData:{dataLevel:0,labelList:[]},securityLevelFormRules:{dataLevel:[{required:!0,message:"请选择数据级别"}],labelList:[{type:"array",required:!0,message:"请选择敏感标签"}]},dataLevelOptionList:[{value:0,label:"公开数据（L1）"},{value:1,label:"秘密数据（L2）"},{value:2,label:"机密数据（L3）"},{value:3,label:"绝密数据（L4）"}],labelListProps:{multiple:!0,value:"id",label:"labelName"},labelListOptionList:[],urlFormData:{apiUrl:"",apiResTimeout:5e3},bizType:2,mapFormData:{httpConfig:[],pin:!1,tenementCode:!1}}},filters:{formatPageHeaderContentAndGoOnButtonText:function(e){return e?"编辑接口":"添加接口"},formatFormTitleH1Text:function(e,t){return["从API仓库选择接口","设置接口的数据安全级别","设置公网URL","设置参数映射",t?"编辑成功":"添加成功"][e]||""},formatFormTitleTipText:function(e,t){return["从API仓库中选择对接方案的相关接口，这些接口将会被开放到外网。开放其他团队的接口前，请与接口研发负责人确认是否可开放。","根据安全部要求，接口需完成数据安全级别配置才可发布到外网。如何配置可参考","每个接口在公网中都有唯一URL，例如api.jdwl.com/order/updateOrder，其中api.jdwl.com是所有接口的公共前缀，您无需填写。","若你的业务需要pin和tenantCode，为防止在接口调用的过程中黑客篡改调用方传入的tenantCode和京东pin，可开启参数映射功能。开启后将使用平台解析后的pin或tenantCode进行鉴权校验，保障业务安全。",t?"您可继续编辑接口":"您可继续添加接口"][e]||""},formatNextStepButtonText:function(e,t,a){return e<t.length-2?"下一步":a?"确认编辑":"确认添加"}},computed:{computeEditable:function(){return!!this.interfaceInfo.id},computeSelectInterfaceFormCodeOrCnNameProp:function(){return this.computeEditable?"cnName":"code"},computePreviousStepButtonVisible:function(){var e=this.active,t=this.titleList;return e>0&&e<t.length-1}},methods:{getBizUnitPreById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={id:t},e.next=5,u.a.bizunit.getBizUnitPreById(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryFuzzyUrlRelease:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{keyWords:t,sceneType:1}],e.next=3,mt.a.HttpApiService.queryFuzzyUrlRelease(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),queryReleaseDomainForUrl:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData.url,a=[{url:t}],e.next=4,mt.a.HttpApiService.queryReleaseDomainForUrl(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),findApiByCondition:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData,a=t.url,r=t.code,i=[{url:a,domainCode:r,sceneType:1}],e.next=5,mt.a.HttpApiService.findApiByCondition(i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),querySensitiveLabelForest:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.a.HttpApiService.querySensitiveLabelForest();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),saveInterface:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,p,d,m,f,h,b,g,v,w,y,C,D,k;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.interfaceInfo,r=this.methodId,i=a.id||void 0,2,o=this.apiName,s=this.apiRemark,c=this.apiType,o=o||void 0,s=s||void 0,c=c||void 0,l=this.interfaceFormData,p=l.url,d=l.code,m=l.shadowboxClusterId,f=l.clusterId,h=l.shadowboxClusterName,b=l.clusterName,g=this.securityLevelFormData.dataLevel,this.securityLevelFormData.labelList,v=this.$refs.securityLevelFormCascader.getCheckedNodes(!0).map((function(e){var t=e.path,a=e.pathLabels,n=t.join("/"),r=a.join("/");return{dataLevel:g,labelPath:n,labelName:r}})),w=this.urlFormData,y=w.apiUrl,C=w.apiResTimeout,D=this.mapFormData.httpConfig,k={unitId:t,id:i,type:2,methodId:r,apiName:o,apiRemark:s,apiType:c,url:p,code:d,shadowboxClusterId:m,clusterId:f,shadowboxClusterName:h,clusterName:b,dataLevel:g,labelList:v,apiUrl:y,apiResTimeout:C,httpConfig:D},e.next=16,u.a.bizapinterface.saveInterface(k);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getApiDomain:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.methodId,a=[{id:t}],e.next=5,mt.a.CloudDomainService.getApiDomain(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getInterfaceDetailById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceInfo.id,a={id:t},e.next=4,u.a.bizapinterface.getInterfaceDetailById(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickGoBackButton:function(){this.$emit("update:activeView","interfaceList")},handleSearchDockingSolutionType:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBizUnitPreById().catch((function(e){throw new Error("handleSearchDockingSolutionType getBizUnitPreById, ".concat(e))}));case 2:t=e.sent,a=t.data.type,this.bizType=a||2;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),remoteMethodSearchInterfaceUrl:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,this.queryFuzzyUrlRelease(t).catch((function(e){throw new Error("remoteMethodSearchInterfaceUrl queryFuzzyUrlRelease, ".concat(e))}));case 3:a=e.sent,r=a.data,this.urlList=r||[],e.next=9;break;case 8:this.urlList=[];case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleChangeInterfaceUrl:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.computeSelectInterfaceFormCodeOrCnNameProp,e.next=3,this.queryReleaseDomainForUrl().catch((function(e){throw new Error("handleChangeInterfaceUrl queryReleaseDomainForUrl, ".concat(e))}));case 3:a=e.sent,r=a.data,this.groupList=r||[],this.interfaceFormData[t]="",0,0,"","",Object.assign(this.interfaceFormData,{shadowboxClusterId:0,clusterId:0,shadowboxClusterName:"",clusterName:""});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleChangeInterfaceCode:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h,b,g,v,w,y,C;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiByCondition().catch((function(e){throw new Error("handleChangeInterfaceCode findApiByCondition, ".concat(e))}));case 2:t=e.sent,a=t.data,r=a.id,i=a.name,o=a.remark,s=a.categoryName,c=a.url,l=a.testClusterId,u=a.testClusterName,p=void 0===u?"":u,d=a.uatClusterId,m=a.uatClusterName,f=void 0===m?"":m,h=a.prodClusterId,b=a.prodClusterName,g=void 0===b?"":b,this.methodId=r,this.apiName=i,this.apiRemark=o,this.apiType=s,this.urlFormData.apiUrl=c,v=l,w=null,y=p,C="",{test:function(){},uat:function(){v=h,w=d,y=g,C=f},prod:function(){v=h,w=d,y=g,C=f}}[this.baseEnv](),Object.assign(this.interfaceFormData,{clusterId:v,shadowboxClusterId:w,clusterName:y,shadowboxClusterName:C});case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetLabelListOptionList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.querySensitiveLabelForest().catch((function(e){throw new Error("handleGetLabelList querySensitiveLabelForest, ".concat(e))}));case 2:t=e.sent,a=t.data,this.labelListOptionList=a||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickNextStepButton:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){var t=e.active,a=e.titleList;e.nextStepLoading=!0,e.$refs[["interfaceForm","securityLevelForm","urlForm","mapForm"][t]].validate(function(){var i=Object(r.a)(Object(n.a)().mark((function r(i){return Object(n.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i){n.next=9;break}if(t!==a.length-2){n.next=6;break}return e.handleGetHttpConfig(),n.next=5,e.saveInterface().catch((function(e){throw new Error("handleClickNextStepButton saveInterface, ".concat(e))}));case 5:e.$emit("updateDetailHeaderInfo");case 6:e.active+=1,n.next=10;break;case 9:return n.abrupt("return",!1);case 10:case"end":return n.stop()}}),r)})));return function(e){return i.apply(this,arguments)}}()),e.nextStepLoading=!1}),300)},handleGetHttpConfig:function(){this.mapFormData.httpConfig=[],this.mapFormData.pin&&this.mapFormData.httpConfig.push({source:{name:"pin",type:4},target:1,t_name:"pin",urlCoding:0}),this.mapFormData.tenementCode&&this.mapFormData.httpConfig.push({source:{name:"tenementCode",type:4},target:1,t_name:"tenementCode",urlCoding:0})},handleClickGoOnButton:function(){var e=this;if(!this.computeEditable){["interfaceForm","securityLevelForm","urlForm","mapForm"].forEach((function(t){e.$refs[t].resetFields()}))}this.active=0},handleGetInterfaceDetail:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceInfo,a=t.dataLevel,r=t.labelList,this.securityLevelFormData.dataLevel=a||0,this.securityLevelFormData.labelList=r?r.map((function(e){return e.labelPath.split("/")})):[],e.next=5,this.getInterfaceDetailById().catch((function(e){throw new Error("handleGetInterfaceDetail getInterfaceDetailById, ".concat(e))}));case 5:i=e.sent,o=i.data,s=o.methodId,c=o.apiUrl,l=o.shadowboxClusterId,u=o.clusterId,p=o.shadowboxClusterName,d=o.clusterName,m=o.apiResTimeout,f=o.httpConfig,this.methodId=s,h=c,Object.assign(this.interfaceFormData,{url:h,shadowboxClusterId:l,clusterId:u,shadowboxClusterName:p,clusterName:d}),Object.assign(this.urlFormData,{apiUrl:c,apiResTimeout:m}),this.mapFormData.httpConfig=f||[],this.mapFormData.pin=this.mapFormData.httpConfig.map((function(e){return e.t_name})).includes("pin"),this.mapFormData.tenementCode=this.mapFormData.httpConfig.map((function(e){return e.t_name})).includes("tenementCode");case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetInterfaceCodeAndCnName:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiDomain().catch((function(e){throw new Error("handleGetInterfaceCodeAndCnName getApiDomain, ".concat(e))}));case 2:t=e.sent,a=t.data,r=a.domainCode,i=a.domainName,this.interfaceFormData.code=r||"",this.interfaceFormData.cnName=i||"";case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleSearchDockingSolutionType().catch((function(e){throw new Error("created handleSearchDockingSolutionType, ".concat(e))}));case 2:if(!this.computeEditable){e.next=8;break}return e.next=6,this.handleGetInterfaceDetail().catch((function(e){throw new Error("created handleGetInterfaceDetail, ".concat(e))}));case 6:return e.next=8,this.handleGetInterfaceCodeAndCnName().catch((function(e){throw new Error("created handleGetInterfaceCodeAndCnName, ".concat(e))}));case 8:return e.next=10,this.handleGetLabelListOptionList().catch((function(e){throw new Error("created handleGetLabelListOptionList, ".concat(e))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},ht=ft,bt=(a("67a3"),Object(m.a)(ht,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"http-add-or-edit-interface"},[a("el-page-header",{attrs:{content:e._f("formatPageHeaderContentAndGoOnButtonText")(e.computeEditable)},on:{back:e.handleClickGoBackButton}}),a("Steps",{attrs:{active:e.active,titleList:e.titleList}}),a("section",{staticClass:"http-add-or-edit-interface__form-title"},[e.active===e.titleList.length-1?a("i",{staticClass:"el-icon-success"}):e._e(),a("h1",{staticClass:"form-title__h1"},[e._v(" "+e._s(e._f("formatFormTitleH1Text")(e.active,e.computeEditable))+" ")]),a("p",{staticClass:"form-title__tip"},[e._v(" "+e._s(e._f("formatFormTitleTipText")(e.active,e.computeEditable))+" "),1===e.active?a("el-link",{staticStyle:{"vertical-align":"baseline"},attrs:{type:"primary",href:"https://cf.jd.com/pages/viewpage.action?pageId=106705184",target:"_blank"}},[e._v("数据接口等级标准")]):e._e()],1)]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],ref:"interfaceForm",staticClass:"http-add-or-edit-interface__form",attrs:{"label-width":"120px",model:e.interfaceFormData,rules:e.interfaceFormRules}},[a("el-form-item",{attrs:{prop:"url",label:"接口的URI"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"输入接口URI，如：/TraceQueryJsf/queryTrace",disabled:e.computeEditable,filterable:!0,remote:!0,"remote-method":e.remoteMethodSearchInterfaceUrl},on:{change:e.handleChangeInterfaceUrl},model:{value:e.interfaceFormData.url,callback:function(t){e.$set(e.interfaceFormData,"url",t)},expression:"interfaceFormData.url"}},e._l(e.urlList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"接口所属分组",prop:e.computeSelectInterfaceFormCodeOrCnNameProp}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接口所属的分组",filterable:"",disabled:e.computeEditable},on:{change:e.handleChangeInterfaceCode},model:{value:e.interfaceFormData[e.computeSelectInterfaceFormCodeOrCnNameProp],callback:function(t){e.$set(e.interfaceFormData,e.computeSelectInterfaceFormCodeOrCnNameProp,t)},expression:"\n        interfaceFormData[computeSelectInterfaceFormCodeOrCnNameProp]\n      "}},e._l(e.groupList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.cnName,value:e.code}})})),1)],1),"test"===e.baseEnv?[a("el-form-item",{attrs:{label:"测试环境服务器",prop:"clusterName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.interfaceFormData.clusterName,callback:function(t){e.$set(e.interfaceFormData,"clusterName",t)},expression:"interfaceFormData.clusterName"}})],1)]:"uat"===e.baseEnv||"prod"===e.baseEnv?[a("el-form-item",{attrs:{label:"预发环境服务器",prop:"shadowboxClusterName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.interfaceFormData.shadowboxClusterName,callback:function(t){e.$set(e.interfaceFormData,"shadowboxClusterName",t)},expression:"interfaceFormData.shadowboxClusterName"}})],1),a("el-form-item",{attrs:{label:"生产环境服务器",prop:"clusterName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.interfaceFormData.clusterName,callback:function(t){e.$set(e.interfaceFormData,"clusterName",t)},expression:"interfaceFormData.clusterName"}})],1)]:e._e()],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"securityLevelForm",staticClass:"http-add-or-edit-interface__form",attrs:{"label-width":"120px",model:e.securityLevelFormData,rules:e.securityLevelFormRules}},[a("el-form-item",{attrs:{label:"数据级别",prop:"dataLevel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据级别"},model:{value:e.securityLevelFormData.dataLevel,callback:function(t){e.$set(e.securityLevelFormData,"dataLevel",t)},expression:"securityLevelFormData.dataLevel"}},e._l(e.dataLevelOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"敏感标签",prop:"labelList"}},[a("el-cascader",{ref:"securityLevelFormCascader",staticStyle:{width:"100%"},attrs:{options:e.labelListOptionList,props:e.labelListProps,"show-all-levels":!1,clearable:!0},model:{value:e.securityLevelFormData.labelList,callback:function(t){e.$set(e.securityLevelFormData,"labelList",t)},expression:"securityLevelFormData.labelList"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"urlForm",staticClass:"http-add-or-edit-interface__form",attrs:{"label-width":"160px",model:e.urlFormData,rules:e.urlFormRules}},[a("el-form-item",{attrs:{label:"URL",prop:"apiUrl"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0,placeholder:"/order/updateOrder"},model:{value:e.urlFormData.apiUrl,callback:function(t){e.$set(e.urlFormData,"apiUrl","string"==typeof t?t.trim():t)},expression:"urlFormData.apiUrl"}})],1),a("el-form-item",{attrs:{prop:"apiResTimeout"}})],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active === 3"}],ref:"mapForm",staticClass:"http-add-or-edit-interface__form",attrs:{"label-width":"210px",model:e.mapFormData}},[a("el-form-item",{attrs:{prop:"pin",label:"从平台接收京东PIN"}},[a("el-switch",{attrs:{"active-color":"#26A872"},model:{value:e.mapFormData.pin,callback:function(t){e.$set(e.mapFormData,"pin",t)},expression:"mapFormData.pin"}})],1),a("el-form-item",{attrs:{prop:"tenementCode",label:"从平台接收调用方tenantCode"}},[a("el-switch",{attrs:{"active-color":"#26A872"},model:{value:e.mapFormData.tenementCode,callback:function(t){e.$set(e.mapFormData,"tenementCode",t)},expression:"mapFormData.tenementCode"}})],1)],1),a("div",{staticClass:"http-add-or-edit-interface__button-wrapper"},[e.active===e.titleList.length-1?[a("el-button",{on:{click:e.handleClickGoBackButton}},[e._v("返回接口列表")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleClickGoOnButton}},[e._v("继续"+e._s(e._f("formatPageHeaderContentAndGoOnButtonText")(e.computeEditable)))])]:[e.computePreviousStepButtonVisible?a("el-button",{on:{click:function(t){e.active-=1}}},[e._v("上一步")]):e._e(),a("el-button",{attrs:{type:"primary",loading:e.nextStepLoading},on:{click:e.handleClickNextStepButton}},[e._v(e._s(e._f("formatNextStepButtonText")(e.active,e.titleList,e.computeEditable)))])]],2)],1)}),[],!1,null,"e96c1868",null)),gt=bt.exports,vt={name:"QueryApiDialog",components:{Pagination:g.a},props:{dialogQueryApiVisible:{type:Boolean,required:!0}},data:function(){return{form:{id:null,queryLike:""},tableData:[],solutionOptions:[],pageNumb:1,pageSize:10,total:0}},created:function(){this.fuzzyQuery()},methods:{fuzzyQuery:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.fuzzyQuery().catch((function(e){throw new Error("fuzzyQuery"+e)}));case 2:t=e.sent,this.solutionOptions=t.data.list;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleQueryApi:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.queryLike||this.form.id){e.next=5;break}this.tableData=[],this.total=0,e.next=13;break;case 5:return this.pageNumb=t||this.pageNumb,a=this.pageNumb,r=this.pageSize,i={callDirection:1,unitId:this.form.id,pageSize:r,pageNumb:a,orderBy:"seq",orderType:"asc",queryLike:this.form.queryLike,type:1},e.next=10,y.a.queryInterface(i).catch((function(e){throw new Error("queryInterface"+e)}));case 10:o=e.sent,this.tableData=o.data.list,this.total=o.data.total;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleChooseApi:function(e){this.$emit("updateInterfaceName",e),this.$emit("update:dialogQueryApiVisible",!1)},handleClose:function(){this.$emit("update:dialogQueryApiVisible",!1)}}},wt=vt,yt=(a("857a"),Object(m.a)(wt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"query-api-dialog"},[a("el-dialog",{attrs:{title:"API查询",visible:e.dialogQueryApiVisible},on:{close:e.handleClose}},[a("el-form",{attrs:{inline:!0,model:e.form}},[a("el-form-item",[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择对接方案"},on:{change:function(t){return e.handleQueryApi(1)}},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}},e._l(e.solutionOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入接口的调用路径/方法名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQueryApi(1)}},model:{value:e.form.queryLike,callback:function(t){e.$set(e.form,"queryLike",t)},expression:"form.queryLike"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleQueryApi(1)}}},[e._v("查询")])],1),a("el-table",{staticClass:"query-api-dialog__table",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"interfaceName",label:"jsf接口",width:"260"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"interfaceMethod",label:"jsf方法名",width:"260"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"apiName",label:"方法中文名称",width:"260"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleChooseApi(t.row)}}},[e._v("选择")])]}}])})],1),a("Pagination",{attrs:{currentPage:e.pageNumb,pageSize:e.pageSize,total:e.total,reloadTableData:e.handleQueryApi},on:{"update:currentPage":function(t){e.pageNumb=t},"update:current-page":function(t){e.pageNumb=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}})],1)],1)}),[],!1,null,"0daa255f",null)),Ct=yt.exports,Dt={name:"JsfAddOrEditInterface",components:{Steps:v.a,QueryApiDialog:Ct},props:{interfaceInfo:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{unitId:parseInt(this.$route.params.id),active:0,titleList:["选择接口","设置接口安全级别","设置公网URL","设置参数映射","完成"],debounceTimer:null,nextStepLoading:!1,interfaceFormData:{interfaceName:"",apiType:"",interfaceMethod:"",shadowboxAlias:"",alias:"",token:"",uatToken:""},interfaceFormRules:{interfaceName:[{required:!0,message:"请输入API中文或英文名称"}],interfaceMethod:[{required:!0,message:"请输入Method英文名称"}],shadowboxAlias:[{required:!0,message:"请输入JSF别名"}],alias:[{required:!0,message:"请输入JSF别名"}]},interfaceNameList:[],interfaceMethodList:[],methodId:0,jsfAliasList:[],baseEnv:window.env.baseEnv,hasUat:0,securityLevelFormData:{dataLevel:0,labelList:[]},securityLevelFormRules:{dataLevel:[{required:!0,message:"请选择数据级别"}],labelList:[{type:"array",required:!0,message:"请选择敏感标签"}]},dataLevelOptionList:[{value:0,label:"公开数据（L1）"},{value:1,label:"秘密数据（L2）"},{value:2,label:"机密数据（L3）"},{value:3,label:"绝密数据（L4）"}],labelListProps:{multiple:!0,value:"id",label:"labelName"},labelListOptionList:[],urlFormData:{apiUrl:"",apiResTimeout:5e3},urlFormRules:{apiUrl:[{required:!0,message:"url不能为空",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符"},{pattern:/^\//,message:"请以“/”开头"},{pattern:/^[^:：]*$/,message:"url不能包含中英文冒号"}],apiResTimeout:[{required:!0,message:"接口响应超时时间不能为空",trigger:"blur"},{type:"number",message:"仅支持纯数字且数字需在1-30000范围之内",transform:function(e){return""!==e?!(e<1||e>3e4)&&e:null}}]},bizType:2,mapFormData:{is_open:0,params:[],actAccount:{}},mapFormDataRules:{params:{validator:function(t,a,n){e.mapFormData.is_open?e.mapFormData.params.length?n():n(new Error("请选择接收账号的入参字段")):n()},trigger:"change"}},appkeyMapFormData:{is_open:0,params:[],appKeyConfig:{}},appkeyMapFormDataRule:{params:{validator:function(t,a,n){e.appkeyMapFormData.is_open?e.appkeyMapFormData.params.length?n():n(new Error("选择接口入参中的appkey")):n()},trigger:"change"}},paramsOptionList:[],dialogQueryApiVisible:!1}},filters:{formatPageHeaderContentAndGoOnButtonText:function(e){return e?"编辑接口":"添加接口"},formatFormTitleH1Text:function(e,t){return["从API仓库选择接口","设置接口的数据安全级别","设置公网URL","设置参数映射",t?"编辑成功":"添加成功"][e]||""},formatFormTitleTipText:function(e,t){return["从API仓库中选择对接方案的相关接口，这些接口将会被开放到外网。开放其他团队的接口前，请与接口研发负责人确认是否可开放。","根据安全部要求，接口需完成数据安全级别配置才可发布到外网。如何配置可参考","每个接口在公网中都有唯一URL，例如api.jdwl.com/order/updateOrder，其中api.jdwl.com是所有接口的公共前缀，您无需填写。","若你的业务需要pin和appkey，为防止在接口调用的过程中黑客篡改调用方传入的appkey和京东pin，可开启参数映射功能。开启后将使用平台解析后的pin或appkey进行鉴权校验，保障业务安全。",t?"您可继续编辑接口":"您可继续添加接口"][e]||""},formatNextStepButtonText:function(e,t,a){return e<t.length-2?"下一步":a?"确认编辑":"确认添加"}},computed:{computeEditable:function(){var e=this.interfaceInfo.id;return Boolean(e)},computeStatus:function(){var e=this.interfaceInfo,t=e.status,a=e.id;return!!Boolean(a)&&1!==t},computePreviousStepButtonVisible:function(){var e=this.active,t=this.titleList;return e>0&&e<t.length-1},computeMapFormParamsVisible:function(){var e=this.mapFormData.is_open;return Boolean(e)},computeAppkeyMapFormParamsVisible:function(){var e=this.appkeyMapFormData.is_open;return Boolean(e)},computeMapFormDataParams:function(){return function(e,t,a){return a.length<=0||a[t].value!==e[0]?[]:(a[t].children||[]).find((function(t){return t.value===e[1]}))?e:[]}}},methods:{updateInterfaceName:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.apiType,r=t.interfaceName,i=t.interfaceMethod,"","","","","",Object.assign(this.interfaceFormData,{interfaceName:r,apiType:a,interfaceMethod:i,shadowboxAlias:"",alias:"",uatToken:"",token:""}),this.urlFormData.url="",e.next=8,Promise.all([this.handleSearchInterfaceMethodList(),this.handleSearchJsfAliasList(),this.handleSearchMethod(t)]).catch((function(e){throw new Error("updateInterfaceName, ".concat(e))}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleSearchMethod:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.interfaceFormData,r=a.interfaceName,i=a.interfaceMethod,o=r.split(".").slice(-1)[0],this.urlFormData.apiUrl="/".concat(o,"/").concat(i).toLowerCase(),this.methodId=t.methodId,this.mapFormData.params=[],this.appkeyMapFormData.params=[],e.next=8,this.handleSearchMapFormParamsOptionList().catch((function(e){throw new Error("handleChangeInterfaceMethod, ".concat(e))}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),getBizUnitPreById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={id:t},e.next=5,u.a.bizunit.getBizUnitPreById(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryBlurryApiList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{searchKeyWord:t}],e.next=3,mt.a.ApiDepotService.queryBlurryApiList(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),queryApiMethodRelease:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData.interfaceName,a=[{qualifiedName:t}],e.next=5,mt.a.ApiDepotService.queryApiMethodRelease(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryAliasByQualifiedName:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData.interfaceName,a=[{qualifiedName:t}],e.next=5,mt.a.ApiDepotService.queryAliasByQualifiedName(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),querySensitiveLabelForest:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.a.HttpApiService.querySensitiveLabelForest();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),findApiMtpParamsList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData,a=t.interfaceName,r=t.interfaceMethod,i=a,o=r,s=this.interfaceInfo.id||void 0,c={qualifiedName:i,methodName:o,apiId:s},e.next=7,u.a.api.findApiMtpParamsList(c);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveInterface:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,p,d,m,f,h,b,g,v,w,y,C,D;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.interfaceInfo,r=this.methodId,this.computeEditable,i=this.computeStatus,o=a.id||void 0,1,s=this.interfaceFormData,c=s.interfaceName,l=s.apiType,p=s.interfaceMethod,d=s.shadowboxAlias,m=s.alias,f=s.token,h=s.uatToken,b=this.securityLevelFormData.dataLevel,this.securityLevelFormData.labelList,g=this.$refs.securityLevelFormCascader.getCheckedNodes(!0).map((function(e){var t=e.path,a=e.pathLabels,n=t.join("/"),r=a.join("/");return{dataLevel:b,labelPath:n,labelName:r}})),v=this.urlFormData.apiUrl,v=i?void 0:v,w=this.urlFormData.apiResTimeout,y=this.mapFormData.actAccount,C=JSON.stringify(this.appkeyMapFormData.appKeyConfig),D={unitId:t,id:o,type:1,methodId:r,interfaceName:c,apiType:l,interfaceMethod:p,shadowboxAlias:d,alias:m,token:f,uatToken:h,dataLevel:b,labelList:g,apiUrl:v,apiResTimeout:w,actAccount:y,appKeyConfig:C},e.next=15,u.a.bizapinterface.saveInterface(D);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchInterfaceHasUatAndDockingSolutionType:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBizUnitPreById().catch((function(e){throw new Error("handleSearchInterfaceHasUatAndDockingSolutionType getBizUnitPreById, ".concat(e))}));case 2:t=e.sent,a=t.data,r=a.hasUat,i=a.type,this.hasUat=r||0,this.bizType=i||2;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetLabelListOptionList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.querySensitiveLabelForest().catch((function(e){throw new Error("handleGetLabelList querySensitiveLabelForest, ".concat(e))}));case 2:t=e.sent,a=t.data,this.labelListOptionList=a||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickGoBackButton:function(){this.$emit("update:activeView","interfaceList")},remoteMethodSearchInterfaceName:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,this.queryBlurryApiList(t).catch((function(e){throw new Error("remoteMethodSearchInterfaceName queryBlurryApiList, ".concat(e))}));case 3:a=e.sent,r=a.data,this.interfaceNameList=r||[],e.next=9;break;case 8:this.interfaceNameList=[];case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleChangeInterfaceName:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData.interfaceName,a=this.interfaceNameList.find((function(e){return e.qualifiedName===t})),r=a.businessCategoryName,i=r,"","","","","","",Object.assign(this.interfaceFormData,{apiType:i,interfaceMethod:"",shadowboxAlias:"",alias:"",uatToken:"",token:""}),this.urlFormData.url="",e.next=10,Promise.all([this.handleSearchInterfaceMethodList(),this.handleSearchJsfAliasList()]).catch((function(e){throw new Error("handleChangeInterfaceName, ".concat(e))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchInterfaceMethodList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryApiMethodRelease().catch((function(e){throw new Error("handleSearchInterfaceMethodList queryApiMethodRelease, ".concat(e))}));case 2:t=e.sent,a=t.data,this.interfaceMethodList=a||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchJsfAliasList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryAliasByQualifiedName().catch((function(e){throw new Error("handleSearchJsfAliasList queryAliasByQualifiedName, ".concat(e))}));case 2:t=e.sent,a=t.data,this.jsfAliasList=a||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleChangeInterfaceMethod:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.interfaceFormData,a=t.interfaceName,r=t.interfaceMethod,i=a.split(".").slice(-1)[0],this.urlFormData.apiUrl="/".concat(i,"/").concat(r).toLowerCase(),o=this.interfaceMethodList.find((function(e){return e.name===r})),s=o.id,this.methodId=s,this.mapFormData.params=[],this.appkeyMapFormData.params=[],e.next=9,this.handleSearchMapFormParamsOptionList().catch((function(e){throw new Error("handleChangeInterfaceMethod, ".concat(e))}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSearchMapFormParamsOptionList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findApiMtpParamsList().catch((function(e){throw new Error("handleSearchMapFormParamsOptionList findApiMtpParamsList, ".concat(e))}));case 2:t=e.sent,a=t.data,this.paramsOptionList=a||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleClickNextStepButton:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function t(){var a,i,o,s,c;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.active,i=e.titleList,o=[],e.mapFormData.is_open&&o.push("mapForm"),e.appkeyMapFormData.is_open&&o.push("appkeyMapForm"),s=[["interfaceForm"],["securityLevelForm"],["urlForm"],[].concat(o)],e.nextStepLoading=!0,c=[],s[a].forEach((function(t){e.$refs[t].validate(function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.push(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),!c.every((function(e){return e}))){t.next=16;break}if(a!==i.length-2){t.next=15;break}return e.handleGetActAccount(),e.handleGetappKeyConfig(),t.next=14,e.saveInterface().catch((function(t){throw e.nextStepLoading=!1,new Error("handleClickNextStepButton saveInterface, ".concat(t))}));case 14:e.$emit("updateDetailHeaderInfo");case 15:e.active+=1;case 16:e.nextStepLoading=!1;case 17:case"end":return t.stop()}}),t)}))),300)},handleGetActAccount:function(){var e=this.mapFormData.is_open,t=this.$refs.mapFormCascader.getCheckedNodes(!0),a=0===e?{is_open:e,arg_index:0,attr_view_name:"",attr_name:""}:t&&t.length>0?t.map((function(t){var a=t.level,n=t.path,r=t.data,i=r.value,o=r.paramIndex,s=t.parent,c=1===a?o:s.data.paramIndex,l=n.join("/");return{is_open:e,arg_index:c,attr_view_name:l,attr_name:1===a?"":i}}))[0]:{is_open:0,arg_index:0,attr_view_name:"",attr_name:""};Object.assign(this.mapFormData.actAccount,a)},handleGetappKeyConfig:function(){var e=this.appkeyMapFormData.is_open,t=this.$refs.appkeyMapFormCascader.getCheckedNodes(!0),a=0===e?{is_open:e,arg_index:0,attr_view_name:"",attr_name:""}:t&&t.length>0?t.map((function(t){var a=t.level,n=t.path,r=t.data,i=r.value,o=r.paramIndex,s=t.parent,c=1===a?o:s.data.paramIndex,l=n.join("/");return{is_open:e,arg_index:c,attr_view_name:l,attr_name:1===a?"":i}}))[0]:{is_open:0,arg_index:0,attr_view_name:"",attr_name:""};Object.assign(this.appkeyMapFormData.appKeyConfig,a)},handleClickGoOnButton:function(){var e=this;if(!this.computeEditable){["interfaceForm","securityLevelForm","urlForm","mapForm","appkeyMapForm"].forEach((function(t){e.$refs[t].resetFields()}))}this.active=0},handleGetInterfaceDetail:function(){var e=this.interfaceInfo,t=e.interfaceName,a=e.apiType,n=e.interfaceMethod,r=e.shadowboxAlias,i=e.alias,o=e.uatToken,s=e.token,c=e.paramMappingRisk;Object.assign(this.interfaceFormData,{interfaceName:t,apiType:a,interfaceMethod:n,shadowboxAlias:r,alias:i,uatToken:o,token:s});var l=this.methodId;this.methodId=l;var u=this.interfaceInfo,p=u.dataLevel,d=u.labelList;this.securityLevelFormData.dataLevel=p||0,this.securityLevelFormData.labelList=d?d.map((function(e){return e.labelPath.split("/")})):[];var m=this.interfaceInfo,f=m.apiUrl,h=m.apiResTimeout;Object.assign(this.urlFormData,{apiUrl:f,apiResTimeout:h});var b,g=b=this.interfaceInfo.actAccount&&JSON.parse(this.interfaceInfo.actAccount)||{},v=g.is_open,w=g.attr_view_name;this.mapFormData.is_open=v||0;var y=[];c.indexOf("PIN")<0&&(y=w?w.split("/"):[]),this.mapFormData.params=y,this.mapFormData.actAccount=b;var C={};C=this.interfaceInfo.appKeyConfig&&JSON.parse(this.interfaceInfo.appKeyConfig)||{},this.appkeyMapFormData.is_open=C.is_open||0;var D=[];c.indexOf("APPKEY")<0&&(D=C.attr_view_name?C.attr_view_name.split("/"):[]),this.appkeyMapFormData.params=D,this.appkeyMapFormData.appKeyConfig=C}},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.handleSearchInterfaceHasUatAndDockingSolutionType(),this.handleGetLabelListOptionList()]).catch((function(e){throw new Error("created, ".concat(e))}));case 2:if(!this.computeEditable){e.next=7;break}return this.handleGetInterfaceDetail(),e.next=7,Promise.all([this.handleSearchJsfAliasList(),this.handleSearchMapFormParamsOptionList()]).catch((function(e){throw new Error("created, ".concat(e))}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},kt=Dt,xt=(a("565f"),Object(m.a)(kt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jsf-add-or-edit-interface"},[a("el-page-header",{attrs:{content:e._f("formatPageHeaderContentAndGoOnButtonText")(e.computeEditable)},on:{back:e.handleClickGoBackButton}}),a("Steps",{attrs:{active:e.active,titleList:e.titleList}}),a("section",{staticClass:"jsf-add-or-edit-interface__form-title"},[e.active===e.titleList.length-1?a("i",{staticClass:"el-icon-success"}):e._e(),a("h1",{staticClass:"form-title__h1"},[e._v(" "+e._s(e._f("formatFormTitleH1Text")(e.active,e.computeEditable))+" ")]),a("p",{staticClass:"form-title__tip"},[e._v(" "+e._s(e._f("formatFormTitleTipText")(e.active,e.computeEditable))+" "),1===e.active?a("el-link",{staticStyle:{"vertical-align":"baseline"},attrs:{type:"primary",href:"https://cf.jd.com/pages/viewpage.action?pageId=106705184",target:"_blank"}},[e._v("数据接口等级标准")]):e._e()],1)]),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],ref:"interfaceForm",staticClass:"jsf-add-or-edit-interface__api",attrs:{"label-width":"160px",model:e.interfaceFormData,rules:e.interfaceFormRules}},[a("el-form-item",{attrs:{prop:"interfaceName",label:"API"}},[a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入API中文或英文名称",disabled:e.computeEditable,filterable:!0,remote:!0,"remote-method":e.remoteMethodSearchInterfaceName},on:{change:e.handleChangeInterfaceName},model:{value:e.interfaceFormData.interfaceName,callback:function(t){e.$set(e.interfaceFormData,"interfaceName",t)},expression:"interfaceFormData.interfaceName"}},e._l(e.interfaceNameList,(function(e){return a("el-option",{key:e.qualifiedName,attrs:{label:e.qualifiedName,value:e.qualifiedName}})})),1)],1),a("el-col",{attrs:{span:4}},[e.computeEditable?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){e.dialogQueryApiVisible=!0}}},[e._v("查询API")])],1)],1),a("el-form-item",{attrs:{label:"Method",prop:"interfaceMethod"}},[a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入Method英文名称",filterable:!0,disabled:e.computeEditable},on:{change:e.handleChangeInterfaceMethod},model:{value:e.interfaceFormData.interfaceMethod,callback:function(t){e.$set(e.interfaceFormData,"interfaceMethod",t)},expression:"interfaceFormData.interfaceMethod"}},e._l(e.interfaceMethodList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),"test"===e.baseEnv?[a("el-form-item",{attrs:{prop:"alias"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 测试环境JSF别名 "),a("el-tooltip",{attrs:{content:"公网开发者通过预发环境调用接口时，物流开放平台会转掉测试环境的JSF服务",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,placeholder:"选择测试环境JSF别名"},model:{value:e.interfaceFormData.alias,callback:function(t){e.$set(e.interfaceFormData,"alias",t)},expression:"interfaceFormData.alias"}},e._l(e.jsfAliasList,(function(e){return a("el-option",{key:e.alias,attrs:{label:e.alias,value:e.alias}})})),1)],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.interfaceFormData.alias,expression:"interfaceFormData.alias"}],attrs:{prop:"token"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 测试环境JSF token "),a("el-tooltip",{attrs:{content:"当前JSF服务要求传入token时，则需要配置该项，否则JSF服务无法调通，物流开放平台会将该token传入内部JSF服务",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入服务别名相应的token"},model:{value:e.interfaceFormData.token,callback:function(t){e.$set(e.interfaceFormData,"token","string"==typeof t?t.trim():t)},expression:"interfaceFormData.token"}})],1)],1)]:"uat"===e.baseEnv||"prod"===e.baseEnv?[1===e.hasUat?[a("el-form-item",{attrs:{prop:"shadowboxAlias"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 预发环境JSF别名 "),a("el-tooltip",{attrs:{content:"公网开发者通过预发环境调用接口时，物流开放平台会转掉预发环境的JSF服务",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,placeholder:"选择预发环境JSF别名"},model:{value:e.interfaceFormData.shadowboxAlias,callback:function(t){e.$set(e.interfaceFormData,"shadowboxAlias",t)},expression:"interfaceFormData.shadowboxAlias"}},e._l(e.jsfAliasList,(function(e){return a("el-option",{key:e.alias,attrs:{label:e.alias,value:e.alias}})})),1)],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.interfaceFormData.shadowboxAlias,expression:"interfaceFormData.shadowboxAlias"}],attrs:{prop:"uatToken"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 预发环境JSF token "),a("el-tooltip",{attrs:{content:"当前JSF服务要求传入token时，则需要配置该项，否则JSF服务无法调通，物流开放平台会将该token传入内部JSF服务",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入服务别名相应的token"},model:{value:e.interfaceFormData.uatToken,callback:function(t){e.$set(e.interfaceFormData,"uatToken","string"==typeof t?t.trim():t)},expression:"interfaceFormData.uatToken"}})],1)],1)]:e._e(),a("el-form-item",{attrs:{prop:"alias"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生产环境JSF别名 "),a("el-tooltip",{attrs:{content:"公网开发者通过预发环境调用接口时，物流开放平台会转掉生产环境的JSF服务",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,placeholder:"选择生产环境JSF别名"},model:{value:e.interfaceFormData.alias,callback:function(t){e.$set(e.interfaceFormData,"alias",t)},expression:"interfaceFormData.alias"}},e._l(e.jsfAliasList,(function(e){return a("el-option",{key:e.alias,attrs:{label:e.alias,value:e.alias}})})),1)],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.interfaceFormData.alias,expression:"interfaceFormData.alias"}],attrs:{prop:"token"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 生产环境JSF token "),a("el-tooltip",{attrs:{content:"当前JSF服务要求传入token时，则需要配置该项，否则JSF服务无法调通，物流开放平台会将该token传入内部JSF服务",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入服务别名相应的token"},model:{value:e.interfaceFormData.token,callback:function(t){e.$set(e.interfaceFormData,"token","string"==typeof t?t.trim():t)},expression:"interfaceFormData.token"}})],1)],1)]:e._e()],2),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"securityLevelForm",staticClass:"jsf-add-or-edit-interface__form",attrs:{"label-width":"120px",model:e.securityLevelFormData,rules:e.securityLevelFormRules}},[a("el-form-item",{attrs:{label:"数据级别",prop:"dataLevel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据级别"},model:{value:e.securityLevelFormData.dataLevel,callback:function(t){e.$set(e.securityLevelFormData,"dataLevel",t)},expression:"securityLevelFormData.dataLevel"}},e._l(e.dataLevelOptionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"敏感标签",prop:"labelList"}},[a("el-cascader",{ref:"securityLevelFormCascader",staticStyle:{width:"100%"},attrs:{options:e.labelListOptionList,props:e.labelListProps,"show-all-levels":!1,clearable:!0},model:{value:e.securityLevelFormData.labelList,callback:function(t){e.$set(e.securityLevelFormData,"labelList",t)},expression:"securityLevelFormData.labelList"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"urlForm",staticClass:"jsf-add-or-edit-interface__form",attrs:{"label-width":"160px",model:e.urlFormData,rules:e.urlFormRules}},[a("el-form-item",{attrs:{label:"URL",prop:"apiUrl"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.computeStatus,placeholder:"/order/updateOrder"},model:{value:e.urlFormData.apiUrl,callback:function(t){e.$set(e.urlFormData,"apiUrl","string"==typeof t?t.trim():t)},expression:"urlFormData.apiUrl"}})],1),a("el-form-item",{attrs:{prop:"apiResTimeout"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 接口响应超时 "),a("el-tooltip",{attrs:{content:"可配置网关调用京东业务系统的读取超时时间。",placement:"top"}},[a("i",{staticClass:"el-icon-help-solid"})])],1),a("el-input",{attrs:{placeholder:"请输入内容","active-color":"#26A872"},model:{value:e.urlFormData.apiResTimeout,callback:function(t){e.$set(e.urlFormData,"apiResTimeout",e._n(t))},expression:"urlFormData.apiResTimeout"}},[a("template",{slot:"append"},[e._v("毫秒")])],2)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active === 3"}],ref:"mapForm",staticClass:"jsf-add-or-edit-interface__form",attrs:{"label-width":"210px",model:e.mapFormData,rules:e.mapFormDataRules}},[a("el-form-item",{attrs:{prop:"is_open",label:"从平台接收京东PIN"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#26A872"},model:{value:e.mapFormData.is_open,callback:function(t){e.$set(e.mapFormData,"is_open",t)},expression:"mapFormData.is_open"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.computeMapFormParamsVisible,expression:"computeMapFormParamsVisible"}],attrs:{prop:"params"}},[a("el-cascader",{ref:"mapFormCascader",staticStyle:{width:"100%"},attrs:{placeholder:"请选择接收账号的入参字段",options:e.paramsOptionList},model:{value:e.mapFormData.params,callback:function(t){e.$set(e.mapFormData,"params",t)},expression:"mapFormData.params"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active === 3"}],ref:"appkeyMapForm",staticClass:"jsf-add-or-edit-interface__form",attrs:{"label-width":"210px",model:e.appkeyMapFormData,rules:e.appkeyMapFormDataRule}},[a("el-form-item",{attrs:{prop:"is_open",label:"从平台接收appkey"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#26A872"},model:{value:e.appkeyMapFormData.is_open,callback:function(t){e.$set(e.appkeyMapFormData,"is_open",t)},expression:"appkeyMapFormData.is_open"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.computeAppkeyMapFormParamsVisible,expression:"computeAppkeyMapFormParamsVisible"}],attrs:{prop:"params"}},[a("el-cascader",{ref:"appkeyMapFormCascader",staticStyle:{width:"100%"},attrs:{placeholder:"选择接口入参中的appkey",options:e.paramsOptionList},model:{value:e.appkeyMapFormData.params,callback:function(t){e.$set(e.appkeyMapFormData,"params",t)},expression:"appkeyMapFormData.params"}})],1)],1),a("div",{staticClass:"jsf-add-or-edit-interface__button-wrapper"},[e.active===e.titleList.length-1?[a("el-button",{on:{click:e.handleClickGoBackButton}},[e._v("返回接口列表")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleClickGoOnButton}},[e._v("继续"+e._s(e._f("formatPageHeaderContentAndGoOnButtonText")(e.computeEditable)))])]:[e.computePreviousStepButtonVisible?a("el-button",{on:{click:function(t){e.active-=1}}},[e._v("上一步")]):e._e(),a("el-button",{attrs:{type:"primary",loading:e.nextStepLoading},on:{click:e.handleClickNextStepButton}},[e._v(e._s(e._f("formatNextStepButtonText")(e.active,e.titleList,e.computeEditable)))])]],2),e.dialogQueryApiVisible?a("QueryApiDialog",{attrs:{dialogQueryApiVisible:e.dialogQueryApiVisible},on:{"update:dialogQueryApiVisible":function(t){e.dialogQueryApiVisible=t},"update:dialog-query-api-visible":function(t){e.dialogQueryApiVisible=t},updateInterfaceName:e.updateInterfaceName}}):e._e()],1)}),[],!1,null,"2fc66463",null)),_t=xt.exports,Ot={name:"ExternalCallInternal",components:{InterfaceList:j,ExternalDocument:dt,HttpAddOrEditInterface:gt,JsfAddOrEditInterface:_t},data:function(){return{activeView:"interfaceList",currentRowData:{}}}},St=Ot,Tt=(a("4331"),Object(m.a)(St,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"external-call-internal"},["interfaceList"===e.activeView?a("InterfaceList",{attrs:{activeView:e.activeView,currentRowData:e.currentRowData},on:{"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):"externalDocument"===e.activeView?a("ExternalDocument",{attrs:{activeView:e.activeView,currentTableRowData:e.currentRowData},on:{"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):"httpAddOrEditInterface"===e.activeView?a("HttpAddOrEditInterface",{attrs:{activeView:e.activeView,interfaceInfo:e.currentRowData},on:{"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):"jsfAddOrEditInterface"===e.activeView?a("JsfAddOrEditInterface",{attrs:{activeView:e.activeView,interfaceInfo:e.currentRowData},on:{"update:activeView":function(t){e.activeView=t},"update:active-view":function(t){e.activeView=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):e._e()],1)}),[],!1,null,"6aff8503",null)),jt=Tt.exports,It={name:"Link",props:{type:{type:String,default:"primary"},underline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:String,default:""},target:{type:String,default:"_blank"}}},Lt=It,At=(a("bd99"),Object(m.a)(Lt,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-link",{staticClass:"link",attrs:{type:e.type,underline:e.underline,disabled:e.disabled,href:e.href,icon:e.icon,target:e.target}},[e._t("default")],2)}),[],!1,null,"5ae7dac6",null)),Pt=At.exports,Nt={name:"DialogAutoConfigureBusinessCode",components:{TagTip:b.default,Link:Pt,Pagination:g.a},props:{dialogConfigVisible:{type:Boolean,required:!0},currentRow:{type:Object,required:!0}},data:function(){var e=this;return{callbackApiPlatformDescriptionHref:"//lcp.jdl.com/#/apiNewHand/54720",id:0,formModel:{autoCodeConfig:0,codeConfigAlias:""},formRules:{codeConfigAlias:[{validator:Object(De.debounce)((function(t,a,n){return e.formModel.autoCodeConfig?a?void e.handleCheckAliasExist(a).then((function(e){if(!e)return n(new Error("请输入正确的JSF别名"));n()})).catch((function(){return console.error("validateCodeConfigAlias"),n(new Error("校验失败"))})):n(new Error("请输入JSF别名")):n()}),300)}]},saveButtonLoading:!1,dialogAliasTipVisible:!1,pageNumb:1,pageSize:10,total:0,tableLoading:!1,tableData:[],tableColumnList:[{prop:"unitName",label:"对接方案名称"},{prop:"unitCode",label:"对接方案编码"},{prop:"apiUrl",label:"URL"},{prop:"domainOfGateway",label:"API所属分组编码"}],confirmButtonLoading:!1}},computed:{codeConfigAliasInputDisabled:function(){var e=this.formModel.autoCodeConfig;return!Boolean(e)}},methods:{checkAliasExist:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"cn.jdl.lcp.outer.service.spi.BizUnitCallOutService",a={qualifiedName:"cn.jdl.lcp.outer.service.spi.BizUnitCallOutService",alias:t},e.next=4,u.a.jsf.checkAliasExist(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveAutoCodeConfig:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a=this.formModel,r=a.autoCodeConfig,i=a.codeConfigAlias,o={id:t,autoCodeConfig:r,codeConfigAlias:i},e.next=5,u.a.bizapinterface.saveAutoCodeConfig(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryWithPage:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pageNumb,a=this.pageSize,r=this.formModel.codeConfigAlias,i={pageNumb:t,pageSize:a,codeConfigAlias:r},e.next=5,u.a.bizapinterface.queryWithPage(i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleCheckAliasExist:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkAliasExist(t).catch((function(e){throw console.error("handleCheckAliasExist"),e}));case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleSaveAutoCodeConfig:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveAutoCodeConfig().catch((function(e){throw console.error("handleSaveAutoCodeConfig"),e}));case 2:this.$message.success("操作成功"),this.onCloseConfigDialog();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleQueryWithPage:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=s.length>0&&void 0!==s[0]?s[0]:0)&&(this.pageNumb=t),this.tableLoading=!0,e.next=5,this.queryWithPage().catch((function(e){throw console.error("handleQueryWithPage"),e}));case 5:a=e.sent,r=a.data,i=r.list,o=r.total,this.tableData=Array.isArray(i)?i:[],this.total=o||0,this.tableLoading=!1;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onOpenConfigDialog:function(){var e=this.currentRow,t=e.id,a=e.autoCodeConfig,n=e.codeConfigAlias;this.id=t,this.formModel={autoCodeConfig:a,codeConfigAlias:n}},onCloseConfigDialog:function(){this.$emit("update:dialogConfigVisible",!1),this.$emit("closeConfigDialog")},onClickConfigCancelButton:function(){this.onCloseConfigDialog()},onClickConfigSaveButton:Object(De.debounce)(Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate().catch((function(){throw new Error("未通过表单校验")}));case 2:if(this.formModel.autoCodeConfig){e.next=9;break}return this.saveButtonLoading=!0,e.next=7,this.handleSaveAutoCodeConfig().catch((function(e){throw t.saveButtonLoading=!1,console.error("onClickConfigSaveButton"),e}));case 7:return this.saveButtonLoading=!1,e.abrupt("return");case 9:return this.saveButtonLoading=!0,e.next=12,this.handleQueryWithPage(1).catch((function(e){throw t.saveButtonLoading=!1,console.error("onClickConfigSaveButton"),e}));case 12:if(this.saveButtonLoading=!1,this.total){e.next=20;break}return this.saveButtonLoading=!0,e.next=18,this.handleSaveAutoCodeConfig().catch((function(e){throw t.saveButtonLoading=!1,console.error("onClickConfigSaveButton"),e}));case 18:return this.saveButtonLoading=!1,e.abrupt("return");case 20:this.dialogAliasTipVisible=!0;case 21:case"end":return e.stop()}}),e,this)}))),300),onClickAliasTipCancelButton:function(){this.dialogAliasTipVisible=!1},onClickAliasTipConfirmButton:Object(De.debounce)(Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.confirmButtonLoading=!0,e.next=3,this.handleSaveAutoCodeConfig().catch((function(e){throw t.confirmButtonLoading=!1,console.error("onClickConfigSaveButton"),e}));case 3:this.onClickAliasTipCancelButton(),this.confirmButtonLoading=!1,this.onClickConfigCancelButton();case 6:case"end":return e.stop()}}),e,this)}))),300)}},Bt=Nt,Ft=(a("c224"),Object(m.a)(Bt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-auto-configure-business-code"},[a("el-dialog",{staticClass:"dialog-auto-configure-business-code__config",attrs:{visible:e.dialogConfigVisible,"close-on-click-modal":!1,title:"业务编码自动配置",width:"880px"},on:{open:e.onOpenConfigDialog,close:e.onCloseConfigDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.onClickConfigCancelButton}},[e._v("取消")]),a("el-button",{attrs:{loading:e.saveButtonLoading,type:"primary"},on:{click:e.onClickConfigSaveButton}},[e._v("保存")])]},proxy:!0}])},[a("TagTip",{attrs:{closable:!1}},[e._v(" 自动配置开启前，回传API提供方需要根据 "),a("Link",{attrs:{href:e.callbackApiPlatformDescriptionHref}},[e._v("回调API平台说明")]),e._v(" 开发业务编码回调API；自动配置开启后，开放平台将自动配置业务编码。 ")],1),a("el-form",{ref:"form",attrs:{model:e.formModel,rules:e.formRules,"label-width":"240px"}},[a("el-form-item",{attrs:{label:"业务编码自动配置",prop:"autoCodeConfig"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-inner-text":"开","inactive-inner-text":"关"},model:{value:e.formModel.autoCodeConfig,callback:function(t){e.$set(e.formModel,"autoCodeConfig",t)},expression:"formModel.autoCodeConfig"}})],1),a("el-form-item",{attrs:{label:"业务编码回调API JSF别名",prop:"codeConfigAlias"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{disabled:e.codeConfigAliasInputDisabled,placeholder:"手动输入，精准匹配"},model:{value:e.formModel.codeConfigAlias,callback:function(t){e.$set(e.formModel,"codeConfigAlias","string"==typeof t?t.trim():t)},expression:"formModel.codeConfigAlias"}})],1)],1)],1),a("el-dialog",{staticClass:"dialog-auto-configure-business-code__alias-tip",attrs:{visible:e.dialogAliasTipVisible,"close-on-click-modal":!1,title:"API JSF别名重复提示",top:"5vh",width:"880px"},on:{"update:visible":function(t){e.dialogAliasTipVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.onClickAliasTipCancelButton}},[e._v("取消")]),a("el-button",{attrs:{loading:e.confirmButtonLoading,type:"primary"},on:{click:e.onClickAliasTipConfirmButton}},[e._v("确认")])]},proxy:!0}])},[a("p",[e._v(" 您所选择的JSF别名已经应用于下列对接方案的URL中，请确认是否继续使用此JSF别名？ ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,height:"320"}},[a("el-table-column",{attrs:{type:"index",width:"80"}}),e._l(e.tableColumnList,(function(e,t){var n=e.label,r=e.prop;return a("el-table-column",{key:t,attrs:{prop:r,label:n}})}))],2),a("Pagination",{attrs:{currentPage:e.pageNumb,pageSize:e.pageSize,total:e.total,reloadTableData:e.handleQueryWithPage},on:{"update:currentPage":function(t){e.pageNumb=t},"update:current-page":function(t){e.pageNumb=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}})],1)],1)}),[],!1,null,"67177bd9",null)),Vt=Ft.exports,Et=a("ad2b"),Rt=a("7aef"),zt={findSubMsgByAppKey:function(e){return c.a.post("/bizmsg/findSubMsgByAppKey",e)},savePartnerRouteConfig:function(e){return c.a.post("/bizmsg/savePartnerRouteConfig",e)},queryCallOutSubApiList:function(e){return c.a.post("/bizapinterface/inner/unit/queryCallOutSubApiList",e)},addCustomerCode:function(e){return Rt.a.get("/bizapinterface/inner/unit/addCustomerCode",{params:e})},saveOrderedInterface:function(e){return c.a.post("/bizapinterface/saveOrderedInterface",e)}},$t=zt,Ut={queryInterfaceList:function(e){return c.a.get("/bizapinterface/queryInterfaceList",{params:e})},listFuzzyUrls:function(e){return Object(c.a)({url:"/httpApi/outward/listFuzzyUrls",method:"post",data:e,headers:{"Content-Type":"application/json"}})},listGateWayDomainsByUrl:function(e){return Object(c.a)({url:"/httpApi/outward/listGateWayDomainsByUrl",method:"post",data:e,headers:{"Content-Type":"application/json"}})},addOutwardApi:function(e){return c.a.post("/bizapinterface/lcp/unit/addOutwardApi",e)},getOutwardApiPreDetails:function(e){return c.a.get("/bizapinterface/lcp/unit/getOutwardApiPreDetails",{params:e})},getBizApiPreDetailsLatestVersion:function(e){return c.a.get("/bizapinterface/getBizApiPreDetailsLatestVersion",{params:e})},uploadXmlAndSaveDoc:function(e,t){return c.a.post("/bizapinterface/lcp/unit/uploadXmlAndSaveDoc",e,{params:t})},saveBizApiPreDetails:function(e){return c.a.post("/bizapinterface/saveBizApiPreDetails",e)}},Mt=Ut,qt={subscriptionRecord:$t,interfaceList:Mt},Ht=qt,Kt={name:"InterfaceTableList",components:{Pagination:g.a,DialogAutoConfigureBusinessCode:Vt},data:function(){return{tableLoading:!1,tableData:[],pageNum:1,pageSize:10,total:0,manageCategoryData:[],dialogAutoConfigureBusinessCodeVisible:!1,currentRow:{}}},methods:{queryInterfaceList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableLoading=!0,t={pageNumb:this.pageNum,pageSize:this.pageSize,orderBy:"seq",orderType:"asc",queryLike:"",unitId:Number(this.$route.params.id),callDirection:2},e.next=4,Ht.interfaceList.queryInterfaceList(t);case 4:a=e.sent,this.tableData=a.data.list,this.total=a.data.total,this.tableLoading=!1,this.$emit("updateDetailHeaderInfo");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),deleteInterface:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t},e.next=3,y.a.deleteInterface(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),formatStatusType:function(e){return{1:"初始化",2:"审核中",4:"审核通过",5:"已发布",9:"审核未通过",10:"编辑中"}[e]},formatStatusClass:function(e){return{1:"initColor",2:"updateColor",4:"normalColor",5:"normalColor",9:"deadColor",10:"updateColor"}[e]},formatParseTime:function(e){return e?Et.a.timeInTable(e):"-"},handleAddInterface:function(){this.$emit("update:showComponent","AddInterfaceSteps")},goExternalDocuments:function(e){this.$emit("update:showComponent","ExternalDocuments"),this.$emit("update:currentRowId",e.id),this.$emit("update:outOfDate",e.outOfDate)},manageCategoryList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$route.params.id,e.next=3,je.interfaceList.getApiCategory({unitId:t}).catch((function(e){throw new Error("manageCategoryList getApiCategory")}));case 3:a=e.sent,(r=a.data).map((function(e){return e.editNameState=!1,e.editCodeState=!1,e})),this.manageCategoryData=r;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getCategoryName:function(e){var t=this.manageCategoryData.find((function(t){return t.code===e.categoryCode}));return t?t.name:""},judgeDeletePopoverVisible:function(e){return 1===e},onClickAutoConfigureBusinessCodeButton:function(e){this.currentRow=e,this.dialogAutoConfigureBusinessCodeVisible=!0},onClickConfirmDeleteButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteInterface(t).catch((function(e){throw new Error("onClickConfirmDeleteButton deleteInterface, ".concat(e))}));case 2:return this.$message.success("删除成功"),e.next=5,this.queryInterfaceList().catch((function(e){throw new Error("onClickConfirmDeleteButton queryInterfaceList, ".concat(e))}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},created:function(){this.manageCategoryList()},mounted:function(){this.queryInterfaceList()}},Gt=Kt,Qt=(a("637b"),Object(m.a)(Gt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"interface-table-list"},[a("div",{staticClass:"list-operation"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddInterface}},[e._v("添加接口")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"list-table",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"apiName",label:"中文名称","min-width":"180","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{prop:"apiUrl",label:"URI","min-width":"180","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{prop:"apiRemark",label:"描述","min-width":"180","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{prop:"categoryName",label:"所属分类","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.getCategoryName(n)))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.formatStatusClass(t.row.status)},[e._v(" "+e._s(e.formatStatusType(t.row.status))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"createUser",label:"创建人","min-width":"100"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"updateUser",label:"更新人","min-width":"100"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.updateTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"280"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.row,i=r.outOfDate,o=r.status,s=r.id;return[a("el-badge",{staticClass:"table__badge",attrs:{"is-dot":i}},[a("el-button",{staticClass:"badge__button",attrs:{type:"text"},on:{click:function(t){return e.goExternalDocuments(n)}}},[e._v("对外文档")])],1),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.onClickAutoConfigureBusinessCodeButton(n)}}},[e._v("业务编码自动配置")]),e.judgeDeletePopoverVisible(o)?a("el-popover",{staticStyle:{display:"inline-block","margin-left":"10px"},attrs:{placement:"left-start",width:"240",trigger:"click"}},[a("p",[e._v("若接口已经被发布过，则不可删除。确认删除此接口？")]),a("div",{staticStyle:{"text-align":"center","margin-top":"8px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:function(t){return e.onClickConfirmDeleteButton(s)}}},[e._v("确认删除")])],1),a("el-button",{staticStyle:{color:"#e1251b"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1):e._e()]}}])})],1),e.total>0?a("Pagination",{attrs:{currentPage:e.pageNum,pageSize:e.pageSize,total:e.total,reloadTableData:e.queryInterfaceList},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e(),a("DialogAutoConfigureBusinessCode",{attrs:{dialogConfigVisible:e.dialogAutoConfigureBusinessCodeVisible,currentRow:e.currentRow},on:{"update:dialogConfigVisible":function(t){e.dialogAutoConfigureBusinessCodeVisible=t},"update:dialog-config-visible":function(t){e.dialogAutoConfigureBusinessCodeVisible=t},closeConfigDialog:e.queryInterfaceList}})],1)}),[],!1,null,"742f74fa",null)),Wt=Qt.exports,Jt={name:"AddInterfaceSteps",components:{Steps:v.a},data:function(){return{active:0,titleList:["选择接口","完成"],domainsOption:[],urlOption:[],loading:!1,stepForm:{apiUrl:"",code:""},stepFormRules:{apiUrl:[{required:!0,message:"接口URI不能为空"}],code:[{required:!0,message:"接口所属分组不能为空",trigger:"blur"}]},apiId:null}},methods:{remoteUrlMethod:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==t?(this.loading=!0,setTimeout(Object(r.a)(Object(n.a)().mark((function e(){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.loading=!1,e.next=3,a.listFuzzyUrls(t);case 3:r=e.sent,a.urlOption=r.data;case 5:case"end":return e.stop()}}),e)}))),200)):this.urlOption=[];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleUrlChange:function(){this.queryListGateWayDomainsByUrl()},queryListGateWayDomainsByUrl:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listGateWayDomainsByUrl();case 2:t=e.sent,this.domainsOption=t.data;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),listFuzzyUrls:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,Ht.interfaceList.listFuzzyUrls(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),listGateWayDomainsByUrl:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.stepForm.apiUrl,e.next=3,Ht.interfaceList.listGateWayDomainsByUrl(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),addOutwardApi:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={unitId:this.$route.params.id,apiUrl:this.stepForm.apiUrl,domainOfGateway:this.stepForm.code,apiType:"test",type:2},e.next=3,Ht.interfaceList.addOutwardApi(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),backToList:function(){this.$emit("update:showComponent","InterfaceTableList")},toExternalDocuments:function(){this.$emit("update:showComponent","ExternalDocuments"),this.$emit("update:currentRowId",this.apiId)},nextStep:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$refs.stepForm.validate(function(){var e=Object(r.a)(Object(n.a)().mark((function e(a){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return e.next=3,t.addOutwardApi().catch((function(e){throw new Error("addOutwardApi Error")}));case 3:r=e.sent,t.$emit("updateDetailHeaderInfo"),t.active<1&&++t.active,t.apiId=r.data,e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Xt=Jt,Zt=(a("6d1f"),Object(m.a)(Xt,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-interface-steps"},[a("div",{staticClass:"add-interface-steps__header"},[a("el-page-header",{attrs:{content:"添加接口"},on:{back:e.backToList}})],1),a("div",{staticClass:"add-interface-steps__step"},[a("Steps",{attrs:{active:e.active,titleList:e.titleList}}),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],staticClass:"step__form"},[a("h1",{staticClass:"form__title"},[e._v("从API仓库选择接口")]),a("p",{staticClass:"form__desc"},[e._v(" 从API仓库中选择对接方案的相关接口，这些接口将会被开放到外网。开放其他团队的接口前，请与接口研发负责人确认是否可开放。 ")]),a("el-form",{ref:"stepForm",staticClass:"form__interface",attrs:{model:e.stepForm,rules:e.stepFormRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"接口URI",prop:"apiUrl"}},[a("el-select",{staticStyle:{width:"320px"},attrs:{filterable:"",remote:"","remote-method":e.remoteUrlMethod,loading:e.loading,placeholder:"输入接口URI，如：/sendPackInfoBack"},on:{change:e.handleUrlChange},model:{value:e.stepForm.apiUrl,callback:function(t){e.$set(e.stepForm,"apiUrl",t)},expression:"stepForm.apiUrl"}},e._l(e.urlOption,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"接口所属分组",prop:"code"}},[a("el-select",{staticStyle:{width:"320px"},attrs:{placeholder:"请选择接口所属分组"},model:{value:e.stepForm.code,callback:function(t){e.$set(e.stepForm,"code",t)},expression:"stepForm.code"}},e._l(e.domainsOption,(function(e,t){return a("el-option",{key:t,attrs:{label:e.code,value:e.code}})})),1)],1)],1),a("el-button",{staticClass:"next-step-button",attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],staticClass:"add-interface-steps__finish"},[a("i",{staticClass:"el-icon-success"}),a("p",{staticClass:"finish__title"},[e._v("完成")]),a("el-row",[a("el-button",{on:{click:e.backToList}},[e._v("返回接口列表")]),a("el-button",{attrs:{type:"primary"},on:{click:e.toExternalDocuments}},[e._v("编辑接口文档")])],1)],1)],1)])}),[],!1,null,"12c7f0d6",null)),Yt=Zt.exports,ea={name:"AlertCheckForUpdate",components:{Alert:P.a},props:{apiCode:{type:String,required:!0},outOfDate:{type:Boolean,required:!0}},data:function(){return{}},filters:{formatTipText:function(e){return e?"本文档由 ".concat(e," 的接口文档克隆生成，编辑仅影响当前文档"):""}},computed:{computeOutOfDateAlertVisible:function(){return this.outOfDate}}},ta=ea,aa=(a("5407"),Object(m.a)(ta,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-check-for-update"},[a("p",{staticClass:"alert-check-for-update__tip"},[e._v(e._s(e._f("formatTipText")(e.apiCode)))]),e.computeOutOfDateAlertVisible?a("Alert",{attrs:{closable:!1,type:"warning"},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",[e._v("检测到当前接口文档元数据内容有更新，")]),a("el-button",{staticStyle:{"font-size":"inherit"},attrs:{type:"text"},on:{click:function(t){return e.$emit("clickViewUpdateContentButton")}}},[e._v("查看更新内容")])]},proxy:!0}],null,!1,2307502843)}):a("Alert",{attrs:{closable:!1,showIcon:!1,type:"default"},scopedSlots:e._u([{key:"title",fn:function(){return[a("el-button",{staticStyle:{"margin-right":"4px","font-size":"inherit"},attrs:{type:"text"},on:{click:function(t){return e.$emit("clickCheckForUpdateButton")}}},[e._v("检查更新")]),a("el-tooltip",{attrs:{content:"检查当前接口文档参数是否为最新版本",placement:"top"}},[a("i",{staticClass:"el-icon-info-empty"})])]},proxy:!0}])})],1)}),[],!1,null,"405f0a35",null)),na=aa.exports,ra={name:"VersionSwitchingHeader",components:{Title:E.a},props:{upcomingVersionSwitch:{type:Boolean,required:!0},firstTipVisible:{type:Boolean,required:!0}},data:function(){return{popoverVisible:!0,explainTextList:[{text:"新增",className:"create"},{text:"修改",className:"update"},{text:"删除",className:"delete"}]}},filters:{formatTitleText:function(e){return e?"待更新版本":"当前版本"},formatExplainClassName:function(e){return e?"explain-wrapper__explain ".concat(e):"explain-wrapper__explain"}},methods:{onChangeUpcomingVersionSwitch:function(e){this.$emit("update:upcomingVersionSwitch",e),this.$emit("update:firstTipVisible",!1);var t=this.$route.name,a="".concat(t,"/").concat("internalCallExternal","/ChangeContentDialog/firstTipVisible");localStorage.setItem(a,"".concat(this.firstTipVisible))}}},ia=ra,oa=(a("a5e0"),Object(m.a)(ia,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"version-switching-header"},[a("div",{staticClass:"version-switching-header__title-wrapper"},[a("Title",{attrs:{text:e._f("formatTitleText")(e.upcomingVersionSwitch)}}),a("el-switch",{attrs:{value:e.upcomingVersionSwitch},on:{change:e.onChangeUpcomingVersionSwitch}}),a("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{content:"你可以通过切换开关对比API文档待更新版本、当前版本的差异。",effect:"dark",placement:"top"}},[a("i",{staticClass:"el-icon-info-empty"})])],1),a("div",{staticClass:"version-switching-header__explain-wrapper"},[a("p",[e._v("变更项说明：")]),e._l(e.explainTextList,(function(t){var n=t.text,r=t.className;return a("p",{key:n,class:e._f("formatExplainClassName")(r)},[e._v(" "+e._s(n)+" ")])}))],2)])}),[],!1,null,"1c24106b",null)),sa=oa.exports,ca={name:"VersionSwitchingForm",props:{form:{type:Object,required:!0}},data:function(){return{formParagraphList:[{label:"接口名称:",prop:"apiName"},{label:"接口描述:",prop:"apiRemark",className:"pre-wrap"}]}},filters:{formatParagraphContentClassName:function(e){return e?"paragraph__content pre-wrap":"paragraph__content"}}},la=ca,ua=(a("3e1f"),Object(m.a)(la,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"version-switching-form",attrs:{model:e.form,"label-width":"80px"}},e._l(e.formParagraphList,(function(t){var n=t.label,r=t.prop,i=t.className;return a("div",{key:r,staticClass:"version-switching-form__paragraph"},[a("p",{staticClass:"paragraph__label"},[e._v(e._s(n))]),a("p",{class:e._f("formatParagraphContentClassName")(i)},[e._v(" "+e._s(e.form[r])+" ")])])})),0)}),[],!1,null,"40cb6504",null)),pa=ua.exports,da={name:"ComparisonTable",components:{Title:E.a},props:{title:{type:String,default:""},tableData:{type:Array,default:function(){return[]}},tableColumnList:{type:Array,required:!0},hashMapMutationAttributes:{type:Map,required:!0}},filters:{formatTableColumnRequiredText:function(e){return(new Map).set("0","否").set("1","是").set("2","条件").get(e)||""}},methods:{formatTableColumnClassName:function(e,t){var a=this.hashMapMutationAttributes,n=e.mutationAttributes;return(n=Array.isArray(n)?n:[]).includes(a.get(t)||null)?"update-column":""},formatTableColumnDescriptionClassName:function(e,t){var a=this.hashMapMutationAttributes,n=e.mutationAttributes;return(n=Array.isArray(n)?n:[]).includes(a.get(t)||null)?"update-column remark-text":"remark-text"},judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},formatTableRowClassName:function(e){var t=e.row.status;return(new Map).set(0,"").set(1,"create-row").set(2,"delete-row").set(3,"update-row").get(t)||""}}},ma=da,fa=(a("fb87"),Object(m.a)(ma,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"comparison-table"},[a("Title",{attrs:{text:e.title}}),a("el-table",{staticClass:"comparison-table__table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.formatTableRowClassName,"hide-empty-img":!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width,o=t.showOverflowTooltip;return a("el-table-column",{key:n,attrs:{label:n,prop:r,width:i,"show-overflow-tooltip":o},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[["required"].includes(i)?[a("span",{class:e.formatTableColumnClassName(n,i)},[e._v(e._s(e._f("formatTableColumnRequiredText")(n[i])))])]:"描述"===o?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                    width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})]},proxy:!0}],null,!0)},[a("div",{class:e.formatTableColumnDescriptionClassName(n,i),domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:[a("span",{class:e.formatTableColumnClassName(n,i)},[e._v(e._s(n[i]))])]]}}],null,!0)})})),1)],1)}),[],!1,null,"48ff8d20",null)),ha=fa.exports,ba={name:"ChangeContentDialog",components:{VersionSwitchingHeader:sa,VersionSwitchingForm:pa,ComparisonTable:ha},props:{dialogVisible:{type:Boolean,required:!0},id:{type:Number,required:!0},apiCode:{type:String,required:!0},updatePolicy:{type:Number,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),dialogLoading:!1,firstTipVisible:!1,changeLineQuantity:0,upcomingVersionSwitch:!0,versionSwitchingFormData:{apiName:"",apiRemark:""},newVersionSwitchingFormData:{apiName:"",apiRemark:""},inParams:[],outParams:[],errorCodes:[],newInParams:[],newOutParams:[],newErrorCodes:[],hashMapMutationAttributesParams:(new Map).set("name",1).set("oldType",2).set("required",3).set("exampleValue",4).set("remark",5),hashMapMutationAttributesErrorCodes:(new Map).set("errorMsg",1).set("prescription",2).set("errorCode",3),inParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"25%",showOverflowTooltip:!0},{label:"是否必填",prop:"required",minWidth:"15%"},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],outParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"30%",showOverflowTooltip:!0},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],errorCodesTableColumnList:[{label:"错误码",prop:"errorCode",minWidth:"35%"},{label:"错误消息",prop:"errorMsg",minWidth:"60%",showOverflowTooltip:!0},{label:"处理建议",prop:"prescription",minWidth:"60%",showOverflowTooltip:!0}],ruleForm:{updateRadioVal:""},rules:{updateRadioVal:[{required:!0,message:"请选择元数据的更新类型",trigger:"change"}]}}},filters:{formatDialogTitleText:function(e){return e?"".concat(e," 接口文档变更内容"):""},formatChangeRecordsTotalText:function(e){return"共 ".concat(e," 条变更记录")}},computed:{computeVersionSwitchingFormData:function(){var e=this.upcomingVersionSwitch,t=this.versionSwitchingFormData,a=this.newVersionSwitchingFormData;return e?a:t},computeInParams:function(){var e=this.upcomingVersionSwitch,t=this.inParams,a=this.newInParams;return e?a:t},computeOutParams:function(){var e=this.upcomingVersionSwitch,t=this.outParams,a=this.newOutParams;return e?a:t},computeErrorCodes:function(){var e=this.upcomingVersionSwitch,t=this.errorCodes,a=this.newErrorCodes;return e?a:t}},methods:{getBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,1,r={unitId:t,id:a,visible:1},e.next=5,y.a.getBizApiPreDetails(r).catch((function(e){throw new Error("getBizApiPreDetails, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getBizApiPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,1,r={unitId:t,id:a,visible:1},e.next=5,y.a.getBizApiPreDetailsLatestVersion(r).catch((function(e){throw new Error("getBizApiPreDetailsLatestVersion, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.getBizApiPreDetails().catch((function(e){throw new Error("handleGetBizApiPreDetails, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.apiName,i=a.apiRemark,o=a.inParams,s=a.outParams,c=a.errorCodes,this.versionSwitchingFormData.apiName=r||"",this.versionSwitchingFormData.apiRemark=i||"",this.inParams=Array.isArray(o)?o:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(s)?s:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.errorCodes=Array.isArray(c)?c:[],this.dialogLoading=!1;case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizApiPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.getBizApiPreDetailsLatestVersion().catch((function(e){throw new Error("handleGetBizApiPreDetailsLatestVersion, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.apiName,i=a.apiRemark,o=a.inParams,s=a.outParams,c=a.errorCodes,l=a.changeLineQuantity,this.newVersionSwitchingFormData.apiName=r||"",this.newVersionSwitchingFormData.apiRemark=i||"",this.newInParams=Array.isArray(o)?o:[],this.newInParams.length>0&&this.setSelectVal(this.newInParams),this.newOutParams=Array.isArray(s)?s:[],this.newOutParams.length>0&&this.setSelectVal(this.newOutParams),this.newErrorCodes=Array.isArray(c)?c:[],this.changeLineQuantity=l||0,this.dialogLoading=!1;case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),judgeFirstTipVisible:function(){var e=this.$route.name,t="".concat(e,"/").concat("internalCallExternal","/ChangeContentDialog/firstTipVisible");this.firstTipVisible=JSON.parse(localStorage.getItem(t)||"true")},setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},onOpenDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("update:updatePolicy",2),e.next=3,Promise.all([this.handleGetBizApiPreDetails(),this.handleGetBizApiPreDetailsLatestVersion()]).catch((function(e){throw new Error("onOpenDialog, ".concat(e))}));case 3:this.judgeFirstTipVisible();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onCloseDialog:function(){this.$emit("update:dialogVisible",!1),this.firstTipVisible=!1},onClosedDialog:function(){this.$emit("update:updatePolicy",3),this.upcomingVersionSwitch=!0,this.$refs.ruleForm.resetFields()},onClickISeeButton:function(){this.firstTipVisible=!1;var e=this.$route.name,t="".concat(e,"/").concat("internalCallExternal","/ChangeContentDialog/firstTipVisible");localStorage.setItem(t,"".concat(this.firstTipVisible))},onClickUpdateNowButton:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$emit("updateNow"),t.$emit("update:dialogVisible",!1)}))},handleRadioClick:function(e){"1"===e?this.$emit("update:updatePolicy",1):this.$emit("update:updatePolicy",2)}}},ga=ba,va=(a("db39"),Object(m.a)(ga,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"change-content-dialog",attrs:{visible:e.dialogVisible,title:e._f("formatDialogTitleText")(e.apiCode),"close-on-click-modal":!1,top:"5vh",width:"1200px"},on:{open:e.onOpenDialog,close:e.onCloseDialog,closed:e.onClosedDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"footer__change-records-total"},[e._v(e._s(e._f("formatChangeRecordsTotalText")(e.changeLineQuantity)))]),a("div",{staticClass:"footer__right-button-wrapper"},[a("el-tooltip",{staticStyle:{"margin-right":"0.5rem"},attrs:{effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",[e._v(" 部分更新：只更新字段结构(增删改、顺序、类型、必填)和错误码，不更新其他描述类内容。 ")]),a("p",[e._v(" 全部更新：部分更新基础上，额外更新字段描述、示例值、接口名称、接口描述等全部内容。 ")])]},proxy:!0}])},[a("i",{staticClass:"el-icon-info-empty"})]),a("div",{staticClass:"right-button-wrapper__update-method-switch-wrapper"},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-top":"1.3rem"},attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"updateRadioVal"}},[a("el-radio",{staticStyle:{"margin-right":"0.5rem"},attrs:{label:"1"},on:{change:function(t){return e.handleRadioClick(e.ruleForm.updateRadioVal)}},model:{value:e.ruleForm.updateRadioVal,callback:function(t){e.$set(e.ruleForm,"updateRadioVal",t)},expression:"ruleForm.updateRadioVal"}},[e._v("全部更新")]),a("el-radio",{staticStyle:{"margin-right":"0.5rem"},attrs:{label:"2"},on:{change:function(t){return e.handleRadioClick(e.ruleForm.updateRadioVal)}},model:{value:e.ruleForm.updateRadioVal,callback:function(t){e.$set(e.ruleForm,"updateRadioVal",t)},expression:"ruleForm.updateRadioVal"}},[e._v("部分更新")])],1)],1)],1),a("div",{staticClass:"right-button-wrapper__update-button-wrapper"},[a("el-button",{on:{click:function(t){return e.$emit("update:dialogVisible",!1)}}},[e._v("暂不更新")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClickUpdateNowButton("ruleForm")}}},[e._v("立即更新")])],1)],1)]},proxy:!0}])},[e.firstTipVisible?a("div",{staticClass:"change-content-dialog__first-tip"},[a("p",[e._v("切换开关即可查看当前API文档内容，方便对比API仓库文档的参数差异。")]),a("el-button",{attrs:{type:"text"},on:{click:e.onClickISeeButton}},[e._v("我知道了")])],1):e._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"change-content-dialog__content"},[a("VersionSwitchingHeader",{attrs:{upcomingVersionSwitch:e.upcomingVersionSwitch,firstTipVisible:e.firstTipVisible},on:{"update:upcomingVersionSwitch":function(t){e.upcomingVersionSwitch=t},"update:upcoming-version-switch":function(t){e.upcomingVersionSwitch=t},"update:firstTipVisible":function(t){e.firstTipVisible=t},"update:first-tip-visible":function(t){e.firstTipVisible=t}}}),a("VersionSwitchingForm",{attrs:{form:e.computeVersionSwitchingFormData}}),a("ComparisonTable",{attrs:{tableData:e.computeInParams,tableColumnList:e.inParamsTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesParams,title:"请求参数"}}),a("ComparisonTable",{attrs:{tableData:e.computeOutParams,tableColumnList:e.outParamsTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesParams,title:"响应参数"}}),a("ComparisonTable",{attrs:{tableData:e.computeErrorCodes,tableColumnList:e.errorCodesTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesErrorCodes,title:"错误码"}})],1)])}),[],!1,null,"23f571a4",null)),wa=va.exports,ya={name:"DocumentHeader",components:{AlertCheckForUpdate:na,ChangeContentDialog:wa},props:{id:{type:Number,required:!0},apiCode:{type:String,required:!0},outOfDate:{type:Boolean,required:!0},updatePolicy:{type:Number,required:!0}},data:function(){return{changeContentDialogVisible:!1}},filters:{formatPageHeaderContent:function(e){return e?"".concat(e," 的接口文档"):""}},methods:{checkForUpdate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a={id:t},e.next=4,y.a.checkForUpdate(a).catch((function(e){throw new Error("checkForUpdate, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleCheckForUpdate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkForUpdate().catch((function(e){throw new Error("handleCheckForUpdate, ".concat(e))}));case 2:return t=e.sent,a=t.data,e.abrupt("return",a||!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),openNoNewReleaseConfirm:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"当前接口文档已是最新版","success",!1,"关闭",t={type:"success",showConfirmButton:false,cancelButtonText:"关闭"},e.next=7,this.$confirm("当前接口文档已是最新版",t).catch((function(){}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickViewUpdateContentButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.changeContentDialogVisible=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickCheckForUpdateButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleCheckForUpdate().catch((function(e){throw new Error("onClickCheckForUpdateButton, ".concat(e))}));case 2:if(!e.sent){e.next=8;break}return e.next=6,this.onClickViewUpdateContentButton();case 6:e.next=10;break;case 8:return e.next=10,this.openNoNewReleaseConfirm();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Ca=ya,Da=(a("b4b6"),Object(m.a)(Ca,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-header"},[a("el-page-header",{staticClass:"page-header",attrs:{content:e._f("formatPageHeaderContent")(e.apiCode)},on:{back:function(t){return e.$emit("back")}}}),a("AlertCheckForUpdate",{attrs:{apiCode:e.apiCode,outOfDate:e.outOfDate},on:{clickViewUpdateContentButton:e.onClickViewUpdateContentButton,clickCheckForUpdateButton:e.onClickCheckForUpdateButton}}),a("ChangeContentDialog",{attrs:{dialogVisible:e.changeContentDialogVisible,id:e.id,apiCode:e.apiCode,updatePolicy:e.updatePolicy},on:{"update:dialogVisible":function(t){e.changeContentDialogVisible=t},"update:dialog-visible":function(t){e.changeContentDialogVisible=t},"update:updatePolicy":function(t){return e.$emit("update:updatePolicy",t)},updateNow:function(t){return e.$emit("updateNow")}}})],1)}),[],!1,null,"7f7b51dd",null)),ka=Da.exports,xa={name:"ApiTable",components:{InputTextareaDescription:oe.a},props:{tableColumnInfo:{type:Array,default:[]},tableData:{type:Array,default:[]},showOperation:{type:Boolean,default:!1},editer:{type:Boolean,default:!0},inputMaxL:50,hideEmptyImg:{type:Boolean,default:!1}},data:function(){return{options:[{value:"0",label:"否"},{value:"1",label:"是"},{value:"2",label:"条件"}]}},methods:{judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},tableRowClassName:function(e){var t=e.row;if(e.rowIndex,t.modify){if(1==t.modify)return"api_update_del";if(2==t.modify)return"api_update_modify";if(3==t.modify)return"api_update_add"}return""}}},_a=xa,Oa=(a("2ad9"),Object(m.a)(_a,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticClass:"api-table",staticStyle:{"margin-bottom":"24px"},attrs:{data:e.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id","row-class-name":e.tableRowClassName,stripe:"","default-expand-all":"","hide-empty-img":e.hideEmptyImg}},[e._t("customColumn",[e._l(e.tableColumnInfo,(function(t,n){return[t.modify?e._e():a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left","show-tooltip-when-overflow":e.editer},scopedSlots:e._u([{key:"default",fn:function(t){return["modify"==t.column.property&&1==t.row[t.column.property]?a("span",[e._v("删除参数")]):e._e(),"modify"==t.column.property&&2==t.row[t.column.property]?a("span",[e._v("变更参数类型")]):e._e(),"modify"==t.column.property&&3==t.row[t.column.property]?a("span",[e._v("增加参数")]):e._e(),"modify"!=t.column.property?a("span",[e._v(e._s(t.row[t.column.property]))]):e._e()]}}],null,!0)}),t.modify&&"input"==t.type?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left","show-tooltip-when-overflow":e.editer},scopedSlots:e._u([{key:"default",fn:function(t){return["exampleValue"==t.column.property?a("div",["Long"==t.row.oldtype||"long"==t.row.type||"Integer"==t.row.oldtype||"int"==t.row.type||"java.math.BigInteger"==t.row.type?a("div",[e.editer||t.row.jugeChildren?e._e():a("el-input-number",{attrs:{placeholder:t.column.label,size:"medium",precision:0,step:1},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}})],1):"Double"==t.row.oldtype||"double"==t.row.type||"Float"==t.row.oldtype||"float"==t.row.type||"java.math.BigDecimal"==t.row.type?a("div",[e.editer||t.row.jugeChildren?e._e():a("el-input-number",{attrs:{placeholder:t.column.label,size:"medium",step:.1},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}})],1):"java.util.Date"==t.row.type||"java.sql.Timestamp"==t.row.type?a("div",[e.editer||t.row.jugeChildren?e._e():a("el-date-picker",{attrs:{type:"datetime",placeholder:t.column.label,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}})],1):"java.lang.Boolean"==t.row.type||"boolean"==t.row.type?a("div",[e.editer||t.row.jugeChildren?e._e():a("el-select",{attrs:{placeholder:t.column.label},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}},[a("el-option",{attrs:{value:!0}}),a("el-option",{attrs:{value:!1}})],1)],1):a("div",[e.editer||t.row.jugeChildren?e._e():a("el-input",{attrs:{maxlength:"100",placeholder:t.column.label},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,"string"==typeof a?a.trim():a)},expression:"scope.row[scope.column.property]"}})],1)]):a("div",[e.editer?e._e():a("el-input",{attrs:{maxlength:"100",placeholder:t.column.label},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,"string"==typeof a?a.trim():a)},expression:"scope.row[scope.column.property]"}})],1),e.editer?a("div",[e._v(e._s(t.row[t.column.property]))]):e._e()]}}],null,!0)}):e._e(),t.modify&&"textarea"==t.type?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[e.editer?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                      width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"wb-doc-title",domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:["描述"===o?a("InputTextareaDescription",{attrs:{value:n[i],placeholder:o},on:{"update:value":function(t){return e.$set(n,i,t)}}}):a("el-input",{attrs:{type:"textarea",rows:1,placeholder:"错误消息"===o?"错误消息，长度不超过255":o,resize:"none",maxlength:"255"},model:{value:n[i],callback:function(t){e.$set(n,i,t)},expression:"row[property]"}})]]}}],null,!0)}):e._e(),t.modify&&"select"==t.type?a("el-table-column",{key:t.prop+"-"+n,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.min_width,align:t.align||"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editer?a("div",["0"===t.row[t.column.property]?a("span",[e._v("否")]):"1"===t.row[t.column.property]?a("span",{staticStyle:{color:"red"}},[e._v("是")]):"2"===t.row[t.column.property]?a("span",[e._v("条件")]):e._e()]):e._e(),e.editer?e._e():a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row[t.column.property],callback:function(a){e.$set(t.row,t.column.property,a)},expression:"scope.row[scope.column.property]"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!0)}):e._e()]}))])],2)}),[],!1,null,"43eaab79",null)),Sa=Oa.exports,Ta={name:"ClassificationDialog",props:{showClassificationDialog:{type:Boolean,required:!0},tableData:{type:Array,default:[]},queryTableList:{type:Function,default:null},unitId:{type:Number,default:0}},methods:{handleOpen:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryTableList();case 2:this.$nextTick((function(){t.initTableDrag()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initTableDrag:function(){var e=this,t=document.querySelector(".dialog__table .el-table__body-wrapper tbody");w.a.create(t,{handle:".operation-icon",onEnd:function(t){var a=t.oldIndex,n=t.newIndex,r=Object(ie.a)(e.tableData),i=r.splice(a,1)[0];r.splice(n,0,i),e.$emit("update:tableData",r)},delay:0})},handleClose:function(){this.$emit("update:showClassificationDialog",!1),this.$emit("update:queryTableList"),this.queryTableList()},newClassification:function(){this.tableData.push({id:-(new Date).getTime(),name:"",code:"",editNameState:!0,editCodeState:!0})},handleEdit:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editNameState=!0,t.editCodeState=!1;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleDelete:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a){var r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,i=t.code,!r||-1===Math.sign(r)){e.next=9;break}return e.next=4,je.interfaceList.deleteApiCategoryById({id:r}).catch((function(e){throw new Error("handleDelete deleteApiCategoryById")}));case 4:return this.$message.success("操作成功"),e.next=7,this.queryTableList();case 7:e.next=13;break;case 9:if(null!==r||"default"!==i){e.next=12;break}return this.$message.warning("无法删除默认分类！"),e.abrupt("return");case 12:this.tableData.splice(a,1);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),handleSave:ke.a.debounce(Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tableData.map((function(e){return e.id=-1===Math.sign(e.id)?null:e.id,{id:e.id,name:e.name,code:e.code,unitId:r.unitId}})),a={categoryList:t},e.next=4,this.saveSysGroup(a).catch((function(){throw new Error("handleSave saveSysGroup")}));case 4:this.handleClose(),this.$message.success("操作成功");case 6:case"end":return e.stop()}}),e,this)}))),300),saveSysGroup:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.interfaceList.saveApiCategory(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ja=Ta,Ia=(a("3ac1"),Object(m.a)(ja,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"classification-dialog",attrs:{width:"670px",title:"管理接口所属分类",visible:e.showClassificationDialog,"close-on-click-modal":!1},on:{opened:e.handleOpen,close:e.handleClose}},[a("div",{staticClass:"dialog__header"},[a("p",{staticClass:"header__desc"},[e._v(" 创建接口分类，便于使用方在API文档中根据分类快速找到目标API。 ")]),e.tableData.length>=50?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"最多可添加50个分类",placement:"top"}},[a("el-button",{staticStyle:{color:"#7f7f7f"},attrs:{type:"text"}},[e._v("+ 新增分类")])],1):a("el-button",{attrs:{type:"text"},on:{click:e.newClassification}},[e._v("+ 新增分类")])],1),a("el-table",{staticClass:"dialog__table",attrs:{data:e.tableData,height:"350","row-key":"id"}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editNameState?a("el-input",{attrs:{placeholder:"支持中英文，数字，2-15个字符"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"==typeof a?a.trim():a)},expression:"scope.row.name"}}):a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"code",label:"分类编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editCodeState?a("el-input",{attrs:{placeholder:"支持中英文，数字，2-15个字符"},model:{value:t.row.code,callback:function(a){e.$set(t.row,"code","string"==typeof a?a.trim():a)},expression:"scope.row.code"}}):a("span",[e._v(e._s(t.row.code))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.$index;return[n.editNameState?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{staticClass:"table__delete",attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n,r)}}},[e._v("删除")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击可拖动排序,前台API文档分类顺序将按照列表顺序展示",placement:"top"}},[a("span",{staticClass:"operation-icon"})])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("关闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)}),[],!1,null,"0281bb44",null)),La=Ia.exports,Aa={name:"LeftVersionList",props:{emptyImageVisible:{type:Boolean,required:!0},list:{type:Array,required:!0},pageNum:{type:Number,required:!0},total:{type:Number,required:!0},currentVersionId:{type:Number,required:!0},currentVersionName:{type:String,required:!0},loadingTextVisible:{type:Boolean,required:!0}},computed:{computeInfiniteScrollDisabled:function(){var e=this.loadingTextVisible,t=this.computeNoMoreVisible;return e||t},computeNoMoreVisible:function(){var e=this.list.length,t=this.total;return e>30&&t<=e}},methods:{scrollLoad:function(){this.$emit("scrollLoad")},judgeListItemIsActiveClassName:function(e){return e===this.currentVersionId},onClickListItem:function(e,t){this.$emit("update:currentVersionId",e),this.$emit("update:currentVersionName",t),this.$emit("clickLeftVersionListItem")}}},Pa=Aa,Na=(a("c42f"),Object(m.a)(Pa,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-version-list",class:{"is-empty":e.emptyImageVisible}},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.scrollLoad,expression:"scrollLoad"}],staticClass:"left-version-list__list",attrs:{"infinite-scroll-disabled":e.computeInfiniteScrollDisabled,"infinite-scroll-immediate":!1}},e._l(e.list,(function(t){var n=t.id,r=t.version;return a("li",{key:n,ref:"listItem",refInFor:!0,staticClass:"list__item",class:{"is-active":e.judgeListItemIsActiveClassName(n)},on:{click:function(t){return e.onClickListItem(n,r)}}},[e._v(" "+e._s(r)+" ")])})),0),e.loadingTextVisible?a("p",{staticClass:"left-version-list__loading-text"},[e._v(" 加载中... ")]):e._e(),e.computeNoMoreVisible?a("p",{staticClass:"left-version-list__no-more-text"},[e._v(" 没有更多了 ")]):e._e()])}),[],!1,null,"45be5693",null)),Ba=Na.exports,Fa={name:"HeaderDocument",mixins:[A.a],props:{currentVersionName:{type:String,required:!0}},methods:{onClickRecoverButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentVersionName,a="确定要恢复到 ".concat(t," 的版本吗？"),"恢复文档","warning","确定恢复",r={type:"warning",confirmButtonText:"确定恢复"},e.next=8,this.$confirm(a,"恢复文档",r).then((function(){i.$emit("recoverDocument")})).catch((function(){}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Va=Fa,Ea=(a("98d2"),Object(m.a)(Va,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-document"},[a("p",{staticClass:"header-document__title"},[e._v("版本信息")]),a("el-button",{attrs:{clstag:e.clstag("OpenApi_1671105827529|2",""),main:!0},on:{click:e.onClickRecoverButton}},[e._v("恢 复")])],1)}),[],!1,null,"54c7ef3c",null)),Ra=Ea.exports,za={name:"FormDocument",props:{form:{type:Object,required:!0},categoryList:{type:Array,required:!0}},data:function(){return{formParagraphList:[{label:"发布人",prop:"publisher"},{label:"对外接口名称",prop:"apiName"},{label:"对外接口描述",prop:"apiRemark",className:"pre-wrap"},{label:"所属分类",prop:"categoryCode"}]}},filters:{formatParagraphContentClassName:function(e){return e?"paragraph__content pre-wrap":"paragraph__content"}},methods:{formatParagraphContentText:function(e){return(this.categoryList.find((function(t){return t.code===e}))||{}).name||e}}},$a=za,Ua=(a("15ff"),Object(m.a)($a,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"form-document",attrs:{model:e.form,"label-width":"80px"}},e._l(e.formParagraphList,(function(t){var n=t.label,r=t.prop,i=t.className;return a("div",{key:r,staticClass:"form-document__paragraph"},[a("p",{staticClass:"paragraph__label"},[e._v(e._s(n))]),a("p",{class:e._f("formatParagraphContentClassName")(i)},[e._v(" "+e._s(e.formatParagraphContentText(e.form[r]))+" ")])])})),0)}),[],!1,null,"5ac14592",null)),Ma=Ua.exports,qa={name:"TableDocument",props:{title:{type:String,default:""},tableData:{type:Array,default:function(){return[]}},tableColumnList:{type:Array,required:!0}},filters:{formatTableColumnRequiredText:function(e){return(new Map).set("0","否").set("1","是").set("2","条件").get(e)||""}},methods:{judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},formatTableRowClassName:function(e){var t=e.row.visible;return(new Map).set(0,"hidden-row").set(1,"").get(t)||""}}},Ha=qa,Ka=(a("f7eb"),Object(m.a)(Ha,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"table-document"},[a("p",{staticClass:"table-document__title"},[e._v(e._s(e.title))]),a("el-table",{staticClass:"table-document__table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.formatTableRowClassName,"hide-empty-img":!0,stripe:!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width,o=t.showOverflowTooltip;return a("el-table-column",{key:n,attrs:{label:n,prop:r,width:i,"show-overflow-tooltip":o},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[["required"].includes(i)?[a("span",[e._v(e._s(e._f("formatTableColumnRequiredText")(n[i])))])]:"描述"===o?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                    width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}},[e._v(" "+e._s(n[i])+" ")])]},proxy:!0}],null,!0)},[a("div",{staticClass:"remark-text",domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:[a("span",[e._v(e._s(n[i]))])]]}}],null,!0)})})),1)],1)}),[],!1,null,"c9683218",null)),Ga=Ka.exports,Qa={name:"ExampleDocument",props:{title:{type:String,default:""},demo:{type:String,default:""}}},Wa=Qa,Ja=(a("b3e0"),Object(m.a)(Wa,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"example-document"},[a("p",{staticClass:"example-document__title"},[e._v(e._s(e.title))]),a("el-input",{attrs:{autosize:{minRows:10,maxRows:35},disabled:!0,type:"textarea",placeholder:"平台建议示例中仅包含开发者必传的字段,以便提升开发者的开发效率"},model:{value:e.demo,callback:function(t){e.demo=t},expression:"demo"}})],1)}),[],!1,null,"6a194f68",null)),Xa=Ja.exports,Za={name:"RightDocument",components:{HeaderDocument:Ra,FormDocument:Ma,TableDocument:Ga,ExampleDocument:Xa},props:{emptyImageVisible:{type:Boolean,required:!0},currentVersionName:{type:String,required:!0},form:{type:Object,required:!0},categoryList:{type:Array,required:!0},requestParamsTableData:{type:Array,required:!0},responseParamsTableData:{type:Array,required:!0},errorCodesTableData:{type:Array,required:!0},requestDemo:{type:String,default:""},responseDemo:{type:String,default:""},exceptionDemo:{type:String,default:""}},data:function(){return{inParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"25%",showOverflowTooltip:!0},{label:"是否必填",prop:"required",minWidth:"15%"},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],outParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"30%",showOverflowTooltip:!0},{label:"是否必填",prop:"required",minWidth:"15%"},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],errorCodesTableColumnList:[{label:"错误码",prop:"errorCode",minWidth:"35%"},{label:"错误消息",prop:"errorMsg",minWidth:"60%",showOverflowTooltip:!0},{label:"处理建议",prop:"prescription",minWidth:"60%",showOverflowTooltip:!0}]}}},Ya=Za,en=(a("d08a"),Object(m.a)(Ya,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"right-document"},[e.emptyImageVisible?a("section",{staticClass:"right-document__empty-image"},[a("p",{staticClass:"empty-image__text"},[e._v("暂无版本记录")])]):a("div",{staticClass:"right-document__content"},[a("HeaderDocument",{attrs:{currentVersionName:e.currentVersionName},on:{recoverDocument:function(){return e.$emit("recoverDocument")}}}),a("FormDocument",{attrs:{form:e.form,categoryList:e.categoryList}}),a("TableDocument",{attrs:{tableData:e.requestParamsTableData,tableColumnList:e.inParamsTableColumnList,title:"请求参数"}}),a("TableDocument",{attrs:{tableData:e.responseParamsTableData,tableColumnList:e.outParamsTableColumnList,title:"响应参数"}}),a("ExampleDocument",{attrs:{title:"请求报文示例",demo:e.requestDemo}}),a("ExampleDocument",{attrs:{title:"响应报文示例",demo:e.responseDemo}}),a("ExampleDocument",{attrs:{title:"异常示例",demo:e.exceptionDemo}}),a("TableDocument",{attrs:{tableData:e.errorCodesTableData,tableColumnList:e.errorCodesTableColumnList,title:"错误码"}})],1)])}),[],!1,null,"28459bc6",null)),tn=en.exports,an={name:"DialogViewDocumentHistoricalVersions",components:{LeftVersionList:Ba,RightDocument:tn},props:{dialogVisible:{type:Boolean,required:!0},apiId:{type:Number,required:!0},categoryList:{type:Array,required:!0}},data:function(){return{dialogLoading:!1,pageNum:1,pageSize:30,total:0,emptyImageVisible:!0,leftVersionList:[],currentVersionId:0,currentVersionName:"",loadingTextVisible:!1,scrollLoadTime:0,rightDocumentFormData:{publisher:"",apiName:"",apiRemark:"",categoryCode:""},requestParamsTableData:[],responseParamsTableData:[],errorCodesTableData:[],requestDemo:"",responseDemo:"",exceptionDemo:""}},methods:{api$apiId:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.apiId,a=this.pageNum,r=this.pageSize,i={pageNum:a,pageSize:r},e.next=4,rt.a.api$apiId(t,i).catch((function(e){throw new Error("api".concat(t,", ").concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),apiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentVersionId,a=t,e.next=4,rt.a.apiDetails$id(a).catch((function(e){throw new Error("apiDetails".concat(a,", ").concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleApi$apiId:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api$apiId().catch((function(e){throw new Error("handleApi$apiId, ".concat(e))}));case 2:t=e.sent,a=t.data,r=a.total,i=a.list,this.total=r||0,this.emptyImageVisible=Boolean(!this.total),this.leftVersionList=this.leftVersionList.concat(Array.isArray(i)?i:[]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleApiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h,b,g,v,w,y,C,D,k,x,_;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.apiDetails$id().catch((function(e){throw new Error("handleApiDetails$id, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.publisher,i=a.apiName,o=a.apiRemark,s=a.categoryCode,c=a.inParams,l=a.outParams,u=a.errorCodes,p=a.requestDemo,d=a.reponseDemo,m=a.exceptionDemo,this.rightDocumentFormData.publisher=r||"",this.rightDocumentFormData.apiName=i||"",this.rightDocumentFormData.apiRemark=o||"",this.rightDocumentFormData.categoryCode=s||"",this.requestParamsTableData=Array.isArray(c)?c:[],this.requestParamsTableData.length>0&&this.setSelectVal(this.requestParamsTableData),this.responseParamsTableData=Array.isArray(l)?l:[],this.responseParamsTableData.length>0&&this.setSelectVal(this.responseParamsTableData),this.errorCodesTableData=Array.isArray(u)?u:[],f=Array.isArray(p)?p:[],h=Object(L.a)(f,1),b=h[0],g=(b||{}).content,this.requestDemo=g||"",v=Array.isArray(d)?d:[],w=Object(L.a)(v,1),y=w[0],C=(y||{}).content,this.responseDemo=C||"",D=Array.isArray(m)?m:[],k=Object(L.a)(D,1),x=k[0],_=(x||{}).content,this.exceptionDemo=_||"",this.dialogLoading=!1;case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},onOpenDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.handleApi$apiId().catch((function(e){throw new Error("onOpenDialog, ".concat(e))}));case 3:return e.next=5,this.$nextTick();case 5:this.leftVersionList.length>0&&(t=Object(L.a)(this.$refs.leftVersionList.$refs.listItem,1),t[0].click()),this.dialogLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onCloseDialog:function(){this.$emit("update:dialogVisible",!1)},onClosedDialog:function(){this.emptyImageVisible=!0,this.pageNum=1,this.total=0,this.leftVersionList=[],this.currentVersionId=0,this.currentVersionName="",this.loadingTextVisible=!1,this.scrollLoadTime=0,this.rightDocumentFormData={publisher:"",apiName:"",apiRemark:"",categoryCode:""},this.requestParamsTableData=[],this.responseParamsTableData=[],this.errorCodesTableData=[],this.requestDemo="",this.responseDemo="",this.exceptionDemo=""},onScrollLoad:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,i,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scrollLoadTime,a=this.total,i=this.pageSize,!(t<1)){e.next=4;break}return this.scrollLoadTime+=1,e.abrupt("return");case 4:if(this.loadingTextVisible=!0,!(a<i)){e.next=8;break}return this.loadingTextVisible=!1,e.abrupt("return");case 8:setTimeout(Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.pageNum+=1,e.next=3,o.handleApi$apiId().catch((function(e){throw new Error("onScrollLoad, ".concat(e))}));case 3:o.loadingTextVisible=!1;case 4:case"end":return e.stop()}}),e)}))),1e3);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickLeftVersionListItem:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleApiDetails$id().catch((function(e){throw new Error("onClickLeftVersionListItem, ".concat(e))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onRecoverDocument:function(){var e=this.currentVersionId;this.$emit("recoverDocument",e)}}},nn=an,rn=(a("160a"),Object(m.a)(nn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-view-document-historical-versions",attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,title:"查看文档历史版本",top:"5vh",width:"1200px"},on:{open:e.onOpenDialog,close:e.onCloseDialog,closed:e.onClosedDialog}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"dialog-view-document-historical-versions__content"},[a("LeftVersionList",{ref:"leftVersionList",attrs:{emptyImageVisible:e.emptyImageVisible,list:e.leftVersionList,pageNum:e.pageNum,total:e.total,currentVersionId:e.currentVersionId,currentVersionName:e.currentVersionName,loadingTextVisible:e.loadingTextVisible},on:{"update:pageNum":function(t){e.pageNum=t},"update:page-num":function(t){e.pageNum=t},"update:currentVersionId":function(t){e.currentVersionId=t},"update:current-version-id":function(t){e.currentVersionId=t},"update:currentVersionName":function(t){e.currentVersionName=t},"update:current-version-name":function(t){e.currentVersionName=t},scrollLoad:e.onScrollLoad,clickLeftVersionListItem:e.onClickLeftVersionListItem}}),a("RightDocument",{attrs:{emptyImageVisible:e.emptyImageVisible,currentVersionName:e.currentVersionName,form:e.rightDocumentFormData,categoryList:e.categoryList,requestParamsTableData:e.requestParamsTableData,responseParamsTableData:e.responseParamsTableData,errorCodesTableData:e.errorCodesTableData,requestDemo:e.requestDemo,responseDemo:e.responseDemo,exceptionDemo:e.exceptionDemo},on:{recoverDocument:e.onRecoverDocument}})],1)])}),[],!1,null,"1c48f171",null)),on=rn.exports,sn={name:"ExternalDocuments",mixins:[A.a],props:{currentRowId:{type:Number,required:!0}},components:{DocumentHeader:ka,ApiTable:Sa,StickyWrapper:Ce.a,ClassificationDialog:La,DialogViewDocumentHistoricalVersions:on},data:function(){return{unitId:parseInt(this.$route.params.id),externalDocumentLoading:!0,editable:!1,metadataRenew:!1,manageCategoryData:[],manageCategoryProp:[],version:"",apiCode:"",outOfDate:!1,inParams:[],outParams:[],categoryName:"",errorCodes:[],updatePolicy:3,documentTitleForm:{apiName:"",apiRemark:"",categoryCode:""},documentTitleFormRules:{apiName:[{required:!0,message:"接口名称不能为空"},{min:2,max:255,message:"长度在 2 到 20 个字符"}],apiRemark:[{required:!0,message:"接口描述不能为空"},{min:2,max:500,message:"长度在 2 到 500 个字符"}]},requestDemo:"",responseDemo:"",exceptionDemo:"",columnsInParams:[{prop:"name",label:"名称",min_width:"30%"},{prop:"oldType",label:"类型",min_width:"30%"},{prop:"required",label:"是否必填",min_width:"21%",modify:!0,type:"select"},{prop:"exampleValue",label:"示例",min_width:"20%",modify:!0,type:"input"},{prop:"remark",label:"描述",min_width:"25%",modify:!0,type:"textarea"}],columnsOutParams:[{prop:"name",label:"名称",min_width:"30%"},{prop:"oldType",label:"类型",min_width:"30%"},{prop:"required",label:"是否必填",min_width:"21%",modify:!0,type:"select"},{prop:"exampleValue",label:"示例",min_width:"20%",modify:!0,type:"input"},{prop:"remark",label:"描述",min_width:"25%",modify:!0,type:"textarea"}],columnsErrorCode:[{prop:"errorCode",label:"错误码",modify:!0,min_width:"35%"},{prop:"errorMsg",label:"错误消息",modify:!0,min_width:"60%"}],saveButtonLoading:!1,saveButtonDebounceTimer:null,showClassificationDialog:!1,viewDocumentHistoricalVersionsDialogVisible:!1}},computed:{computeTitle:function(){return this.apiCode+"的接口文档"}},methods:{getApiCategory:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={unitId:t},e.next=4,y.a.getApiCategory(a).catch((function(e){throw new Error("getApiCategory, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getOutwardApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.currentRowId,r={unitId:t,id:a},e.next=5,y.a.lcp.unit.getOutwardApiPreDetails(r).catch((function(e){throw new Error("getOutwardApiPreDetails, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),generateBizApiPreDetailsPreview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.currentRowId,r=this.updatePolicy,1,i={unitId:t,id:a,visible:1,updatePolicy:r},e.next=6,y.a.generateBizApiPreDetailsPreview(i).catch((function(e){throw new Error("generateBizApiPreDetailsPreview, ".concat(e))}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h,b,g,v;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.currentRowId,r=this.metadataRenew,i=this.version,o=this.inParams,s=this.outParams,c=this.errorCodes,l=this.requestDemo,u=this.responseDemo,p=this.exceptionDemo,d=this.updatePolicy,m=a,f=this.documentTitleForm,h=f.apiName,b=f.apiRemark,g=f.categoryCode,v={unitId:t,id:m,metadataRenew:r,version:i,inParams:o,outParams:s,errorCodes:c,apiName:h,apiRemark:b,categoryCode:g,requestDemo:[{content:l}],reponseDemo:[{content:u}],exceptionDemo:[{content:p}],updatePolicy:d},e.next=6,y.a.saveBizApiPreDetails(v).catch((function(e){throw new Error("saveBizApiPreDetails, ".concat(e))}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),apiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.a.apiDetails$id(t).catch((function(e){throw new Error("apiDetails".concat(t,", ").concat(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleGetApiCategory:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getApiCategory().catch((function(e){throw new Error("handleGetApiCategory, ".concat(e))}));case 2:t=e.sent,a=t.data,this.manageCategoryData=Array.isArray(a)?a.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{editNameState:!1,editCodeState:!1})})):[],this.manageCategoryProp=JSON.parse(JSON.stringify(this.manageCategoryData));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetOutwardApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f,h,b,g;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalDocumentLoading=!0,e.next=3,this.getOutwardApiPreDetails().catch((function(e){throw new Error("handleGetOutwardApiPreDetails, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.version,i=a.apiCode,o=a.outOfDate,s=a.inParams,c=a.outParams,l=a.apiName,u=a.apiRemark,p=a.categoryCode,d=a.errorCodes,m=a.requestDemo,f=a.reponseDemo,h=a.exceptionDemo,this.version=r||"",this.apiCode=i||"",this.outOfDate=o||!1,this.inParams=Array.isArray(s)?s:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(c)?c:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.documentTitleForm.apiName=l||"",this.documentTitleForm.apiRemark=u||"",this.documentTitleForm.categoryCode=p||"",b=this.manageCategoryData.find((function(e){return e.code===p})),g=b.name,this.categoryName=g||"",this.errorCodes=Array.isArray(d)?d:[],this.requestDemo=m||"",this.responseDemo=f||"",this.exceptionDemo=h||"",this.externalDocumentLoading=!1;case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGenerateBizApiPreDetailsPreview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p,d,m,f;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalDocumentLoading=!0,e.next=3,this.generateBizApiPreDetailsPreview().catch((function(e){throw new Error("handleGenerateBizApiPreDetailsPreview, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.version,i=a.apiCode,o=a.outOfDate,s=a.inParams,c=a.outParams,l=a.apiName,u=a.apiRemark,p=a.categoryCode,d=a.errorCodes,this.version=r||"",this.apiCode=i||"",this.outOfDate=o||!1,this.inParams=Array.isArray(s)?s:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(c)?c:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.documentTitleForm.apiName=l||"",this.documentTitleForm.apiRemark=u||"",this.documentTitleForm.categoryCode=p||"",m=this.manageCategoryData.find((function(e){return e.code===p})),f=m.name,this.categoryName=f||"",this.errorCodes=Array.isArray(d)?d:[],this.externalDocumentLoading=!1,this.$message.success("文档数据更新成功，保存文档并发布后生效。");case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleSaveBizApiPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveBizApiPreDetails().catch((function(e){throw new Error("handleSaveBizApiPreDetails, ".concat(e))}));case 2:this.$message.success("保存成功!");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleApiDetails$id:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i,o,s,c,l,u,p,d,m,f,h,b,g,v,w,y,C,D,k,x,_,O,S,T,j,I;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalDocumentLoading=!0,e.next=3,this.apiDetails$id(t).catch((function(e){throw new Error("handleApiDetails$id, ".concat(e))}));case 3:a=e.sent,r=a.data,i=r.version,o=r.apiCode,s=r.outOfDate,c=r.inParams,l=r.outParams,u=r.apiName,p=r.apiRemark,d=r.categoryCode,m=r.errorCodes,f=r.requestDemo,h=r.reponseDemo,b=r.exceptionDemo,this.version=i||"",this.apiCode=o||"",this.outOfDate=s||!1,this.inParams=Array.isArray(c)?c:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.outParams=Array.isArray(l)?l:[],this.outParams.length>0&&this.setSelectVal(this.outParams),this.documentTitleForm.apiName=u||"",this.documentTitleForm.apiRemark=p||"",this.documentTitleForm.categoryCode=d||"",g=this.manageCategoryData.find((function(e){return e.code===d})),v=g.name,this.categoryName=v||"",this.errorCodes=Array.isArray(m)?m:[],w=Array.isArray(f)?f:[],y=Object(L.a)(w,1),C=y[0],D=(C||{}).content,this.requestDemo=D||"",k=Array.isArray(h)?h:[],x=Object(L.a)(k,1),_=x[0],O=(_||{}).content,this.responseDemo=O||"",S=Array.isArray(b)?b:[],T=Object(L.a)(S,1),j=T[0],I=(j||{}).content,this.exceptionDemo=I||"",this.externalDocumentLoading=!1,this.$message.success("文档数据更新成功，保存文档并发布后生效。");case 41:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},onBack:function(){this.$emit("update:showComponent","InterfaceTableList")},onUpdateNow:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editable=!0,e.next=3,this.$nextTick();case 3:return e.next=5,this.handleGenerateBizApiPreDetailsPreview().catch((function(e){throw new Error("onUpdateNow, ".concat(e))}));case 5:this.metadataRenew=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickCancelButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editable=!1,e.next=3,this.handleGetOutwardApiPreDetails().catch((function(e){throw new Error("onClickCancelButton, ".concat(e))}));case 3:this.metadataRenew=!1;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickSaveButton:function(){var e=this;clearTimeout(this.saveButtonDebounceTimer),this.saveButtonDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.documentTitleFormRef.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return e.saveButtonLoading=!0,t.next=4,e.handleSaveBizApiPreDetails().catch((function(t){throw e.saveButtonLoading=!1,new Error(t)}));case 4:return e.saveButtonLoading=!1,t.next=7,e.onClickCancelButton().catch((function(e){throw new Error("onClickSaveButton, ".concat(e))}));case 7:e.$emit("updateDetailHeaderInfo"),t.next=11;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),300)},onClickViewDocumentHistoricalVersionsButton:function(){this.viewDocumentHistoricalVersionsDialogVisible=!0},onClickEditButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editable=!0,e.next=3,this.handleGetOutwardApiPreDetails().catch((function(e){throw new Error("onClickEditButton, ".concat(e))}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onRecoverDocument:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.viewDocumentHistoricalVersionsDialogVisible=!1,this.editable=!0,e.next=4,this.$nextTick();case 4:return e.next=6,this.handleApiDetails$id(t).catch((function(e){throw new Error("onRecoverDocument, ".concat(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleGetApiCategory().catch((function(e){throw new Error("created, ".concat(e))}));case 2:return e.next=4,this.handleGetOutwardApiPreDetails().catch((function(e){throw new Error("created, ".concat(e))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},cn=sn,ln=(a("4b3b"),Object(m.a)(cn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.externalDocumentLoading,expression:"externalDocumentLoading"}],staticClass:"external-documents"},[a("DocumentHeader",{attrs:{id:e.currentRowId,apiCode:e.apiCode,outOfDate:e.outOfDate,updatePolicy:e.updatePolicy},on:{"update:updatePolicy":function(t){e.updatePolicy=t},"update:update-policy":function(t){e.updatePolicy=t},back:e.onBack,updateNow:e.onUpdateNow}}),a("el-form",{ref:"documentTitleFormRef",staticClass:"document-title-form",attrs:{model:e.documentTitleForm,rules:e.documentTitleFormRules}},[e.editable?a("el-form-item",{attrs:{prop:"apiName",label:"接口名称","label-width":"90px"}},[a("el-input",{staticClass:"form__input",attrs:{placeholder:"请输入内容"},model:{value:e.documentTitleForm.apiName,callback:function(t){e.$set(e.documentTitleForm,"apiName","string"==typeof t?t.trim():t)},expression:"documentTitleForm.apiName"}})],1):e._e(),e.editable?e._e():a("div",{staticClass:"form-api"},[a("span",{staticClass:"api-desc-title"},[e._v("接口名称")]),a("span",{staticClass:"api-desc-content"},[e._v(e._s(e.documentTitleForm.apiName))])]),e.editable?a("el-form-item",{attrs:{prop:"apiRemark",label:"接口描述","label-width":"90px"}},[a("el-input",{staticClass:"form__input",attrs:{rows:5,type:"textarea",placeholder:"请输入内容"},model:{value:e.documentTitleForm.apiRemark,callback:function(t){e.$set(e.documentTitleForm,"apiRemark",t)},expression:"documentTitleForm.apiRemark"}})],1):e._e(),e.editable?e._e():a("div",{staticClass:"form-api"},[a("span",{staticClass:"api-desc-title"},[e._v("接口描述")]),a("p",{staticClass:"api-desc-content"},[e._v(e._s(e.documentTitleForm.apiRemark))])]),e.editable?a("el-form-item",{attrs:{prop:"categoryCode",label:"所属分类","label-width":"90px"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属分类 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建接口分类，便于使用方在API文档中根据分类快速找到目标API。",placement:"top"}},[a("i",{staticClass:"el-icon-help"})])],1),a("el-select",{attrs:{placeholder:"请选择所属分类"},model:{value:e.documentTitleForm.categoryCode,callback:function(t){e.$set(e.documentTitleForm,"categoryCode",t)},expression:"documentTitleForm.categoryCode"}},e._l(e.manageCategoryData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1),a("el-button",{staticClass:"management-classification",attrs:{type:"text"},on:{click:function(t){e.showClassificationDialog=!0}}},[e._v("管理分类")])],1):e._e(),e.editable?e._e():a("p",{staticClass:"form-api"},[a("span",{staticClass:"api-desc-title"},[e._v("所属分类")]),a("span",{staticClass:"api-desc-content"},[e._v(e._s(e.categoryName))])])],1),a("h4",{staticClass:"document-sub-title"},[e._v("请求参数")]),a("ApiTable",{attrs:{tableData:e.inParams,tableColumnInfo:e.columnsInParams,editer:!e.editable,hideEmptyImg:!0}}),a("h4",{staticClass:"document-sub-title"},[e._v("响应参数")]),a("ApiTable",{attrs:{tableData:e.outParams,tableColumnInfo:e.columnsOutParams,editer:!e.editable,hideEmptyImg:!0}}),a("div",{staticClass:"message-example"},[a("h4",{staticClass:"message-example__title"},[e._v("请求报文示例")]),e.editable?a("span",{staticClass:"title__desc"},[e._v("可根据需要自行录入报文示例，如不录入，系统会根据“请求参数”中的内容自动生成")]):e._e(),a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:35},disabled:!e.editable,placeholder:"平台建议示例中仅包含开发者必须要关注的字段，以便提升开发者的开发效率"},model:{value:e.requestDemo,callback:function(t){e.requestDemo=t},expression:"requestDemo"}})],1),a("div",{staticClass:"message-example"},[a("h4",{staticClass:"message-example__title"},[e._v("响应报文示例")]),e.editable?a("span",{staticClass:"title__desc"},[e._v("可根据需要自行录入报文示例，如不录入，系统会根据“响应参数”中的内容自动生成")]):e._e(),a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:35},disabled:!e.editable,placeholder:"平台建议示例中仅包含开发者必需要关注的字段，以便提升开发者的开发效率"},model:{value:e.responseDemo,callback:function(t){e.responseDemo=t},expression:"responseDemo"}})],1),a("div",{staticClass:"message-example"},[a("h4",{staticClass:"message-example__title",staticStyle:{"margin-top":"30px"}},[e._v(" 异常示例"),e.editable?a("span",{staticClass:"title__desc"},[e._v("可根据需求自行录入报文示例,如不录入,前台的API文档将不展示该模块")]):e._e()]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:35},disabled:!e.editable,placeholder:"平台建议示例中仅包含开发者必须要关注的字段,以便提升开发者的开发效率"},model:{value:e.exceptionDemo,callback:function(t){e.exceptionDemo=t},expression:"exceptionDemo"}})],1),a("h4",{staticClass:"document-sub-title"},[e._v("错误码")]),a("ApiTable",{attrs:{tableData:e.errorCodes,tableColumnInfo:e.columnsErrorCode,editer:!e.editable,showOperation:!0,hideEmptyImg:!0},scopedSlots:e._u([{key:"customColumn",fn:function(){return[a("el-table-column",{staticStyle:{margin:"0px",padding:"0px"},attrs:{prop:"errorCode",label:"错误码","min-width":"360","show-tooltip-when-overflow":!e.editable},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.errorCode))])]}}])}),a("el-table-column",{staticStyle:{margin:"0px",padding:"0px"},attrs:{prop:"errorMsg",label:"错误消息","min-width":"600","show-tooltip-when-overflow":!e.editable},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.errorMsg))])]}}])}),a("el-table-column",{staticStyle:{margin:"0px",padding:"0px"},attrs:{prop:"prescription",label:"处理建议","min-width":"600","show-tooltip-when-overflow":!e.editable},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.prescription))])]}}])})]},proxy:!0}])}),a("StickyWrapper",[e.editable?a("div",{staticClass:"sticky-wrapper__button-wrapper"},[a("el-button",{on:{click:e.onClickCancelButton}},[e._v("取消")]),a("el-button",{attrs:{loading:e.saveButtonLoading,type:"primary"},on:{click:e.onClickSaveButton}},[e._v("保存")])],1):[a("el-button",{attrs:{clstag:e.clstag("OpenApi_1671105827529|1",""),type:"text"},on:{click:e.onClickViewDocumentHistoricalVersionsButton}},[e._v("查看文档历史版本")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onClickEditButton}},[e._v("编辑")])]],2),a("ClassificationDialog",{attrs:{showClassificationDialog:e.showClassificationDialog,tableData:e.manageCategoryProp,queryTableList:e.handleGetApiCategory,unitId:e.unitId},on:{"update:showClassificationDialog":function(t){e.showClassificationDialog=t},"update:show-classification-dialog":function(t){e.showClassificationDialog=t},"update:tableData":function(t){e.manageCategoryProp=t},"update:table-data":function(t){e.manageCategoryProp=t}}}),a("DialogViewDocumentHistoricalVersions",{attrs:{dialogVisible:e.viewDocumentHistoricalVersionsDialogVisible,apiId:e.currentRowId,categoryList:e.manageCategoryData},on:{"update:dialogVisible":function(t){e.viewDocumentHistoricalVersionsDialogVisible=t},"update:dialog-visible":function(t){e.viewDocumentHistoricalVersionsDialogVisible=t},recoverDocument:e.onRecoverDocument}})],1)}),[],!1,null,"20dc84fb",null)),un=ln.exports,pn={name:"InternalCallInterfaceList",components:{InterfaceTableList:Wt,AddInterfaceSteps:Yt,ExternalDocuments:un},data:function(){return{showComponent:"InterfaceTableList",currentRowId:null,outOfDate:!1}}},dn=pn,mn=Object(m.a)(dn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"internal-call-external"},["InterfaceTableList"===e.showComponent?a("InterfaceTableList",{attrs:{showComponent:e.showComponent,currentRowId:e.currentRowId,outOfDate:e.outOfDate},on:{"update:showComponent":function(t){e.showComponent=t},"update:show-component":function(t){e.showComponent=t},"update:currentRowId":function(t){e.currentRowId=t},"update:current-row-id":function(t){e.currentRowId=t},"update:outOfDate":function(t){e.outOfDate=t},"update:out-of-date":function(t){e.outOfDate=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):e._e(),"AddInterfaceSteps"===e.showComponent?a("AddInterfaceSteps",{attrs:{showComponent:e.showComponent,currentRowId:e.currentRowId},on:{"update:showComponent":function(t){e.showComponent=t},"update:show-component":function(t){e.showComponent=t},"update:currentRowId":function(t){e.currentRowId=t},"update:current-row-id":function(t){e.currentRowId=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):e._e(),"ExternalDocuments"===e.showComponent?a("ExternalDocuments",{attrs:{showComponent:e.showComponent,currentRowId:e.currentRowId},on:{"update:showComponent":function(t){e.showComponent=t},"update:show-component":function(t){e.showComponent=t},"update:currentRowId":function(t){e.currentRowId=t},"update:current-row-id":function(t){e.currentRowId=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):e._e()],1)}),[],!1,null,"77d2bfc9",null),fn=mn.exports,hn=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-top":"0px","text-align":"center"}},[t("img",{attrs:{src:a("24ec")}})])}],bn=a("333d"),gn=a("6ea4"),vn=a("bc3a"),wn=a.n(vn),yn=a("365c"),Cn={name:"SdkList",components:{Pagination:bn.a,Steps:gn.a},props:{baseInfoStatus:Number},data:function(){return{statusTextTable:{1:"初始化",5:"已发布",10:"编辑中"},statusClassTable:{1:"initColor",5:"normalColor",10:"updateColor"},row:{},active:0,dialogSDKHideVisible:!1,imageTable:[k.a,_.a],percentage:0,visible:!1,deleteSdkPopoverVisible:!1,uploadUrl:window.env.gatewayFileBaseApi+"lop/mulfile/upload?LOP-DN="+window.env.gatewayUploadLopDn,downloadDialogVisible:!1,unitId:"",sdkId:"",tableDatas:[],uploadFile:{uploadSdkId:"",uploadSdkFile:"",fileList:[]},recordSdk:{finishPct:"",finishNum:"",fileName:"",failNum:"",failCause:"",jssKey:""},listQuery:{searchKeyWord:"",total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},timer:null,colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#1989fa",percentage:60},{color:"#6f7ad3",percentage:80},{color:"#5cb87a",percentage:100}],loading:!0,nodata:"yes",buttonDisabled:!1}},computed:{computeDialogHideTitle:function(){return{0:"SDK隐藏",1:"SDK取消隐藏"}[this.row.hide]},computeDialogHideCancelButtonText:function(){return["取 消","关 闭"][this.active]},computeDialogHideImage:function(){return this.imageTable[this.active]}},filters:{parseFileNamefilter:function(e){return e||"-"},parseLanguagefilter:function(e){return 1===e?"JAVA":2===e?".NET":3===e?"PHP":void 0}},methods:{judgeStatusClass:function(e){return e.hide?"deadColor":this.statusClassTable[e.status]},formatStatusText:function(e){return e.hide?"已隐藏":this.statusTextTable[e.status]},isShowEditButton:function(e){return!e.hide&&{1:!0,5:!0,10:!0}[e.status]},isShowRemoveButton:function(e){return 1===e.status||!!e.hide},handleLinkToTarget:function(){window.open("//".concat(window.env.extranetHost,":").concat(window.location.port,"/#/quick?id=").concat(this.$route.params.id,"&tab=sdk"),"_blank")},handleConfirmDialogHide:function(){var e=this,t=this.row.id;({0:function(){return yn.a.openBiz.postSdkHideData(t)},1:function(){return yn.a.openBiz.postSdkHideCancelData(t)}})[this.row.hide]().then((function(t){2e4===t.code&&(e.active+=1,e.querySdkList())})).catch((function(e){throw e}))},formatDialogHideButtonText:function(e){return{0:"隐藏",1:"取消隐藏"}[e]},showDialogHide:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i,o,s,c,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.row=t,a=parseInt(this.$route.params.id),e.next=4,yn.a.openBiz.postUnitCheckPrincipalData([a]).catch((function(e){throw e}));case 4:r=e.sent,2e4===r.code?(this.active=0,this.dialogSDKHideVisible=!0):(i=r.message,o=i.split("#")[0],s=i.split("#")[1],c={0:"",1:"取消"},l="只有对接方案的产品负责人 ".concat(o," 、研发负责人 ").concat(s," 能操作").concat(c[this.row.hide],"SDK隐藏"),this.$message.warning(l));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),formatTime:function(e){return Et.a.timeInTable(e)||"-"},format:function(e){return e>=100?"完成":"".concat(e,"%")},querySdkList:function(){var e=this,t=this;t.loading=!0,Object(c.a)({url:"/sdk/getBizSdkPreList",method:"get",params:{pageSize:t.listQuery.pageSize,page:t.listQuery.pageNumb,orderBy:"update_time",unitId:this.unitId,queryLike:t.listQuery.searchKeyWord}}).then((function(a){a.data&&(t.tableDatas=a.data.list,t.listQuery.total=a.data.total,e.loading=!1,0==t.tableDatas.length&&"yes"===e.nodata?e.nodata="yes":e.nodata="no")})).catch((function(t){e.loading=!1,e.nodata="yes"}))},search:function(){this.querySdkList()},onSearchChange:function(){0===this.listQuery.searchKeyWord.trim().length&&this.querySdkList()},addSdk:function(){this.$emit("addSdkEvent"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd"}})},rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.querySdkList()},modifySdk:function(e){this.$emit("addSdkEvent",e),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{sdkId:e,tag:"sdkAdd"}})},beforeUploadHandle:function(e){var t=e.size/1024/1024<100;return t||this.$message.error("上传SDK大小不能超过 100MB!"),this.uploadFile.uploadSdkFile=e.name,t},uploadSuccessHandle:function(e){var t=this;Object(c.a)({url:"/sdk/createSdkBusinessForUpload",method:"post",data:{fileName:this.uploadFile.uploadSdkFile,jssKey:this.uploadFile.uploadSdkFile,sdkId:this.uploadFile.uploadSdkId,jssMd5:e.data[0]}}).then((function(e){t.$message({type:"success",message:"上传成功"}),t.querySdkList()})).catch((function(e){})),this.uploadFile.fileList=[]},uploadErrorHandle:function(){this.$message.error("上传失败，请重新上传"),this.uploadFile.fileList=[],this.uploadFile.uploadSdkId="",this.uploadFile.uploadSdkFile=""},deleteSdk:function(e){var t=this;Object(c.a)({url:"/sdk/deleteBizSdkPre",method:"get",params:{id:e}}).then((function(e){t.$message({type:"success",message:"删除成功"}),t.querySdkList()})).catch((function(e){t.$message({type:"error",message:"操作失败"})}))},uploadSdk:function(e){this.uploadFile.uploadSdkId=e},gotoDownloadInterface:function(){this.$emit("sdkInterfaceList"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkInterfaceList",sdkId:this.sdkId}})},beforeDownloadSdkCommand:function(e,t){return{sdkId:e,command:t}},downloadSdkCommand:function(e){switch(e.command){case"all":this.downloadSdkProject(e.sdkId);break;case"interfaceIncrement":this.gotoDownloadInterfaceIncrement(e.sdkId)}},downloadSdkProject:function(e){var t=this;this.downloadDialogVisible=!0,this.sdkId=e;var a=this;Object(c.a)({url:"/sdk/createSdkPreFile",method:"get",params:{sdkId:this.sdkId}}).then((function(e){if(e.data>0){var a=setInterval((function(){Object(c.a)({url:"/sdk/getLastBizSdkRecordPercentage",method:"get",params:{recordId:e.data}}).then((function(e){t.percentage=e.data.finishPct,t.recordSdk.failNum=e.data.failNum,t.recordSdk.failNum>0&&(t.recordSdk.failCause=e.data.failCause,clearInterval(t.timer)),t.percentage>=100&&(0==t.recordSdk.failNum&&(t.recordSdk.jssKey=e.data.jssKey),clearInterval(t.timer))})).catch((function(e){t.percentage=10}))}),500);t.timer=a,t.$once("hook:beforeDestroy",(function(){clearInterval(t.timer),t.loading=!1}))}})).catch((function(e){t.percentage=0,a.loading=!1}))},cancelDownloadDialogVisible:function(){clearInterval(this.timer),this.loading=!1,this.downloadDialogVisible=!1,this.percentage=0,this.recordSdk.fileName="",this.recordSdk.failNum=0},downloadSdk:function(){var e=this.recordSdk.jssKey;null!=e?wn.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayUploadLopDn,fileName:e},responseType:"blob"})({url:"/lop/file/download",method:"get"}).then((function(t){var a=new Blob([t.data],{type:"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,decodeURI(e));else{var n=window.URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download",decodeURI(e)),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}})).catch((function(e){})):this.$message.error("SDK文件不存在!")},gotoDownloadInterfaceIncrement:function(e){this.$emit("sdkInterfaceList"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkInterfaceList",sdkId:e}})}},created:function(){this.unitId=this.$route.params.id,this.querySdkList(),3===this.baseInfoStatus?this.buttonDisabled=!0:this.buttonDisabled=!1}},Dn=Cn,kn=(a("241b"),Object(m.a)(Dn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"filter-container"},[a("el-col",{attrs:{span:12}},[a("el-form",{staticStyle:{height:"45px"},attrs:{inline:!0,model:e.listQuery}},[a("el-form-item",[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入关键词搜索"},on:{input:e.onSearchChange},model:{value:e.listQuery.searchKeyWord,callback:function(t){e.$set(e.listQuery,"searchKeyWord",t)},expression:"listQuery.searchKeyWord"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-button",{staticStyle:{margin:"5px",float:"right"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addSdk}},[e._v("创建SDK ")])],1)],1),"no"===this.nodata?a("span",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-table mb2",attrs:{data:e.tableDatas,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",meta:"x:37.0,y:57.0,width:901.0,height:216.0","row-class-name":e.rowClassName}},[a("template",{slot:"empty"},[a("div",[e._v("经查询，无符合搜索条件的结果")])]),a("el-table-column",{attrs:{label:"序号",prop:"number",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"SDK名称",prop:"name",align:"center","min-width":"200","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"语言",prop:"language",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseLanguagefilter")(t.row.language)))])]}}],null,!1,3167995178)}),a("el-table-column",{attrs:{label:"版本",prop:"version",align:"center",width:"80","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"描述",prop:"remark",width:"100",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{class:e.judgeStatusClass(n)},[e._v(e._s(e.formatStatusText(n)))])]}}],null,!1,1215083927)}),a("el-table-column",{attrs:{label:"SDK文件",prop:"fileName",width:"100",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseFileNamefilter")(t.row.fileName)))])]}}],null,!1,4104422986)}),a("el-table-column",{attrs:{label:"创建人",prop:"createUser",align:"center",width:"180"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatTime(t.row.updateTime)))])]}}],null,!1,1612574325)}),a("el-table-column",{attrs:{label:"操作",prop:"id",fixed:"right","min-width":"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.isShowEditButton(n)?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.modifySdk(n.id)}}},[e._v("编辑")]):e._e(),1!==n.status?a("el-button",{staticClass:"inline-block",attrs:{type:"text"},on:{click:function(t){return e.showDialogHide(n)}}},[e._v(e._s(e.formatDialogHideButtonText(n.hide)))]):e._e(),e.isShowRemoveButton(n)?a("el-popover",{staticClass:"inline-block",attrs:{placement:"bottom",width:"220",trigger:"click"}},[a("p",[e._v(" 已下载SDK的用户仍可通过SDK调用接口。删除SDK后，用户无法再下载该SDK。确认删除该SDK？ ")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteSdk(n.id)}}},[e._v("确认删除")])],1),a("el-button",{staticStyle:{color:"red"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1):e._e()]}}],null,!1,1655804861)})],2),a("el-row",[a("el-col",{attrs:{span:24}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px",float:"right"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1):e._e(),"yes"===this.nodata?a("span",[e._m(0),a("div",{staticClass:"noDataMessage"},[e._v("抱歉，没有查询到结果～")])]):e._e(),a("el-dialog",{staticClass:"process-dialog",attrs:{visible:e.downloadDialogVisible,width:"30%","show-close":!1,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.downloadDialogVisible=t}}},[a("el-progress",{attrs:{percentage:e.percentage,format:e.format,color:e.colors}}),a("el-row",{staticClass:"dialog-row"},[e.percentage<100&&0==e.recordSdk.failNum?a("span",[e._v("正在生成工程文件...")]):e.percentage>=100&&0==e.recordSdk.failNum?a("span",[e._v("SDK生成完毕,请下载SDK工程文件...")]):e.recordSdk.failNum>0?a("span",{staticStyle:{color:"#f56c6c"}},[e._v("发生错误:"+e._s(e.recordSdk.failCause)+" ")]):e._e()]),a("el-row",{staticClass:"dialog-row"},[a("el-button",{on:{click:e.cancelDownloadDialogVisible}},[e._v("取 消")]),this.percentage>=100&&0==this.recordSdk.failNum?a("el-button",{attrs:{type:"primary"},on:{click:e.downloadSdk}},[e._v("下 载")]):e._e()],1),a("el-row",{staticClass:"dialog-row"},[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.gotoDownloadInterface}},[e._v("按接口增量下载源文件")])],1)],1),a("el-dialog",{attrs:{title:e.computeDialogHideTitle,visible:e.dialogSDKHideVisible,width:"480px"},on:{"update:visible":function(t){e.dialogSDKHideVisible=t}}},[a("Steps",{attrs:{active:e.active,tiptitle:["确认","完成"]}}),a("div",{staticClass:"warningImg"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.computeDialogHideImage}})]),0===e.row.hide?a("div",{staticClass:"dialogHideText"},[0===e.active?a("div",[a("p",[e._v("SDK隐藏会立即生效")]),a("p",[e._v(" 前台将不再展示 "+e._s(e.row.name)+" SDK，但不影响已使用SDK的用户调用接口 ")]),a("p",[e._v("确认隐藏？")])]):e._e(),1===e.active?a("div",[a("p",{staticStyle:{"font-size":"24px","font-weight":"600"}},[e._v("隐藏成功")]),a("p",[e._v("前台将不再展示 "+e._s(e.row.name)+" SDK")])]):e._e()]):1===e.row.hide?a("div",{staticClass:"dialogHideText"},[0===e.active?a("div",[a("p",[e._v("SDK取消隐藏会立即生效")]),a("p",[e._v("前台将展示 "+e._s(e.row.name)+" SDK，可能会有新用户下载使用SDK")]),a("p",[e._v("确认取消隐藏？")])]):e._e(),1===e.active?a("div",[a("p",{staticStyle:{"font-size":"24px","font-weight":"600"}},[e._v("取消隐藏成功")]),a("p",[e._v("前台将展示 "+e._s(e.row.name)+" SDK")])]):e._e()]):e._e(),a("div",{staticClass:"dialog-hide-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSDKHideVisible=!1}}},[e._v(e._s(e.computeDialogHideCancelButtonText))]),0===e.active?a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmDialogHide}},[e._v("确 定")]):e._e(),1===e.active?a("el-button",{attrs:{type:"primary"},on:{click:e.handleLinkToTarget}},[e._v("前往前台查看")]):e._e()],1)],1)],1)}),hn,!1,null,"292831b1",null)),xn=kn.exports,_n=a("ed08"),On={name:"sdkAddStep1",props:{sdkId:Number},data:function(){return{openIsDisabled:!1,sdkBaseInfo:{id:"",unitId:"",name:"",version:"",language:"",remark:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"change"}],version:[{required:!0,message:"请输入",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"change"}],language:[{required:!0,message:"请选择",trigger:"blur"}],remark:[{required:!0,message:"请输入描述",trigger:"blur"},{min:10,max:200,message:"长度在 10 到 200 个字符",trigger:"blur"}]}}},created:function(){this.sdkId?this.sdkBaseInfo.id=this.sdkId:this.sdkBaseInfo.id=this.$route.query.sdkId,this.sdkBaseInfo.unitId=this.$route.params.id,this.fetchOldBizSdkPre()},methods:{fetchOldBizSdkPre:function(){var e=this,t=this;t.loading=!0,Object(c.a)({url:"/sdk/getBizSdkPreById",method:"get",params:{id:t.sdkBaseInfo.id}}).then((function(a){a.data&&(t.sdkBaseInfo=a.data),e.loading=!1})).catch((function(t){e.loading=!1}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.openIsDisabled=!0;Object(c.a)({url:"/sdk/saveBizSdkPre",method:"post",data:{id:t.sdkBaseInfo.id,unitId:t.sdkBaseInfo.unitId,name:t.sdkBaseInfo.name,version:t.sdkBaseInfo.version,language:t.sdkBaseInfo.language,remark:t.sdkBaseInfo.remark}}).then((function(e){e.data&&(t.$parent.stepsObj.active++,t.$route.query.sdkId=e.data,t.$router.push({name:"OpenBizOpenBizDetail",params:{id:t.$route.params.id},query:{tag:"sdkAdd",sdkId:t.$route.query.sdkId,addStep:t.$parent.stepsObj.active}}))})).catch((function(e){var a=t,n=5,r=window.setInterval((function(){--n<=0&&(clearInterval(r),a.openIsDisabled=!1)}),1e3)}))}))}}},Sn=On,Tn=(a("6bb0"),Object(m.a)(Sn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myFormBox"},[a("h3",[e._v("请填写SDK基本信息")]),a("p",[e._v("这些信息将直接展示给用户，作为他们选用SDK的依据，请认真填写")]),a("el-form",{ref:"sdkBaseInfo",staticStyle:{width:"60%",margin:"0 auto"},attrs:{model:e.sdkBaseInfo,"label-width":"80px",rules:e.rules,size:"medium"}},[a("el-form-item",{attrs:{label:"unitId:",prop:"unitId",hidden:""}},[a("el-input",{model:{value:e.sdkBaseInfo.unitId,callback:function(t){e.$set(e.sdkBaseInfo,"unitId",t)},expression:"sdkBaseInfo.unitId"}})],1),a("el-form-item",{attrs:{label:"id主键:",prop:"id",hidden:""}},[a("el-input",{model:{value:e.sdkBaseInfo.id,callback:function(t){e.$set(e.sdkBaseInfo,"id",t)},expression:"sdkBaseInfo.id"}})],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"例:京东快递业务SDK"},model:{value:e.sdkBaseInfo.name,callback:function(t){e.$set(e.sdkBaseInfo,"name",t)},expression:"sdkBaseInfo.name"}})],1),a("el-form-item",{attrs:{label:"版本号",prop:"version"}},[a("el-input",{attrs:{placeholder:"每次更新SDK需要迭代，例:1.0"},model:{value:e.sdkBaseInfo.version,callback:function(t){e.$set(e.sdkBaseInfo,"version",t)},expression:"sdkBaseInfo.version"}})],1),a("el-form-item",{attrs:{label:"语言",prop:"language"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sdkBaseInfo.language,callback:function(t){e.$set(e.sdkBaseInfo,"language",t)},expression:"sdkBaseInfo.language"}},[a("el-option",{key:"JAVA",attrs:{label:"JAVA",value:Number(1)}},[e._v("JAVA")])],1)],1),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"描述SDK的使用场景、功能范围，10-200个字符"},model:{value:e.sdkBaseInfo.remark,callback:function(t){e.$set(e.sdkBaseInfo,"remark",t)},expression:"sdkBaseInfo.remark"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{disabled:e.openIsDisabled,type:"primary"},on:{click:function(t){return e.submitForm("sdkBaseInfo")}}},[e._v("下一步")])],1)],1)],1)}),[],!1,null,"3ec4fa90",null)),jn=Tn.exports,In={name:"sdkAddStep2",props:{showInfoName:String},data:function(){return{openIsDisabled:!1,type:1,sdkApiInfo:{sdkId:"",unitId:"",apiId:""},leftData:[],pinyin:[],rightData:[],filterMethod:function(e,t){return t.pinyin.toLowerCase().indexOf(e.toLowerCase())>-1}}},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sdkApiInfo.unitId=this.$route.params.id,this.sdkApiInfo.sdkId=this.$route.query.sdkId,e.next=4,this.getType();case 4:2===this.type?this.listHttpBizApiPre():this.listBizApiPre(),this.listBizSdkApiPre();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),methods:{listHttpBizApiPre:function(){var e=this;e.loading=!0,Object(c.a)({url:"/sdk/getBizApiPreListByUnit",method:"post",data:{unitId:e.sdkApiInfo.unitId,callDirection:1}}).then((function(t){t.data&&(t.data.forEach((function(t,a){e.pinyin.push(t.apiName+"-"+t.apiCode),e.leftData.push({key:t.id,label:t.apiName+"-"+t.apiCode,pinyin:e.pinyin[a]})})),e.loading=!1)})).catch((function(t){e.loading=!1}))},listBizApiPre:function(){var e=this;e.loading=!0,Object(c.a)({url:"/sdk/getBizApiPreListByUnit",method:"post",data:{unitId:e.sdkApiInfo.unitId,callDirection:1}}).then((function(t){t.data&&(t.data.forEach((function(t,a){e.pinyin.push(t.apiName+" "+t.apiUrl),e.leftData.push({key:t.id,label:t.apiName+" "+t.apiUrl,pinyin:e.pinyin[a]})})),e.loading=!1)})).catch((function(t){e.loading=!1}))},listBizSdkApiPre:function(){var e=this;e.loading=!0,Object(c.a)({url:"/sdk/getBizSdkApiListBySdk",method:"post",data:{sdkId:e.sdkApiInfo.sdkId}}).then((function(t){t.data&&t.data.forEach((function(t,a){e.rightData.push(t.apiId)})),e.loading=!1})).catch((function(t){e.loading=!1}))},lastStep:function(){this.$parent.stepsObj.active--,this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd",sdkId:this.$route.query.sdkId,addStep:this.$parent.stepsObj.active}})},submitForm:function(){var e=this,t=this;if(t.rightData.length<=0)l.Message.error("SDK至少包含一个API");else{t.loading=!0;for(var a=[],n=0,r=t.rightData.length;n<r;n++){var i={sdkId:t.sdkApiInfo.sdkId,apiId:t.rightData[n]};a.push(i)}Object(c.a)({url:"/sdk/saveBizSdkApi",method:"post",data:a}).then((function(a){2e4==a.code&&(e.$parent.stepsObj.active++,e.$router.push({name:"OpenBizOpenBizDetail",params:{id:e.$route.params.id},query:{tag:"sdkAdd",sdkId:e.$route.query.sdkId,addStep:e.$parent.stepsObj.active}}),t.loading=!1)})).catch((function(e){l.Message.error("操作失败"),t.loading=!1}))}},getType:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/bizunit/getOverview",e.next=3,Object(c.a)({url:"/bizunit/getOverview",method:"get",params:{id:this.$route.params.id}}).then((function(e){t.type=e.data.domainType})).catch((function(e){}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},Ln=In,An=(a("1fb8"),Object(m.a)(Ln,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myFormBox"},[a("h3",[e._v("请选择SDK包含的接口")]),a("p",[e._v("SDK中的接口以对接方案中维护的接口文档为准，不包含隐藏的字段")]),a("p",{staticStyle:{"margin-bottom":"20px"}}),a("el-row",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[a("el-col",{attrs:{span:24}},[a("el-transfer",{staticClass:"transfer-class",attrs:{filterable:"","filter-method":e.filterMethod,"filter-placeholder":"请输入关键词过滤",titles:[e.showInfoName+"的所有接口(不包含隐藏接口)","SDK中包含的接口"],data:e.leftData},model:{value:e.rightData,callback:function(t){e.rightData=t},expression:"rightData"}})],1)],1),a("el-form",{ref:"form",staticStyle:{width:"80%",margin:"30px auto"},attrs:{model:e.sdkApiInfo,"label-width":"0px",size:"medium"}},[a("el-form-item",{staticStyle:{"text-align":"center","margin-left":"0"}},[a("el-button",{staticClass:"last",on:{click:e.lastStep}},[e._v("上一步")]),a("el-button",{attrs:{disabled:e.openIsDisabled,type:"primary"},on:{click:function(t){return e.submitForm("sdkApiInfo")}}},[e._v("下一步")])],1)],1)],1)}),[],!1,null,"2942229d",null)),Pn=An.exports,Nn={name:"sdkAddStep3",data:function(){return{apiOwnTestUrl:"",downloadDialogVisible:!1,percentage:0,recordSdk:{finishPct:"",finishNum:"",fileName:"",failNum:"",failCause:"",jssKey:""},timer:null,colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#1989fa",percentage:60},{color:"#6f7ad3",percentage:80},{color:"#5cb87a",percentage:100}]}},created:function(){this.apiOwnTestUrl=window.location.protocol+"//"+"".concat(window.location.host,"/#/")+"".concat(window.env.docApiTest)},methods:{format:function(e){return e>=100?"完成":"".concat(e,"%")},downloadProj:function(){var e=this;this.downloadDialogVisible=!0;var t=this;t.loading=!0,Object(c.a)({url:"/sdk/createSdkPreFile",method:"get",params:{sdkId:this.$route.query.sdkId}}).then((function(a){if(a.data){var n=setInterval((function(){Object(c.a)({url:"/sdk/getLastBizSdkRecordPercentage",method:"get",params:{recordId:a.data}}).then((function(t){e.percentage=parseInt(t.data.finishPct),e.recordSdk.failNum=t.data.failNum,e.recordSdk.failNum>0&&(e.recordSdk.failCause=t.data.failCause,clearInterval(e.timer)),e.percentage>=100&&(0==e.recordSdk.failNum&&(e.recordSdk.jssKey=t.data.jssKey),clearInterval(e.timer))})).catch((function(a){e.percentage=10,t.loading=!1}))}),500);e.timer=n,e.$once("hook:beforeDestroy",(function(){clearInterval(e.timer)}))}})).catch((function(a){e.percentage=10,t.loading=!1}))},lastStep:function(){this.$parent.stepsObj.active--,this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd",sdkId:this.$route.query.sdkId,addStep:this.$parent.stepsObj.active}})},nextStep:function(){this.$parent.stepsObj.active++,this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd",sdkId:this.$route.query.sdkId,addStep:this.$parent.stepsObj.active}})},downloadSdk:function(){var e=this.recordSdk.jssKey;null!=e?wn.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayUploadLopDn,fileName:e},responseType:"blob"})({url:"/lop/file/download",method:"get"}).then((function(t){var a=new Blob([t.data],{type:"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,decodeURI(e));else{var n=window.URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download",decodeURI(e)),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}})).catch((function(e){})):this.$message.error("SDK文件不存在!")},cancelDownloadDialogVisible:function(){clearInterval(this.timer),this.loading=!1,this.downloadDialogVisible=!1,this.percentage=0,this.recordSdk.fileName="",this.recordSdk.failNum=0}}},Bn=Nn,Fn=(a("46bc"),Object(m.a)(Bn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myFormBox"},[a("h3",[e._v("下载SDK工程文件")]),a("p",[e._v("根据您上一步选择的接口，系统生成了一个SDK工程，您可下载该工程文件，并进一步对接口进行自测")]),a("el-row",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.downloadProj}},[e._v("下载SDK工程文件")])],1),a("el-row",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("el-link",{attrs:{type:"primary",underline:!1,href:this.apiOwnTestUrl,target:"_blank"}},[e._v("如何对接口进行自测？")])],1),a("el-form",{ref:"form",staticStyle:{width:"40%",margin:"30px auto"},attrs:{"label-width":"0px",size:"medium"}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"last",on:{click:e.lastStep}},[e._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStep()}}},[e._v("下一步")])],1)],1),a("el-dialog",{staticClass:"process-dialog",attrs:{visible:e.downloadDialogVisible,width:"30%","show-close":!1,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.downloadDialogVisible=t}}},[a("el-progress",{attrs:{percentage:e.percentage,format:e.format,color:e.colors}}),a("el-row",{staticClass:"dialog-row"},[e.percentage<100&&0==e.recordSdk.failNum?a("span",[e._v("正在生成工程文件...")]):e.percentage>=100&&0==e.recordSdk.failNum?a("span",[e._v("SDK生成完毕,请下载SDK工程文件...")]):e.recordSdk.failNum>0?a("span",{staticStyle:{color:"#f56c6c"}},[e._v("发生错误:"+e._s(e.recordSdk.failCause)+" ")]):e._e()]),a("el-row",{staticClass:"dialog-row"},[a("el-button",{on:{click:e.cancelDownloadDialogVisible}},[e._v("关闭")]),this.percentage>=100&&0==this.recordSdk.failNum?a("el-button",{attrs:{type:"primary"},on:{click:e.downloadSdk}},[e._v("下载")]):e._e()],1)],1)],1)}),[],!1,null,"10f05c0a",null)),Vn=Fn.exports,En=(a("14b9"),{name:"sdkAddStep4",data:function(){return{loading:!1,timer:null,colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#1989fa",percentage:60},{color:"#6f7ad3",percentage:80},{color:"#5cb87a",percentage:100}],recordSdk:{finishPct:"",finishNum:"",fileName:"",failNum:"",failCause:"",jssKey:""},percentage:0,downloadDialogVisible:!1,isAutoGene:!0,sdkCreateUrl:"",uploadUrl:window.env.gatewayFileBaseApi+"lop/mulfile/upload?LOP-DN="+window.env.gatewayUploadLopDn,uploading:!1,uploadFile:{uploadSdkId:"",uploadSdkFile:"",fileList:[]},generateCopy:"正在生成SDK...",sdkMessage:"SDK生成完毕,请下载SDK工程文件"}},computed:{jsonData:function(){return this.formatText(this.recordSdk.failCause)},titleData:function(){return this.isAutoGene&&this.recordSdk.failNum>0?"SDK生成失败提示":!this.isAutoGene&&this.recordSdk.failNum>0?"工程文件生成失败提示":""}},created:function(){this.sdkCreateUrl=window.location.protocol+"//"+"".concat(window.location.host,"/#/")+"".concat(window.env.docSdkCreate)},methods:{formatText:function(e){for(var t=0,a="",n=0;n<e.length;n++){var r=e.charAt(n);"{"===r||"["===r?(a+=r+"\n"+" ".repeat(t+2),t+=2):"}"===r||"]"===r?a+="\n"+" ".repeat(t-=2)+r:a+=","===r?r+"\n"+" ".repeat(t):r}return a},getJarInfo:function(){var e=this;Object(c.a)({url:"/sdk/getJarInfo",method:"get",params:{sdkRecordId:this.$route.query.sdkId}}).then((function(t){t.data&&(e.recordSdk=Object(I.a)({},t.data))})).catch((function(e){}))},format:function(e){return e>=100?"完成":"".concat(e,"%")},handleClick:function(e){this.isAutoGene=e,this.recordSdk={finishPct:"",finishNum:"",fileName:"",failNum:"",failCause:"",jssKey:""},this.uploading=!1,this.isAutoGene?(this.generateCopy="正在生成SDK...",this.sdkMessage="SDK生成完毕,请下载SDK工程文件"):(this.generateCopy="正在生成工程文件...",this.sdkMessage="工程文件生成完毕,请下载SDK工程文件")},downloadProj:function(){var e,t=this;e=this.isAutoGene?"/sdk/createJarFile":"/sdk/createSdkPreFile",this.downloadDialogVisible=!0;var a=this;a.loading=!0,Object(c.a)({url:e,method:"get",params:{sdkId:this.$route.query.sdkId}}).then((function(e){if(e.data){var i=setInterval((function(){Object(c.a)({url:"/sdk/getLastBizSdkRecordPercentage",method:"get",params:{recordId:e.data}}).then(function(){var e=Object(r.a)(Object(n.a)().mark((function e(a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.percentage=parseInt(a.data.finishPct),t.recordSdk.failNum=a.data.failNum,t.recordSdk.failNum>0&&(t.recordSdk.failCause=a.data.failCause,clearInterval(t.timer)),!(t.percentage>=100)){e.next=11;break}if(0==t.recordSdk.failNum&&(t.recordSdk.jssKey=a.data.jssKey,t.recordSdk.fileName=a.data.fileName),!t.isAutoGene){e.next=10;break}return t.downloadDialogVisible=!1,e.next=9,t.getJarInfo();case 9:t.uploading=!0;case 10:clearInterval(t.timer);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.percentage=10,a.loading=!1}))}),500);t.timer=i,t.$once("hook:beforeDestroy",(function(){clearInterval(t.timer)}))}})).catch((function(e){t.percentage=10,a.loading=!1}))},cancelDownloadDialogVisible:function(){clearInterval(this.timer),this.loading=!1,this.downloadDialogVisible=!1,this.percentage=0,this.recordSdk.fileName="",this.recordSdk.failNum=0},downloadSdk:function(){var e=this.recordSdk.jssKey;null!=e?wn.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayUploadLopDn,fileName:e},responseType:"blob"})({url:"/lop/file/download",method:"get"}).then((function(t){var a=new Blob([t.data],{type:"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,decodeURI(e));else{var n=window.URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download",decodeURI(e)),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}})).catch((function(e){})):this.$message.error("SDK文件不存在!")},beforeUploadHandle:function(e){var t=e.size/1024/1024<100;return t||this.$message.error("上传SDK大小不能超过 100MB!"),/(\.jar)$/i.test(e.name)?(this.uploadFile.uploadSdkFile=e.name,t):(this.$message.error("仅支持.jar格式"),!1)},uploadSuccessHandle:function(e){var t=this;Object(c.a)({url:"/sdk/createSdkBusinessForUpload",method:"post",data:{fileName:this.uploadFile.uploadSdkFile,jssKey:this.uploadFile.uploadSdkFile,sdkId:this.$route.query.sdkId,jssMd5:e.data[0]}}).then(function(){var e=Object(r.a)(Object(n.a)().mark((function e(a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getJarInfo();case 2:t.uploading=!0,t.$message({type:"success",message:"上传成功"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){})),this.uploadFile.fileList=[]},uploadErrorHandle:function(){this.$message.error("上传失败，请重新上传"),this.uploadFile.fileList=[],this.uploadFile.uploadSdkId="",this.uploadFile.uploadSdkFile=""},lastStep:function(){this.$parent.stepsObj.active--,this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd",sdkId:this.$route.query.sdkId,addStep:this.$parent.stepsObj.active}})},nextStep:function(){this.$parent.stepsObj.active++,this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd",sdkId:this.$route.query.sdkId,addStep:this.$parent.stepsObj.active}})}}}),Rn=En,zn=(a("e83c"),Object(m.a)(Rn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myFormBox"},[a("el-button",{class:{autoGeneClass:e.isAutoGene},on:{click:function(t){return e.handleClick(!0)}}},[e._v("自动生成SDK")]),a("el-button",{class:{autoGeneClass:!e.isAutoGene},staticStyle:{"margin-left":"0"},on:{click:function(t){return e.handleClick(!1)}}},[e._v("手动生成SDK")]),e.isAutoGene?a("div",[a("p",{staticStyle:{margin:"30px"}},[e._v(" （推荐使用）根据您上一步选择的接口，系统自动生成SDK ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.downloadProj}},[e._v("生成SDK")])],1):a("div",[a("p",{staticStyle:{margin:"30px"}},[e._v(" 根据您上一步选择的接口，先下载SDK工程文件，然后按照"),a("el-link",{attrs:{type:"primary",href:"http://lcp.jdl.com/#/apiNewHand/53373",target:"_blank"}},[e._v("文档")]),e._v("手动生成jar包并上传 ")],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.downloadProj}},[e._v("下载SDK工程文件")]),a("el-upload",{staticStyle:{display:"inline","margin-left":"1rem"},attrs:{action:e.uploadUrl,multiple:!1,"before-upload":e.beforeUploadHandle,"on-success":e.uploadSuccessHandle,"on-error":e.uploadErrorHandle,"file-list":e.uploadFile.fileList}},[a("el-button",{attrs:{size:"medium",type:"primary"}},[e._v("上传SDK")])],1)],1)]),e.uploading?a("div",{staticStyle:{"text-align":"center","margin-top":"1.7rem"}},[a("span",{on:{click:e.downloadSdk}},[a("i",{staticClass:"el-icon-link"}),e._v(e._s(e.recordSdk.fileName))])]):e._e(),a("el-dialog",{staticClass:"process-dialog",attrs:{visible:e.downloadDialogVisible,width:"50%","show-close":e.recordSdk.failNum>0,"close-on-click-modal":!1,center:"",title:e.titleData},on:{"update:visible":function(t){e.downloadDialogVisible=t}}},[0==e.recordSdk.failNum?a("el-progress",{attrs:{percentage:e.percentage,format:e.format,color:e.colors}}):e._e(),a("el-row",{},[e.percentage<100&&0==e.recordSdk.failNum?a("span",[e._v(e._s(e.generateCopy))]):e.percentage>=100&&0==e.recordSdk.failNum?a("span",[e._v(e._s(e.sdkMessage))]):e.recordSdk.failNum>0?a("pre",{staticClass:"code",staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.jsonData)+"\n        "),a("p",{staticStyle:{"text-align":"left"}},[e._v("注意：仅展示1000字")]),e._v("\n      ")]):e._e()]),a("el-row",{staticClass:"dialog-row"},[a("el-button",{on:{click:e.cancelDownloadDialogVisible}},[e._v("关闭")]),this.percentage>=100&&0==this.recordSdk.failNum?a("el-button",{attrs:{type:"primary"},on:{click:e.downloadSdk}},[e._v("下载")]):e._e()],1)],1),a("el-form",{ref:"form",staticStyle:{width:"40%",margin:"30px auto"},attrs:{"label-width":"0px",size:"medium"}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"last",on:{click:e.lastStep}},[e._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStep()}}},[e._v("下一步")])],1)],1)],1)}),[],!1,null,"36283272",null)),$n=zn.exports,Un={name:"sdkAddStep5",data:function(){return{}},methods:{gotoSdkList:function(e){this.$emit("gotoSdkList"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkAdd",sdkId:this.$route.query.sdkId}})}}},Mn=(a("b255"),Object(m.a)(Un,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myFormBox"},[a("h3",[e._v("完成")]),a("p",[e._v("接下来您可以进一步编辑SDK相关信息、上传SDK文件。")]),a("p",{staticStyle:{"margin-bottom":"20px"}},[e._v("在所有信息都补充完整后，您可以发布该对接方案，并尝试在前台查看或者调用")]),a("el-row",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.gotoSdkList}},[e._v("去管理SDK")])],1)],1)}),[],!1,null,"085457a6",null)),qn=Mn.exports,Hn={name:"SdkAdd",components:{Steps:gn.a,Step1:jn,Step2:Pn,Step3:Vn,Step4:$n,Step5:qn},props:{sdkId:Number,showInfoName:String},mounted:function(){var e=this.$route.query.addStep;this.stepsObj.active=e?parseInt(e):0},data:function(){return{visible:!1,stepsObj:{active:0,tiptitle:["填写基本信息","选择SDK包含的接口","生成并上传SDK","完成"]},loading:!0}},filters:{parseTimefilter:function(e,t){return Object(_n.c)(e,t)},parseAuthfilter:function(e){return!0===e?"需要":"不需要"},parseStatusfilter:function(e){return 1===e?"初始化":"已发布"}},methods:{goBack:function(){this.$emit("showSdkEvent"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkList"}})},querySdkList:function(){this.loading=!1},search:function(){this.querySdkList()},onSearchChange:function(){0===this.listQuery.searchKeyWord.trim().length&&this.querySdkList()},addSdk:function(){},rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.querySdkList()},modifySdk:function(e){},uploadSdk:function(e){},deletSdk:function(e){}}},Kn=Hn,Gn=(a("431d"),Object(m.a)(Kn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-page-header",{attrs:{content:"SDK信息"},on:{back:e.goBack}}),a("div",{staticClass:"my-wrap",staticStyle:{width:"100%"}},[a("Steps",e._b({},"Steps",e.stepsObj,!1)),0===e.stepsObj.active?a("Step1",{attrs:{sdkId:e.sdkId}}):e._e(),1===e.stepsObj.active?a("Step2",{attrs:{showInfoName:e.showInfoName}}):e._e(),2===e.stepsObj.active?a("Step4"):e._e(),3===e.stepsObj.active?a("Step5",{on:{gotoSdkList:e.goBack}}):e._e()],1)],1)}),[],!1,null,"793f1598",null)),Qn=Gn.exports,Wn={name:"sdkInterfaceList",components:{Pagination:bn.a},data:function(){return{sdkId:"",tableDatas:[],listQuery:{searchKeyWord:"",total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},interfaceForm:{sdkId:""},loading:!0}},created:function(){this.sdkId=this.$route.query.sdkId,this.interfaceForm.sdkId=this.$route.query.sdkId,this.querySdkInterfaceList()},filters:{parseTimefilter:function(e,t){return Object(_n.c)(e,t)},parseAuthfilter:function(e){return!0===e?"需要":"不需要"},parseStatusfilter:function(e){return 1===e?"初始化":"已发布"}},methods:{goback:function(){this.$emit("showSdkEvent"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.$route.params.id},query:{tag:"sdkList"}})},querySdkInterfaceList:function(){var e=this;this.loading=!0;var t=this,a={pageSize:t.listQuery.pageSize,pageNumb:t.listQuery.pageNumb,orderBy:"update_time",sdkId:this.sdkId,queryLike:this.listQuery.searchKeyWord};Object(c.a)({url:"/sdk/findBizApiPreListBySdk",method:"get",params:a}).then((function(a){a.data&&(t.tableDatas=a.data.list,t.listQuery.total=a.data.total,e.loading=!1)})).catch((function(t){e.loading=!1}))},search:function(){this.querySdkInterfaceList()},onSearchChange:function(){0===this.listQuery.searchKeyWord.trim().length&&this.querySdkInterfaceList()},rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.querySdkList()},downloadInterfaceSrcCode:function(e){var t=this;this.downloadDialogVisible=!0;var a=this;a.loading=!0;var n={apiId:String(e),sdkId:this.$route.query.sdkId};Object(c.a)({url:"/sdk/createSdkApiFile",method:"post",data:n}).then((function(e){var n=e.data.jssKey;1==e.data.isSuccess?wn.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayUploadLopDn,fileName:n},responseType:"blob"})({url:"/lop/file/download",method:"get"}).then((function(e){var t=new Blob([e.data],{type:"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,decodeURI(n));else{var a=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=a,r.setAttribute("download",decodeURI(n)),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}})).catch((function(e){})):t.$message({type:"error",message:e.data.failCause});a.loading=!1})).catch((function(e){a.loading=!1}))}}},Jn=Wn,Xn=(a("1ad6"),Object(m.a)(Jn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"filter-container"},[a("el-col",{attrs:{span:12}},[a("el-form",{staticStyle:{height:"45px"},attrs:{inline:!0,model:e.listQuery}},[a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:e.goback}},[e._v(" < 返回")])],1),a("el-form-item",[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入关键词搜索",size:"small"},on:{input:e.onSearchChange},model:{value:e.listQuery.searchKeyWord,callback:function(t){e.$set(e.listQuery,"searchKeyWord",t)},expression:"listQuery.searchKeyWord"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.search}},[e._v("查询")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-table mb2",attrs:{data:e.tableDatas,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",meta:"x:37.0,y:57.0,width:901.0,height:216.0","row-class-name":e.rowClassName}},[a("template",{slot:"empty"},[a("div",[e._v(" 经查询，无符合搜索条件的结果 ")])]),a("el-table-column",{attrs:{label:"序号",prop:"id",align:"center","min-width":"3%"}}),a("el-table-column",{attrs:{label:"接口",prop:"interfaceName",align:"center","min-width":"10%","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"中文名称",prop:"apiName",align:"center","min-width":"8%","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"URL",prop:"apiUrl","min-width":"15%",align:"center"}}),a("el-table-column",{attrs:{label:"用户授权",prop:"isAuthorize","min-width":"10%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseAuthfilter")(t.row.isAuthorize)))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status","min-width":"10%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"initColor"},[e._v(e._s(1===t.row.status?"初始化":""))]),a("span",{staticClass:"normalColor"},[e._v(e._s(5===t.row.status?"已发布":""))])]}}])}),a("el-table-column",{attrs:{label:"创建人",prop:"createUser",align:"center","min-width":"8%"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",align:"center","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTimefilter")(t.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"id","min-width":"10%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.downloadInterfaceSrcCode(t.row.id)}}},[e._v("下载源文件")])]}}])})],2),a("el-row",[a("el-col",{attrs:{span:24}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px",float:"right"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1)}),[],!1,null,"7c308f15",null)),Zn=Xn.exports,Yn={name:"SearchForm",props:{formData:{type:Object,default:function(){return{queryLike:""}}}}},er=(a("a25fb"),Object(m.a)(Yn,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"search-form",attrs:{model:e.formData},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{gutter:8}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"queryLike"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:!0,placeholder:"请输入TOPIC/名称以搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyupEnterLeftInput")}},model:{value:e.formData.queryLike,callback:function(t){e.$set(e.formData,"queryLike",t)},expression:"formData.queryLike"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.$emit("clickLeftButton")}}},[e._v("查询")])],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"search-form__right-button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("clickRightButton")}}},[e._v("添加消息")])],1)])],1)],1)}),[],!1,null,"0bb7ad95",null)),tr=er.exports,ar=a("43e9"),nr={name:"SearchTable",components:{Pagination:g.a},props:{tableLoading:{type:Boolean,default:!0},tableData:{type:Array,default:function(){return[]}},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0},reloadTableData:{type:Function,default:function(){}}},data:function(){return{unitId:parseInt(this.$route.params.id),tableList:[{label:"序号",type:"index",width:"60"},{label:"TOPIC",prop:"name",minWidth:"200",showOverflowTooltip:!0},{label:"中文名称",prop:"chineseName",minWidth:"200",showOverflowTooltip:!0},{label:"描述",prop:"descr",minWidth:"180",showOverflowTooltip:!0},{label:"所属分类",prop:"messageCategoryName",minWidth:"180",showOverflowTooltip:!0},{label:"状态",prop:"status",width:"80"},{label:"创建人",prop:"createUser",width:"180"},{label:"创建时间",prop:"createTime",width:"180"},{label:"操作",minWidth:"160",fixed:"right"}],tableColumnDeleteButtonDebounceTimer:null}},filters:{formatTableColumnClassName:function(e,t){var a=e.hide,n=e.status,r=(new Map).set(1,"initColor").set(5,"normalColor").set(10,"updateColor");return"status"===t?a?"deadColor":r.get(n)||"":""},formatTableColumnText:function(e,t){var a=e.hide,n=e.status,r=(new Map).set(1,"初始化").set(5,"已发布").set(10,"编辑中");return"status"===t?a?"已隐藏":r.get(n)||"":e[t]}},methods:{deleteMessagePreById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.unitId,r={unitId:a,id:t},e.next=4,ar.a.deleteMessagePreById(r).catch((function(e){throw new Error("deleteMessagePreById, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleDeleteMessagePreById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteMessagePreById(t).catch((function(e){throw new Error("handleDeleteMessagePreById, ".concat(e))}));case 2:this.$message.success("操作成功！");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),judgeTableColumnEditDocumentButtonVisible:function(e){return!Boolean(e)},judgeTableColumnEditDocumentButtonBadgeVisible:function(e){return!e},judgeTableColumnHideButtonVisible:function(e,t){return 1!==e&&!t},judgeTableColumnCancelHideButtonVisible:function(e,t){return 1!==e&&t},judgeTableColumnDeleteButtonVisible:function(e){return 1===e},onClickTableColumnDeleteButton:function(e){var t=this;clearTimeout(this.tableColumnDeleteButtonDebounceTimer),this.tableColumnDeleteButtonDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handleDeleteMessagePreById(e).catch((function(e){throw new Error("onClickTableColumnDeleteButton, ".concat(e))}));case 2:return t.$emit("updateDetailHeaderInfo"),a.next=5,t.reloadTableData().catch((function(e){throw new Error("onClickTableColumnDeleteButton, ".concat(e))}));case 5:case"end":return a.stop()}}),a)}))),300)}}},rr=nr,ir=(a("33c2"),Object(m.a)(rr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"hide-empty-img":!0}},e._l(e.tableList,(function(t){var n=t.label,r=t.prop,i=t.type,o=t.width,s=t.minWidth,c=t.showOverflowTooltip,l=t.fixed;return a("el-table-column",{key:n,attrs:{label:n,type:i,prop:r,width:o,"min-width":s,"show-overflow-tooltip":c,fixed:l},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,i=t.row,o=i.outOfDate,s=i.status,c=i.hide,l=i.id,u=t.column.property,p=t.$index;return["序号"===n?[e._v(" "+e._s(p+1)+" ")]:"操作"===n?[e.judgeTableColumnEditDocumentButtonVisible(c)?a("el-badge",{staticClass:"cell__badge",attrs:{"is-dot":!0,hidden:e.judgeTableColumnEditDocumentButtonBadgeVisible(o)}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("clickTableColumnEditDocumentButton",r)}}},[e._v("编辑文档")])],1):e._e(),e.judgeTableColumnHideButtonVisible(s,c)?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("clickTableColumnHideButton",r)}}},[e._v("隐藏")]):e._e(),e.judgeTableColumnCancelHideButtonVisible(s,c)?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("clickTableColumnCancelHideButton",r)}}},[e._v("取消隐藏")]):e._e(),e.judgeTableColumnDeleteButtonVisible(s)?a("el-button",{staticStyle:{color:"#e1251b"},attrs:{type:"text"},on:{click:function(t){return e.onClickTableColumnDeleteButton(l)}}},[e._v("删除")]):e._e()]:[a("span",{class:e._f("formatTableColumnClassName")(r,u)},[e._v(e._s(e._f("formatTableColumnText")(r,u)))])]]}}],null,!0)})})),1),a("Pagination",{attrs:{currentPage:e.currentPage,pageSize:e.pageSize,total:e.total,reloadTableData:e.reloadTableData},on:{"update:currentPage":function(t){return e.$emit("update:currentPage",t)},"update:pageSize":function(t){return e.$emit("update:pageSize",t)}}})],1)}),[],!1,null,"12e9e554",null)),or=ir.exports,sr={name:"StepConfirmHideOrCancelHide",props:{hidden:{type:Number,required:!0},name:{type:String,required:!0}},computed:{computeTipTextList:function(){var e=this.hidden,t=this.name;return(new Map).set(0,["消息隐藏会立即生效","前台将不再展示 ".concat(t," 消息，但不影响已使用消息的用户接收消息"),"确认隐藏？"]).set(1,["消息取消隐藏会立即生效","前台将展示 ".concat(t," 消息，可能会有新用户接入并订阅消息"),"确认取消隐藏？"]).get(e)||[]}}},cr=sr,lr=(a("f4b8"),Object(m.a)(cr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-confirm-hide-or-cancel-hide"},[a("i",{staticClass:"el-icon-warning"}),e._l(e.computeTipTextList,(function(t){return a("p",{key:t,staticClass:"step-confirm-hide-or-cancel-hide__tip"},[e._v(" "+e._s(t)+" ")])}))],2)}),[],!1,null,"4de7ab38",null)),ur=lr.exports,pr={name:"StepFinish",props:{hidden:{type:Number,required:!0},name:{type:String,required:!0}},computed:{computeTipTextList:function(){var e=this.hidden,t=this.name;return(new Map).set(0,["隐藏成功","前台将不再展示 ".concat(t," 消息")]).set(1,["取消隐藏成功","前台将展示 ".concat(t," 消息")]).get(e)||[]}}},dr=pr,mr=(a("3bec"),Object(m.a)(dr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-finish"},[a("i",{staticClass:"el-icon-success"}),e._l(e.computeTipTextList,(function(t){return a("p",{key:t,staticClass:"step-finish__tip"},[e._v(" "+e._s(t)+" ")])}))],2)}),[],!1,null,"f6af0af6",null)),fr=mr.exports,hr={name:"StepConfirmHideOrCancelHideButtonWrapper",props:{id:{type:void 0|Number,required:!0},hidden:{type:void 0|Number,required:!0},stepsActive:{type:Number,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),confirmHideButtonLoading:!1,confirmHideButtonDebounceTimer:null,confirmCancelHideButtonLoading:!1,confirmCancelHideDebounceTimer:null}},computed:{computeConfirmHideButtonVisible:function(){var e=this.hidden;return!Boolean(e)}},methods:{hide:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,r={unitId:t,id:a},e.abrupt("return",ar.a.hide(r).catch((function(e){throw new Error("hide, ".concat(e))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),hideCancel:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,r={unitId:t,id:a},e.abrupt("return",ar.a.hideCancel(r).catch((function(e){throw new Error("hideCancel, ".concat(e))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleHide:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.hide().catch((function(e){throw new Error("handleHide, ".concat(e))}));case 2:this.$emit("update:stepsActive",1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleHideCancel:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.hideCancel().catch((function(e){throw new Error("handleHideCancel, ".concat(e))}));case 2:this.$emit("update:stepsActive",1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickConfirmHideButton:function(e){var t=this;clearTimeout(this.confirmHideButtonDebounceTimer),this.confirmHideButtonDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handleHide(e).catch((function(e){throw new Error("onClickConfirmHideButton, ".concat(e))}));case 2:case"end":return a.stop()}}),a)}))),300)},onClickConfirmCancelHideButton:function(e){var t=this;clearTimeout(this.confirmCancelHideDebounceTimer),this.confirmCancelHideDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handleHideCancel(e).catch((function(e){throw new Error("onClickConfirmCancelHideButton, ".concat(e))}));case 2:case"end":return a.stop()}}),a)}))),300)}}},br=hr,gr=(a("b75b"),Object(m.a)(br,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-confirm-hide-or-cancel-hide"},[a("el-button",{on:{click:function(t){return e.$emit("clickCancelButton")}}},[e._v("取消")]),e.computeConfirmHideButtonVisible?a("el-button",{attrs:{loading:e.confirmHideButtonLoading,type:"primary"},on:{click:e.onClickConfirmHideButton}},[e._v("确认隐藏")]):a("el-button",{attrs:{type:"primary",loading:e.confirmCancelHideButtonLoading},on:{click:e.onClickConfirmCancelHideButton}},[e._v("确认取消隐藏")])],1)}),[],!1,null,"909b6e28",null)),vr=gr.exports,wr=window,yr=wr.env.extranetHost,Cr=wr.location.port,Dr={name:"StepFinishButtonWrapper",props:{id:{type:Number,required:!0},hidden:{type:Number,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id)}},methods:{onClickGoToViewButton:function(){var e=this.unitId,t=this.id,a=this.hidden,n=(new Map).set(0,"//".concat(yr,":").concat(Cr,"/#/open-business-document/message-doc/").concat(e)).set(1,"//".concat(yr,":").concat(Cr,"/#/open-business-document/message-doc/").concat(e,"/").concat(t));window.open(n.get(a)||"","_blank")}}},kr=Dr,xr=(a("493e"),Object(m.a)(kr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-finish-button-wrapper"},[a("el-button",{on:{click:function(t){return e.$emit("clickCloseButton")}}},[e._v("关闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onClickGoToViewButton}},[e._v("前往前台查看")])],1)}),[],!1,null,"11bd9aca",null)),_r=xr.exports,Or={name:"HideOrCancelHideDialog",components:{Steps:v.a,StepConfirmHideOrCancelHide:ur,StepFinish:fr,StepConfirmHideOrCancelHideButtonWrapper:vr,StepFinishButtonWrapper:_r},props:{currentTableRowData:{type:Object,required:!0},dialogVisible:{type:Boolean,required:!0}},data:function(){return{stepsActive:0}},computed:{computeDialogTitle:function(){var e=this.currentTableRowData.hide;return(new Map).set(0,"消息隐藏").set(1,"消息取消隐藏").get(e)||""},computedStepsTitleList:function(){var e=this.currentTableRowData.hide;return[(new Map).set(0,"确认隐藏").set(1,"确认取消隐藏").get(e)||"","完成"]}},methods:{onCloseDialog:function(){this.$emit("update:dialogVisible",!1),this.$emit("close")},onClosedDialog:function(){this.stepsActive=0},onClickCancelButton:function(){this.$emit("update:dialogVisible",!1)},onClickCloseButton:function(){this.$emit("update:dialogVisible",!1)}}},Sr=Or,Tr=(a("4e75"),Object(m.a)(Sr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"hide-or-cancel-hide-dialog",attrs:{title:e.computeDialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,width:"560px"},on:{close:e.onCloseDialog,closed:e.onClosedDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[0===e.stepsActive?a("StepConfirmHideOrCancelHideButtonWrapper",{attrs:{id:e.currentTableRowData.id,hidden:e.currentTableRowData.hide,stepsActive:e.stepsActive},on:{"update:stepsActive":function(t){e.stepsActive=t},"update:steps-active":function(t){e.stepsActive=t},clickCancelButton:e.onClickCancelButton}}):1===e.stepsActive?a("StepFinishButtonWrapper",{attrs:{id:e.currentTableRowData.id,hidden:e.currentTableRowData.hide},on:{clickCloseButton:e.onClickCloseButton}}):e._e()]},proxy:!0}])},[a("Steps",{attrs:{titleList:e.computedStepsTitleList,active:e.stepsActive}}),0===e.stepsActive?a("StepConfirmHideOrCancelHide",{attrs:{hidden:e.currentTableRowData.hide,name:e.currentTableRowData.name}}):1===e.stepsActive?a("StepFinish",{attrs:{hidden:e.currentTableRowData.hide,name:e.currentTableRowData.name}}):e._e()],1)}),[],!1,null,"1133bc4e",null)),jr=Tr.exports,Ir=window.env,Lr=Ir.intranetHost,Ar=Ir.docMessageListTag,Pr={name:"MessageTable",components:{Alert:P.a,SearchForm:tr,SearchTable:or,HideOrCancelHideDialog:jr},props:{currentDisplayComponentName:{type:String,required:!0},currentTableRowData:{type:Object,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),tagTipText:"您可通过物流开放平台SDK向ISV/商家推送消息",tagTipAnchorHref:"//".concat(Lr,"/#/").concat(Ar),tagTipAnchorText:"使用手册",searchFormData:{queryLike:""},searchTableLoading:!0,searchTableData:[],searchTableCurrentPage:1,searchTablePageSize:10,searchTableTotal:0,hideOrCancelHideDialogVisible:!1}},methods:{findMessagePreList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.searchFormData.queryLike,r=this.searchTableCurrentPage,i=this.searchTablePageSize,o={unitId:t,queryLike:a,pageNumb:r,pageSize:i},e.next=6,ar.a.findMessagePreList(o).catch((function(e){throw new Error("findMessagePreList, ".concat(e))}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleFindMessagePreList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchTableLoading=!0,e.next=3,this.findMessagePreList().catch((function(e){throw new Error("handleFindMessagePreList, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.total,i=a.list,this.searchTableData=Array.isArray(i)?i:[],this.searchTableTotal=r||0,this.searchTableLoading=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleReloadSearchTableData:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleFindMessagePreList().catch((function(e){throw new Error("handleReloadSearchTableData, ".concat(e))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onKeyupEnterSearchFormLeftInput:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onClickSearchFormLeftButton().catch((function(e){throw new Error("onKeyupEnterSearchFormLeftInput, ".concat(e))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickSearchFormLeftButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.searchTableCurrentPage=1,this.handleFindMessagePreList().catch((function(e){throw new Error("onClickSearchFormLeftButton, ".concat(e))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickSearchFormRightButton:function(){this.$emit("update:currentDisplayComponentName","MessageAddition")},onClickSearchTableColumnEditDocumentButton:function(e){this.$emit("update:currentTableRowData",e),this.$emit("update:currentDisplayComponentName","MessageDocument")},onClickTableColumnHideButton:function(e){this.$emit("update:currentTableRowData",e),this.hideOrCancelHideDialogVisible=!0},onClickTableColumnCancelHideButton:function(e){this.$emit("update:currentTableRowData",e),this.hideOrCancelHideDialogVisible=!0}},mounted:function(){this.onClickSearchFormLeftButton().catch((function(e){throw new Error("mounted, ".concat(e))}))}},Nr=Pr,Br=(a("d658"),Object(m.a)(Nr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"message-table"},[a("Alert",{attrs:{closable:!1},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.tagTipText)+" "),a("a",{staticClass:"tag-tip__anchor",attrs:{href:e.tagTipAnchorHref,target:"_blank"}},[e._v(e._s(e.tagTipAnchorText))])]},proxy:!0}])}),a("SearchForm",{attrs:{formData:e.searchFormData},on:{keyupEnterLeftInput:e.onKeyupEnterSearchFormLeftInput,clickLeftButton:e.onClickSearchFormLeftButton,clickRightButton:e.onClickSearchFormRightButton}}),a("SearchTable",{attrs:{tableLoading:e.searchTableLoading,tableData:e.searchTableData,currentPage:e.searchTableCurrentPage,pageSize:e.searchTablePageSize,total:e.searchTableTotal,reloadTableData:e.handleReloadSearchTableData},on:{"update:currentPage":function(t){e.searchTableCurrentPage=t},"update:current-page":function(t){e.searchTableCurrentPage=t},"update:pageSize":function(t){e.searchTablePageSize=t},"update:page-size":function(t){e.searchTablePageSize=t},clickTableColumnEditDocumentButton:e.onClickSearchTableColumnEditDocumentButton,clickTableColumnHideButton:e.onClickTableColumnHideButton,clickTableColumnCancelHideButton:e.onClickTableColumnCancelHideButton,updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}),a("HideOrCancelHideDialog",{attrs:{currentTableRowData:e.currentTableRowData,dialogVisible:e.hideOrCancelHideDialogVisible},on:{"update:dialogVisible":function(t){e.hideOrCancelHideDialogVisible=t},"update:dialog-visible":function(t){e.hideOrCancelHideDialogVisible=t},close:e.handleReloadSearchTableData}})],1)}),[],!1,null,"44ccfa48",null)),Fr=Br.exports,Vr={name:"StepFillInBasicInfo",prop:{active:{type:Number,required:!0},currentTableRowData:{type:Object,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),formData:{name:"",chineseName:""},formRules:{name:[{required:!0,message:"请输入消息TOPIC",trigger:"change"}],chineseName:[{required:!0,message:"请输入中文名称"},{max:30,message:"长度至多为 30 个字符"},{pattern:/^[\u4e00-\u9fa5A-z0-9\-_]*$/,message:"仅支持输入中文、英文、数字、“-”和下划线"}]},formItemList:[{label:"消息TOPIC",prop:"name",placeholder:"请输入消息管理中注册的消息TOPIC"},{label:"中文名称",prop:"chineseName",placeholder:"请输入中文名称"}],nameOptionLoading:!1,nameOptionList:[],confirmAdditionLoading:!1,confirmAdditionDebounceTimer:null}},methods:{findMessageByGateWay:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={msgTopic:t},e.next=3,ar.a.findMessageByGateWay(a).catch((function(e){throw new Error("findMessageByGateWay, ".concat(e))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),insertMessagePre:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.formData,r=a.name,i=a.chineseName,o={unitId:t,name:r,chineseName:i},e.next=5,ar.a.insertMessagePre(o).catch((function(e){throw new Error("insertMessagePre, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleFindMessageByGateWay:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.nameOptionLoading=!0,e.next=3,this.findMessageByGateWay(t).catch((function(e){throw new Error("handleFindMessageByGateWay, ".concat(e))}));case 3:a=e.sent,r=a.data,this.nameOptionList=Array.isArray(r)?r:[],this.nameOptionLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleInsertMessagePre:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.insertMessagePre().catch((function(e){throw new Error("handleInsertMessagePre, ".concat(e))}));case 2:t=e.sent,a=t.data,r=a||0,this.$emit("update:currentTableRowData",{id:r});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),remoteMethodSearchNameOptionList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,this.handleFindMessageByGateWay(t).catch((function(e){throw new Error("remoteMethodSearchNameOptionList, ".concat(e))}));case 3:e.next=6;break;case 5:this.nameOptionList=[];case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),onChangeNameSelect:function(e){if(e){var t=this.nameOptionList.find((function(t){return t.name===e})).chineseName;this.formData.chineseName=t||""}},onClickConfirmAdditionButton:function(){var e=this;clearTimeout(this.confirmAdditionDebounceTimer),this.confirmAdditionDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate().catch((function(e){throw new Error("onClickConfirmAdditionButton, form validate ".concat(e,"!"))}));case 2:return e.confirmAdditionLoading=!0,t.next=5,e.handleInsertMessagePre().catch((function(t){throw e.confirmAdditionLoading=!1,new Error("onClickConfirmAdditionButton, ".concat(t))}));case 5:e.$emit("update:active",1),e.confirmAdditionLoading=!1,e.$emit("updateDetailHeaderInfo");case 8:case"end":return t.stop()}}),t)}))),300)}}},Er=Vr,Rr=(a("5013"),Object(m.a)(Er,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-fill-in-basic-info"},[a("p",{staticClass:"step-fill-in-basic-info__title"},[e._v("填写基本信息")]),e._m(0),a("el-form",{ref:"form",staticClass:"step-fill-in-basic-info__form",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},e._l(e.formItemList,(function(t){var n=t.label,r=t.prop,i=t.placeholder;return a("el-form-item",{key:r,attrs:{label:n,prop:r}},["name"===r?[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:i,loading:e.nameOptionLoading,clearable:!0,filterable:!0,remote:!0,"remote-method":e.remoteMethodSearchNameOptionList},on:{change:e.onChangeNameSelect},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,t)},expression:"formData[prop]"}},e._l(e.nameOptionList,(function(e){var t=e.name;return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)]:"chineseName"===r?[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:i,clearable:!0},model:{value:e.formData[r],callback:function(t){e.$set(e.formData,r,"string"==typeof t?t.trim():t)},expression:"formData[prop]"}})]:e._e()],2)})),1),a("div",{staticClass:"step-fill-in-basic-info__button-wrapper"},[a("el-button",{attrs:{loading:e.confirmAdditionLoading,type:"primary"},on:{click:e.onClickConfirmAdditionButton}},[e._v("确认添加")])],1)],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-fill-in-basic-info__tip"},[a("p",[e._v("此处填写的信息将直接展示给用户，供用户了解消息内容，请认真填写")]),a("p",[e._v("在消息添加前需确保该消息已在【开发管理-消息管理】中注册")])])}],!1,null,"7a8ba202",null)),zr=Rr.exports,$r={name:"StepFinish"},Ur=(a("43dd"),Object(m.a)($r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-finish"},[e._m(0),a("p",{staticClass:"step-finish__title"},[e._v("消息添加成功")]),a("p",{staticClass:"step-finish__tip"},[e._v("接下来您可以编辑消息文档")]),a("div",{staticClass:"step-finish__button-wrapper"},[a("el-button",{on:{click:function(t){return e.$emit("clickBackToMessageListButton")}}},[e._v("返回消息列表")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("clickEditMessageDocumentButton")}}},[e._v("编辑消息文档")])],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"step-finish__icon-wrapper"},[t("i",{staticClass:"el-icon-success"})])}],!1,null,"12e0a8b4",null)),Mr=Ur.exports,qr={name:"MessageAddition",components:{Steps:v.a,StepFillInBasicInfo:zr,StepFinish:Mr},props:{currentDisplayComponentName:{type:String,required:!0},currentTableRowData:{type:Object,required:!0}},data:function(){return{stepsTitleList:["填写基本信息","完成"],stepsActive:0}},methods:{onBack:function(){this.$emit("update:currentDisplayComponentName","MessageTable")},onClickBackToMessageListButton:function(){this.$emit("update:currentDisplayComponentName","MessageTable")},onClickEditMessageDocumentButton:function(){this.$emit("update:currentDisplayComponentName","MessageDocument")}}},Hr=(a("1d55"),Object(m.a)(qr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"message-addition"},[a("el-page-header",{attrs:{content:"添加消息"},on:{back:e.onBack}}),a("Steps",{attrs:{titleList:e.stepsTitleList,active:e.stepsActive}}),0===e.stepsActive?a("StepFillInBasicInfo",{attrs:{active:e.stepsActive,currentTableRowData:e.currentTableRowData},on:{"update:active":function(t){e.stepsActive=t},"update:currentTableRowData":function(t){return e.$emit("update:currentTableRowData",t)},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):1===e.stepsActive?a("StepFinish",{on:{clickBackToMessageListButton:e.onClickBackToMessageListButton,clickEditMessageDocumentButton:e.onClickEditMessageDocumentButton}}):e._e()],1)}),[],!1,null,"d72e0544",null)),Kr=Hr.exports,Gr={name:"AlertCheckForUpdate",components:{Alert:P.a},props:{name:{type:String,required:!0},outOfDate:{type:Number,required:!0}},data:function(){return{}},filters:{formatTipText:function(e){return e?"本文档由 ".concat(e," 的消息文档克隆生成，编辑仅影响当前文档"):""}},computed:{computeOutOfDateAlertVisible:function(){var e=this.outOfDate;return Boolean(e)}}},Qr=Gr,Wr=(a("f507"),Object(m.a)(Qr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-check-for-update"},[a("p",{staticClass:"alert-check-for-update__tip"},[e._v(e._s(e._f("formatTipText")(e.name)))]),e.computeOutOfDateAlertVisible?a("Alert",{attrs:{closable:!1,type:"warning"},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",[e._v("检测到当前消息文档元数据内容有更新，")]),a("el-button",{staticStyle:{"font-size":"inherit"},attrs:{type:"text"},on:{click:function(t){return e.$emit("clickUpdateNowButton")}}},[e._v("查看更新内容")])]},proxy:!0}],null,!1,1564773896)}):a("Alert",{attrs:{closable:!1,showIcon:!1,type:"default"},scopedSlots:e._u([{key:"title",fn:function(){return[a("el-button",{staticStyle:{"margin-right":"4px","font-size":"inherit"},attrs:{type:"text"},on:{click:function(t){return e.$emit("clickCheckForUpdateButton")}}},[e._v("检查更新")]),a("el-tooltip",{attrs:{content:"检查当前消息文档参数是否为最新版本",placement:"top"}},[a("i",{staticClass:"el-icon-info-empty"})])]},proxy:!0}])})],1)}),[],!1,null,"4b362ec5",null)),Jr=Wr.exports,Xr={name:"VersionSwitchingHeader",components:{Title:E.a},props:{upcomingVersionSwitch:{type:Boolean,required:!0},firstTipVisible:{type:Boolean,required:!0}},data:function(){return{popoverVisible:!0,explainTextList:[{text:"新增",className:"create"},{text:"修改",className:"update"},{text:"删除",className:"delete"}]}},filters:{formatTitleText:function(e){return e?"待更新版本":"当前版本"},formatExplainClassName:function(e){return e?"explain-wrapper__explain ".concat(e):"explain-wrapper__explain"}},methods:{onChangeUpcomingVersionSwitch:function(e){this.$emit("update:upcomingVersionSwitch",e),this.$emit("update:firstTipVisible",!1);var t=this.$route.name,a="".concat(t,"/").concat("internalCallExternal","/ChangeContentDialog/firstTipVisible");localStorage.setItem(a,"".concat(this.firstTipVisible))}}},Zr=Xr,Yr=(a("5cc4"),Object(m.a)(Zr,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"version-switching-header"},[a("div",{staticClass:"version-switching-header__title-wrapper"},[a("Title",{attrs:{text:e._f("formatTitleText")(e.upcomingVersionSwitch)}}),a("el-switch",{attrs:{value:e.upcomingVersionSwitch},on:{change:e.onChangeUpcomingVersionSwitch}}),a("el-tooltip",{staticStyle:{"margin-left":"8px"},attrs:{content:"你可以通过切换开关对比消息文档待更新版本、当前版本的差异。",effect:"dark",placement:"top"}},[a("i",{staticClass:"el-icon-info-empty"})])],1),a("div",{staticClass:"version-switching-header__explain-wrapper"},[a("p",[e._v("变更项说明：")]),e._l(e.explainTextList,(function(t){var n=t.text,r=t.className;return a("p",{key:n,class:e._f("formatExplainClassName")(r)},[e._v(" "+e._s(n)+" ")])}))],2)])}),[],!1,null,"f30d08aa",null)),ei=Yr.exports,ti={name:"VersionSwitchingForm",props:{form:{type:Object,required:!0}},data:function(){return{formParagraphList:[{label:"消息名称:",prop:"apiName"},{label:"消息描述:",prop:"apiRemark",className:"pre-wrap"}]}},filters:{formatParagraphContentClassName:function(e){return e?"paragraph__content pre-wrap":"paragraph__content"}}},ai=ti,ni=(a("e1a9"),Object(m.a)(ai,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"version-switching-form",attrs:{model:e.form,"label-width":"80px"}},e._l(e.formParagraphList,(function(t){var n=t.label,r=t.prop,i=t.className;return a("div",{key:r,staticClass:"version-switching-form__paragraph"},[a("p",{staticClass:"paragraph__label"},[e._v(e._s(n))]),a("p",{class:e._f("formatParagraphContentClassName")(i)},[e._v(" "+e._s(e.form[r])+" ")])])})),0)}),[],!1,null,"1e8c9a82",null)),ri=ni.exports,ii={name:"ComparisonTable",components:{Title:E.a},props:{title:{type:String,default:""},tableData:{type:Array,default:function(){return[]}},tableColumnList:{type:Array,required:!0},hashMapMutationAttributes:{type:Map,required:!0}},filters:{formatTableColumnRequiredText:function(e){return(new Map).set("0","否").set("1","是").set("2","条件").get(e)||""}},methods:{formatTableColumnClassName:function(e,t){var a=this.hashMapMutationAttributes,n=e.mutationAttributes;return(n=Array.isArray(n)?n:[]).includes(a.get(t)||null)?"update-column":""},formatTableColumnDescriptionClassName:function(e,t){var a=this.hashMapMutationAttributes,n=e.mutationAttributes;return(n=Array.isArray(n)?n:[]).includes(a.get(t)||null)?"update-column remark-text":"remark-text"},judgeTableColumnDescriptionToolTipDisable:function(e){return!((e=(e=e||"").replace(/<a data-selection="[^"]+">|<\/a>/g,""))&&e.length>10)},formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},formatTableRowClassName:function(e){var t=e.row.status;return(new Map).set(0,"").set(1,"create-row").set(2,"delete-row").set(3,"update-row").get(t)||""}}},oi=ii,si=(a("4810"),Object(m.a)(oi,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"comparison-table"},[a("Title",{attrs:{text:e.title}}),a("el-table",{staticClass:"comparison-table__table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.formatTableRowClassName,"hide-empty-img":!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width,o=t.showOverflowTooltip;return a("el-table-column",{key:n,attrs:{label:n,prop:r,width:i,"show-overflow-tooltip":o},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column,i=r.property,o=r.label;return[["required"].includes(i)?[a("span",{class:e.formatTableColumnClassName(n,i)},[e._v(e._s(e._f("formatTableColumnRequiredText")(n[i])))])]:"描述"===o?[a("el-tooltip",{attrs:{disabled:e.judgeTableColumnDescriptionToolTipDisable(n[i]),effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{staticStyle:{"{\n                    width":"480px","max-height":"160px",overflow:"auto","white-space":"pre-wrap","word-break":"break-all"},domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})]},proxy:!0}],null,!0)},[a("div",{class:e.formatTableColumnDescriptionClassName(n,i),domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[i]))}})])]:[a("span",{class:e.formatTableColumnClassName(n,i)},[e._v(e._s(n[i]))])]]}}],null,!0)})})),1)],1)}),[],!1,null,"66dc53a9",null)),ci={name:"ChangeContentDialog",components:{VersionSwitchingHeader:ei,VersionSwitchingForm:ri,ComparisonTable:si.exports},props:{dialogVisible:{type:Boolean,required:!0},id:{type:Number,required:!0},apiCode:{type:String,required:!0},updatePolicy:{type:Number,required:!0}},data:function(){return{unitId:parseInt(this.$route.params.id),dialogLoading:!1,firstTipVisible:!1,changeLineQuantity:0,upcomingVersionSwitch:!0,versionSwitchingFormData:{apiName:"",apiRemark:""},newVersionSwitchingFormData:{apiName:"",apiRemark:""},inParams:[],outParams:[],errorCodes:[],newInParams:[],newOutParams:[],newErrorCodes:[],hashMapMutationAttributesParams:(new Map).set("name",1).set("oldType",2).set("required",3).set("exampleValue",4).set("descr",5),hashMapMutationAttributesErrorCodes:(new Map).set("errorMsg",1).set("prescription",2).set("errorCode",3),inParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"25%",showOverflowTooltip:!0},{label:"是否必填",prop:"required",minWidth:"15%"},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"descr",minWidth:"25%"}],outParamsTableColumnList:[{label:"名称",prop:"name",minWidth:"30%"},{label:"类型",prop:"oldType",minWidth:"30%",showOverflowTooltip:!0},{label:"示例",prop:"exampleValue",minWidth:"25%",showOverflowTooltip:!0},{label:"描述",prop:"remark",minWidth:"25%"}],errorCodesTableColumnList:[{label:"错误码",prop:"errorCode",minWidth:"35%"},{label:"错误消息",prop:"errorMsg",minWidth:"60%",showOverflowTooltip:!0},{label:"处理建议",prop:"prescription",minWidth:"60%",showOverflowTooltip:!0}]}},filters:{formatDialogTitleText:function(e){return e?"".concat(e," 消息文档变更内容"):""},formatChangeRecordsTotalText:function(e){return"共 ".concat(e," 条变更记录")},formatFooterSwitchActiveText:function(e){return(new Map).set(1,"全部更新").set(2,"部分更新").get(e)||""}},computed:{computeFooterFullUpdateTooltipContentTextVisible:function(){var e=this.updatePolicy;return(new Map).set(1,!0).set(2,!1).get(e)||!1},computeVersionSwitchingFormData:function(){var e=this.upcomingVersionSwitch,t=this.versionSwitchingFormData,a=this.newVersionSwitchingFormData;return e?a:t},computeInParams:function(){var e=this.upcomingVersionSwitch,t=this.inParams,a=this.newInParams;return e?a:t}},methods:{getBizMsgPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,1,r={unitId:t,id:a,visible:1},e.next=5,ar.a.getMessagePreDetail(r).catch((function(e){throw new Error("getBizMsgPreDetails, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getBizMsgPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.id,1,r={unitId:t,id:a,visible:1},e.next=5,ar.a.getBizMsgPreDetailsLatestVersion(r).catch((function(e){throw new Error("getBizMsgPreDetailsLatestVersion, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizMsgPreDetails:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.getBizMsgPreDetails().catch((function(e){throw new Error("handleGetBizMsgPreDetails, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.chineseName,i=a.descr,o=a.messagePropList,this.versionSwitchingFormData.apiName=r||"",this.versionSwitchingFormData.apiRemark=i||"",this.inParams=Array.isArray(o)?o:[],this.inParams.length>0&&this.setSelectVal(this.inParams),this.dialogLoading=!1;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizMsgPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,e.next=3,this.getBizMsgPreDetailsLatestVersion().catch((function(e){throw new Error("handleGetBizMsgPreDetailsLatestVersion, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.chineseName,i=a.descr,o=a.messagePropList,s=a.changeLineQuantity,this.newVersionSwitchingFormData.apiName=r||"",this.newVersionSwitchingFormData.apiRemark=i||"",this.newInParams=Array.isArray(o)?o:[],this.newInParams.length>0&&this.setSelectVal(this.newInParams),this.changeLineQuantity=s||0,this.dialogLoading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),judgeFirstTipVisible:function(){var e=this.$route.name,t="".concat(e,"/").concat("internalCallExternal","/ChangeContentDialog/firstTipVisible");this.firstTipVisible=JSON.parse(localStorage.getItem(t)||"true")},setSelectVal:function(e){if(e)for(var t in e){var a=e[t];""==a.required&&(a.required="1"),a.oldType=this.setTypeValue(a.type),a.children&&this.setSelectVal(a.children)}},setTypeValue:function(e){if(e){for(var t=e.split("."),a="",n=0;n<t.length;n++){if(n==t.length-1){a+=t[n];break}-1!=t[n].indexOf("<")&&(a+=t[n].substring(0,t[n].indexOf("<")+1)),-1!=t[n].indexOf(",")&&(a+=t[n].substring(0,t[n].indexOf(",")+1)),-1!=t[n].indexOf(">")&&(a+=t[n])}return a}return""},onOpenDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("update:updatePolicy",2),e.next=3,Promise.all([this.handleGetBizMsgPreDetails(),this.handleGetBizMsgPreDetailsLatestVersion()]).catch((function(e){throw new Error("onOpenDialog, ".concat(e))}));case 3:this.judgeFirstTipVisible();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onCloseDialog:function(){this.$emit("update:dialogVisible",!1),this.firstTipVisible=!1},onClosedDialog:function(){this.$emit("update:updatePolicy",3),this.upcomingVersionSwitch=!0},onClickISeeButton:function(){this.firstTipVisible=!1;var e=this.$route.name,t="".concat(e,"/").concat("internalCallExternal","/ChangeContentDialog/firstTipVisible");localStorage.setItem(t,"".concat(this.firstTipVisible))},onClickUpdateNowButton:function(){this.$emit("updateNow"),this.$emit("update:dialogVisible",!1)}}},li=ci,ui=(a("17757"),Object(m.a)(li,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"change-content-dialog",attrs:{visible:e.dialogVisible,title:e._f("formatDialogTitleText")(e.apiCode),"close-on-click-modal":!1,top:"5vh",width:"1200px"},on:{open:e.onOpenDialog,close:e.onCloseDialog,closed:e.onClosedDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"footer__change-records-total"},[e._v(e._s(e._f("formatChangeRecordsTotalText")(e.changeLineQuantity)))]),a("div",{staticClass:"footer__right-button-wrapper"},[a("div",{staticClass:"right-button-wrapper__update-method-switch-wrapper"},[a("el-switch",{attrs:{value:e.updatePolicy,"active-value":1,"inactive-value":2},on:{change:function(t){return e.$emit("update:updatePolicy",t)}}}),a("p",{staticClass:"right-button-wrapper__switch-active-text"},[e._v(" "+e._s(e._f("formatFooterSwitchActiveText")(e.updatePolicy))+" ")]),a("el-tooltip",{staticStyle:{"margin-right":"8px"},attrs:{effect:"dark",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[e.computeFooterFullUpdateTooltipContentTextVisible?[a("p",[e._v(" 全部更新：包括消息名称、消息描述、参数增删及顺序变更、参数名称及类型修改、参数描述及示例值、参数是否必填变更、错误码增删改。 ")])]:[a("p",[e._v(" 部分更新：只更新参数增删及顺序变更、参数名称及类型修改、参数是否必填修改、错误码增删改。不会变更参数的示例值、参数描述和消息口名称、消息描述。 ")])]]},proxy:!0}])},[a("i",{staticClass:"el-icon-info-empty"})])],1),a("div",{staticClass:"right-button-wrapper__update-button-wrapper"},[a("el-button",{on:{click:function(t){return e.$emit("update:dialogVisible",!1)}}},[e._v("暂不更新")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onClickUpdateNowButton}},[e._v("立即更新")])],1)])]},proxy:!0}])},[e.firstTipVisible?a("div",{staticClass:"change-content-dialog__first-tip"},[a("p",[e._v("切换开关即可查看当前消息文档内容，方便对比消息文档的参数差异。")]),a("el-button",{attrs:{type:"text"},on:{click:e.onClickISeeButton}},[e._v("我知道了")])],1):e._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"change-content-dialog__content"},[a("VersionSwitchingHeader",{attrs:{upcomingVersionSwitch:e.upcomingVersionSwitch,firstTipVisible:e.firstTipVisible},on:{"update:upcomingVersionSwitch":function(t){e.upcomingVersionSwitch=t},"update:upcoming-version-switch":function(t){e.upcomingVersionSwitch=t},"update:firstTipVisible":function(t){e.firstTipVisible=t},"update:first-tip-visible":function(t){e.firstTipVisible=t}}}),a("VersionSwitchingForm",{attrs:{form:e.computeVersionSwitchingFormData}}),a("ComparisonTable",{attrs:{tableData:e.computeInParams,tableColumnList:e.inParamsTableColumnList,hashMapMutationAttributes:e.hashMapMutationAttributesParams,title:"消息体"}})],1)])}),[],!1,null,"49b6f906",null)),pi={name:"DocumentHeader",components:{AlertCheckForUpdate:Jr,ChangeContentDialog:ui.exports},props:{id:{type:Number,required:!0},name:{type:String,required:!0},outOfDate:{type:Number,required:!0},updatePolicy:{type:Number,required:!0}},data:function(){return{changeContentDialogVisible:!1}},filters:{formatPageHeaderContent:function(e){return e?"".concat(e," 的消息文档"):""}},methods:{checkForUpdate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a={id:t},e.next=4,ar.a.checkForUpdate(a).catch((function(e){throw new Error("checkForUpdate, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleCheckForUpdate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkForUpdate().catch((function(e){throw new Error("handleCheckForUpdate, ".concat(e))}));case 2:return t=e.sent,a=t.data,e.abrupt("return",a||!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),openUpdateNowConfirm:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.changeContentDialogVisible=!0,e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),openNoNewReleaseConfirm:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"当前消息文档已是最新版","success",!1,"关闭",t={type:"success",showConfirmButton:false,cancelButtonText:"关闭"},e.next=7,this.$confirm("当前消息文档已是最新版",t).catch((function(){}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickUpdateNowButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openUpdateNowConfirm();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickCheckForUpdateButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleCheckForUpdate().catch((function(e){throw new Error("onClickCheckForUpdateButton, ".concat(e))}));case 2:if(!e.sent){e.next=8;break}return e.next=6,this.openUpdateNowConfirm();case 6:e.next=10;break;case 8:return e.next=10,this.openNoNewReleaseConfirm();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},di=pi,mi=(a("71fd"),Object(m.a)(di,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-header"},[a("el-page-header",{staticClass:"page-header",attrs:{content:e._f("formatPageHeaderContent")(e.name)},on:{back:function(t){return e.$emit("back")}}}),a("AlertCheckForUpdate",{attrs:{name:e.name,outOfDate:e.outOfDate},on:{clickUpdateNowButton:e.onClickUpdateNowButton,clickCheckForUpdateButton:e.onClickCheckForUpdateButton}}),a("ChangeContentDialog",{attrs:{dialogVisible:e.changeContentDialogVisible,id:e.id,apiCode:e.name,updatePolicy:e.updatePolicy},on:{"update:dialogVisible":function(t){e.changeContentDialogVisible=t},"update:dialog-visible":function(t){e.changeContentDialogVisible=t},"update:updatePolicy":function(t){return e.$emit("update:updatePolicy",t)},updateNow:function(t){return e.$emit("updateNow")}}})],1)}),[],!1,null,"8510898a",null)),fi=mi.exports,hi={name:"DocumentForm",props:{editable:{type:Boolean,required:!0},formData:{type:Object,required:!0},editedFormData:{type:Object,required:!0},categoryOptionList:{type:Array,required:!0}},data:function(){return{formItemList:[{label:"中文名称",prop:"chineseName",placeholder:"请输入中文名称"},{label:"描述",prop:"descr",placeholder:"请输入描述"},{label:"所属分类",prop:"messageCategoryCode"}],editedFormRules:{chineseName:[{required:!0,message:"请输入中文名称"},{max:30,message:"长度至多为 30 个字符"},{pattern:/^[\u4e00-\u9fa5A-z0-9\-_]*$/,message:"仅支持输入中文、英文、数字、“-”和下划线"}],descr:[{required:!0,message:"请输入描述"},{min:5,max:500,message:"长度在 5 到 500 个字符"}],messageCategoryCode:[{required:!0,message:"请选择所属分类"}]}}},watch:{editable:{handler:function(e){if(e){var t=this.formData,a=JSON.parse(JSON.stringify(t));this.$emit("update:editedFormData",a)}else{this.$emit("update:editedFormData",{name:"",chineseName:"",descr:"",messageCategoryCode:"default"})}}}},methods:{validate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.editedForm.validate();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),formatMessageCategoryName:function(e){var t="";if(this.categoryOptionList.length>0){var a=this.categoryOptionList.find((function(t){return t.code===e}));a&&a.name&&(t=a.name)}return t}}},bi=hi,gi=(a("ffe7"),Object(m.a)(bi,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-form"},[e.editable?a("el-form",{ref:"editedForm",staticClass:"document-form__edited-form",attrs:{model:e.editedFormData,rules:e.editedFormRules,"label-width":"100px"}},e._l(e.formItemList,(function(t){var n=t.label,r=t.prop,i=t.placeholder;return a("el-form-item",{key:r,attrs:{label:n,prop:r}},[["name"].includes(r)?[a("p",{staticStyle:{width:"50%"}},[e._v(" "+e._s(e.editedFormData[r])+" ")])]:["chineseName"].includes(r)?[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:i},model:{value:e.editedFormData[r],callback:function(t){e.$set(e.editedFormData,r,"string"==typeof t?t.trim():t)},expression:"editedFormData[prop]"}})]:["descr"].includes(r)?[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:i,type:"textarea",resize:"vertical"},model:{value:e.editedFormData[r],callback:function(t){e.$set(e.editedFormData,r,t)},expression:"editedFormData[prop]"}})]:["messageCategoryCode"].includes(r)?[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 所属分类 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建消息分类，便于使用方在消息文档中根据分类快速找到目标消息。",placement:"top"}},[a("i",{staticClass:"el-icon-help"})])],1),a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择所属分类"},model:{value:e.editedFormData[r],callback:function(t){e.$set(e.editedFormData,r,t)},expression:"editedFormData[prop]"}},e._l(e.categoryOptionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})})),1),a("el-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"text"},on:{click:function(t){return e.$emit("update:classificationDialogVisible",!0)}}},[e._v("管理分类")])]:e._e()],2)})),1):a("el-form",{staticClass:"document-form__form",attrs:{model:e.formData,"label-width":"80px"}},e._l(e.formItemList,(function(t){var n=t.label,r=t.prop;return a("el-form-item",{key:r,staticStyle:{"margin-bottom":"8px"},attrs:{label:n,prop:r}},[a("p",{staticStyle:{width:"50%","white-space":"pre-wrap"}},[e._v(" "+e._s(["messageCategoryCode"].includes(r)?e.formatMessageCategoryName(e.formData[r]):e.formData[r])+" ")])])})),1)],1)}),[],!1,null,"3b5766c6",null)),vi=gi.exports,wi={name:"DocumentTable",props:{editable:{type:Boolean,required:!0},tableData:{type:Array,required:!0},editedTableData:{type:Array,required:!0}},data:function(){var e=this;return{tableColumnList:[{label:"名称",prop:"name",width:"20%"},{label:"类型",prop:"type",width:"20%"},{label:"是否必选",prop:"required",width:"5%"},{label:"示例值",prop:"exampleValue",showOverflowTooltip:!0,width:"20%"},{label:"描述",prop:"descr",width:"35%"}],exampleValueTableColumnFormRules:{exampleValue:[{validator:function(t,a,n){(a=a||"").length>50?(e.$message.warning("示例值长度至多为 50 个字符"),n(new Error("长度至多为 50 个字符"))):n()}}]},descriptionTableColumnFormRules:{descr:[{validator:function(t,a,n){(a=a||"").length>1e3?(e.$message.warning("描述长度至多为 1000 个字符"),n(new Error("长度至多为 1000 个字符"))):n()}}]},exampleValueMessageInstance:null,descriptionMessageInstance:null}},filters:{formatTableColumnRequiredText:function(e){return(new Map).set(0,"否").set(1,"是").set(2,"条件").get(e)||""}},watch:{editable:{handler:function(e){if(e){var t=this.tableData,a=JSON.parse(JSON.stringify(t));this.$emit("update:editedTableData",a)}else{this.$emit("update:editedTableData",[])}}}},methods:{formatTableColumnDescriptionInnerHtml:function(e){return e=(e=e||"").split("\n").map((function(e){return e?"<div>".concat(e.replace(/\s/g,"&nbsp;").replace(/<a&nbsp;data-selection/g,"<a class=\"remark-anchor\" target='__blank' href"),"</div>"):"<div><br></div>"})).join("")},validate:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$refs.exampleValueTableColumnForm?this.$refs.exampleValueTableColumnForm.length>0?this.$refs.exampleValueTableColumnForm.map((function(e){return e.validate()})):[this.$refs.exampleValueTableColumnForm.validate()]:[],a=this.$refs.descriptionTableColumnForm?this.$refs.descriptionTableColumnForm.length>0?this.$refs.descriptionTableColumnForm.map((function(e){return e.validate()})):[this.$refs.descriptionTableColumnForm.validate()]:[],e.next=4,Promise.all([].concat(Object(ie.a)(t),Object(ie.a)(a)));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}},yi=wi,Ci=(a("462d"),Object(m.a)(yi,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-table"},[a("p",{staticClass:"document-table__title"},[e._v("消息体")]),e.editable?a("el-table",{staticClass:"document-table__edited-table",staticStyle:{width:"100%"},attrs:{data:e.editedTableData,"hide-empty-img":!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.showOverflowTooltip;return a("el-table-column",{key:r,attrs:{label:n,prop:r,"show-overflow-tooltip":i},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column.property;return[["required"].includes(r)?[a("span",[e._v(e._s(e._f("formatTableColumnRequiredText")(n[r])))])]:["exampleValue"].includes(r)?[a("el-form",{ref:"exampleValueTableColumnForm",refInFor:!0,attrs:{model:n,rules:e.exampleValueTableColumnFormRules,"show-message":!1}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:r}},[a("el-input",{staticStyle:{width:"100%"},model:{value:n[r],callback:function(t){e.$set(n,r,"string"==typeof t?t.trim():t)},expression:"row[property]"}})],1)],1)]:["descr"].includes(r)?[a("el-form",{ref:"descriptionTableColumnForm",refInFor:!0,attrs:{model:n,rules:e.descriptionTableColumnFormRules,"show-message":!1}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:r}},[a("el-input",{staticStyle:{width:"100%"},attrs:{rows:1,type:"textarea",resize:"none"},model:{value:n[r],callback:function(t){e.$set(n,r,t)},expression:"row[property]"}})],1)],1)]:[a("span",[e._v(e._s(n[r]))])]]}}],null,!0)})})),1):a("el-table",{staticClass:"document-table__table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"hide-empty-img":!0,"row-key":"id"}},e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width;return a("el-table-column",{key:r,attrs:{label:n,prop:r,"min-width":i},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.column.property;return[["required"].includes(r)?[a("span",[e._v(e._s(e._f("formatTableColumnRequiredText")(n[r])))])]:["descr"].includes(r)?[a("span",{staticClass:"cell__ellipsis",domProps:{innerHTML:e._s(e.formatTableColumnDescriptionInnerHtml(n[r]))}})]:[a("span",[e._v(e._s(n[r]))])]]}}],null,!0)})})),1)],1)}),[],!1,null,"64c895ec",null)),Di=Ci.exports,ki={name:"ClassificationDialog",props:{classificationDialogVisible:{type:Boolean,required:!0},tableData:{type:Array,default:[]},getMessageCategoryByUnitId:{type:Function,default:function(){}}},methods:{handleOpen:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMessageCategoryByUnitId();case 2:this.$nextTick((function(){t.initTableDrag()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initTableDrag:function(){var e=this,t=document.querySelector(".dialog__table .el-table__body-wrapper tbody");w.a.create(t,{handle:".operation-icon",onEnd:function(t){var a=t.oldIndex,n=t.newIndex,r=Object(ie.a)(e.tableData),i=r.splice(a,1)[0];r.splice(n,0,i),e.$emit("update:tableData",r)},delay:0})},handleClose:function(){this.$emit("update:classificationDialogVisible",!1),this.$emit("update:getMessageCategoryByUnitId"),this.getMessageCategoryByUnitId()},newClassification:function(){this.tableData.push({id:-(new Date).getTime(),name:"",code:"",editNameState:!0,editCodeState:!0})},handleEdit:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editNameState=!0,t.editCodeState=!1;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleDelete:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.id)||-1===Math.sign(r)){e.next=9;break}return e.next=4,ar.a.deleteMessageCategoryById({id:r}).catch((function(e){throw new Error("handleDelete deleteMessageCategoryById")}));case 4:return this.$message.success("操作成功"),e.next=7,this.getMessageCategoryByUnitId();case 7:e.next=10;break;case 9:this.tableData.splice(a,1);case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),handleSave:ke.a.debounce(Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tableData.map((function(e){return e.id=-1===Math.sign(e.id)?null:e.id,{id:e.id,name:e.name,code:e.code,unitId:parseInt(i.$route.params.id)}})),a=parseInt(this.$route.params.id),r={unitId:a,categoryList:t},e.next=5,this.saveMessageCategory(r).catch((function(){throw new Error("handleSave saveMessageCategory")}));case 5:this.$message.success("操作成功"),this.handleClose();case 7:case"end":return e.stop()}}),e,this)}))),300),saveMessageCategory:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar.a.saveMessageCategory(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},xi=ki,_i=(a("757f"),Object(m.a)(xi,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"classification-dialog",attrs:{width:"670px",title:"管理消息所属分类",visible:e.classificationDialogVisible,"close-on-click-modal":!1},on:{opened:e.handleOpen,close:e.handleClose}},[a("div",{staticClass:"dialog__header"},[a("p",{staticClass:"header__desc"},[e._v(" 创建消息分类，便于使用方在消息文档中根据分类快速找到目标消息。 ")]),e.tableData.length>=50?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"最多可添加50个分类",placement:"top"}},[a("el-button",{staticStyle:{color:"#7f7f7f"},attrs:{type:"text"}},[e._v("+ 新增分类")])],1):a("el-button",{attrs:{type:"text"},on:{click:e.newClassification}},[e._v("+ 新增分类")])],1),a("el-table",{staticClass:"dialog__table",attrs:{data:e.tableData,height:"350","row-key":"id"}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editNameState?a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"==typeof a?a.trim():a)},expression:"scope.row.name"}}):a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"code",label:"分类编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editCodeState?a("el-input",{model:{value:t.row.code,callback:function(a){e.$set(t.row,"code","string"==typeof a?a.trim():a)},expression:"scope.row.code"}}):a("span",[e._v(e._s(t.row.code))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.$index;return[n.editNameState?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("el-button",{staticClass:"table__delete",attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n,r)}}},[e._v("删除")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可拖动排序，前台消息文档分类将按照当前列表分类顺序展示",placement:"top"}},[a("span",{staticClass:"operation-icon"})])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("关闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)}),[],!1,null,"e721760e",null)),Oi=_i.exports,Si={name:"MessageDocument",components:{DocumentHeader:fi,DocumentForm:vi,DocumentTable:Di,StickyWrapper:Ce.a,ClassificationDialog:Oi},props:{currentDisplayComponentName:{type:String,required:!0},currentTableRowData:{type:Object,default:function(){return{}}}},data:function(){return{unitId:parseInt(this.$route.params.id),messageDocumentLoading:!0,editable:!1,name:"",outOfDate:0,metadataRenew:!1,documentFormData:{chineseName:"",descr:"",messageCategoryCode:""},editedDocumentFormData:{chineseName:"",descr:"",messageCategoryCode:""},categoryOptionList:[],tableData:[],classificationDialogVisible:!1,documentTableData:[],editedDocumentTableData:[],saveButtonLoading:!1,saveButtonDebounceTimer:null,updatePolicy:3}},methods:{getMessagePreDetail:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.currentTableRowData.id,r={unitId:t,id:a},e.next=5,ar.a.getMessagePreDetail(r).catch((function(e){throw new Error("getMessagePreDetail, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),updateMessagePre:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u,p;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.name,r=this.metadataRenew,i=this.editedDocumentTableData,o=this.currentTableRowData.id,s=this.editedDocumentFormData,c=s.chineseName,l=s.descr,u=s.messageCategoryCode,p={unitId:t,id:o,name:a,chineseName:c,descr:l,messageCategoryCode:u,metadataRenew:r,messagePropList:i},e.next=7,ar.a.updateMessagePre(p).catch((function(e){throw new Error("updateMessagePre, ".concat(e))}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getMsgPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentTableRowData.id,a={id:t},e.next=4,ar.a.getMsgPreDetailsLatestVersion(a).catch((function(e){throw new Error("getMsgPreDetailsLatestVersion, ".concat(e))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetMessagePreDetail:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.messageDocumentLoading=!0,e.next=3,this.getMessagePreDetail().catch((function(e){throw new Error("handleGetMessagePreDetail, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.name,i=a.outOfDate,o=a.chineseName,s=a.descr,c=a.messageCategoryCode,l=a.messagePropList,this.name=r||"",this.outOfDate=i||0,this.documentFormData={chineseName:o,descr:s,messageCategoryCode:c},u=Array.isArray(l)?l:[],this.documentTableData=u,this.messageDocumentLoading=!1;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleUpdateMessagePre:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMessagePre().catch((function(e){throw new Error("handleUpdateMessagePre, ".concat(e))}));case 2:this.$message.success("操作成功！");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetMsgPreDetailsLatestVersion:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.messageDocumentLoading=!0,e.next=3,this.getMsgPreDetailsLatestVersion().catch((function(e){throw new Error("handleGetMsgPreDetailsLatestVersion, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.chineseName,i=a.descr,o=a.messageCategoryCode,s=a.messagePropList,this.editedDocumentFormData={chineseName:r,descr:i,messageCategoryCode:o},c=Array.isArray(s)?s:[],this.editedDocumentTableData=c,this.messageDocumentLoading=!1,this.$message.success("文档数据更新成功，保存文档并发布后生效。");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGenerateBizMsgPreDetailsPreview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.messageDocumentLoading=!0,e.next=3,this.generateBizMsgPreDetailsPreview().catch((function(e){throw new Error("generateBizMsgPreDetailsPreview, ".concat(e))}));case 3:t=e.sent,a=t.data,r=a.name,i=a.outOfDate,o=a.chineseName,s=a.descr,c=a.messageCategoryCode,l=a.messagePropList,this.name=r||"",this.outOfDate=i||0,this.editedDocumentFormData={chineseName:o,descr:s,messageCategoryCode:c},u=Array.isArray(l)?l:[],this.editedDocumentTableData=u,this.messageDocumentLoading=!1,this.$message.success("文档数据更新成功，保存文档并发布后生效。");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),generateBizMsgPreDetailsPreview:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a=this.updatePolicy,r=this.currentTableRowData.id,i={unitId:t,id:r,queryPolicy:a},e.next=5,ar.a.getMsgPreDetailsPreview(i).catch((function(e){throw new Error("generateBizMsgPreDetailsPreview, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getMessageCategoryByUnitId:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={unitId:t},e.next=4,ar.a.getMessageCategoryByUnitId(a).catch((function(e){throw new Error("getMessageCategoryByUnitId, ".concat(e))}));case 4:r=e.sent,i=r.data,this.categoryOptionList=i,this.tableData=Array.isArray(i)?i.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{editNameState:!1,editCodeState:!1})})):[];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),validateDocumentForm:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.documentForm.validate().catch((function(e){throw new Error("validateDocumentForm, form validate ".concat(e,"!"))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),validateDocumentTable:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.documentTable.validate().catch((function(e){throw new Error("validateDocumentTable, form validate ".concat(e,"!"))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onBack:function(){this.$emit("update:currentDisplayComponentName","MessageTable")},onUpdateNow:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editable=!0,e.next=3,this.$nextTick();case 3:return e.next=5,this.handleGenerateBizMsgPreDetailsPreview().catch((function(e){throw new Error("onUpdateNow, ".concat(e))}));case 5:this.metadataRenew=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickCancelButton:function(){this.editable=!1,this.metadataRenew=!1},onClickSaveButton:function(){var e=this;clearTimeout(this.saveButtonDebounceTimer),this.saveButtonDebounceTimer=setTimeout(Object(r.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.validateDocumentForm(),e.validateDocumentTable()]).catch((function(e){throw new Error("onClickSaveButton, ".concat(e))}));case 2:return e.saveButtonLoading=!0,t.next=5,e.handleUpdateMessagePre().catch((function(t){throw e.saveButtonLoading=!1,new Error("onClickSaveButton, ".concat(t))}));case 5:return e.editable=!1,e.saveButtonLoading=!1,e.$emit("updateDetailHeaderInfo"),t.next=10,e.handleGetMessagePreDetail().catch((function(e){throw new Error("onClickSaveButton, ".concat(e))}));case 10:case"end":return t.stop()}}),t)}))),300)},onClickEditButton:function(){this.editable=!0}},mounted:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleGetMessagePreDetail().catch((function(e){throw new Error("mounted, ".concat(e))}));case 2:return e.next=4,this.getMessageCategoryByUnitId().catch((function(e){throw new Error("mounted, ".concat(e))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},Ti=Si,ji=(a("8ff8"),Object(m.a)(Ti,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.messageDocumentLoading,expression:"messageDocumentLoading"}],staticClass:"message-document"},[a("DocumentHeader",{attrs:{id:e.currentTableRowData.id,name:e.name,updatePolicy:e.updatePolicy,outOfDate:e.outOfDate},on:{"update:updatePolicy":function(t){e.updatePolicy=t},"update:update-policy":function(t){e.updatePolicy=t},back:e.onBack,updateNow:e.onUpdateNow}}),a("DocumentForm",{ref:"documentForm",attrs:{editable:e.editable,formData:e.documentFormData,editedFormData:e.editedDocumentFormData,classificationDialogVisible:e.classificationDialogVisible,categoryOptionList:e.categoryOptionList},on:{"update:editedFormData":function(t){e.editedDocumentFormData=t},"update:edited-form-data":function(t){e.editedDocumentFormData=t},"update:classificationDialogVisible":function(t){e.classificationDialogVisible=t},"update:classification-dialog-visible":function(t){e.classificationDialogVisible=t},"update:categoryOptionList":function(t){e.categoryOptionList=t},"update:category-option-list":function(t){e.categoryOptionList=t}}}),a("DocumentTable",{ref:"documentTable",attrs:{editable:e.editable,tableData:e.documentTableData,editedTableData:e.editedDocumentTableData},on:{"update:editedTableData":function(t){e.editedDocumentTableData=t},"update:edited-table-data":function(t){e.editedDocumentTableData=t}}}),a("ClassificationDialog",{attrs:{classificationDialogVisible:e.classificationDialogVisible,tableData:e.tableData,getMessageCategoryByUnitId:e.getMessageCategoryByUnitId},on:{"update:classificationDialogVisible":function(t){e.classificationDialogVisible=t},"update:classification-dialog-visible":function(t){e.classificationDialogVisible=t},"update:tableData":function(t){e.tableData=t},"update:table-data":function(t){e.tableData=t}}}),a("StickyWrapper",[e.editable?a("div",{staticClass:"sticky-wrapper__button-wrapper"},[a("el-button",{on:{click:e.onClickCancelButton}},[e._v("取消")]),a("el-button",{attrs:{loading:e.saveButtonLoading,type:"primary"},on:{click:e.onClickSaveButton}},[e._v("保存")])],1):a("el-button",{attrs:{type:"primary"},on:{click:e.onClickEditButton}},[e._v("编辑")])],1)],1)}),[],!1,null,"612cec92",null)),Ii={name:"MessageList",components:{MessageTable:Fr,MessageAddition:Kr,MessageDocument:ji.exports},data:function(){return{currentDisplayComponentName:"MessageTable",currentTableRowData:{}}}},Li=(a("36b3"),Object(m.a)(Ii,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"message-list"},["MessageTable"===e.currentDisplayComponentName?a("MessageTable",{attrs:{currentDisplayComponentName:e.currentDisplayComponentName,currentTableRowData:e.currentTableRowData},on:{"update:currentDisplayComponentName":function(t){e.currentDisplayComponentName=t},"update:current-display-component-name":function(t){e.currentDisplayComponentName=t},"update:currentTableRowData":function(t){e.currentTableRowData=t},"update:current-table-row-data":function(t){e.currentTableRowData=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):"MessageAddition"===e.currentDisplayComponentName?a("MessageAddition",{attrs:{currentDisplayComponentName:e.currentDisplayComponentName,currentTableRowData:e.currentTableRowData},on:{"update:currentDisplayComponentName":function(t){e.currentDisplayComponentName=t},"update:current-display-component-name":function(t){e.currentDisplayComponentName=t},"update:currentTableRowData":function(t){e.currentTableRowData=t},"update:current-table-row-data":function(t){e.currentTableRowData=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):"MessageDocument"===e.currentDisplayComponentName?a("MessageDocument",{attrs:{currentDisplayComponentName:e.currentDisplayComponentName,currentTableRowData:e.currentTableRowData},on:{"update:currentDisplayComponentName":function(t){e.currentDisplayComponentName=t},"update:current-display-component-name":function(t){e.currentDisplayComponentName=t},"update:currentTableRowData":function(t){e.currentTableRowData=t},"update:current-table-row-data":function(t){e.currentTableRowData=t},updateDetailHeaderInfo:function(t){return e.$emit("updateDetailHeaderInfo")}}}):e._e()],1)}),[],!1,null,"4b5653e0",null)),Ai=Li.exports,Pi=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"noDataImage"},[t("img",{attrs:{src:a("24ec")}})])}],Ni=a("16d8"),Bi={name:"UserManual",props:{basicId:{type:Number,default:0}},components:{MarkdownEditor:Ni.a},data:function(){return{tableData:[],sortTableData:[],addOrEditTitle:"",addOrEditVisible:!1,addOrEditForm:{docType:"",title:"",remark:""},addOrEditFormRules:{docType:[{required:!0,message:"请选择类型"}],title:[{required:!0,message:"请输入名称"},{min:2,max:15,message:"请输入2-15个字符"}],remark:[{required:!1,max:30,message:"最多输入30个字符"}]},docEditDialogVisible:!1,productDocEditForm:{title:"",remark:"",content:""},productDocEditRules:{title:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:150,message:"名称长度2-150个字符",trigger:["blur","change"]}],remark:[{min:0,max:255,message:"备注长度超过255个字符",trigger:["blur","change"]}],content:[{required:!0,message:"请输入文档内容",trigger:"blur"}]},publishVisible:!1,offlineVisible:!1,deleteVisible:!1,docId:0,operationContent:"",operationVisible:!1,parentId:0,id:"",operationType:"",isEdit:!0,placeholder:"",markdownEditorHeight:window.innerHeight-308}},filters:{parseTimefilter:function(e,t){return e?Object(_n.c)(e,t):""}},methods:{initTableDrag:function(){if(this.tableData.length>0){var e=this,t=document.querySelector(".user-manual .el-table__body-wrapper tbody");w.a.create(t,{onEnd:function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var i,o;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=a.oldIndex,o=a.newIndex,Object(r.a)(Object(n.a)().mark((function t(){var a,r,s,c,l,u,p,d;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.parse(JSON.stringify(e.tableData)),e.sortTableData=[],e.treeConvertToList(a),r=e.sortTableData[i],s=e.sortTableData[o],c=r.id,l=e.basicId,u=s.parentId,p=s.seq,d={id:c,objId:l,parentId:u,seq:p},t.next=12,je.userManual.updateDocSeq(d).catch((function(e){throw new Error("initTableDrag updateDocSeq")})).finally((function(){e.tableData=[],e.fetchUserManualTree()}));case 12:case"end":return t.stop()}}),t)})))();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}},treeConvertToList:function(e){for(var t in e){var a=e[t];this.sortTableData.push({id:a.id,seq:a.seq,parentId:a.parentId});var n=a.children;null!=n&&n.length>0&&this.recurrenceFun(n,this.sortTableData,a.id)}},recurrenceFun:function(e,t,a){for(var n in e){var r=e[n];t.push({id:r.id,seq:r.seq,parentId:a});var i=r.children;null!=i&&i.length>0&&this.recurrenceFun(i,t,r.id)}},fetchUserManualTree:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={unitId:this.basicId},e.next=3,je.userManual.getBusinessUnitDocByUnitId(t).catch((function(){throw new Error("fetchUserManualTree getBusinessUnitDocByUnitId")}));case 3:a=e.sent,this.tableData=a.data,this.$nextTick((function(){r.initTableDrag()}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),addOrEdit:function(e,t){this.addOrEditTitle=e,this.addOrEditVisible=!0,"编辑"==e?(this.isEdit=!1,this.addOrEditForm.docType=t.docType,this.addOrEditForm.title=t.title,this.addOrEditForm.remark=t.remark):"新建"==e&&(this.isEdit=!0),this.id=t.id,this.parentId=t.parentId},closeAddOrEdit:function(){this.addOrEditVisible=!1,this.$refs.addOrEditForm.clearValidate(),this.addOrEditForm.docType="",this.addOrEditForm.title="",this.addOrEditForm.content="",this.addOrEditForm.remark=""},saveAddorEdit:function(){var e=this;this.$refs.addOrEditForm.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o,s,c,u,p,d;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=17;break}if(r=e.addOrEditForm,i=r.docType,o=r.title,s=r.remark,c=e.$route.params.id,u=3,p=e.parentId,d=e.id,"编辑"!==e.addOrEditTitle){t.next=12;break}return t.next=9,je.userManual.saveBusinessUnitDoc({objId:c,type:u,docType:i,title:o,remark:s,parentId:p,id:d}).catch((function(e){throw new Error("saveAddorEdit saveBusinessUnitDoc")}));case 9:l.Message.success("编辑成功"),t.next=15;break;case 12:return t.next=14,je.userManual.createBusinessUnitDoc({objId:c,type:u,docType:i,title:o,remark:s,parentId:d}).catch((function(e){throw new Error("saveAddorEdit createBusinessUnitDoc")}));case 14:l.Message.success("新建成功");case 15:e.closeAddOrEdit(),e.fetchUserManualTree();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editDoc:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i,o,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={"业务介绍":"说明服务简介、名词解释、业务流程、接入前准备","开发说明":"说明业务相关接口调用场景、系统交互流程、接口对接时序图","联调指南":"说明联调场景及其对应的联调用例"},r=t.id,this.docId=r,e.next=5,je.userManual.getDocById({id:t.id}).catch((function(){throw new Error("fetchUserManualTree getDocById")}));case 5:i=e.sent,o=i.data,this.productDocEditForm.title=t.title,this.productDocEditForm.content=o.content,this.productDocEditForm.remark=t.remark,s=t.rootParentTitle,this.placeholder=a[s],this.docEditDialogVisible=!0;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleCloseDocEditDialog:function(){this.$refs.productDocEditForm.resetFields(),this.docEditDialogVisible=!1},saveProductDocEdit:function(){var e=this;this.productDocEditForm.content=this.$refs.MarkdownEditor.getValue(),this.$refs.productDocEditForm.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o,s,c,u,p;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return r=e.productDocEditForm,i=r.title,o=r.remark,s=r.content,c=e.docId,u=e.$route.params.id,p={id:c,objId:u,title:i,remark:o,content:s},t.next=7,je.userManual.saveBusinessUnitDoc(p).catch((function(e){throw new Error("saveProductDocEdit saveBusinessUnitDoc")}));case 7:e.docEditDialogVisible=!1,l.Message.success("保存成功"),e.fetchUserManualTree();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleOperation:function(e,t){var a={publishContent:"文档发布成功后，用户即可在物流开放平台查看该文档，确认发布？",offlineContent:"文件夹下线成功后，用户将无法在物流开放平台查看该文件夹（及其所有的子文件夹和文档），确认下线？",offlineRootContent:"文档下线成功后，用户将无法在物流开放平台查看该文档，确认下线？",deleteContent:"删除后，用户将无法在物流开放平台查看到该文档，确认删除？"};this.operationType=t,2===e.docType&&"offline"===t?this.operationContent=a[t.concat("RootContent")]:this.operationContent=a[t.concat("Content")],this.docId=e.id,this.operationVisible=!0},confirmOperation:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.docId,a=this.$route.params.id,"publish"!==this.operationType){e.next=9;break}return r={objId:a,id:t},e.next=6,je.userManual.publishBusinessUnitDocById(r).catch((function(e){throw new Error("confirmOperation publishBusinessUnitDocById")}));case 6:l.Message.success("发布成功"),e.next=21;break;case 9:if("offline"!==this.operationType){e.next=16;break}return i={id:t},e.next=13,je.userManual.downDoc(i).catch((function(e){throw new Error("confirmOperation downDoc")}));case 13:l.Message.success("下线成功"),e.next=21;break;case 16:if("delete"!==this.operationType){e.next=21;break}return o={id:t},e.next=20,je.userManual.deleteApiCategoryById(o).catch((function(e){throw new Error("confirmOperation deleteApiCategoryById")}));case 20:l.Message.success("删除成功");case 21:this.operationVisible=!1,this.fetchUserManualTree();case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},created:function(){this.fetchUserManualTree()}},Fi=Bi,Vi=(a("1b29"),Object(m.a)(Fi,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-manual"},[e.tableData.length>0?a("el-table",{attrs:{data:e.tableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"title",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.docType?a("span",[a("i",{staticClass:"el-icon-document-empty"},[e._v(" "+e._s(t.row.title))])]):1===t.row.docType?a("span",[a("i",{staticClass:"icon iconfont icon-defaultfolder"},[e._v(" "+e._s(t.row.title))])]):e._e()]}}],null,!1,1318156733)}),a("el-table-column",{attrs:{prop:"updateUser",label:"更新人"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTimefilter")(t.row.updateTime,"{y}-{m}-{d} {h}:{i}")))])]}}],null,!1,1501552922)}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"initialization-color"},[e._v(e._s(1===t.row.status?"初始化":""))]),a("span",{staticClass:"publish-color"},[e._v(e._s(2===t.row.status?"已发布":""))]),a("span",{staticClass:"offline-color"},[e._v(e._s(3===t.row.status?"已下线":""))]),a("span",{staticClass:"edit-color"},[e._v(e._s(6===t.row.status?"编辑中":""))])]}}],null,!1,1774918762)}),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.docType?a("el-button",{attrs:{type:"text",disabled:""}},[e._v("新建")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.addOrEdit("新建",t.row)}}},[e._v("新建")]),1===t.row.docType?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.addOrEdit("编辑",t.row)}}},[e._v("编辑")]):2===t.row.docType?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editDoc(t.row)}}},[e._v("编辑")]):e._e(),2!==t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleOperation(t.row,"publish")}}},[e._v("发布")]):2===t.row.status?a("el-button",{attrs:{type:"text",disabled:""}},[e._v("发布")]):e._e(),t.row.parentId&&2===t.row.status?2===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleOperation(t.row,"offline")}}},[e._v("下线")]):e._e():a("el-button",{attrs:{type:"text",disabled:""}},[e._v("下线")]),t.row.parentId&&[1,3].includes(t.row.status)?[1,3].includes(t.row.status)?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleOperation(t.row,"delete")}}},[e._v("删除")]):e._e():a("el-button",{attrs:{type:"text",disabled:""}},[e._v("删除")])]}}],null,!1,3335330890)})],1):e._e(),this.tableData.length?e._e():a("span",[e._m(0),a("div",{staticClass:"noDataMessage"},[e._v("抱歉，没有查询到结果～")])]),a("el-dialog",{attrs:{title:e.addOrEditTitle,visible:e.addOrEditVisible,width:"30%"},on:{"update:visible":function(t){e.addOrEditVisible=t}}},[e.addOrEditVisible?a("el-form",{ref:"addOrEditForm",attrs:{model:e.addOrEditForm,"label-width":"80px",rules:e.addOrEditFormRules}},[a("el-form-item",{attrs:{label:"类型",prop:"docType"}},[a("el-radio-group",{model:{value:e.addOrEditForm.docType,callback:function(t){e.$set(e.addOrEditForm,"docType",t)},expression:"addOrEditForm.docType"}},[e.isEdit?a("el-radio",{attrs:{label:1}},[e._v("子目录")]):a("el-radio",{attrs:{label:1,disabled:""}},[e._v("子目录")]),e.isEdit?a("el-radio",{attrs:{label:2}},[e._v("文档")]):a("el-radio",{attrs:{label:2,disabled:""}},[e._v("文档")])],1)],1),a("el-form-item",{attrs:{label:"名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.addOrEditForm.title,callback:function(t){e.$set(e.addOrEditForm,"title",t)},expression:"addOrEditForm.title"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.addOrEditForm.remark,callback:function(t){e.$set(e.addOrEditForm,"remark",t)},expression:"addOrEditForm.remark"}})],1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeAddOrEdit}},[e._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAddorEdit}},[e._v("保 存")])],1)],1),e.docEditDialogVisible?a("el-dialog",{attrs:{fullscreen:"",title:"编辑文档",visible:e.docEditDialogVisible,"before-close":e.handleCloseDocEditDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.docEditDialogVisible=t}}},[a("el-form",{ref:"productDocEditForm",staticStyle:{width:"100%"},attrs:{"label-width":"100px",model:e.productDocEditForm,rules:e.productDocEditRules}},[a("el-form-item",{attrs:{label:"文档名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入文档名称"},model:{value:e.productDocEditForm.title,callback:function(t){e.$set(e.productDocEditForm,"title",t)},expression:"productDocEditForm.title"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.productDocEditForm.remark,callback:function(t){e.$set(e.productDocEditForm,"remark",t)},expression:"productDocEditForm.remark"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-alert",{attrs:{title:"注：文档中如果需要包含图片，请用工具栏中的图片上传工具上传，否则可能无法正常展示图片、下载文档",type:"error",closable:!1}}),a("div",{staticClass:"editor-container"},[a("MarkdownEditor",{ref:"MarkdownEditor",staticClass:"markdown-editor",attrs:{height:e.markdownEditorHeight,placeholder:e.placeholder},model:{value:e.productDocEditForm.content,callback:function(t){e.$set(e.productDocEditForm,"content",t)},expression:"productDocEditForm.content"}})],1)],1)],1),a("div",{staticClass:"button-wrapper",staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center"}},[a("el-button",{on:{click:e.handleCloseDocEditDialog}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveProductDocEdit}},[e._v("保存")])],1)],1):e._e(),a("el-dialog",{attrs:{title:"提示",visible:e.operationVisible,width:"30%"},on:{"update:visible":function(t){e.operationVisible=t}}},[a("span",[e._v(e._s(e.operationContent))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.operationVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmOperation}},[e._v("确 定")])],1)])],1)}),Pi,!1,null,"5b906f42",null)),Ei=Vi.exports,Ri=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-top":"0px","text-align":"center"}},[t("img",{attrs:{src:a("24ec")}})])}],zi={name:"orderRecord",components:{Pagination:bn.a},data:function(){return{nodata:"yes",unitId:"",listQuery:{searchKeyWord:"",total:1,pageNumb:1,pageSize:10,pageSizes:[10,20,40,60]},tableDatas:[],loading:!0,queryLike:""}},filters:{parseTimefilter:function(e,t){return Object(_n.c)(e,t)}},created:function(){this.unitId=this.$route.params.id,this.queryOrder()},methods:{queryOrder:function(){var e=this;this.loading=!0;var t=this,a={pageSize:t.listQuery.pageSize,pageNumb:t.listQuery.pageNumb,unitId:this.unitId,status:1,queryLike:this.queryLike};Object(c.a)({url:"/bizunit/findBizOrderList",method:"get",params:a}).then((function(a){a.data&&(t.tableDatas=a.data.list,t.listQuery.total=a.data.total,e.loading=!1,0==t.tableDatas.length&&"yes"===e.nodata?e.nodata="yes":e.nodata="no")})).catch((function(t){e.loading=!1,e.nodata="yes"}))},paginationChange:function(e){this.listQuery.pageNumb=e.page,this.listQuery.pageSize=e.limit,this.queryOrder()},rowClassName:function(e){var t=e.row,a=e.rowIndex;t.number=a+1},handleManagement:function(e,t){this.$emit("update:showRecordList",!1),this.$emit("update:tabName",t),this.$emit("update:currentRowData",e.row)},formatType:function(e){return["","","","ISV应用","商家自研应用","合作伙伴"][e.row.type]}}},$i=zi,Ui=(a("dbe4"),Object(m.a)($i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["no"===this.nodata?a("span",[a("el-input",{staticStyle:{width:"350px",margin:"0 10px 20px 0"},attrs:{type:"text",placeholder:"请输入应用名称/开发商名称/Appkey"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryOrder(t)}},model:{value:e.queryLike,callback:function(t){e.queryLike=t},expression:"queryLike"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryOrder}},[e._v("查询")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"my-table mb2",attrs:{data:e.tableDatas,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",meta:"x:37.0,y:57.0,width:901.0,height:216.0","row-class-name":e.rowClassName}},[a("template",{slot:"empty"},[a("div",[e._v("经查询，无符合搜索条件的结果")])]),a("el-table-column",{attrs:{label:"序号",prop:"number",width:"60"}}),a("el-table-column",{attrs:{label:"应用名称",prop:"appName","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"应用类型",prop:"type","show-tooltip-when-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatType(t)))])]}}],null,!1,855296214)}),a("el-table-column",{attrs:{label:"开发商名称",prop:"supplierName","show-tooltip-when-overflow":!0}}),a("el-table-column",{attrs:{label:"订阅人",prop:"ordererName"}}),a("el-table-column",{attrs:{label:"订阅时间",prop:"orderTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTimefilter")(t.row.orderTime,"{y}-{m}-{d} {h}:{i}")))])]}}],null,!1,4096310341)}),a("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleManagement(t,"interface")}}},[e._v("接口配置")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleManagement(t,"message")}}},[e._v("消息配置")])]}}],null,!1,4266542075)})],2),a("el-row",[a("el-col",{attrs:{span:24}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listQuery.total,expression:"listQuery.total"}],staticStyle:{margin:"0px",float:"right"},attrs:{total:e.listQuery.total,pageSizes:e.listQuery.pageSizes,page:e.listQuery.pageNumb,limit:e.listQuery.pageSize},on:{"update:pageSizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page-sizes":function(t){return e.$set(e.listQuery,"pageSizes",t)},"update:page":function(t){return e.$set(e.listQuery,"pageNumb",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.paginationChange}})],1)],1)],1):e._e(),"yes"===this.nodata?a("span",[e._m(0),a("div",{staticClass:"noDataMessage"},[e._v("还没有开发者订阅过哦～")])]):e._e()])}),Ri,!1,null,"221365bb",null)),Mi=Ui.exports,qi=(a("386d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-config-customer-code-container"},[a("el-dialog",{staticClass:"dialog-config-customer-code",attrs:{title:"配置业务编码",visible:e.dialogVisible,"close-on-click-modal":!1,width:"1200px",top:"5vh"},on:{open:e.onOpenDialog,close:e.onCloseDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:function(t){return e.$emit("update:dialogVisible",!1)}}},[e._v("关闭")])]},proxy:!0}])},[a("header",{staticClass:"dialog-config-customer-code__header"},[a("section",[a("p",[e._v("新建：创建新的业务编码输入框")]),a("p",[e._v("编辑：修改业务编码")]),a("p",[e._v("删除：删除本行业务编码")])]),a("el-button",{attrs:{type:"primary"},on:{click:e.onClickNewButton}},[e._v("新建")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,"hide-empty-img":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._l(e.tableColumnList,(function(t){var n=t.label,r=t.prop,i=t.width;return a("el-table-column",{key:r,attrs:{label:n,width:i},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span","updateTime"===r?[e._v(e._s(e.$dayjs(n[r]).format("YYYY-MM-DD HH:mm:ss")))]:[e._v(e._s(n[r]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,r=t.row,i=r.id,o=r.isDefault;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.onClickTableColumnEditButton(n)}}},[e._v("编辑")]),o?e._e():a("el-button",{staticStyle:{color:"#e1251b"},attrs:{type:"text"},on:{click:function(t){return e.onClickTableColumnDeleteButton(i)}}},[e._v("删除")])]}}])})],2),a("Pagination",{attrs:{currentPage:e.pageNumb,pageSize:e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.pageNumb=t},"update:current-page":function(t){e.pageNumb=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}})],1),a("el-dialog",{staticClass:"dialog-edit-customer-code",attrs:{title:e.formatEditCustomerCodeDialogTitle,visible:e.editCustomerDialogVisible,"close-on-click-modal":!1,width:"400px"},on:{close:e.onCloseEditCustomerCodeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:function(t){e.editCustomerDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{loading:e.editCustomerCodeDialogSaveButtonLoading,type:"primary"},on:{click:e.onClickEditCustomerCodeDialogSaveButton}},[e._v("保存")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{model:e.formModel,rules:e.formRules}},[a("el-form-item",{attrs:{prop:"customerCode"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入业务编码"},model:{value:e.formModel.customerCode,callback:function(t){e.$set(e.formModel,"customerCode","string"==typeof t?t.trim():t)},expression:"formModel.customerCode"}})],1)],1)],1)],1)}),Hi={name:"DialogConfigBusinessCode",components:{Pagination:g.a},props:{dialogVisible:{type:Boolean,required:!0},bizCalloutSubId:{type:Number}},data:function(){return{pageNumb:1,pageSize:10,total:0,tableLoading:!1,tableData:[],tableColumnList:[{label:"生产环境回调URL",prop:"callBackUrl"},{label:"预发环境回调URL",prop:"shadowboxCallbackUrl"},{label:"业务编码",prop:"customerCode"},{label:"更新时间",prop:"updateTime"},{label:"更新人",prop:"updateUser"}],id:0,editCustomerDialogVisible:!1,formModel:{customerCode:""},formRules:{customerCode:[{required:!0,message:"请输入业务编码"}]},editCustomerCodeDialogSaveButtonLoading:!1}},computed:{formatEditCustomerCodeDialogTitle:function(){return this.id?"编辑业务编码":"新增业务编码"}},methods:{queryPage:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pageNumb,a=this.pageSize,r=this.bizCalloutSubId,i={pageNumb:t,pageSize:a,bizCalloutSubId:r},e.abrupt("return",u.a.bizapinterface.callOutConfig.queryPage(i));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),edit:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=this.id)||void 0,a=this.bizCalloutSubId,r=this.formModel.customerCode,i={id:t,bizCalloutSubId:a,customerCode:r},e.next=7,u.a.bizapinterface.callOutConfig.edit(i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),delete:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.id,a={id:t},e.next=4,u.a.bizapinterface.callOutConfig.delete(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleQueryPage:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableLoading=!0,e.next=3,this.queryPage().catch((function(e){throw console.error("handleQueryPage"),e}));case 3:t=e.sent,a=t.data,r=a.total,i=a.list,this.total=r||0,this.tableData=Array.isArray(i)?i:[],this.tableLoading=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleEdit:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editCustomerCodeDialogSaveButtonLoading=!0,e.next=3,this.edit().catch((function(e){throw t.editCustomerCodeDialogSaveButtonLoading=!1,console.error("handleEdit"),e}));case 3:this.$message.success("操作成功！"),this.editCustomerCodeDialogSaveButtonLoading=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleDelete:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete().catch((function(e){throw console.error("handleDelete"),e}));case 2:this.$message.success("操作成功！");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onOpenDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleQueryPage().catch((function(e){throw console.error("onOpenDialog"),e}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onCloseDialog:function(){this.pageNumb=1,this.pageSize=10,this.$emit("update:dialogVisible",!1)},onClickNewButton:function(){this.editCustomerDialogVisible=!0},onClickTableColumnEditButton:function(e){var t=e.id,a=e.customerCode;this.id=t,this.formModel.customerCode=a,this.editCustomerDialogVisible=!0},onClickTableColumnDeleteButton:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,i=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.id=t,a=this.$createElement,e.next=4,this.$msgbox({title:"删除提示",message:a("p",null,"请确认是否删除本行业务编码？"),customClass:"dialog-delete-tip",showCancelButton:!0}).then(Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.handleDelete().catch((function(e){throw console.error("onClickTableColumnDeleteButton"),e}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 4:return this.id=0,e.next=7,this.handleQueryPage().catch((function(e){throw console.error("onOpenDialog"),e}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),onCloseEditCustomerCodeDialog:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.id=0,this.$refs.form.resetFields(),e.next=4,this.handleQueryPage().catch((function(e){throw console.error("onCloseEditCustomerCodeDialog"),e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onClickEditCustomerCodeDialogSaveButton:Object(De.debounce)(Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate().catch((function(){throw new Error("未通过表单校验")}));case 2:return e.next=4,this.handleEdit().catch((function(e){throw console.error("onClickEditCustomerCodeDialogSaveButton"),e}));case 4:this.editCustomerDialogVisible=!1;case 5:case"end":return e.stop()}}),e,this)}))),300)}},Ki=Hi,Gi=(a("9ea9"),Object(m.a)(Ki,qi,[],!1,null,"1740a7a0",null)).exports,Qi=a("7562"),Wi={name:"JsfInterfaceList",components:{Pagination:g.a,DialogConfigCustomerCode:Gi,TagTip:function(){return Promise.resolve().then(a.bind(null,"3c94"))}},props:{currentRowData:{type:Object,default:{}},hasUat:{type:Number,required:!0}},data:function(){return{tableData:[],pageNum:1,pageSize:10,total:0,showTips:"可在此为外部应用配置外部调用京东物流API的JSF别名，配置京东物流调用外部API的业务编码，配置信息在对接方案发布后生效。",callDirectionOptions:[{value:1,label:"外部调用京东物流"},{value:2,label:"京东物流调用外部"}],callDirectionForm:{callDirection:1,queryLike:""},envTable:{local:["测试环境"],test:["测试环境"],uat:["生产环境"],prod:["生产环境"]},env:window.env.baseEnv,aliasform:{currentAlias:"",shadowboxAlias:"",id:""},aliasRules:{currentAlias:[{required:!0,message:"请输入jsf别名"}]},aliasDialogFormVisible:!1,currentAliasList:[],currentRowId:0,dialogConfigBusinessCodeVisible:!1}},filters:{formatInternalCallExternalCallBackUrlHeader:function(e){return(new Map).set("test","测试环境回调URL").set("uat","生产环境回调URL").set("prod","生产环境回调URL").get(e)||"-"}},computed:{selText:function(){return"选择或填写"+this.envTable[this.env]+"JSF别名"}},methods:{queryCallOutSubApiList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s,c,l,u;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentRowData.appKey,a=this.currentRowData,r=a.unitCode,i=a.supplierCode,o=this.callDirectionForm.queryLike,s=this.pageNum,c=this.pageSize,l={appCode:t,unitCode:r,supplierCode:i,queryLike:o,pageNumb:s,pageSize:c},e.next=8,Ht.subscriptionRecord.queryCallOutSubApiList(l);case 8:u=e.sent,this.tableData=u.data.list,this.total=u.data.total;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),queryOrderedInterfaceList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)({url:"/bizapinterface/queryOrderedInterfaceList",method:"get",params:{pageNumb:this.pageNum,unitId:this.$route.params.id,pageSize:this.pageSize,queryLike:this.callDirectionForm.queryLike,callDirection:1,appKey:this.currentRowData.appKey}}).then((function(e){2e4===e.code&&(t.tableData=e.data.list,t.total=e.data.total)})).catch((function(e){}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),configurationBusinessCode:function(e){this.dialogConfigBusinessCodeVisible=!0,this.currentRowId=e.id},formatCallDirection:function(e){return e.callDirection?[,"外部调用京东物流","京东物流调用外部"][e.callDirection]:"-"},formatParseTime:function(e){return Et.a.timeInTable(e)},formatAlias:function(e){return e.alias},search:function(){var e=this.callDirectionForm.callDirection;1==e?this.queryOrderedInterfaceList():2==e&&this.queryCallOutSubApiList()},configurationAlias:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.aliasDialogFormVisible=!0,this.aliasform.id=t.id,e.next=4,this.queryAliasByQualifiedName(t.interfaceName).catch((function(){throw new Error("editData queryAliasByQualifiedName")}));case 4:a=e.sent,(r=a.data)&&(i=r.map((function(e){return{name:e.alias}})),this.currentAliasList=i),this.aliasform.currentAlias=t.alias,1==this.hasUat&&(this.aliasform.currentAlias=t.shadowboxAlias);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),selectChanged:function(){this.search()},handleAliasCancle:function(){var e=this;this.aliasDialogFormVisible=!1,this.$nextTick((function(){e.aliasform.currentAlias="",1==e.hasUat&&(e.aliasform.shadowboxAlias="")}))},saveAlias:function(){var e=this;this.$refs.aliasform.validate(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}r=e.currentRowData.appKey,i=e.$route.params.id,o=e.aliasform.currentAlias,e.saveOrderedInterface({appKey:r,unitId:i,id:e.aliasform.id,alias:o}),t.next=8;break;case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},queryAliasByQualifiedName:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi.a.post("/ApiDepotService/queryAliasByQualifiedName",JSON.stringify([{qualifiedName:t}]));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveOrderedInterface:function(e){var t=this;Object(c.a)({headers:{"Content-Type":"application/json"},url:"/bizapinterface/saveOrderedInterface",method:"post",data:e}).then((function(e){2e4===e.code?(t.aliasDialogFormVisible=!1,t.search()):t.$message.error("保存数据出错")})).catch((function(e){}))}},created:function(){this.queryOrderedInterfaceList()}},Ji=Wi,Xi=(a("13d1"),Object(m.a)(Ji,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"radio-container"},[a("el-radio-group",{on:{change:e.selectChanged},model:{value:e.callDirectionForm.callDirection,callback:function(t){e.$set(e.callDirectionForm,"callDirection",t)},expression:"callDirectionForm.callDirection"}},e._l(e.callDirectionOptions,(function(t){return a("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("TagTip",{directives:[{name:"show",rawName:"v-show",value:1===e.callDirectionForm.callDirection,expression:"callDirectionForm.callDirection === 1"}],attrs:{closable:!1}},[e._v(" "+e._s(e.showTips)+" ")]),a("el-form",{staticStyle:{height:"45px"},attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"230px"},attrs:{placeholder:"请输入API中文名称、URI"},model:{value:e.callDirectionForm.queryLike,callback:function(t){e.$set(e.callDirectionForm,"queryLike",t)},expression:"callDirectionForm.queryLike"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:1===e.callDirectionForm.callDirection,expression:"callDirectionForm.callDirection === 1"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"apiName",label:"中文名称",width:"140"}}),a("el-table-column",{attrs:{prop:"apiUrl",label:"URI"}}),a("el-table-column",{attrs:{prop:"apiRemark",label:"描述",width:"200"}}),a("el-table-column",{attrs:{prop:"alias",label:e.envTable[e.env]+"JSF别名",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatAlias(t.row))+" ")]}}])}),a("el-table-column",{attrs:{prop:"updateUser",label:"更新人",width:"120"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.updateTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.configurationAlias(t.row)}}},[e._v("配置JSF别名")])]}}])})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:2===e.callDirectionForm.callDirection,expression:"callDirectionForm.callDirection === 2"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"apiName",label:"中文名称",width:"140"}}),a("el-table-column",{attrs:{prop:"apiUri",label:"URI"}}),a("el-table-column",{attrs:{prop:"apiRemark",label:"描述",width:"200"}}),a("el-table-column",{attrs:{prop:"callDirection",label:"调用方向",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatCallDirection(t.row))+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"订阅时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.configurationBusinessCode(t.row)}}},[e._v("配置业务编码")])]}}])})],1),e.total>0?a("Pagination",{attrs:{currentPage:e.pageNum,pageSize:e.pageSize,total:e.total,reloadTableData:1==this.callDirectionForm.callDirection?e.queryOrderedInterfaceList:e.queryCallOutSubApiList},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e(),a("el-dialog",{attrs:{title:"配置JSF别名",width:"400px",visible:e.aliasDialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.aliasDialogFormVisible=t}}},[a("el-form",{ref:"aliasform",attrs:{model:e.aliasform,rules:e.aliasRules,inline:!0,"label-width":"110px"}},[a("el-form-item",{attrs:{prop:"currentAlias",label:e.envTable[e.env]+"别名"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:e.selText,filterable:"","allow-create":""},model:{value:e.aliasform.currentAlias,callback:function(t){e.$set(e.aliasform,"currentAlias",t)},expression:"aliasform.currentAlias"}},e._l(e.currentAliasList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleAliasCancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAlias}},[e._v("保 存")])],1)],1),a("DialogConfigCustomerCode",{attrs:{dialogVisible:e.dialogConfigBusinessCodeVisible,bizCalloutSubId:e.currentRowId},on:{"update:dialogVisible":function(t){e.dialogConfigBusinessCodeVisible=t},"update:dialog-visible":function(t){e.dialogConfigBusinessCodeVisible=t}}})],1)}),[],!1,null,"3f1f0fc0",null)),Zi=Xi.exports,Yi={name:"HttpInterfaceList",components:{Pagination:g.a},props:{currentRowData:{type:Object,default:{}},hasUat:{type:Number,required:!0}},data:function(){return{env:window.env.baseEnv,tableData:[],dialogFormVisible:!1,form:{},pageNum:1,pageSize:10,total:0,formRules:{customerCode:[{required:!0,message:"请输入内容"}]},row:{}}},filters:{formatInternalCallExternalCallBackUrlHeader:function(e){return(new Map).set("test","测试环境回调URL").set("uat","生产环境回调URL").set("prod","生产环境回调URL").get(e)||"-"}},methods:{queryCallOutSubApiList:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i,o,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.currentRowData.appKey,a=this.currentRowData,r=a.unitCode,i=a.supplierCode,o={appCode:t,unitCode:r,supplierCode:i},e.next=5,Ht.subscriptionRecord.queryCallOutSubApiList(o);case 5:s=e.sent,this.tableData=s.data.list,this.total=s.data.total;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),configurationBusinessCode:function(e){this.dialogFormVisible=!0,this.row=JSON.parse(JSON.stringify(e)),this.form=this.row},saveCustomerCode:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$refs.form.validate(function(){var e=Object(r.a)(Object(n.a)().mark((function e(a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return e.next=3,t.addCustomerCode().catch((function(e){var a=e.data,n=a.code,r=a.message;throw 1001===n?t.$message({type:"error",showClose:!0,duration:0,message:r}):t.$message.error(r),new Error(e)}));case 3:t.$message.success("保存成功"),t.dialogFormVisible=!1,t.resetForm(),t.queryCallOutSubApiList(),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),addCustomerCode:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.row.subCode,a=this.form.customerCode,r={subCode:t,customerCode:a},e.next=5,Ht.subscriptionRecord.addCustomerCode(r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),formatCallDirection:function(e){return e.callDirection?[,"外部调用京东物流","京东物流调用外部"][e.callDirection]:"-"},formatParseTime:function(e){return Et.a.timeInTable(e)},resetForm:function(){var e=this;this.$nextTick((function(){e.$refs.form.resetFields(),e.form={}}))},handleClose:function(e){this.resetForm(),e()},handleCancle:function(){this.dialogFormVisible=!1,this.resetForm()}},created:function(){this.queryCallOutSubApiList()}},eo=Yi,to=Object(m.a)(eo,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"apiName",label:"中文名称"}}),a("el-table-column",{attrs:{prop:"apiUri",label:"URI"}}),a("el-table-column",{attrs:{prop:"apiRemark",label:"描述"}}),a("el-table-column",{attrs:{prop:"callDirection",label:"调用方向"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatCallDirection(t.row))+" ")]}}])}),a("el-table-column",{attrs:{prop:"callBackUrl","min-width":"200"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",[e._v(e._s(e._f("formatInternalCallExternalCallBackUrlHeader")(e.env)))])]},proxy:!0}])}),"uat"!==e.env&&"prod"!==e.env||!e.hasUat?e._e():a("el-table-column",{attrs:{prop:"shadowboxCallbackUrl",label:"预发环境回调URL","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.shadowboxCallbackUrl;return[a("span",[e._v(e._s(n||"-"))])]}}],null,!1,1018277777)}),a("el-table-column",{attrs:{prop:"createTime",label:"订阅时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.configurationBusinessCode(t.row)}}},[e._v("配置业务编码")])]}}])})],1),e.total>0?a("Pagination",{attrs:{currentPage:e.pageNum,pageSize:e.pageSize,total:e.total,reloadTableData:e.queryCallOutSubApiList},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e(),a("el-dialog",{attrs:{title:"配置业务编码",width:"400px",visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{prop:"customerCode"}},[a("el-input",{attrs:{placeholder:"青龙业主号/事业部编码/渠道编码等业务唯一标识码"},model:{value:e.form.customerCode,callback:function(t){e.$set(e.form,"customerCode",t)},expression:"form.customerCode"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveCustomerCode}},[e._v("保 存")])],1)],1)],1)}),[],!1,null,"da89f8ba",null),ao=to.exports,no={name:"PartnerMessageList",components:{Pagination:g.a},props:{currentRowData:{type:Object,default:{}},hasUat:{type:Number,required:!0}},data:function(){return{env:window.env.baseEnv,tableData:[],dialogVisible:!1,routeCodeFormData:{},routeCodeFormRules:{routeCode:[{required:!0,message:"请输入业务编码"},{max:50,message:"请输入1-50个字符"}]},pageNum:1,pageSize:10,total:0,myheader:{bucket:window.env.gatewayPartnerMessageXmlBucket},uploadUrl:window.env.gatewayFileBaseApi+"lop/mulfile/upload?LOP-DN="+window.env.gatewayPartnerMessageLopDn,fileList:[]}},filters:{formatInternalCallExternalCallUrlHeader:function(e){return(new Map).set("test","测试环境回调URL").set("uat","生产环境回调URL").set("prod","生产环境回调URL").get(e)||"-"},formatInternalCallExternalShadowboxCallUrlText:function(e,t){return e&&t||"-"}},methods:{formatTableData:function(e){return e||"-"},formatFileList:function(e){return e.ediDtfile&&e.ediDtfileName?[{name:e.ediDtfileName,jssKey:e.ediDtfile}]:[]},formatReceiveType:function(e){return[,"WebSocket","HTTP"][e]},formatParseTime:function(e){return Et.a.timeInTable(e)},setBusinessCode:function(e){this.dialogVisible=!0;var t=JSON.parse(JSON.stringify(e.row));this.routeCodeFormData=t},handleCancle:function(){this.resetForm(),this.dialogVisible=!1},beforeClose:function(e){this.resetForm(),e()},resetForm:function(){var e=this;this.$nextTick((function(){e.$refs.routeCodeForm.resetFields()}))},findSubMsgByAppKey:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:this.pageNum,pageSize:this.pageSize,appKey:this.currentRowData.appKey,unitId:Number(this.$route.params.id)},e.next=3,Ht.subscriptionRecord.findSubMsgByAppKey(t);case 3:a=e.sent,this.tableData=a.data.list,this.total=a.data.total,this.$nextTick((function(){r.$refs.partnerTable.doLayout()}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),savePartnerRouteConfig:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht.subscriptionRecord.savePartnerRouteConfig(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveRouteCode:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.routeCodeForm.validate().then(Object(r.a)(Object(n.a)().mark((function e(){var a,r,i,o,s,c,l,u,p,d;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.routeCodeFormData.name,r=t.currentRowData.appKey,i=t.routeCodeFormData,o=i.id,s=i.unitId,c=i.name,l=i.ediDtfileName,u=i.ediDtfile,p=i.routeCode,d={id:o,unitId:s,name:c,appKey:r,partnerMessageRouteConfigList:[{routeCode:p,msgName:a,ediDtfileName:l,ediDtfile:u}]},e.next=7,t.savePartnerRouteConfig(d);case 7:e.sent&&(t.resetForm(),t.dialogVisible=!1,t.findSubMsgByAppKey());case 9:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleRemove:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a,r){var i,o,s,c,l,u,p;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileList=[],"","",i=this.currentRowData.appKey,o=r.name,s=r.id,c=r.unitId,l=r.name,u=r.routeCode,p={id:s,unitId:c,name:l,appKey:i,partnerMessageRouteConfigList:[{routeCode:u,msgName:o,ediDtfileName:"",ediDtfile:""}]},e.next=10,this.savePartnerRouteConfig(p);case 10:e.sent&&this.findSubMsgByAppKey();case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}(),handlePreview:function(e){var t=e.jssKey;null!=t?wn.a.create({baseURL:window.env.gatewayFileBaseApi,withCredentials:!0,timeout:1e5,headers:{"LOP-DN":window.env.gatewayPartnerMessageLopDn,fileName:t,bucket:window.env.gatewayPartnerMessageXmlBucket},responseType:"blob"})({url:"/lop/file/download",method:"get"}).then((function(t){var a=new Blob([t.data],{type:"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,decodeURI(e.name));else{var n=window.URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=n,r.setAttribute("download",decodeURI(e.name)),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}})).catch((function(e){})):this.$message.error("文件不存在!")},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeUploadHandle:function(e){var t=e.size/1024/1024<10;if(!t)return this.$message.error("字段转换xml文件大小不能超过 10MB!"),!1;var a=e.name;if(a.length<5&&".xml"!==a.substring(e.name.length-4)&&".XML"!==a.substring(e.name.length-4))return this.$message({message:"只支持上传xml文件",type:"error",center:!0}),!1;return/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(e.name)?(this.$message({message:"上传的文件名不能包含中文",type:"error",center:!0}),!1):(this.myheader.fileName=this.getUUID(),t)},getUUID:function(){for(var e=[],t="0123456789abcdefghjklmnopqrstuvwxyz",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",""+(new Date).getTime()+e.join("")},uploadSuccessHandle:function(){var e=Object(r.a)(Object(n.a)().mark((function e(t,a,r,i){var o,s,c,l,u,p,d,m,f;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.name,s=t.fileName[0],c=this.currentRowData.appKey,l=i.name,u=i.id,p=i.unitId,d=i.name,m=i.routeCode,f={id:u,unitId:p,name:d,appKey:c,partnerMessageRouteConfigList:[{routeCode:m,msgName:l,ediDtfileName:o,ediDtfile:s}]},e.next=13,this.savePartnerRouteConfig(f);case 13:e.sent&&this.findSubMsgByAppKey();case 15:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),uploadErrorHandle:function(){this.$message.error("上传失败，请重新上传")}},mounted:function(){this.findSubMsgByAppKey()}},ro=no,io=(a("e0f3"),Object(m.a)(ro,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"partner-message-list"},[a("el-table",{ref:"partnerTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"80"}}),a("el-table-column",{attrs:{prop:"name",label:"TOPIC","min-width":"200"}}),a("el-table-column",{attrs:{prop:"chineseName",label:"中文名称","min-width":"200"}}),a("el-table-column",{attrs:{prop:"descr",label:"描述","min-width":"200"}}),a("el-table-column",{attrs:{prop:"receiveType",label:"接收方式","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatReceiveType(t.row.receiveType))+" ")]}}])}),a("el-table-column",{attrs:{prop:"callUrl","min-width":"200"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",[e._v(e._s(e._f("formatInternalCallExternalCallUrlHeader")(e.env)))])]},proxy:!0},{key:"default",fn:function(t){var a=t.row.callUrl;return[e._v(" "+e._s(e.formatTableData(a))+" ")]}}])}),"uat"===e.env||"prod"===e.env?a("el-table-column",{attrs:{prop:"shadowboxCallUrl",label:"预发环境回调URL","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.shadowboxCallUrl;return[a("span",[e._v(e._s(e._f("formatInternalCallExternalShadowboxCallUrlText")(e.hasUat,n)))])]}}],null,!1,17706447)}):e._e(),a("el-table-column",{attrs:{prop:"createTime",label:"订阅时间","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"routeCode","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatTableData(t.row.routeCode))+" ")]}}])},[a("template",{slot:"header"},[a("span",[e._v("业务编码")]),a("el-tooltip",{attrs:{placement:"top",content:"业务系统用于区分客户的编码，用于平台将业务系统推送的消息转发至正确的开发商应用"}},[a("i",{staticClass:"el-icon-help-solid"})])],1)],2),a("el-table-column",{attrs:{prop:"ediDtfileName","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-upload",{staticClass:"el-upload",attrs:{accept:".xml",action:e.uploadUrl,headers:e.myheader,"before-upload":e.beforeUploadHandle,"on-success":function(a,n,r){return e.uploadSuccessHandle(a,n,r,t.row)},"on-error":e.uploadErrorHandle,"on-preview":e.handlePreview,"on-remove":function(a,n){return e.handleRemove(a,n,t.row)},multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.formatFileList(t.row)}},[t.row.ediDtfileName?e._e():a("el-button",{attrs:{type:"text"}},[e._v("上传xml文件")])],1)]}}])},[a("template",{slot:"header"},[a("span",[e._v("字段转换xml文件")]),a("el-tooltip",{attrs:{placement:"top",content:"适用场景：1、消息报文格式在“JSON”和“XML”之间转换；2、消息报文参数名称映射为其他名称"}},[a("i",{staticClass:"el-icon-help-solid"})])],1)],2),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.setBusinessCode(t)}}},[e._v("设置业务编码")])]}}])})],1),e.total>0?a("Pagination",{attrs:{currentPage:e.pageNum,pageSize:e.pageSize,total:e.total,reloadTableData:e.findSubMsgByAppKey},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e(),a("el-dialog",{attrs:{title:"设置业务编码",visible:e.dialogVisible,"before-close":e.beforeClose,width:"460px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-text"},[e._v("请注意：保存后，无需发布对接方案即可生效")]),a("el-form",{ref:"routeCodeForm",attrs:{model:e.routeCodeFormData,rules:e.routeCodeFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"业务编码",prop:"routeCode"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"010K132209"},model:{value:e.routeCodeFormData.routeCode,callback:function(t){e.$set(e.routeCodeFormData,"routeCode","string"==typeof t?t.trim():t)},expression:"routeCodeFormData.routeCode"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRouteCode}},[e._v("保 存")])],1)],1)],1)}),[],!1,null,"fbd94468",null)),oo=io.exports,so={name:"IsvMessageList",components:{Pagination:g.a},props:{currentRowData:{type:Object,default:{}},hasUat:{type:Number,required:!0}},data:function(){return{env:window.env.baseEnv,tableData:[],dialogVisible:!1,form:{},pageNum:1,pageSize:10,total:0}},filters:{formatInternalCallExternalCallUrlHeader:function(e){return(new Map).set("test","测试环境回调URL").set("uat","生产环境回调URL").set("prod","生产环境回调URL").get(e)||"-"},formatInternalCallExternalShadowboxCallUrlText:function(e,t){return e&&t||"-"}},methods:{findSubMsgByAppKey:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:this.pageNum,pageSize:this.pageSize,appKey:this.currentRowData.appKey,unitId:Number(this.$route.params.id)},e.next=3,Ht.subscriptionRecord.findSubMsgByAppKey(t);case 3:a=e.sent,this.tableData=a.data.list,this.total=a.data.total;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),formatReceiveType:function(e){return[,"WebSocket","HTTP"][e]},formatTableData:function(e){return e||"-"},formatParseTime:function(e){return Et.a.timeInTable(e)}},mounted:function(){this.findSubMsgByAppKey()}},co=so,lo=Object(m.a)(co,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"isv-message-list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"name",label:"TOPIC"}}),a("el-table-column",{attrs:{prop:"chineseName",label:"中文名称"}}),a("el-table-column",{attrs:{prop:"descr",label:"描述"}}),a("el-table-column",{attrs:{prop:"receiveType",label:"接收方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatReceiveType(t.row.receiveType))+" ")]}}])}),a("el-table-column",{attrs:{prop:"callUrl","min-width":"200"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",[e._v(e._s(e._f("formatInternalCallExternalCallUrlHeader")(e.env)))])]},proxy:!0},{key:"default",fn:function(t){var a=t.row.callUrl;return[e._v(" "+e._s(e.formatTableData(a))+" ")]}}])}),"uat"===e.env||"prod"===e.env?a("el-table-column",{attrs:{prop:"shadowboxCallUrl",label:"预发环境回调URL","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.shadowboxCallUrl;return[a("span",[e._v(e._s(e._f("formatInternalCallExternalShadowboxCallUrlText")(e.hasUat,n)))])]}}],null,!1,17706447)}):e._e(),a("el-table-column",{attrs:{prop:"createTime",label:"订阅时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatParseTime(t.row.createTime))+" ")]}}])})],1),e.total>0?a("Pagination",{attrs:{currentPage:e.pageNum,pageSize:e.pageSize,total:e.total,reloadTableData:e.findSubMsgByAppKey},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:total":function(t){e.total=t}}}):e._e()],1)}),[],!1,null,"dbb12f44",null),uo={name:"SubscriptionDetail",components:{PartnerMessageList:oo,IsvMessageList:lo.exports,HttpInterfaceList:ao,JsfInterfaceList:Zi},props:{currentRowData:{type:Object,default:function(){return{}}},tabName:{type:String,default:function(){return"interface"}}},data:function(){return{domainType:"",hasUat:0}},methods:{backToList:function(){this.$emit("update:showRecordList",!0)}},mounted:function(){var e=this;Object(c.a)({url:"/bizunit/getOverview",method:"get",params:{id:this.$route.params.id}}).then((function(t){t.data?(e.domainType=t.data.domainType,e.hasUat=t.data.hasUat):e.$message({message:"无数据错误",type:"warning",center:!0})})).catch((function(e){}))}},po=uo,mo=(a("645f"),Object(m.a)(po,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"subscription-detail"},[a("div",{staticClass:"subscription-detail__header"},[a("el-page-header",{attrs:{content:"“"+e.currentRowData.appName+"”应用订阅"+("interface"===e.tabName?"接口":"消息")+"详情"},on:{back:e.backToList}})],1),a("div",{staticClass:"subscription-detail__content"},[a("div",{staticClass:"content__table"},["interface"===e.tabName?[1==e.domainType?a("JsfInterfaceList",{attrs:{currentRowData:e.currentRowData,hasUat:e.hasUat},on:{"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t}}}):2==e.domainType?a("HttpInterfaceList",{attrs:{currentRowData:e.currentRowData,hasUat:e.hasUat},on:{"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t}}}):e._e()]:[5===e.currentRowData.type?a("PartnerMessageList",{attrs:{currentRowData:e.currentRowData,hasUat:e.hasUat},on:{"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t}}}):3===e.currentRowData.type||4===e.currentRowData.type?a("IsvMessageList",{attrs:{currentRowData:e.currentRowData,hasUat:e.hasUat},on:{"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t}}}):e._e()]],2)])])}),[],!1,null,"144bed06",null)),fo={name:"SubscriptionRecord",components:{OrderRecordList:Mi,SubscriptionDetail:mo.exports},data:function(){return{showRecordList:!0,currentRowData:{},tabName:"interface"}},methods:{}},ho=Object(m.a)(fo,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"subscription-record"},[e.showRecordList?a("OrderRecordList",{attrs:{showRecordList:e.showRecordList,currentRowData:e.currentRowData,tabName:e.tabName},on:{"update:showRecordList":function(t){e.showRecordList=t},"update:show-record-list":function(t){e.showRecordList=t},"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t},"update:tabName":function(t){e.tabName=t},"update:tab-name":function(t){e.tabName=t}}}):a("SubscriptionDetail",{attrs:{showRecordList:e.showRecordList,currentRowData:e.currentRowData,tabName:e.tabName},on:{"update:showRecordList":function(t){e.showRecordList=t},"update:show-record-list":function(t){e.showRecordList=t},"update:currentRowData":function(t){e.currentRowData=t},"update:current-row-data":function(t){e.currentRowData=t}}})],1)}),[],!1,null,"321b56c5",null),bo=ho.exports,go=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-top":"0px","text-align":"center"}},[t("img",{attrs:{src:a("24ec")}})])}],vo={name:"ReleaseRecords",data:function(){return{history:"noExists",unitId:"",activities:[]}},filters:{parseTimefilter:function(e,t){if(e)return Object(_n.c)(e,t)}},created:function(){this.unitId=this.$route.params.id,this.queryUpdateLog()},methods:{queryUpdateLog:function(){var e=this;this.loading=!0;Object(c.a)({url:"/bizunit/getUpdateLog",method:"get",params:{unitId:this.unitId}}).then((function(t){t.data?(e.activities=t.data,e.activities&&e.activities.length>0&&(e.history="exists")):l.Message.error("无权限查看数据")})).catch((function(e){}))}}},wo=vo,yo=(a("6dc0"),Object(m.a)(wo,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["exists"===e.history?a("span",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-timeline",{key:"1"},e._l(e.activities,(function(t,n){return a("el-timeline-item",{key:n,attrs:{timestamp:e._f("parseTimefilter")(t.updateTime,"{y}-{m}-{d} {h}:{i}"),placement:"top"}},[a("el-card",[a("div",{staticStyle:{margin:"10px"}},[a("p",{staticStyle:{margin:"10px"}},[e._v("发布人: "+e._s(t.updateUser))]),a("p",{staticStyle:{margin:"10px"}},[e._v("发布内容: "+e._s(t.remark))])])])],1)})),1)],1)],1)],1):"noExists"===e.history?a("span",{key:"2"},[e._m(0),a("div",{staticClass:"noDataMessage"},[e._v("还没有发布过哦～")])]):e._e()])}),go,!1,null,"0ee7baf9",null)),Co=yo.exports,Do={name:"Detail",components:{Overview:h,TagTip:b.default,ExternalCallInternal:jt,InternalCallExternal:fn,SdkList:xn,SdkAdd:Qn,SdkInterfaceList:Zn,MessageList:Ai,UserManual:Ei,SubscriptionRecord:bo,ReleaseRecords:Co},data:function(){return{unitId:parseInt(this.$route.params.id),baseInfo:{},submitVisible:!1,activeName:"overview",selectedRadio:"外部调用京东物流",sdkInfo:"sdkList",applicationInfo:{code:"",name:"",interfaceNum:0,sdkNum:0,userType:1,tempUrl:1},submitAlready:!1,sdkId:null,appType:0,id:0,env:window.env.baseEnv,dialogVisible:!1,showDialogInfo:"",riskDialogVisible:!1,riskApiList:[]}},filters:{parseTimefilter:function(e,t){return Object(_n.c)(e,t)},parseTaskStatusfilter:function(e){return["创建","准备执行","执行中","执行成功","执行失败"][e]},formatDomainTypeTagTipText:function(e){var t=(new Map).set(1,"JSF").set(2,"HTTP").get(e)||"-";return"当前对接方案下仅支持添加".concat(t,"类型的接口")}},computed:{publishTimeStr:function(){return this.baseInfo.publishTime?Object(_n.c)(this.baseInfo.publishTime,"{y}-{m}-{d} {h}:{i}"):1===this.baseInfo.status?"未发布":3===this.baseInfo.status?"审核中":4===this.baseInfo.status||5===this.baseInfo.status||9===this.baseInfo.status?"-":void 0},publishButtonDisable:function(){return 4===this.baseInfo.status}},methods:{getBizUnitPreById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.unitId,a={id:t},e.next=5,C.a.getBizUnitPreById(a).catch((function(e){throw new Error("getBizUnitPreById, ".concat(e))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleGetBizUnitPreById:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBizUnitPreById().catch((function(e){throw new Error("handleGetBizUnitPreById, ".concat(e))}));case 2:t=e.sent,a=t.data,this.baseInfo=a||{};case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),tabClick:function(e){var t=e.name;"sdkInfo"===e.name?t=this.sdkInfo:"interfaceList"===e.name&&(this.selectedRadio="外部调用京东物流"),this.$router.push({name:"OpenBizOpenBizDetail",params:{id:this.baseInfo.id},query:{tag:t}})},beforeLeave:function(e,t){if("overview"===t&&this.$refs.refFirstChild.editor.status)return this.$message.error("保存完概览数据才能切换!"),!1},addSdkEvent:function(e){this.sdkInfo="sdkAdd",e&&(this.sdkId=e)},showSdkEvent:function(){this.sdkInfo="sdkList",this.sdkId=null},downloadInterfaceEvent:function(){this.sdkInfo="sdkInterfaceList"},overviewEditEvent:function(e){this.baseInfo.hasUat=e,this.baseInfo.status=1,this.init()},onSubmit:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submitVisible=!1,"overview"!==this.activeName||!this.$refs.refFirstChild.editor.status){e.next=4;break}return this.$message.error("保存完概览数据才能提交申请!"),e.abrupt("return",!1);case 4:return e.next=6,this.preSubmitCheck();case 6:if(!e.sent){e.next=9;break}return e.abrupt("return");case 9:Object(c.a)({url:"/bizapinterface/queryInterfaceList",method:"get",params:{pageSize:9999,pageNumb:1,orderBy:"update_time",orderType:"desc",unitId:this.baseInfo.id,callDirection:1}}).then((function(e){if("uat"!=t.env&&"prod"!=t.env||1!=t.baseInfo.domainType||1!=t.baseInfo.hasUat)t.jmpPublish();else{var a=[];if(e.data&&e.data.list){for(var n=0;n<e.data.list.length;n++){var r=e.data.list[n];r.shadowboxAlias&&""!=r.shadowboxAlias||a.push(r.apiCode+"("+r.apiName+")")}if(t.showDialogInfo="当前对接方案配置了【对接环境】支持“预发环境”，以下接口必须配置“预发环境JSF别名”才能提交审核（操作位置：方案管理详情-接口列表-编辑）。",a.length>0)return t.showDialogInfo=t.showDialogInfo+a.join("、"),t.dialogVisible=!0,!1}t.jmpPublish()}})).catch((function(e){}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),jmpPublish:function(){var e=this,t={id:this.baseInfo.id};Object(c.a)({url:"/bizunit/canPublish",method:"get",params:t}).then((function(t){2e4===t.code&&e.$router.push({name:"OpenBizOpenBizDetailSubmitReview",params:{id:e.baseInfo.id}})})).catch((function(e){}))},preSubmitCheck:function(){var e=this;return new Promise(function(){var t=Object(r.a)(Object(n.a)().mark((function t(a){var r,i,o,s,c;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.warnRisk(e.baseInfo.id).catch((function(e){}));case 2:r=t.sent,i=r.data,s=(o=i||{}).risk,c=o.apiList,e.riskDialogVisible=s,e.riskApiList=c||[],a(s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onPublish:function(){if("overview"===this.activeName&&this.$refs.refFirstChild.editor.status)return this.$message.error("请保存正在编辑的信息，或取消编辑"),!1;this.$router.push({name:"OpenBizOpenBizDetailPublishBizUnit",params:{id:this.baseInfo.id}})},onModifyEvent:function(){this.baseInfo.status=1,this.submitAlready=!1},init:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t,a,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.baseInfo.id=parseInt(this.$route.params.id),"sdkList"===(t=this.$route.query.tag)||"sdkAdd"===t||"sdkInterfaceList"===t?(this.activeName="sdkInfo",this.sdkInfo=t):this.activeName=null!=t?t:"overview",e.next=5,this.handleGetBizUnitPreById().catch((function(e){throw new Error("created, ".concat(e))}));case 5:a=[this.baseInfo.id],yn.a.openBiz.postBizUnitAccessData(a).then((function(e){e.data&&(r.appType=e.data.appType)})).catch((function(e){}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},created:function(){var e=Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},ko=Do,xo=(a("9699"),Object(m.a)(ko,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("div",{staticClass:"com-view-dep com-tit-view"},[a("div",{staticClass:"dock-plan-header"},[a("div",{staticClass:"tit-wrap",staticStyle:{width:"70%","padding-right":"0"}},[a("h2",{staticClass:"tit"},[e._v(e._s(e.baseInfo.name)+"（"+e._s(e.baseInfo.code)+"）")]),1===e.baseInfo.status?a("div",{staticClass:"com-tag updateBtnColor"},[e._v(" 编辑中 ")]):e._e(),3===e.baseInfo.status?a("div",{staticClass:"com-tag updateBtnColor"},[e._v(" 审核中 ")]):e._e(),4===e.baseInfo.status?a("div",{staticClass:"com-tag normalBtnColor"},[e._v(" 审核通过 ")]):e._e(),5===e.baseInfo.status?a("div",{staticClass:"com-tag normalBtnColor"},[e._v(" 已发布 ")]):e._e(),9===e.baseInfo.status?a("div",{staticClass:"com-tag unknownBtnColor"},[e._v(" 审核未通过 ")]):e._e(),a("p",{staticClass:"tip"},[e._v(" "+e._s(e.baseInfo.createUser)+" 创建于 "+e._s(e._f("parseTimefilter")(e.baseInfo.createTime,"{y}-{m}-{d} {h}:{i}"))+" ")])]),a("div",{staticStyle:{width:"30%","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("最近发布时间："+e._s(e.publishTimeStr))]),e.publishButtonDisable?e._e():a("el-tooltip",{attrs:{content:"提交审核通过后，才可将对接方案发布给ISV调用",placement:"top"}},[a("el-button",{attrs:{type:"primary",disabled:3===e.baseInfo.status},on:{click:e.onSubmit}},[e._v("提交审核")])],1),e.publishButtonDisable?a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("发布对接方案内容到前台")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onPublish}},[e._v("发布")])],1):e._e()],1)]),3===e.baseInfo.status?a("div",{staticClass:"prompt-text",staticStyle:{"margin-top":"0.5rem"}},[e._m(0)]):e._e()]),a("el-tabs",{staticClass:"detail__tabs",attrs:{"before-leave":e.beforeLeave},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"概览",name:"overview"}},[a("keep-alive",["overview"==e.activeName?a("Overview",{ref:"refFirstChild",attrs:{publishStatus:e.baseInfo.publishStatus},on:{overviewEditEvent:e.overviewEditEvent}}):e._e()],1)],1),a("el-tab-pane",{attrs:{label:"接口列表",name:"interfaceList"}},[a("el-radio-group",{model:{value:e.selectedRadio,callback:function(t){e.selectedRadio=t},expression:"selectedRadio"}},[a("el-radio-button",{attrs:{label:"外部调用京东物流"}}),a("el-radio-button",{attrs:{label:"京东物流调用外部"}})],1),a("TagTip",{attrs:{text:e._f("formatDomainTypeTagTipText")(e.baseInfo.domainType),closable:!1}}),a("ExternalCallInternal",{directives:[{name:"show",rawName:"v-show",value:"外部调用京东物流"===e.selectedRadio,expression:"selectedRadio === '外部调用京东物流'"}],on:{updateDetailHeaderInfo:e.handleGetBizUnitPreById}}),a("InternalCallExternal",{directives:[{name:"show",rawName:"v-show",value:"京东物流调用外部"===e.selectedRadio,expression:"selectedRadio === '京东物流调用外部'"}],on:{updateDetailHeaderInfo:e.handleGetBizUnitPreById}})],1),a("el-tab-pane",{attrs:{label:"SDK信息",name:"sdkInfo",lazy:!0}},["sdkList"==e.sdkInfo?a("SdkList",{attrs:{baseInfoStatus:e.baseInfo.status},on:{"update:baseInfoStatus":function(t){return e.$set(e.baseInfo,"status",t)},"update:base-info-status":function(t){return e.$set(e.baseInfo,"status",t)},addSdkEvent:e.addSdkEvent,sdkInterfaceList:e.downloadInterfaceEvent}}):e._e(),"sdkAdd"==e.sdkInfo?a("SdkAdd",{attrs:{sdkId:e.sdkId,showInfoName:e.baseInfo.name},on:{showSdkEvent:e.showSdkEvent}}):e._e(),"sdkInterfaceList"==e.sdkInfo?a("SdkInterfaceList",{on:{showSdkEvent:e.showSdkEvent}}):e._e()],1),a("el-tab-pane",{attrs:{label:"消息列表",name:"messageList"}},["messageList"==e.activeName?a("MessageList",{on:{updateDetailHeaderInfo:e.handleGetBizUnitPreById}}):e._e()],1),a("el-tab-pane",{attrs:{label:"使用手册",name:"userManual"}},["userManual"==e.activeName?a("UserManual",{attrs:{basicId:e.baseInfo.id}}):e._e()],1),a("el-tab-pane",{attrs:{label:"订阅记录",name:"orderRecord"}},["orderRecord"==e.activeName?a("SubscriptionRecord"):e._e()],1),a("el-tab-pane",{attrs:{label:"发布记录",name:"ReleaseRecords"}},["ReleaseRecords"==e.activeName?a("ReleaseRecords"):e._e()],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v(e._s(e.showDialogInfo))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"接口参数映射变更提醒",visible:e.riskDialogVisible},on:{"update:visible":function(t){e.riskDialogVisible=t}}},[a("p",{staticClass:"risk-title"},[e._v(" 以下接口的参数映射值已变更，为不影响运行时调用，请前往「接口列表-编辑-设置参数映射」调整参数！ ")]),a("el-table",{staticClass:"risk-table",attrs:{data:e.riskApiList,height:"242"}},[a("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(+t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{property:"name",label:"中文名称",width:"150"}}),a("el-table-column",{attrs:{property:"url",label:"URL",width:"250"}}),a("el-table-column",{attrs:{property:"risks",label:"变更的参数映射项"}})],1),a("p",{staticClass:"risk-btn-wrap"},[a("el-button",{staticClass:"risk-btn",attrs:{type:"primary"},on:{click:function(t){e.riskDialogVisible=!1}}},[e._v("我知道了")])],1)],1)],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("i",{staticClass:"el-icon-warning"}),e._v(" 您可以前往京me—流程中心(PC端为"),a("a",{attrs:{href:"http://oa.jd.com/",target:"_blank"}},[e._v("oa.jd.com")]),e._v(")—我的申请，查看对接方案审批进度。注：审核通过后，需要手动点击【发布】按钮，才会将对接方案更新至前台。 ")])}],!1,null,"73608473",null));t.default=xo.exports},"7c63":function(e,t,a){},"7c67":function(e,t,a){},"7c75a":function(e,t,a){},8064:function(e,t,a){},"80fc":function(e,t,a){},8191:function(e,t,a){"use strict";a("0676")},"821d":function(e,t,a){},8239:function(e,t,a){},8327:function(e,t,a){},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"83db":function(e,t,a){},"848d":function(e,t,a){},"84f23":function(e,t,a){},"857a":function(e,t,a){"use strict";a("7c75a")},8658:function(e,t,a){"use strict";a("7c63")},"87fc":function(e,t,a){},"8d79":function(e,t,a){"use strict";a("753e")},"8ff8":function(e,t,a){"use strict";a("e079")},"90a4":function(e,t,a){},"93ee":function(e,t,a){},9434:function(e,t,a){},"959b":function(e,t,a){},9699:function(e,t,a){"use strict";a("2105")},"96fb":function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},"98ab":function(e,t,a){"use strict";var n={name:"Alert",props:{type:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},effect:{type:String,default:"light"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!0}}},r=(a("8658"),a("2877")),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-alert",{class:{alert:!0,"alert--default":!e.type},attrs:{type:e.type,title:e.title,description:e.description,effect:e.effect,"show-icon":e.showIcon,closable:e.closable},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("title")]},proxy:!0}],null,!0)},[e._t("default")],2)}),[],!1,null,"768f2856",null);t.a=i.exports},"98d2":function(e,t,a){"use strict";a("1ec9a")},"9a1e":function(e,t,a){},"9d9b":function(e,t,a){},"9ea9":function(e,t,a){"use strict";a("cb6f")},"9f9e":function(e,t,a){},a0e8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAPYElEQVR4Xu1dfZAcRRX/vdlgUBRR1CqClqUpASkk3M6awO0sFSDkdjYJkGwuYikoREXBDwRUBEtIIQWCQUAIEfnQQIEQEIFkZ48QiNnZwyQ7m5BoEDRBRPArBEokfNztPGsud3pJLjc9Mz2zc7szVfvXvH793q9/29PT8/o9QnK1NQLU1t4nziMhQJuTICFAQoA2R6DN3U9mgIQAbY5Am7ufzAAJAVoPgewjHRNg00RmTEwRfZSBiWB8CMB+I/wcAF7b40d4noAtDeatRNgChbdUp69/sdXQaokZIFdWD7JtPhZEeQCzCDgwpIHaToDBRD1IoWqeWNsaUj+RqR2zBNCWq1MA1pkoR4TjI0Ns147WMrgKVlZUCzWjSTYE6nZMEWBo0JGiPBhTAnkuuTEDfwJggMkYS2QYEwTQejJngvlLcRv0vXFogAyEJX07UovWzln7kmSuSVUXawLkjMypDD4bQE6q19Ep2wJg0bh937Vo1XGr3oiuW/GeYkkArZSeBUU5G8zOom7MXwxsgo1F1RnW4rg5EysCaOWOSYByHhinxw0oSfY8ToSFlby1XJK+wGpiQYCpDxx1QGN86jwmnA/gHYG9irkCBn7OCi3s7ar9rtmmNp0AOSP9WQZ9F8DhzQYj4v5fhc3XmDPql0bc7y7dNZUAWkm9EoTvNBOAGPR9H/fh/OpJ1l+aYUtTCKAtn3wIqLEQhJnNcDp2fRKeYqLzq13RbyZFTgDNSM8G0UIwPhK7gWiyQQz+dlWvXx2lGZESIFtSLyBCpA5GCaacvuhmU6+dJUeXu5bICJAtq4uI8RV3kxIJgB819fqJUSARCQFyRvpBBp0UhUMt1MdWU7cmhu1P6ATQjPQKgKaF7Uir6jd1K9QxClW5ZmR+CvCXWnVwovCLwOsqen1yWH2FRgBtefpSKHRJWIa3md5Fpm6dE4bPoRAgGfwQhorxQ7NgXShbs3QCZEvpc4nox7INTfQNIHC+qVvXyMRCKgE6l3/yKCVlPw7GATKNTHT9D4E+RbGnre5av1oWJlIJoJXVB8A4RZZxiZ49ESDQEzv6eZo1y9ohAx9pBEimfhnDIaaDgZ9UdevrYtKjS0khQDL1yxgKjzqYPmcWaks8ttpDXAoBkqk/6DD4av+MrfTlers2/tNX68FGgQmQTP1B4A/c9hpTt5woKt9XIAIkU79v3KU1ZMLx1bz1uF+FgQiQTP1+YZfarsfULd/R074JkDUy8wl8i1RXEmX+EGA+yyzUb/bT2D8BSpnfEPGxfjpN2khGgGGZBSvjR6svAmSNzEkEftBPh0mbkBDwOQv4I0ApfR8RFUNyJVHrBwGfs4BnAnQaHccoUHr92Ji0+d/L9wYwehloKMChDEyXgo2PWcAzATRDvRGAc2AzuXwgQETXpl7vX7Bq9oZXhppnDfV2Aj7vQ93uTdaauuXp2LwnAuRKHe9nUn4P4P0SjG07FcS4rFKwvj+S41o5/UMwfTsoKAzkqrpliurxRADNUJ1/vjMDJJdHBBi4oqpbF+2tmdaTVmFTzaPaPcU9Bo54JYCz4zQ1sJHtpoD5KrNQdz0CpxkqS4Dm96ZuHSGqR5gAmpGZCrDvLUdRg1pQTmi/Pmekj2TQkzL8J3C+otd7RHR5IIC6EMB5IkoTmUEEGNeZBetcETyyhvozAr4gIusm4yw0K/naN93knPteCFABoIkoTWQGoL3R1GtfFcFCM9KXACTvmDhhg5m3OkT6FiLA9J4j99th7/MygH1ElLa7DDEWVwqW0DE4rSdzMWz+gWzMGHRYVa897aZXiAA5o+MEhvKom7LkPsDALVXd+qIIFllDvZCAK0RkvcqQgrMrXdZNbu3ECFBOX8RMl7spa/v7TLebhdqZIjjkjPS3GHSViKwfGWa+v1qoz3VrK0aA5HCnG44A+A5Trwslt9IM1VlMO4vqMK+XTd16r1sHQgTQDNVJX+IkW06ukRBg3GUWrM+IgKMtV78BBdeKyAaV4ZR9sFuCa1cCaMs+8R6k3rY9qDEt3P5eU7c+JeKfVk6fA6YbRGRlyDDxsdV83Xl72+vlToBkA2iv4Ik+Zx0F2bL6ZWK4LspkDPyQDht8Rq9e/3lAAqjOAYTrZBrWCroYeHDCqx8tLp23tOHmT66U/iIT+QrZctM96uASLqvkR/74NNROYAZQnbi/+UEMabm2jGXb//N6cfO8zW+5+aaVMmeC+FY3uVDuE+4y86OvTUQI4BxEHKvJmkPAlcqv93NR5GyeVs6cDuZfhGCEqMqKqVujxm2KEMACkBbtsaXlGCu4b99i9eTqq25+ZkvpzxDRnW5yId+vm7qlBl0D/AHAoSEbGnv1BDyW2rdRXHXc/yN59mb0YJr7u2Pg1NOmbh0WlADPA/hgDJxpmgnMtHqfBhdXzbK2uRmR68nMZZuXuslFdP+vpm6Nun8j8ghw9gDeE7bBDPxZAV3PwHoiPoyBOWBEkivPxbfq+H3GFVdOW/MPNwy0nvRMbtCDRFDcZCO677obKEKANwG8LVyDR86OqRmZSwFuXqIpwppGX3/xiVlPvuDmv1bOTAOzUwcgZKzcLNnl/lumbo0P+ggInQDjiD+2Kl93ii7tcWmGehmA73lyW4ow1XgcF6snumfxzhqqRsAjAN4upWt5SqQQIOxHgGtGzGw5czkx7zWgUh5eg5oIG9BPRXOme13A7PKODCmKEyr3Tul2BFco5REQ7iKQsMbMW0e7+aqV1SvB4dcWIGATpRrF1dM3/NHNps5lmSMoxSYB73aTbdJ9KYvAsF8Dt5u6JVTpM1dSr2bCBaGBSXhK6efi6pn1p9z66CypE1MK1jCHVqXUzQSR+1JeA0PfCCKm71QKNaHgCM0ILTj1GVuhokgdn2NWTjo49da4OoAPiIxCE2WkbASFvxVMYLJpXqVQu08ELK2kXgvCN0RkBWW22rZS7J2xboOb/AmPTj7wzb7GJgAHucnG4L6UreCoPgY1GDyvqtd/JQJc1lCvJ+BrIrIuMs9B4aLZVXdmulGvweBY55E4NjbGJH0Miu5zMKGPQN2VfE0o94CEg6ovwEbRnGGtcRv87nu7U39759YtIHzYTTYu90nO5+DITwS9CeZus1B/WARIzUgvBshPiZW/K4pSXN21Tuiou2aozj5F6AUcRHwWlZETENKMkDDG66SgW7TCplZWbwZDKBR7ELxttm0Xe2eI5dzVDNWJrz9EFPi4yEkJCXOcaVJQ6GvM1C1ail0rpW8FkUhI9stMKIqmVtNK6mYQPh6XQfVih5Sg0AECNC8J9L8JPE/0oKNAooVX2aZidUZthQiQWkndBILwSVsRnVHJMPBSVbfe59af68cgR0FTs4ESXgGo28zXhE4maUZ6CUCnjeD4DhAXzXy97AbKIOnXg3GUiGwcZZz6xFXdOsPNNiECaMvVKVDwWzdlId7frijcvbqr/phIHzlDvZOB4XH6bxFhjoc1RQ2MUSNpROxopgwzn1ot1O9xs0GIAAOvQPtv3dbkQhDbBmYCvbbKzamd65b03QCdCqDhZDTz8GrpvBKGVqRJxHYZMkSYUMlbf3PTJUSAwYXgMgAz3BSGfP+fim13rxZdvZfVe5j5HtHNJc1IVwHqDNmH0NUz47FqwTpBpCNxAsSnCtjfGej2kghJBIhsSV1JhONFZGMvY/MC0bL0wgSQmcJEAoAv2rDn9urrn5Cgy3nNjcPsJsOVnTpsHC2yu+mIChNg52Mg8xDAs+RZGkjT81DQbXa5b+OO1kuunL6PuYWyngrGVwxh4o0A5fQZYLot0LDJbfycDaW7V1+3zo/aEd4W/KiJVxsP07/nGWDaCvXdbzSwGYwJMfL6WTS425zp/jVvuM2a0aJH3jxM/54JMPgYuAHgUMqYBiDVFjulzO2d7v49P8Y+BHB/sKnH6d8XAXLlzGRmdv18GtwbjxoYfyTiuRW9vnG0llpJ/REIgerseLQsOnGF5ptdNU+PaE9rgCFPskbmDgJ/NjrPBHsi/MEm6t5bWJdWSv8ARBcLahtrYq7RPyM55I8AZfU4YghtyzYBxc0AnbP7jmGrF7Qm0Kcreu2XXvH2RYCdz1HVCd2a7bXDyORtXkBEGxj8ASiYAhb6VByZeVI7Iiqb+ZruR6d/AvSkZ8ImoagdP4YlbTwgwHySaATV7lp9E8BRlC2ri4ghlBHTgzuJqBcECEvMvPU5L02GywYiwNTSlA/2U78TNv4RvwYk7QIhsANkd5r59b6zjAciwMAskNQPDDSCQRqPVoFEVG9gAgwuCJ2ECK5pSUWNSuSEENg87o1GdnjtIaFWuwnJIUC5YxKzspIQ63NyfvCJbRsCn1bR64FzEEkhwOCj4CwCL44tYq1kmMe6QKO5Lo0AA4+CUuY2ELsGIrbSWETuC2OZWbCkfZKXSoBcWT2IGU707uGRA9MOHRKeRSOVN2esfUaWu1IJ4BiV61FPYRsPyDIw0TMcAZ5j6nWp2EonwCAJvsI2FiWDJw8BZnyrWrB+JE/jTk2hEGDnq6HkQkiyPR9D+phwUzVvhVKuNzQCDJAgPpHEY2i4dzWVwA9V9PrJYTkQKgESEgQdNn7U1OuhJssMnQADJChnTgPzkqBwtFf7kZNnysYgEgLsXBOo3QDule1AS+rzGNkbBIPICJCQQHCYIhz8UN8C9ubu4D6BU4Mw2SwaDhLhFbZ5QbVQj6Si2FDXkc4AQ50O7BjadHmybTyICOHXdkNZIJKmTnAeERZrCgGGrMsambMAvrxtvyI26V+/68QjzJVwBLVyxySw4mQDb694gib+62NFgGGzwXwCOzH7rR1eFoN/fSwJ4BjlxBj2Kf0XtWygaUz+9bElwJBhTukV2ANx/PE9d+DhiejUHAJhSVWvNad+4Ci2NnUR6IZhtqwe5xzoiOUxNDfjnXrizPeDFGfgHxIQb4pIrAnw/9dG50AqTgfx7JgdTR9p0P4FYKkN+05ZGUzCZMaYIMAQADvzE/AcsDI7RplKhsxzspctJbaXVgrrHRKMiWtMEWA4ogM5i2zMgUJOuZljAOwfMeJ9AJxj8msBelg0fV3ENrp2N2YJMNwzJ4/hi/tv6SSbOom4k0EdAEYtmOiKzJ4CzxN4PQhrwLzm7Urjt490bXzNh55YNWkJAoyEqDaQ5Xz8JICPBOD8nGzf+43wc5o7A7n7zwm83AjQRjTefNKcuenlWI2cJGNalgCS8Gl5NQkBWn6IR3cwIUBCgDZHoM3dT2aAhABtjkCbu5/MAAkB2hyBNnf/v8DiWMwtFHaBAAAAAElFTkSuQmCC"},a1bd:function(e,t,a){},a25fb:function(e,t,a){"use strict";a("f52f")},a376:function(e,t,a){},a435:function(e,t,a){},a5e0:function(e,t,a){"use strict";a("d6a3")},aa18:function(e,t,a){},ab78:function(e,t,a){"use strict";a("6dd7")},ad2b:function(e,t,a){"use strict";a("28a5"),a("a481");var n={timeInTable:function(e){"string"==typeof e&&e.replace(".000+0000","");var t=new Date(e);return e?"".concat(t.toLocaleDateString().replaceAll("/","-")," ").concat(t.toTimeString().split(" ")[0]):""}};t.a=n},aebe:function(e,t,a){},b1fc:function(e,t,a){"use strict";a("6378")},b255:function(e,t,a){"use strict";a("a376")},b3e0:function(e,t,a){"use strict";a("6eb5")},b4b6:function(e,t,a){"use strict";a("5378")},b75b:function(e,t,a){"use strict";a("ef4b")},ba19:function(e,t,a){},bd99:function(e,t,a){"use strict";a("be88")},be88:function(e,t,a){},c0f9:function(e,t,a){},c1d3:function(e,t,a){"use strict";a("4902")},c224:function(e,t,a){"use strict";a("9d9b")},c421:function(e,t,a){"use strict";a("9a1e")},c42f:function(e,t,a){"use strict";a("959b")},cb6f:function(e,t,a){},cba4:function(e,t,a){},cdc8:function(e,t,a){"use strict";a("66ad")},cf24:function(e,t,a){},d08a:function(e,t,a){"use strict";a("ba19")},d1d0:function(e,t,a){},d48a:function(e,t,a){},d514:function(e,t,a){},d560:function(e,t,a){},d658:function(e,t,a){"use strict";a("9434")},d672:function(e,t,a){},d6a3:function(e,t,a){},d6a5:function(e,t,a){},da91:function(e,t,a){},db39:function(e,t,a){"use strict";a("cf24")},dbe4:function(e,t,a){"use strict";a("d514")},ddab:function(e,t,a){},ddbc:function(e,t,a){},e079:function(e,t,a){},e0f3:function(e,t,a){"use strict";a("2da1")},e1a9:function(e,t,a){"use strict";a("93ee")},e4c6:function(e,t,a){},e649:function(e,t,a){"use strict";a("8239")},e75f:function(e,t,a){"use strict";a("9f9e")},e7be:function(e,t,a){"use strict";a("d6a5")},e830:function(e,t,a){},e83c:function(e,t,a){"use strict";a("6a9e")},e85c:function(e,t,a){},e91f:function(e,t,a){},ef4b:function(e,t,a){},f019:function(e,t,a){},f07c:function(e,t,a){},f252:function(e,t,a){"use strict";a("00ce")},f4b8:function(e,t,a){"use strict";a("aa18")},f4ba:function(e,t,a){"use strict";a("5cc5f")},f507:function(e,t,a){"use strict";a("ff31")},f52f:function(e,t,a){},f7eb:function(e,t,a){"use strict";a("12b3")},fb87:function(e,t,a){"use strict";a("a435")},fe27:function(e,t,a){},ff31:function(e,t,a){},ff8f:function(e,t,a){"use strict";a("12f8")},ffe7:function(e,t,a){"use strict";a("3b3f")}}]);