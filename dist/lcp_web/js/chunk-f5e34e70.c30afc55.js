(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f5e34e70"],{2463:function(t,e,a){},"24d5":function(t,e,a){"use strict";a("de4e")},2753:function(t,e,a){},3627:function(t,e,a){"use strict";a("2463")},"49ea":function(t,e,a){},"4aef":function(t,e,a){},7613:function(t,e,a){"use strict";a("2753")},8373:function(t,e,a){"use strict";a.r(e);var s=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-header"},[a("div",{staticClass:"com-view-dep com-tit-view"},[a("div",{staticClass:"tit-wrap"},[a("div",[a("h2",{staticClass:"tit"},[t._v(t._s(t.cnName)+"("+t._s(t.code)+")")]),[a("div",{class:t.computeStatusClass},[t._v("● "+t._s(t.computeStatusText))])]],2),a("p",{staticClass:"tip"},[t._v(t._s(t.createUser)+" 创建于 "+t._s(t.computeCreateTime))]),a("div",{staticClass:"btn-wrap"},[t._t("default")],2)])])])}),i=(a("c5f6"),a("ad2b")),r={name:"HeaderInfo",props:{cnName:{type:String,default:""},code:{type:String,default:""},createUser:{type:String,default:""},createTime:{type:String|Date,default:function(){return new Date}},showStatus:{type:Number,default:1}},computed:{computeCreateTime:function(){return i.a.timeInTable(this.createTime)},computeStatusText:function(){return{1:"初始化",2:"已发布",3:"编辑中"}[this.showStatus]},computeStatusClass:function(){return{1:"com-tag initBtnColor",2:"com-tag normalBtnColor",3:"com-tag updateBtnColor"}[this.showStatus]}}},n=(a("24d5"),a("2877")),o=Object(n.a)(r,s,[],!1,null,"5c8b9188",null).exports,l=a("5530"),u=a("c7eb"),p=(a("96cf"),a("1da1")),c=a("43b3"),h=a("3935"),d=a("0e07"),m=(a("3b2b"),a("ac6a"),a("456d"),{name:"CreateClusterDialog",props:{createClusterDialogVisible:{type:Boolean,required:!0}},data:function(){var t=this;return{active:0,stepList:[{title:"填写基本信息"},{title:"添加IP端口"},{title:"设置超时时间"},{title:"创建成功"}],clusterBasicInfoData:{name:"",useType:null,type:null,desc:""},clusterBasicInfoRules:{name:[{required:!0,message:"请输入集群名称"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/,message:"请输入中文、英文字母或数字"},{min:2,max:20,message:"请输入2到20个字符"}],useType:[{required:!0,message:"请选择集群用途"}],type:[{required:!0,message:"请选择集群类型"}],desc:[{required:!0,message:"请描述集群的使用场景"}]},useTypeOptionList:[{value:1,label:"服务路由"}],typeOptionList:[{value:2,label:"HTTP服务"},{value:3,label:"HTTP流"}],addIpPortData:{cloudServerList:[{host:"",port:null,weight:1,isBackup:0,down:0,resolve:0}]},addIpPortRules:{host:[{validator:function(e,a,s,i){var r=Object.keys(i)[0],n=r.indexOf("[")+1,o=r.indexOf("]"),l=r.slice(n,o);if(0===t.addIpPortData.cloudServerList[l].resolve)if(""===a)s(new Error("请输入IP"));else{RegExp(/^((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)(\.((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)){3}$/).test(a)?s():s(new Error("请输入正确的IP"))}else if(1===t.addIpPortData.cloudServerList[l].resolve)if(""===a)s(new Error("请输入域名"));else{RegExp(/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/).test(a)?s():s(new Error("请输入正确的域名"))}else s(new Error("请选择IP/域名"))}}],port:[{required:!0,message:"请输入端口"},{pattern:/^[0-9]*$/,message:"请输入数字"}],weight:[{required:!0,message:"请输入权重"},{pattern:/^[0-9]*$/,message:"请输入数字"}]},cloudServerListColumnList:[{label:"IP/域名",prop:"host",width:"240"},{label:"端口",prop:"port"},{label:"权重",prop:"weight"},{label:"是否备用",prop:"isBackup"},{label:"是否停用",prop:"down"}],resolveOptionList:[{value:0,label:"IP"},{value:1,label:"域名"}],isBackupOptionList:[{value:0,label:"否"},{value:1,label:"是"}],downOptionList:[{value:0,label:"否"},{value:1,label:"是"}],setTheTimeoutData:{connectTimeout:500,readTimeout:5e3,sendTimeout:5e3,reliveTimeout:1e4},setTheTimeoutRules:{connectTimeout:[{required:!0,message:"请设置连接超时时间/ms"}],readTimeout:[{required:!0,message:"请设置读取超时时间/ms"}],sendTimeout:[{required:!0,message:"请设置发送超时时间/ms"}],reliveTimeout:[{required:!0,message:"请设置自动复活时间/ms"}]},setTheTimeoutList:[{label:"连接超时时间/ms",prop:"connectTimeout"},{label:"读取超时时间/ms",prop:"readTimeout"},{label:"发送超时时间/ms",prop:"sendTimeout"},{label:"自动复活时间/ms",prop:"reliveTimeout"}],nextStepLoading:!1}},computed:{computeNextStepText:function(){return 2===this.active?"保存":"下一步"}},methods:{cloudClusterSave:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e,a,s,i,r,n,o,l,p,c,h,m,f=this;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 3,e=this.clusterBasicInfoData,a=e.name,s=e.useType,i=e.type,r=e.desc,n=this.addIpPortData.cloudServerList,o=this.setTheTimeoutData,l=o.connectTimeout,p=o.sendTimeout,c=o.readTimeout,h=o.reliveTimeout,m={name:a,useType:s,type:i,desc:r,cloudServerList:n,connectTimeout:l,sendTimeout:p,readTimeout:c,reliveTimeout:h,sceneType:3},t.next=7,d.a.cloudClusterSave(m).catch((function(t){var e=t.data.message;throw e&&f.$message.error(e),new Error(t)}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),judgeHostPlaceholder:function(t){return{0:"请输入IP",1:"请输入域名"}[this.addIpPortData.cloudServerList[t].resolve]},addRowData:function(){this.addIpPortData.cloudServerList.push({host:"",port:null,weight:1,isBackup:0,down:0,resolve:0})},removeRowData:function(t){this.addIpPortData.cloudServerList.splice(t,1)},dialogBeforeClose:function(){var t=this;["clusterBasicInfoData","addIpPortData","setTheTimeoutData"].forEach((function(e){t.$refs[e].resetFields()})),this.active=0,this.$emit("update:createClusterDialogVisible",!1),this.$emit("queryRefresh",!0)},nextStep:function(){var t=this;this.$refs[{0:"clusterBasicInfoData",1:"addIpPortData",2:"setTheTimeoutData"}[this.active]].validate(function(){var e=Object(p.a)(Object(u.a)().mark((function e(a){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}if(2!==t.active){e.next=5;break}return t.nextStepLoading=!0,e.next=5,t.cloudClusterSave().catch((function(e){t.nextStepLoading=!1;var a=e.data.message;throw a&&t.$message.error(a),new Error(e)}));case 5:t.active+=1,t.nextStepLoading=!1,e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},continueCreate:function(){var t=this;["clusterBasicInfoData","addIpPortData","setTheTimeoutData"].forEach((function(e){t.$refs[e].resetFields()})),this.active=0}}}),f=m,g=(a("f096"),Object(n.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"create-cluster-dialog",attrs:{visible:t.createClusterDialogVisible,"close-on-click-modal":!1,title:"创建集群",width:"800px"},on:{close:t.dialogBeforeClose}},[a("div",{staticClass:"create-cluster-dialog__content"},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},t._l(t.stepList,(function(t,e){return a("el-step",{key:e,attrs:{title:t.title}})})),1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],ref:"clusterBasicInfoData",staticClass:"create-cluster-dialog__form",attrs:{model:t.clusterBasicInfoData,rules:t.clusterBasicInfoRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"集群名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入集群名称"},model:{value:t.clusterBasicInfoData.name,callback:function(e){t.$set(t.clusterBasicInfoData,"name","string"==typeof e?e.trim():e)},expression:"clusterBasicInfoData.name"}})],1),a("el-form-item",{attrs:{label:"集群用途",prop:"useType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群用途"},model:{value:t.clusterBasicInfoData.useType,callback:function(e){t.$set(t.clusterBasicInfoData,"useType",e)},expression:"clusterBasicInfoData.useType"}},t._l(t.useTypeOptionList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"集群类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择集群类型"},model:{value:t.clusterBasicInfoData.type,callback:function(e){t.$set(t.clusterBasicInfoData,"type",e)},expression:"clusterBasicInfoData.type"}},t._l(t.typeOptionList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"集群描述",prop:"desc"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请描述集群的使用场景"},model:{value:t.clusterBasicInfoData.desc,callback:function(e){t.$set(t.clusterBasicInfoData,"desc","string"==typeof e?e.trim():e)},expression:"clusterBasicInfoData.desc"}})],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],ref:"addIpPortData",staticClass:"create-cluster-dialog__second-form",attrs:{model:t.addIpPortData,rules:t.addIpPortRules}},[a("el-table",{attrs:{data:t.addIpPortData.cloudServerList,"max-height":"180"}},[t._l(t.cloudServerListColumnList,(function(e,s){return a("el-table-column",{key:s,attrs:{label:e.label,prop:e.prop,width:e.width},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.$index;return["host"===e.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].host",rules:t.addIpPortRules.host}},[a("div",{staticClass:"item-content"},[a("el-select",{staticStyle:{width:"40%"},model:{value:t.addIpPortData.cloudServerList[i].resolve,callback:function(e){t.$set(t.addIpPortData.cloudServerList[i],"resolve",e)},expression:"addIpPortData.cloudServerList[$index].resolve"}},t._l(t.resolveOptionList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:t.judgeHostPlaceholder(i)},model:{value:t.addIpPortData.cloudServerList[i].host,callback:function(e){t.$set(t.addIpPortData.cloudServerList[i],"host","string"==typeof e?e.trim():e)},expression:"addIpPortData.cloudServerList[$index].host"}})],1)])]:"port"===e.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].port",rules:t.addIpPortRules.port}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"端口"},model:{value:t.addIpPortData.cloudServerList[i].port,callback:function(e){t.$set(t.addIpPortData.cloudServerList[i],"port",t._n(e))},expression:"addIpPortData.cloudServerList[$index].port"}})],1)]:"weight"===e.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].weight",rules:t.addIpPortRules.weight}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"权重"},model:{value:t.addIpPortData.cloudServerList[i].weight,callback:function(e){t.$set(t.addIpPortData.cloudServerList[i],"weight",t._n(e))},expression:"\n                    addIpPortData.cloudServerList[$index].weight\n                  "}})],1)]:"isBackup"===e.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].isBackup",rules:t.addIpPortRules.isBackup}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.addIpPortData.cloudServerList[i].isBackup,callback:function(e){t.$set(t.addIpPortData.cloudServerList[i],"isBackup",e)},expression:"addIpPortData.cloudServerList[$index].isBackup"}},t._l(t.isBackupOptionList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]:"down"===e.prop?[a("el-form-item",{attrs:{prop:"cloudServerList["+i+"].down",rules:t.addIpPortRules.isBackup}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.addIpPortData.cloudServerList[i].down,callback:function(e){t.$set(t.addIpPortData.cloudServerList[i],"down",e)},expression:"addIpPortData.cloudServerList[$index].down"}},t._l(t.downOptionList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]:t._e()]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.$index;return[a("div",{staticClass:"icon-wrapper"},[s>0?a("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.removeRowData(s)}}}):t._e()])]}}])})],2),a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{icon:"el-icon-plus",plain:""},on:{click:t.addRowData}},[t._v("添加")])],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active === 2"}],ref:"setTheTimeoutData",staticClass:"create-cluster-dialog__form",attrs:{model:t.setTheTimeoutData,rules:t.setTheTimeoutRules,"label-width":"140px"}},t._l(t.setTheTimeoutList,(function(e,s){return a("el-form-item",{key:s,attrs:{label:e.label,prop:e.prop}},[a("el-input-number",{attrs:{min:1,step:100,precision:0,"controls-position":"right"},model:{value:t.setTheTimeoutData[e.prop],callback:function(a){t.$set(t.setTheTimeoutData,e.prop,a)},expression:"setTheTimeoutData[item.prop]"}})],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.active,expression:"active === 3"}],staticClass:"create-success"},[a("i",{staticClass:"el-icon-success normalColor"}),a("p",{staticClass:"create-success__title"},[t._v("创建成功")])])],1),a("div",{staticClass:"create-cluster-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[0===t.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1):1===t.active||2===t.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:function(e){t.active-=1}}},[t._v("上一步")]),a("el-button",{attrs:{type:"primary",loading:t.nextStepLoading},on:{click:t.nextStep}},[t._v(t._s(t.computeNextStepText))])],1):3===t.active?a("div",{staticClass:"button-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:t.continueCreate}},[t._v("继续创建")])],1):t._e()])])}),[],!1,null,"64a6bfb9",null)),_=g.exports,b=a("7562"),v={name:"BasicInfo",components:{Title:c.a,ErpPrincipal:h.a,CreateClusterDialog:_},props:{baseInfo:Object,editDisabled:Boolean,showStatus:{type:Number,required:!0}},data:function(){return{env:window.env.buildEnv,editable:!1,basicInfoData:{id:0,code:"",cnName:"",intr:"",type:1,serviceType:1,isOnline:0,testCluster:{id:0,name:""},uatCluster:{id:0,name:""},prodCluster:{id:0,name:""},productOwner:"",developOwner:"",operateOwner:""},typeOptionList:[{label:"HTTP服务",value:2},{label:"JSF服务",value:1},{label:"HTTP流",value:3}],testClusterOptionList:[],testClusterLoading:!1,uatClusterOptionList:[],uatClusterLoading:!1,prodClusterOptionList:[],prodClusterLoading:!1,createClusterDialogVisible:!1,basicInfoRules:{cnName:[{required:!0,message:"请输入中文名称"},{pattern:/^[\u4e00-\u9fa5a-zA-Z0-9]*$/,message:"请输入中文、英文字母或数字"},{min:2,max:20,message:"请输入2到20个字符"}],intr:[{required:!0,message:"请输入描述"}],type:[{required:!0,message:"请选择API的服务类型"}],serviceType:[{required:!0,message:"请选择API的发布范围"}],productOwner:[{required:!0,message:"请输入产品负责人的ERP账号"}],developOwner:[{required:!0,message:"请输入研发负责人的ERP账号"}],operateOwner:[{required:!0,message:"请输入运营负责人的ERP账号"}]}}},computed:{computeInitItemDisabled:function(){return!this.editable||1!==this.showStatus}},methods:{initBasicInfoData:function(){this.basicInfoData.id=this.baseInfo.id,this.basicInfoData.code=this.baseInfo.code,this.basicInfoData.cnName=this.baseInfo.cnName,this.basicInfoData.intr=this.baseInfo.intr,this.basicInfoData.type=this.baseInfo.type,this.basicInfoData.isOnline=this.baseInfo.isOnline,this.basicInfoData.serviceType=this.baseInfo.serviceType,this.basicInfoData.testCluster=this.baseInfo.testCluster,this.basicInfoData.uatCluster=this.baseInfo.uatCluster,this.basicInfoData.prodCluster=this.baseInfo.prodCluster,this.basicInfoData.productOwner=this.baseInfo.productOwner||"",this.basicInfoData.developOwner=this.baseInfo.developOwner||"",this.basicInfoData.operateOwner=this.baseInfo.operateOwner||""},queryList:function(){var t=Object(p.a)(Object(u.a)().mark((function t(e){var a,s=this;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e,sceneType:3},t.next=3,d.a.queryList(a).catch((function(t){var e=t.data.message;throw e&&s.$message.error(e),new Error(t)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),remoteTestCluster:function(){var t=Object(p.a)(Object(u.a)().mark((function t(e){var a,s;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=11;break}return this.testClusterLoading=!0,t.next=4,this.queryList(e);case 4:a=t.sent,(s=a.data)&&s.length>0&&(s=s.map((function(t){return{id:t.id,name:t.name}}))),this.testClusterOptionList=s,this.testClusterLoading=!1,t.next=12;break;case 11:this.testClusterOptionList=[];case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),remoteUatCluster:function(){var t=Object(p.a)(Object(u.a)().mark((function t(e){var a,s;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=11;break}return this.uatClusterLoading=!0,t.next=4,this.queryList(e);case 4:a=t.sent,(s=a.data)&&s.length>0&&(s=s.map((function(t){return{id:t.id,name:t.name}}))),this.uatClusterOptionList=s,this.uatClusterLoading=!1,t.next=12;break;case 11:this.uatClusterOptionList=[];case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),remoteProdCluster:function(){var t=Object(p.a)(Object(u.a)().mark((function t(e){var a,s;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=11;break}return this.prodClusterLoading=!0,t.next=4,this.queryList(e);case 4:a=t.sent,(s=a.data)&&s.length>0&&(s=s.map((function(t){return{id:t.id,name:t.name}}))),this.prodClusterOptionList=s,this.prodClusterLoading=!1,t.next=12;break;case 11:this.prodClusterOptionList=[];case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),handleEdit:function(){this.editable=!0,this.initCluster()},initCluster:function(){this.testClusterOptionList=[this.basicInfoData.testCluster],this.uatClusterOptionList=[this.basicInfoData.uatCluster],this.prodClusterOptionList=[this.basicInfoData.prodCluster],this.testClusterOptionList},handleCancel:function(){this.editable=!1,this.initBasicInfoData()},handleSave:function(){var t=this;this.$refs.basicInfoData.validate(function(){var e=Object(p.a)(Object(u.a)().mark((function e(a){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}t.sumbit(),e.next=5;break;case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fillSumbitData:function(){var t={id:this.basicInfoData.id,code:this.basicInfoData.code,name:this.basicInfoData.cnName,description:this.basicInfoData.intr,type:this.basicInfoData.type,serviceType:this.basicInfoData.serviceType,productOwner:this.basicInfoData.productOwner,developOwner:this.basicInfoData.developOwner,operateOwner:this.basicInfoData.operateOwner};return"local"!==this.env&&"devtest"!==this.env&&"publictest"!==this.env||this.basicInfoData.testCluster.id>0&&(t.testClusterId=this.basicInfoData.testCluster.id,t.testClusterName=this.basicInfoData.testCluster.name),"uat"!==this.env&&"prod"!==this.env||(this.basicInfoData.uatCluster.id>0&&(t.uatClusterId=this.basicInfoData.uatCluster.id,t.uatClusterName=this.basicInfoData.uatCluster.name),this.basicInfoData.prodCluster.id>0&&(t.prodClusterId=this.basicInfoData.prodCluster.id,t.prodClusterName=this.basicInfoData.prodCluster.name)),t},sumbit:function(){var t=this,e=this.fillSumbitData();b.a.post("/CloudDomainService/fontSave",[Object(l.a)(Object(l.a)({},e),{},{sceneType:3})]).then((function(e){2e4===e.code&&t.$message.success(e.message),t.$emit("refresh"),t.editable=!1,t.loading=!1})).catch((function(e){t.loading=!1}))}},created:function(){this.initBasicInfoData(),JSON.stringify(this.basicInfoData)}},w=v,D=(a("8576"),Object(n.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basic-info"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.editable,expression:"!editable"}],attrs:{"label-position":"left",model:{}}},[a("Title",{attrs:{text:"描述信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文名称："}},[a("span",[t._v(t._s(t.basicInfoData.cnName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"描述："}},[a("span",[t._v(t._s(t.basicInfoData.intr))])])],1)],1),a("Title",{attrs:{text:"分组内API的类型"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"API的发布范围："}},[1===t.basicInfoData.serviceType?a("span",[t._v(" 发布到内网 ")]):t._e(),2===t.basicInfoData.serviceType?a("span",[t._v(" 发布到公网 ")]):t._e()])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"API的服务类型："}},[1===t.basicInfoData.type?a("span",[t._v(" JSF服务 ")]):t._e(),2===t.basicInfoData.type?a("span",[t._v(" HTTP服务 ")]):t._e(),3===t.basicInfoData.type?a("span",[t._v(" HTTP流 ")]):t._e()])],1)],1),2===t.basicInfoData.type||3===t.basicInfoData.type?a("el-row",{staticClass:"row--offset"},["local"===t.env||"devtest"===t.env||"publictest"===t.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-集群："}},[a("span",[t._v(t._s(t.basicInfoData.testCluster.name))])])],1)]:"uat"===t.env||"prod"===t.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-集群："}},[a("span",[t._v(t._s(t.basicInfoData.uatCluster.name))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-集群："}},[a("span",[t._v(t._s(t.basicInfoData.prodCluster.name))])])],1)]:t._e()],2):t._e(),a("Title",{attrs:{text:"负责人信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品负责人："}},[a("span",[t._v(t._s(t.basicInfoData.productOwner))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发负责人："}},[a("span",[t._v(t._s(t.basicInfoData.developOwner))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运营负责人："}},[a("span",[t._v(t._s(t.basicInfoData.operateOwner))])])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:t.editable,expression:"editable"}],ref:"basicInfoData",staticClass:"basic-info__editable-form",attrs:{"label-width":"120px",model:t.basicInfoData,rules:t.basicInfoRules}},[a("Title",{attrs:{text:"描述信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中文名称",prop:"cnName"}},[a("el-input",{attrs:{placeholder:"请输入中文名称"},model:{value:t.basicInfoData.cnName,callback:function(e){t.$set(t.basicInfoData,"cnName",e)},expression:"basicInfoData.cnName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"描述",prop:"intr"}},[a("el-input",{attrs:{placeholder:"请输入描述",type:"textarea",rows:1},model:{value:t.basicInfoData.intr,callback:function(e){t.$set(t.basicInfoData,"intr",e)},expression:"basicInfoData.intr"}})],1)],1)],1),a("Title",{attrs:{text:"分组内API的类型"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[t.basicInfoData.isOnline?a("el-form-item",{attrs:{label:"API的发布范围"}},[1===t.basicInfoData.serviceType?a("span",[t._v(" 发布到内网 ")]):t._e(),2===t.basicInfoData.serviceType?a("span",[t._v(" 发布到外网 ")]):t._e()]):a("el-form-item",{attrs:{label:"API的发布范围",prop:"serviceType"}},[a("el-radio-group",{model:{value:t.basicInfoData.serviceType,callback:function(e){t.$set(t.basicInfoData,"serviceType",e)},expression:"basicInfoData.serviceType"}},[a("el-radio",{attrs:{label:1}},[t._v("发布到内网")]),a("el-radio",{attrs:{label:2}},[t._v("发布到公网")])],1)],1)],1),a("el-col",{attrs:{span:8}},[t.basicInfoData.isOnline?a("el-form-item",{attrs:{label:"API的服务类型"}},[1===t.basicInfoData.type?a("span",[t._v(" JSF服务 ")]):t._e(),2===t.basicInfoData.type?a("span",[t._v(" HTTP服务 ")]):t._e(),3===t.basicInfoData.type?a("span",[t._v(" HTTP流 ")]):t._e()]):a("el-form-item",{attrs:{label:"API的服务类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"HTTP服务"},model:{value:t.basicInfoData.type,callback:function(e){t.$set(t.basicInfoData,"type",e)},expression:"basicInfoData.type"}},t._l(t.typeOptionList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),2===t.basicInfoData.type||3===t.basicInfoData.type?a("el-row",{staticClass:"row--offset"},["local"===t.env||"devtest"===t.env||"publictest"===t.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"测试环境-集群",prop:"testCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.testClusterLoading,filterable:!0,remote:!0,"remote-method":t.remoteTestCluster,"value-key":"id",placeholder:"请输入集群的中文名称"},model:{value:t.basicInfoData.testCluster,callback:function(e){t.$set(t.basicInfoData,"testCluster",e)},expression:"basicInfoData.testCluster"}},t._l(t.testClusterOptionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){t.createClusterDialogVisible=!0}}},[t._v("+创建集群")])],1)]:"uat"===t.env||"prod"===t.env?[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预发环境-集群",prop:"uatCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.uatClusterLoading,filterable:!0,remote:!0,"remote-method":t.remoteUatCluster,"value-key":"id",placeholder:"请输入集群的中文名称"},model:{value:t.basicInfoData.uatCluster,callback:function(e){t.$set(t.basicInfoData,"uatCluster",e)},expression:"basicInfoData.uatCluster"}},t._l(t.uatClusterOptionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"生产环境-集群",prop:"prodCluster"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.prodClusterLoading,filterable:!0,remote:!0,"remote-method":t.remoteProdCluster,"value-key":"id",placeholder:"请输入集群的中文名称"},model:{value:t.basicInfoData.prodCluster,callback:function(e){t.$set(t.basicInfoData,"prodCluster",e)},expression:"basicInfoData.prodCluster"}},t._l(t.prodClusterOptionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){t.createClusterDialogVisible=!0}}},[t._v("+创建集群")])],1)]:t._e()],2):t._e(),a("Title",{attrs:{text:"负责人信息"}}),a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品负责人",prop:"productOwner"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:t.basicInfoData.productOwner,disabled:1!==t.showStatus,placeholder:"请输入产品负责人的ERP账号"},on:{"update:formDataPrincipal":function(e){return t.$set(t.basicInfoData,"productOwner",e)},"update:form-data-principal":function(e){return t.$set(t.basicInfoData,"productOwner",e)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"研发负责人",prop:"developOwner"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:t.basicInfoData.developOwner,disabled:1!==t.showStatus,placeholder:"请输入研发负责人的ERP账号"},on:{"update:formDataPrincipal":function(e){return t.$set(t.basicInfoData,"developOwner",e)},"update:form-data-principal":function(e){return t.$set(t.basicInfoData,"developOwner",e)}}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"运营负责人",prop:"operateOwner"}},[a("ErpPrincipal",{attrs:{showPopover:!0,formDataPrincipal:t.basicInfoData.operateOwner,disabled:1!==t.showStatus,placeholder:"请输入运营负责人的ERP账号"},on:{"update:formDataPrincipal":function(e){return t.$set(t.basicInfoData,"operateOwner",e)},"update:form-data-principal":function(e){return t.$set(t.basicInfoData,"operateOwner",e)}}})],1)],1)],1)],1),a("div",[a("el-row",{staticClass:"row--offset"},[a("el-col",{attrs:{offset:11,span:4}},[t.editable?a("div",{staticClass:"button-wrapper"},[a("el-button",{on:{click:t.handleCancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1):a("el-button",{attrs:{type:"primary",disabled:t.editDisabled},on:{click:t.handleEdit}},[t._v("编辑")])],1)],1)],1),a("CreateClusterDialog",{attrs:{createClusterDialogVisible:t.createClusterDialogVisible},on:{"update:createClusterDialogVisible":function(e){t.createClusterDialogVisible=e},"update:create-cluster-dialog-visible":function(e){t.createClusterDialogVisible=e}}})],1)}),[],!1,null,"556a67a4",null)),y=D.exports,x={props:["editeDisabled","algorithmList"],name:"signAuthentication",data:function(){return{edit:!1,statusIndex:null,statusValue:{null:"",0:"已设置，待发布",1:"使用中",2:"已清空，待发布",3:"取消设置，已发布"},signAlgorithmSelectedIndex:"",dialogDetailsDetVisible:!1,signAlgorithmList:null,usedAlgorithmIndex:"",usedAlgorithmDesc:{"":"","hmac-auth":"平台通用MD5签名规则 >","hmac-sha1":"平台通用hmac-sha1签名规则 >"},templateCodeMap:{"":""},showDetailsIndex:-1,isHasClearAction:!1}},methods:{showItemsDetails:function(t){this.showDetailsIndex=this.templateCodeMap[t],this.showDetailsIndex>-1&&(this.edit=!0,this.dialogDetailsDetVisible=!0)},showItems:function(){this.edit=!0},clearPlugins:function(){this.signAlgorithmSelectedIndex="",this.isHasClearAction=!0},closeSingDialog:function(){this.init(),this.edit=!1,this.dialogDetailsDetVisible=!1},computedWhichAlgorithm:function(){this.showDetailsIndex=this.templateCodeMap[this.usedAlgorithmIndex],this.showDetailsIndex>-1&&(this.edit=!0,this.dialogDetailsDetVisible=!0)},save:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.doStatusChangedActions();case 2:if(t.sent){t.next=7;break}return this.$message.warning("系统异常请检查"),t.abrupt("return");case 7:this.edit=!1,this.statusIndex=null,this.signAlgorithmSelectedIndex="",this.dialogDetailsDetVisible=!1,this.usedAlgorithmIndex="",this.showDetailsIndex=-1,this.isHasClearAction=!1,this.$emit("refresh");case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doStatusChangedActions:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isHasClearAction){t.next=7;break}return t.next=4,this.doSavePluginWithoutClearActionAction();case 4:if(!0!==t.sent){t.next=7;break}return t.abrupt("return",!0);case 7:if(!this.invalidCleanUp()){t.next=9;break}return t.abrupt("return",!0);case 9:return t.next=11,this.effectiveCleanUp();case 11:if(!0!==t.sent){t.next=15;break}return this.$message.success("安全配置清除成功"),t.abrupt("return",!0);case 15:return t.abrupt("return",this.doSavePluginWithClearActionAction());case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doSavePluginWithoutClearActionAction:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==this.signAlgorithmSelectedIndex){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this.doChangedPluginThenSave();case 5:if(!0!==t.sent){t.next=8;break}return t.abrupt("return",!0);case 8:return t.next=10,this.doSaveUpdatedPlugin();case 10:if(2e4!==t.sent.code){t.next=14;break}return this.$message.success("保存插件成功"),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doChangedPluginThenSave:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.signAlgorithmSelectedIndex!==this.usedAlgorithmIndex&&""!==this.usedAlgorithmIndex){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,this.doClearBeforeSaveRequest();case 5:if(2e4!==t.sent.code){t.next=22;break}return this.$message.success("清除插件陈功"),t.prev=9,t.next=12,this.doSaveAfterClearRequest();case 12:if(2e4!==t.sent.code){t.next=16;break}return this.$message.success("保存插件成功"),t.abrupt("return",!0);case 16:t.next=22;break;case 18:throw t.prev=18,t.t0=t.catch(9),console.error(t.t0),new Error("清除请求失败");case 22:return t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,this,[[9,18]])})));return function(){return t.apply(this,arguments)}}(),doClearBeforeSaveRequest:function(){var t=[{domainId:parseInt(this.$route.params.id),id:this.signAlgorithmList[this.templateCodeMap[this.usedAlgorithmIndex]].id}];return b.a.post("/CloudPluginManagerService/clearCloudPluginByCondition",t)},doSaveAfterClearRequest:function(){return this.doSavePluginRequestAction()},doSavePluginRequestAction:function(){var t=parseInt(this.$route.params.id),e=this.signAlgorithmList[this.templateCodeMap[this.signAlgorithmSelectedIndex]].templateId,a=this.signAlgorithmList[this.templateCodeMap[this.signAlgorithmSelectedIndex]].id,s=this.signAlgorithmList[this.templateCodeMap[this.signAlgorithmSelectedIndex]].templateType;this.templateCodeMap,this.signAlgorithmSelectedIndex,this.signAlgorithmList;var i={domainId:t,id:a,templateType:s,templateId:void 0===e?null:e,templateConfig:JSON.stringify(this.signAlgorithmList[this.templateCodeMap[this.signAlgorithmSelectedIndex]].templateConfig)};return b.a.post("/CloudPluginManagerService/saveCloudPluginByCondition",[i])},doSaveUpdatedPlugin:function(){return this.doSavePluginRequestAction()},invalidCleanUp:function(){return(2===this.statusIndex||""===this.usedAlgorithmIndex||null===this.statusIndex)&&""===this.signAlgorithmSelectedIndex},effectiveCleanUp:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.usedAlgorithmIndex||0!==this.statusIndex&&1!==this.statusIndex||""!==this.signAlgorithmSelectedIndex){t.next=14;break}return t.prev=2,t.next=5,this.doClearRequestAction();case 5:return e=t.sent,t.abrupt("return",2e4===e.code);case 10:throw t.prev=10,t.t0=t.catch(2),console.error(t.t0),new Error("清除请求失败");case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),doClearRequestAction:function(){var t=[{domainId:parseInt(this.$route.params.id),id:this.signAlgorithmList[this.templateCodeMap[this.usedAlgorithmIndex]].id}];return b.a.post("/CloudPluginManagerService/clearCloudPluginByCondition",t)},doSavePluginWithClearActionAction:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.doChangedPluginThenSave();case 3:if(!0!==t.sent){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,this.doSaveUpdatedPlugin();case 8:return e=t.sent,t.abrupt("return",2e4===e.code);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),init:function(){if(null!==this.algorithmList&&null!=this.algorithmList){this.signAlgorithmList=JSON.parse(JSON.stringify(this.algorithmList));for(var t=0;t<this.signAlgorithmList.length;t++)this.signAlgorithmList[t].templateConfig=JSON.parse(this.signAlgorithmList[t].templateConfig),this.templateCodeMap[this.signAlgorithmList[t].templateCode]=t,null!=this.signAlgorithmList[t].status&&(this.statusIndex=0===this.statusIndex||1===this.statusIndex?this.statusIndex:this.signAlgorithmList[t].status,1!=this.signAlgorithmList[t].status&&0!==this.signAlgorithmList[t].status||(this.signAlgorithmSelectedIndex=this.signAlgorithmList[t].templateCode,this.usedAlgorithmIndex=this.signAlgorithmList[t].templateCode,this.showDetailsIndex=t,this.usedAlgorithmIndex=this.signAlgorithmList[t].templateCode))}}},computed:{isShowUsedSignAlgorithm:function(){return 0===this.statusIndex||1===this.statusIndex},couputedStatusColor:function(){return 0==this.statusIndex?"updateColor":1==this.statusIndex?"c-999":null},computedShowStatusDescr:function(){return this.statusValue[this.statusIndex]},computedShowStatus:function(){return 2==this.statusIndex},rule:function(){return 1===this.signAlgorithmList[this.showDetailsIndex].templateConfig.auth.sort_type?"按照字段ASCII码顺序排序":"按照上述签名参数顺序排序"},Params:function(){for(var t=this.signAlgorithmList[this.showDetailsIndex].templateConfig,e="",a=0;a<t.auth.rules.length;a++)9===t.auth.rules[a].type&&(e+=t.auth.rules[a].name+"、");return e.substr(0,e.length-1)},computedHmacAuthShowStatus:function(){if(this.signAlgorithmList[this.templateCodeMap["hmac-auth"]].domainPluginId>0&&null!==this.signAlgorithmList[this.templateCodeMap["hmac-auth"]].domainPluginId)return!0},computedPassportAuthStatus:function(){return"使用中"}},watch:{algorithmList:{handler:function(t,e){this.algorithmList=t,this.init()},immediate:!0,deep:!0}}},C=x,I=(a("3627"),Object(n.a)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!==t.algorithmList&&0!==t.algorithmList.length?s("div",{staticClass:"background"},[s("el-row",{staticClass:"top"},[s("el-col",{attrs:{span:17}},[s("div",{staticClass:"com-view-dep com-tit-view"},[s("div",{staticClass:"tit-wrap1"},[s("h3",{staticClass:"tit1"},[t._v("签名认证")]),!t.edit&&t.isShowUsedSignAlgorithm?s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text",disabled:t.editeDisabled},on:{click:t.computedWhichAlgorithm}},[s("h3",{staticClass:"tit2"},[t._v(t._s(t.usedAlgorithmDesc[t.usedAlgorithmIndex]))])]):t._e()],1),s("div",{staticClass:"describe"},[t._v(" API调用方使用应用的appkey、appsecret、指定算法进行签名，物流开放平台通过签名识别调用方身份。 ")])])]),t.edit?t._e():s("el-col",{attrs:{span:4}},[s("div",{class:t.couputedStatusColor,staticStyle:{margin:"30px","text-align":"right"}},[t._v(" "+t._s(t.computedShowStatusDescr)+" ")])]),s("div",[t.edit?t._e():s("el-col",{attrs:{span:3}},[s("div",{staticStyle:{margin:"25px"}},[s("el-button",{attrs:{main:"",disabled:t.editeDisabled},on:{click:t.showItems}},[t._v(" 设置 ")])],1)])],1)],1),t.edit?s("div",[s("el-row",{staticStyle:{"margin-left":"20px"}},[s("el-col",{attrs:{span:24}},[s("el-radio-group",{staticStyle:{"margin-right":"0px"},model:{value:t.signAlgorithmSelectedIndex,callback:function(e){t.signAlgorithmSelectedIndex=e},expression:"signAlgorithmSelectedIndex"}},[s("el-radio",{attrs:{value:"1",label:"hmac-auth"}},[s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:function(e){return t.showItemsDetails("hmac-auth")}}},[s("span",{staticStyle:{color:"#333333"}},[t._v("平台通过md5-salt签名规则>")])]),t.computedHmacAuthShowStatus?s("span",{staticClass:"status"},[t._v(t._s(t.computedPassportAuthStatus))]):t._e()],1)],1),""!=t.signAlgorithmSelectedIndex?s("el-button",{staticStyle:{"margin-left":"20px","background-color":"#fafafa"},attrs:{plain:"",size:"small"},on:{click:t.clearPlugins}},[s("img",{staticStyle:{width:"13px",height:"13px"},attrs:{src:a("5ba9")}}),s("span",{staticStyle:{color:"#999999"}},[t._v("清空")])]):t._e()],1)],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{on:{click:t.closeSingDialog}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存 ")])],1)],1):t._e(),t.showDetailsIndex>-1?s("div",[s("el-dialog",{attrs:{title:"签名规则详情",visible:t.dialogDetailsDetVisible,width:"600px"},on:{"update:visible":function(e){t.dialogDetailsDetVisible=e}}},[s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("基本信息")])]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 名称："+t._s(t.signAlgorithmList[t.showDetailsIndex].templateName)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 简介："+t._s(t.signAlgorithmList[t.showDetailsIndex].templateDesc)+" ")]),s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("签名方式")])]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 签名参数："+t._s(t.Params)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 签名参数排序规则："+t._s(t.rule)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 名称："+t._s(t.signAlgorithmList[t.showDetailsIndex].templateCode)+" ")]),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogDetailsDetVisible=!1}}},[t._v("关闭 ")])],1)])],1):t._e()],1):t._e()}),[],!1,null,"008d616c",null)),S=I.exports,A=(a("28a5"),a("aef6"),a("5df3"),a("4f7f"),{props:["editeDisabled","loginAuthArray"],data:function(){return{edit:!1,statusIndex:null,statusValue:{null:"",0:"已设置，待发布",1:"使用中",2:"已清空，待发布",3:"取消设置，已发布"},loginAuthTypeSelectedIndex:"",dialogDetailsDetVisible:!1,usedLoginAuthItemIndex:"",usedLoginAuthItemDesc:{"":"","erp-auth":"ERP认证 >","passport-pc-auth":"PassportPC认证 >","passport-auth":"Passport无线认证 >","jing-me-auth":"京ME认证 >"},tempLateCodeMap:{"":""},showDetailsIndex:-1,showClikedDetailsPluginName:"",isHasClearAction:!1,loginAuthTypeList:null,labelPosition:"left",erp_auth:{configData:null,returnType:"return_status",configEditable:!1,returnData:"",white_list:""},jing_me_auth:{configEditable:!1,configData:null,returnData:"",returnType:"return_sattus",white_list:""},passport_auth:{configEditable:!1,configData:null,returnData:"",returnType:"return_sattus",white_list:""},passport_pc_auth:{configEditable:!1,configData:null,returnData:"",returnType:"return_sattus",white_list:""}}},methods:{showItems:function(){this.edit=!0},isShowUsedLoginAuthType:function(){return 0===this.statusIndex||1==this.statusIndex},computeShowWhichLoginAuthType:function(){this.usedLoginAuthItemIndex,this.showDetailsIndex,this.showDetailsIndex=this.tempLateCodeMap[this.usedLoginAuthItemIndex],this.showDetailsIndex,this.showDetailsIndex>-1&&(this.showClikedDetailsPluginName=this.loginAuthTypeSelectedIndex,this.showClikedDetailsPluginName,this.edit=!0,this.dialogDetailsDetVisible=!0)},showItemsDetails:function(t){this.showClikedDetailsPluginName=t,this.showClikedDetailsPluginName,this.showDetailsIndex=this.tempLateCodeMap[this.showClikedDetailsPluginName],this.showDetailsIndex,this.showClikedDetailsPluginName,this.showDetailsIndex,this.showDetailsIndex>-1&&(this.edit=!0,this.dialogDetailsDetVisible=!0)},clearPlugins:function(){this.isHasClearAction=!0,this.loginAuthTypeSelectedIndex=""},closeAuthDialog:function(){this.edit=!1,this.init()},save:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.doStatusChangedActions();case 2:!0===t.sent&&(this.edit=!1,this.statusIndex=null,this.loginAuthTypeSelectedIndex="",this.dialogDetailsDetVisible=!1,this.usedLoginAuthItemIndex="",this.showDetailsIndex=-1,this.showClikedDetailsPluginName="",this.isHasClearAction=!1,this.$emit("refresh"));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doStatusChangedActions:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e,a;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isHasClearAction){t.next=9;break}return t.next=4,this.doSavePluginWithoutClearActionAction();case 4:if(!0!==(e=t.sent)){t.next=7;break}return t.abrupt("return",!0);case 7:if(void 0!==e){t.next=9;break}return t.abrupt("return",!1);case 9:if(!this.invalidCleanUp()){t.next=11;break}return t.abrupt("return",!0);case 11:return t.next=13,this.effectiveCleanUp();case 13:if(!0!==(a=t.sent)){t.next=17;break}return this.$message.success("安全配置清除成功"),t.abrupt("return",!0);case 17:if(void 0!==a){t.next=19;break}return t.abrupt("return",!1);case 19:return t.abrupt("return",this.doSavePluginWithClearActionAction());case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doSavePluginWithoutClearActionAction:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==this.loginAuthTypeSelectedIndex){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this.doChangedPluginThenSave();case 5:if(!0!==(e=t.sent)){t.next=8;break}return t.abrupt("return",!0);case 8:if(void 0!==e){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,this.doSaveUpdatedPlugin();case 12:if(!0!==t.sent){t.next=15;break}return t.abrupt("return",!0);case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),invalidCleanUp:function(){return(2===this.statusIndex||""===this.usedLoginAuthItemIndex||null===this.statusIndex)&&""===this.loginAuthTypeSelectedIndex},effectiveCleanUp:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.usedLoginAuthItemIndex||0!==this.statusIndex&&1!==this.statusIndex||""!==this.loginAuthTypeSelectedIndex){t.next=13;break}return t.prev=2,t.next=5,this.doClearRequestAction();case 5:return e=t.sent,t.abrupt("return",2e4===e.code);case 9:return t.prev=9,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return");case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),doSavePluginWithClearActionAction:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.doChangedPluginThenSave();case 3:if(!0!==(e=t.sent)){t.next=6;break}return t.abrupt("return",!0);case 6:if(void 0!==e){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,this.doSaveUpdatedPlugin();case 10:if(!0!==t.sent){t.next=13;break}return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doChangedPluginThenSave:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loginAuthTypeSelectedIndex!==this.usedLoginAuthItemIndex&&""!==this.usedLoginAuthItemIndex){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,this.doClearBeforeSaveRequest();case 5:if(2e4!==t.sent.code){t.next=20;break}return this.$message.success("清除插件成功"),t.next=10,this.doSaveAfterClearRequest();case 10:if(2e4!==t.sent.code){t.next=16;break}return this.$message.success("保存插件成功"),t.abrupt("return",!0);case 16:return this.$message.success("保存插件失败"),t.abrupt("return");case 18:t.next=22;break;case 20:return this.$message.success("清除插件失败"),t.abrupt("return");case 22:return t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),doSaveUpdatedPlugin:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,this.doSavePluginRequestAction();case 4:if(2e4!==(e=t.sent).code){t.next=8;break}return this.$message.success("更新插件成功"),t.abrupt("return",!0);case 8:if(2e4===e.code){t.next=11;break}throw this.$message.error("更新插件失败请联系系统管理员!"),new Error("更新插件失败请联系系统管理员"+JSON.stringify(e));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error(t.t0);case 16:case"end":return t.stop()}}),t,this,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),doSaveAfterClearRequest:function(){return this.doSavePluginRequestAction()},doClearBeforeSaveRequest:function(){return this.doClearRequestAction()},doClearRequestAction:function(){var t=[{domainId:parseInt(this.$route.params.id),id:this.loginAuthTypeList[this.tempLateCodeMap[this.usedLoginAuthItemIndex]].id}];return b.a.post("/CloudPluginManagerService/clearCloudPluginByCondition",t)},doSavePluginRequestAction:function(){var t=parseInt(this.$route.params.id),e=this.loginAuthTypeList[this.tempLateCodeMap[this.loginAuthTypeSelectedIndex]].templateId,a=[{domainId:t,id:this.loginAuthTypeList[this.tempLateCodeMap[this.loginAuthTypeSelectedIndex]].id,templateType:this.loginAuthTypeList[this.tempLateCodeMap[this.loginAuthTypeSelectedIndex]].templateType,templateId:void 0===e?null:e,templateConfig:JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap[this.loginAuthTypeSelectedIndex]].templateConfig)}];return b.a.post("/CloudPluginManagerService/saveCloudPluginByCondition",a)},init:function(){if(null!==this.loginAuthArray&&void 0!==this.loginAuthArray){this.loginAuthTypeList=JSON.parse(JSON.stringify(this.loginAuthArray));for(var t=0;t<this.loginAuthTypeList.length;t++)this.loginAuthTypeList[t].templateConfig=JSON.parse(this.loginAuthTypeList[t].templateConfig),this.tempLateCodeMap[this.loginAuthTypeList[t].templateCode]=t,null!=this.loginAuthTypeList[t].status&&(this.statusIndex=0===this.statusIndex||1===this.statusIndex?this.statusIndex:this.loginAuthTypeList[t].status,1!==this.loginAuthTypeList[t].status&&0!==this.loginAuthTypeList[t].status||(this.usedLoginAuthItemIndex=this.loginAuthTypeList[t].templateCode,this.loginAuthTypeSelectedIndex=this.loginAuthTypeList[t].templateCode,this.loginAuthTypeSelectedIndex,this.showDetailsIndex=t));this.erpAuthInit(),this.jingmeAuthInit(),this.passportAuthInit(),this.passportPcAuthInit()}},jingmeAuthInit:function(){this.jing_me_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap["jing-me-auth"]].templateConfig)),void 0!==this.jing_me_auth.configData.return_status&&null!==this.jing_me_auth.configData.return_status&&(this.jing_me_auth.returnData=this.jing_me_auth.configData.return_status,this.jing_me_auth.returnType="return_status"),void 0!==this.jing_me_auth.configData.unLoginPaths&&null!==this.jing_me_auth.configData.unLoginPaths&&(this.jing_me_auth.returnData=this.jing_me_auth.configData.unLoginPaths,this.jing_me_auth.returnType="unLoginPaths"),this.loginAuthTypeList[this.tempLateCodeMap["jing-me-auth"]].templateConfig.alias=window.env.jingMeAuthAlias,this.jingme_auth_white_list()},erpAuthInit:function(){this.erp_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap["erp-auth"]].templateConfig)),void 0!==this.erp_auth.configData.return_status&&null!==this.erp_auth.configData.return_status&&(this.erp_auth.returnData=this.erp_auth.configData.return_status,this.erp_auth.returnType="return_status"),void 0!==this.erp_auth.configData.unLoginPaths&&null!==this.erp_auth.configData.unLoginPaths&&(this.erp_auth.returnData=this.erp_auth.configData.unLoginPaths,this.erp_auth.returnType="unLoginPaths"),this.erp_white_list()},passportAuthInit:function(){this.passport_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap["passport-auth"]].templateConfig)),void 0!==this.passport_auth.configData.return_status&&null!==this.passport_auth.configData.return_status&&(this.passport_auth.returnData=this.passport_auth.configData.return_status,this.passport_auth.returnType="return_status"),void 0!==this.passport_auth.configData.unLoginPaths&&null!==this.passport_auth.configData.unLoginPaths&&(this.passport_auth.returnData=this.passport_auth.configData.unLoginPaths,this.passport_auth.returnType="unLoginPaths"),this.passport_auth_white_list()},passportPcAuthInit:function(){this.passport_pc_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap["passport-pc-auth"]].templateConfig)),void 0!==this.passport_pc_auth.configData.return_status&&null!==this.passport_pc_auth.configData.return_status&&(this.passport_pc_auth.returnData=this.passport_pc_auth.configData.return_status,this.passport_pc_auth.returnType="return_status"),void 0!==this.passport_pc_auth.configData.unLoginPaths&&null!==this.passport_pc_auth.configData.unLoginPaths&&(this.passport_pc_auth.returnData=this.passport_pc_auth.configData.unLoginPaths,this.passport_pc_auth.returnType="unLoginPaths"),this.passport_pc_auth_white_list()},closeErpDialogDetails:function(){this.dialogDetailsDetVisible=!1,this.erp_auth.configEditable=!1,this.erp_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig)),this.edit=!0,this.labelPosition="left"},editErpConfig:function(){if(this.labelPosition="right",this.erp_auth.configEditable=!0,this.erp_auth.configEditable,"unLoginPaths"===this.erp_auth.returnType){this.erp_auth.returnType;var t=this.erp_auth.returnData.indexOf("=");this.erp_auth.returnData=this.erp_auth.returnData.substr(t+1)}this.erp_auth.returnData},saveErpEditedChanges:function(){var t=new RegExp(/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/);if(""!=this.erp_auth.configData.cookie_domain&&!t.test(this.erp_auth.configData.cookie_domain))throw this.$message.warning("服务域格式错误:"+this.erp_auth.configData.cookie_domain),new Error("服务域格式错误:"+this.erp_auth.configData.cookie_domain);var e={},a=/^\/(\w+\/?)+$/,s=new Set;if(this.erp_auth.white_list=this.erp_auth.white_list.trim(),this.erp_auth.white_list=this.erp_auth.white_list.endsWith(";")?this.erp_auth.white_list.substr(0,this.erp_auth.white_list-1):this.erp_auth.white_list,""!==this.erp_auth.white_list){for(var i=this.erp_auth.white_list.split(";"),r=0;r<i.length;r++){if(!a.test(i[r]))throw this.$message.warning("白名单格式错误："+i[r]),new Error("白名单格式错误："+i[r]);if(!s.add(i[r]))throw this.$message.warning("白名单重复："+i[r]),new Error("白名单重复："+i[r])}s.forEach((function(t){return e[t]={}}))}if(this.erp_auth.configData.white_list.urls=e,"unLoginPaths"===this.erp_auth.returnType){window.env.baseEnv;if(!1===/^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?$/.test(this.erp_auth.returnData))return void this.$message.warning("校验验证失败跳转路径格式错误："+this.erp_auth.returnData);this.erp_auth.returnData=window.env.erpAuthReturn+this.erp_auth.returnData,this.erp_auth.returnData,this.erp_auth.configData.unLoginPaths=this.erp_auth.returnData,void 0!==this.erp_auth.configData.return_status&&delete this.erp_auth.configData.return_status}if("return_status"===this.erp_auth.returnType){if(!/^[0-9]*$/.test(this.erp_auth.returnData))return void this.$message.warning("验证返回 HTTP 状态码格式错误"+this.erp_auth.returnData);this.erp_auth.configData.return_status=this.erp_auth.returnData,null!=this.erp_auth.configData.unLoginPaths&&delete this.erp_auth.configData.unLoginPaths}this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig=JSON.parse(JSON.stringify(this.erp_auth.configData)),this.dialogDetailsDetVisible=!1,this.erp_auth.configEditable=!1,this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig,this.labelPosition="left"},erp_white_list:function(){var t="",e=Object.keys(this.erp_auth.configData.white_list.urls);if(null===e||0==e.length)return"";for(var a=0;a<e.length-1;a++)t+=e[a]+";";t+=e[e.length-1],this.erp_auth.white_list=t},closeJingMeAuthDialogDetails:function(){this.dialogDetailsDetVisible=!1,this.jing_me_auth.configEditable=!1,this.jing_me_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig)),this.edit=!0,this.labelPosition="left"},editJingMeAuthConfig:function(){if(this.labelPosition="right",this.jing_me_auth.configEditable=!0,this.jing_me_auth.configEditable,"unLoginPaths"===this.jing_me_auth.returnType){this.jing_me_auth.returnType;var t=this.jing_me_auth.returnData.indexOf("=");this.jing_me_auth.returnData=this.jing_me_auth.returnData.substr(t+1)}this.jing_me_auth.returnData},saveJingMeAuthEditedChanges:function(){if("unLoginPaths"===this.jing_me_auth.returnType){window.env.baseEnv;if(!1===/^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?$/.test(this.jing_me_auth.returnData))return void this.$message.warning("校验验证失败跳转路径格式失败",this.jing_me_auth.returnData);this.jing_me_auth.returnData=window.env.erpAuthReturn+this.jing_me_auth.returnData,this.jing_me_auth.returnData,this.jing_me_auth.configData.unLoginPaths=this.jing_me_auth.returnData,null!=this.jing_me_auth.configData.return_status&&delete this.jing_me_auth.configData.return_status}if("return_status"===this.jing_me_auth.returnType){if(!/^[0-9]*$/.test(this.jing_me_auth.returnData))return void this.$message.warning("HTTP 状态码格式错误",this.jing_me_auth.returnData);this.jing_me_auth.configData.return_status=this.jing_me_auth.returnData,null!=this.jing_me_auth.configData.unLoginPaths&&delete this.jing_me_auth.configData.unLoginPaths}var t={},e=/^\/(\w+\/?)+$/,a=new Set;if(this.jing_me_auth.white_list=this.jing_me_auth.white_list.trim(),this.jing_me_auth.white_list=this.jing_me_auth.white_list.endsWith(";")?this.jing_me_auth.white_list.substr(0,this.jing_me_auth.white_list.length-1):this.jing_me_auth.white_list,""!==this.jing_me_auth.white_list){for(var s=this.jing_me_auth.white_list.split(";"),i=0;i<s.length;i++){if(!e.test(s[i]))throw this.$message.warning("格式错误："+s[i]),new Error("格式错误："+s[i]);if(!a.add(s[i]))throw this.$message.warning("白名单重复"+s[i]),new Error("白名单重复"+s[i])}a.forEach((function(e){return t[e]={}}))}this.jing_me_auth.configData.white_list.urls=t,this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig=JSON.parse(JSON.stringify(this.jing_me_auth.configData)),this.dialogDetailsDetVisible=!1,this.jing_me_auth.configEditable=!1,this.labelPosition="left"},jingme_auth_white_list:function(){var t="",e=Object.keys(this.jing_me_auth.configData.white_list.urls);if(null===e||0==e.length)return"";for(var a=0;a<e.length-1;a++)t+=e[a]+";";t+=e[e.length-1],this.jing_me_auth.white_list=t},closePassportAuthDialogDetails:function(){this.labelPosition="left",this.dialogDetailsDetVisible=!1,this.passport_auth.configEditable=!1,this.passport_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig)),this.edit=!0},editclosePassportAuthConfig:function(){if(this.labelPosition="right",this.passport_auth.configEditable=!0,this.passport_auth.configEditable,"unLoginPaths"===this.passport_auth.returnType){this.passport_auth.returnType;var t=this.passport_auth.returnData.indexOf("=");this.passport_auth.returnData=this.passport_auth.returnData.substr(t+1)}this.passport_auth.returnData},savePassportAuthEditedChanges:function(){if("unLoginPaths"===this.passport_auth.returnType){window.env.baseEnv;if(!1===/^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?$/.test(this.passport_auth.returnData))return void this.$message.warning("校验验证失败跳转路径格式失败",this.passport_auth.returnData);this.passport_auth.returnData=window.env.erpAuthReturn+this.passport_auth.returnData,this.passport_auth.configData.unLoginPaths=this.passport_auth.returnData,null!=this.passport_auth.configData.return_status&&delete this.passport_auth.configData.return_status}if("return_status"===this.passport_auth.returnType){if(!/^[0-9]*$/.test(this.passport_auth.returnData))return void this.$message.warning("HTTP 状态码格式错误",this.passport_auth.returnData);this.passport_auth.configData.return_status=this.passport_auth.returnData,null!=this.passport_auth.configData.unLoginPaths&&delete this.passport_auth.configData.unLoginPaths}var t={},e=/^\/(\w+\/?)+$/,a=new Set;if(this.passport_auth.white_list=this.passport_auth.white_list.trim(),this.passport_auth.white_list=this.passport_auth.white_list.endsWith(";")?this.passport_auth.white_list.substr(0,this.passport_auth.white_list.length-1):this.passport_auth.white_list,""!==this.passport_auth.white_list){for(var s=this.passport_auth.white_list.split(";"),i=0;i<s.length;i++){if(!e.test(s[i]))throw this.$message.warning("格式错误："+s[i]),new Error("格式错误："+s[i]);if(!a.add(s[i]))throw this.$message.warning("白名单重复"+s[i]),new Error("白名单重复"+s[i])}a.forEach((function(e){return t[e]={}}))}this.passport_auth.configData.white_list.urls=t,this.passport_auth.configData.white_list.urls,this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig=JSON.parse(JSON.stringify(this.passport_auth.configData)),this.dialogDetailsDetVisible=!1,this.passport_auth.configEditable=!1,this.labelPosition="left"},passport_auth_white_list:function(){var t="",e=Object.keys(this.passport_auth.configData.white_list.urls);if(null===e||0==e.length)return"";for(var a=0;a<e.length-1;a++)t+=e[a]+";";t+=e[e.length-1],this.passport_auth.white_list=t},passport_pc_auth_white_list:function(){var t="",e=Object.keys(this.passport_pc_auth.configData.white_list.urls);if(null===e||0==e.length)return"";for(var a=0;a<e.length-1;a++)t+=e[a]+";";t+=e[e.length-1],this.passport_pc_auth.white_list=t},closePassportPcAuthDialogDetails:function(){this.labelPosition="left",this.dialogDetailsDetVisible=!1,this.passport_pc_auth.configEditable=!1,this.passport_pc_auth.configData=JSON.parse(JSON.stringify(this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig)),this.edit=!0},editclosePassportPcAuthConfig:function(){if(this.labelPosition="right",this.passport_pc_auth.configEditable=!0,this.passport_pc_auth.configEditable,"unLoginPaths"===this.passport_pc_auth.returnType){this.passport_pc_auth.returnType;var t=this.passport_pc_auth.returnData.indexOf("=");this.passport_pc_auth.returnData=this.passport_pc_auth.returnData.substr(t+1)}this.passport_pc_auth.returnData},savePassportPcAuthEditedChanges:function(){if("unLoginPaths"===this.passport_pc_auth.returnType){window.env.baseEnv;if(!1===/^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?$/.test(this.passport_pc_auth.returnData))return void this.$message.warning("校验验证失败跳转路径格式失败",this.passport_pc_auth.returnData);this.passport_pc_auth.returnData=window.env.erpAuthReturn+this.passport_pc_auth.returnData,this.passport_pc_auth.configData.unLoginPaths=this.passport_pc_auth.returnData,null!=this.passport_pc_auth.configData.return_status&&delete this.passport_pc_auth.configData.return_status}if("return_status"===this.passport_pc_auth.returnType){if(!/^[0-9]*$/.test(this.passport_pc_auth.returnData))return void this.$message.warning("HTTP 状态码格式错误",this.passport_pc_auth.returnData);this.passport_pc_auth.configData.return_status=this.passport_pc_auth.returnData,null!=this.passport_pc_auth.configData.unLoginPaths&&delete this.passport_pc_auth.configData.unLoginPaths}var t={},e=/^\/(\w+\/?)+$/,a=new Set;if(this.passport_pc_auth.white_list=this.passport_pc_auth.white_list.trim(),this.passport_pc_auth.white_list=this.passport_pc_auth.white_list.endsWith(";")?this.passport_pc_auth.white_list.substr(0,this.passport_pc_auth.white_list.length-1):this.passport_pc_auth.white_list,""!==this.passport_pc_auth.white_list){for(var s=this.passport_pc_auth.white_list.split(";"),i=0;i<s.length;i++){if(!e.test(s[i]))throw this.$message.warning("格式错误："+s[i]),new Error("格式错误："+s[i]);if(!a.add(s[i]))throw this.$message.warning("白名单重复"+s[i]),new Error("白名单重复"+s[i])}a.forEach((function(e){return t[e]={}}))}this.passport_pc_auth.configData.white_list.urls=t,this.passport_pc_auth.configData.white_list.urls,this.loginAuthTypeList[this.tempLateCodeMap[this.showClikedDetailsPluginName]].templateConfig=JSON.parse(JSON.stringify(this.passport_pc_auth.configData)),this.dialogDetailsDetVisible=!1,this.passport_pc_auth.configEditable=!1,this.labelPosition="left"}},computed:{couputedStatusColor:function(){return 0==this.statusIndex?"updateColor":1==this.statusIndex?"c-999":null},computedShowStatusDescr:function(){return this.statusValue[this.statusIndex],this.statusValue[this.statusIndex]},passportAuthComputeReturnData:function(){return this.passport_auth.returnData="","return_status"===this.passport_auth.returnType?"输入HTTP的状态码，如：401":"unLoginPaths"===this.passport_auth.returnType?"输入URL地址，如：http://lcp.jd.com":void 0},passportPcAuthComputeReturnData:function(){return this.passport_pc_auth.returnData="","return_status"===this.passport_pc_auth.returnType?"输入HTTP的状态码，如：401":"unLoginPaths"===this.passport_pc_auth.returnType?"输入URL地址，如：http://lcp.jd.com":void 0},erpAuthcomputeReturnData:function(){return this.erp_auth.returnData="","return_status"===this.erp_auth.returnType?"输入HTTP的状态码，如：401":"unLoginPaths"===this.erp_auth.returnType?"输入URL地址，如：http://lcp.jd.com":void 0},jingmeAuthComputeReturnData:function(){return this.jing_me_auth.returnData="","return_status"===this.jing_me_auth.returnType?"输入HTTP的状态码，如：401":"unLoginPaths"===this.jing_me_auth.returnType?"输入URL地址，如：http://lcp.jd.com":void 0},computeErpShowStatus:function(){return this.loginAuthTypeList[this.tempLateCodeMap["erp-auth"]].domainPluginId>0&&null!==this.loginAuthTypeList[this.tempLateCodeMap["erp-auth"]].domainPluginId},computedErpStatus:function(){return"使用中"},computeJingmeAuthShowStatus:function(){return this.loginAuthTypeList[this.tempLateCodeMap["jing-me-auth"]].domainPluginId,this.loginAuthTypeList[this.tempLateCodeMap["jing-me-auth"]].domainPluginId>0},computedJingmeAuthStatus:function(){return"使用中"},computedPassportAuthShowStatus:function(){return this.loginAuthTypeList[this.tempLateCodeMap["passport-auth"]].domainPluginId>0&&null!==this.loginAuthTypeList[this.tempLateCodeMap["passport-auth"]].domainPluginId},computedPassportAuthStatus:function(){return"使用中"},computedPassportPcAuthShowStatus:function(){return this.loginAuthTypeList[this.tempLateCodeMap["passport-pc-auth"]].domainPluginId>0&&null!==this.loginAuthTypeList[this.tempLateCodeMap["passport-pc-auth"]].domainPluginId},computedPassportPcAuthStatus:function(){return"使用中"}},watch:{loginAuthArray:{handler:function(t,e){this.loginAuthArray=t,this.init()},immediate:!0,deep:!0}}}),P=A,L=(a("7613"),Object(n.a)(P,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!=t.loginAuthArray?s("div",{staticClass:"background"},[s("el-row",{staticClass:"top"},[s("el-col",{attrs:{span:17}},[s("div",{staticClass:"com-view-dep com-tit-view"},[s("div",{staticClass:"tit-wrap1"},[s("h3",{staticClass:"tit1"},[t._v("登录态认证")]),!t.edit&&t.isShowUsedLoginAuthType?s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text",disabled:t.editeDisabled},on:{click:t.computeShowWhichLoginAuthType}},[s("h3",{staticClass:"tit2"},[t._v(t._s(t.usedLoginAuthItemDesc[t.usedLoginAuthItemIndex]))])]):t._e()],1),s("div",{staticClass:"describe"},[t._v(" 通过对登录的账密进行认证，识别用户账号身份是否合法。 ")])])]),t.edit?t._e():s("el-col",{attrs:{span:4}},[s("div",{class:t.couputedStatusColor,staticStyle:{margin:"30px","text-align":"right"}},[t._v(" "+t._s(t.computedShowStatusDescr)+" ")])]),s("div",[t.edit?t._e():s("el-col",{attrs:{span:3}},[s("div",{staticStyle:{margin:"25px"}},[s("el-button",{attrs:{main:"",disabled:t.editeDisabled},on:{click:t.showItems}},[t._v("设置 ")])],1)])],1)],1),t.edit?s("div",[s("el-row",{staticStyle:{"margin-left":"20px"}},[s("el-col",{attrs:{span:24}},[s("el-radio-group",{staticStyle:{"margin-right":"0px"},model:{value:t.loginAuthTypeSelectedIndex,callback:function(e){t.loginAuthTypeSelectedIndex=e},expression:"loginAuthTypeSelectedIndex"}},[s("el-radio",{attrs:{value:"1",label:"erp-auth"}},[s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:function(e){return t.showItemsDetails("erp-auth")}}},[s("span",{staticStyle:{color:"#333333"}},[t._v("ERP认证 >")])]),t.computeErpShowStatus?s("span",{staticClass:"status"},[t._v(t._s(t.computedErpStatus))]):t._e()],1),s("el-radio",{attrs:{value:"2",label:"jing-me-auth"}},[s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:function(e){return t.showItemsDetails("jing-me-auth")}}},[s("span",{staticStyle:{color:"#333333"}},[t._v("京ME认证>")])]),t.computeJingmeAuthShowStatus?s("span",{staticClass:"status"},[t._v(t._s(t.computedJingmeAuthStatus))]):t._e()],1),s("el-radio",{attrs:{value:"3",label:"passport-auth"}},[s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:function(e){return t.showItemsDetails("passport-auth")}}},[s("span",{staticStyle:{color:"#333333"}},[t._v("Passport无线认证 >")])]),t.computedPassportAuthShowStatus?s("span",{staticClass:"status"},[t._v(t._s(t.computedPassportAuthStatus))]):t._e()],1),s("el-radio",{attrs:{value:"4",label:"passport-pc-auth"}},[s("el-button",{staticStyle:{padding:"0px"},attrs:{type:"text"},on:{click:function(e){return t.showItemsDetails("passport-pc-auth")}}},[s("span",{staticStyle:{color:"#333333"}},[t._v("PassportPC认证 >")])]),t.computedPassportPcAuthShowStatus?s("span",{staticClass:"status"},[t._v(t._s(t.computedPassportPcAuthStatus))]):t._e()],1)],1),""!=t.loginAuthTypeSelectedIndex?s("el-button",{staticStyle:{"margin-left":"20px","background-color":"#fafafa"},attrs:{plain:"",size:"small"},on:{click:t.clearPlugins}},[s("img",{staticStyle:{width:"13px",height:"13px"},attrs:{src:a("5ba9")}}),s("span",{staticStyle:{color:"#999999"}},[t._v("清空")])]):t._e()],1)],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{on:{click:t.closeAuthDialog}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存 ")])],1)],1):t._e(),"erp-auth"===t.showClikedDetailsPluginName?s("div",[s("el-dialog",{attrs:{title:"ERP认证",visible:t.dialogDetailsDetVisible,width:"600px"},on:{"update:visible":function(e){t.dialogDetailsDetVisible=e}}},[s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("基本信息")])]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 名称:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["erp-auth"]].templateName)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 简介:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["erp-auth"]].templateDesc)+" ")]),s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("认证配置")])]),s("el-form",{attrs:{model:t.erp_auth.configData,"label-position":t.labelPosition,"label-width":"120px"}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.erp_auth.configEditable,expression:"!erp_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"验证失败处理:","label-width":"auto"}},["return_status"===t.erp_auth.returnType?s("el-row",[t._v("返回http状态码:"+t._s(t.erp_auth.configData.return_status)+" ")]):t._e(),"unLoginPaths"===t.erp_auth.returnType?s("el-row",[t._v("跳转到:"+t._s(t.erp_auth.configData.unLoginPaths))]):t._e()],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.erp_auth.configEditable,expression:"!erp_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"cookie名:","label-width":"auto"}},[s("el-row",[t._v(t._s(t.erp_auth.configData.cookie_name))])],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.erp_auth.configEditable,expression:"!erp_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"cookie写入域:","label-width":"auto"}},[s("el-row",[t._v(t._s(t.erp_auth.configData.cookie_domain))])],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.erp_auth.configEditable,expression:"!erp_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"白名单:","label-width":"auto"}},[t._v(" "+t._s(t.erp_auth.white_list)+" ")]),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.erp_auth.configEditable,expression:"erp_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"验证失败处理"}},[s("el-select",{attrs:{placeholder:"return_status"},model:{value:t.erp_auth.returnType,callback:function(e){t.$set(t.erp_auth,"returnType",e)},expression:"erp_auth.returnType"}},[s("el-option",{attrs:{label:"返回HTTP状态码",value:"return_status"}}),s("el-option",{attrs:{label:"跳转到指定的URL",value:"unLoginPaths"}})],1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.erp_auth.configEditable,expression:"erp_auth.configEditable"}],staticStyle:{margin:"5px"}},[s("el-input",{attrs:{placeholder:t.erpAuthcomputeReturnData,type:"text",id:"erp_auth_returnData"},model:{value:t.erp_auth.returnData,callback:function(e){t.$set(t.erp_auth,"returnData",e)},expression:"erp_auth.returnData"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.erp_auth.configEditable,expression:"erp_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"cookie名"}},[s("el-input",{attrs:{id:"cookie_name",type:"text",disabled:!t.erp_auth.configEditable},model:{value:t.erp_auth.configData.cookie_name,callback:function(e){t.$set(t.erp_auth.configData,"cookie_name",e)},expression:"erp_auth.configData.cookie_name"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.erp_auth.configEditable,expression:"erp_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"cookie写入域"}},[s("el-input",{attrs:{id:"cookie_domain",type:"text",disabled:!t.erp_auth.configEditable},model:{value:t.erp_auth.configData.cookie_domain,callback:function(e){t.$set(t.erp_auth.configData,"cookie_domain",e)},expression:"erp_auth.configData.cookie_domain"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.erp_auth.configEditable,expression:"erp_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"白名单"}},[s("el-input",{attrs:{id:"white_list",type:"textarea",placeholder:"输入相对路径，多个使用‘;’分割，如：/business/receiveNoLogin;/business/Login"},model:{value:t.erp_auth.white_list,callback:function(e){t.$set(t.erp_auth,"white_list",e)},expression:"erp_auth.white_list"}})],1)],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.closeErpDialogDetails}},[t._v("关闭")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.erp_auth.configEditable,expression:"!erp_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.editErpConfig}},[t._v("编辑")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.erp_auth.configEditable,expression:"erp_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.saveErpEditedChanges}},[t._v("保存编辑")])],1)],1)],1):t._e(),"jing-me-auth"===t.showClikedDetailsPluginName?s("div",[s("el-dialog",{attrs:{title:"京ME认证",visible:t.dialogDetailsDetVisible,width:"600px"},on:{"update:visible":function(e){t.dialogDetailsDetVisible=e}}},[s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("基本信息")])]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 名称:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["jing-me-auth"]].templateName)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 简介:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["jing-me-auth"]].templateDesc)+" ")]),s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("认证配置")])]),s("el-form",{attrs:{model:t.jing_me_auth.configData,"label-position":t.labelPosition,"label-width":"120px"}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.jing_me_auth.configEditable,expression:"!jing_me_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"京ME颁发的Key:","label-width":"auto"}},[s("el-row",[t._v(t._s(t.jing_me_auth.configData.req[3].default))])],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.jing_me_auth.configEditable,expression:"!jing_me_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"验证失败处理:","label-width":"auto"}},["return_status"===t.jing_me_auth.returnType?s("el-row",[t._v("返回http状态码:"+t._s(t.jing_me_auth.configData.return_status)+" ")]):t._e(),"unLoginPaths"===t.jing_me_auth.returnType?s("el-row",[t._v("跳转到:"+t._s(t.jing_me_auth.configData.unLoginPaths)+" ")]):t._e()],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.jing_me_auth.configEditable,expression:"!jing_me_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"白名单:","label-width":"auto"}},[t._v(" "+t._s(t.jing_me_auth.white_list)+" ")]),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.jing_me_auth.configEditable,expression:"jing_me_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"京ME颁发的Key"}},[s("el-input",{attrs:{placeholder:"输入京ME分配的Key，如：d42d91ba3b5bf8d5957",type:"text",id:"default"},model:{value:t.jing_me_auth.configData.req[3].default,callback:function(e){t.$set(t.jing_me_auth.configData.req[3],"default",e)},expression:"jing_me_auth.configData.req[3].default"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.jing_me_auth.configEditable,expression:"jing_me_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"验证失败处理"}},[s("el-select",{model:{value:t.jing_me_auth.returnType,callback:function(e){t.$set(t.jing_me_auth,"returnType",e)},expression:"jing_me_auth.returnType"}},[s("el-option",{attrs:{label:"返回HTTP状态码",value:"return_status"}}),s("el-option",{attrs:{label:"跳转到指定的URL",value:"unLoginPaths"}})],1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.jing_me_auth.configEditable,expression:"jing_me_auth.configEditable"}],staticStyle:{margin:"5px"}},[s("el-input",{attrs:{type:"text",id:"jingMeReturnData",placeholder:t.jingmeAuthComputeReturnData},model:{value:t.jing_me_auth.returnData,callback:function(e){t.$set(t.jing_me_auth,"returnData",e)},expression:"jing_me_auth.returnData"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.jing_me_auth.configEditable,expression:"jing_me_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"白名单"}},[s("el-input",{attrs:{id:"jingme-auth_white_list",type:"textarea",placeholder:"输入相对路径，多个使用‘;’分割，如：/business/receiveNoLogin;/business/Login"},model:{value:t.jing_me_auth.white_list,callback:function(e){t.$set(t.jing_me_auth,"white_list",e)},expression:"jing_me_auth.white_list"}})],1)],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.closeJingMeAuthDialogDetails}},[t._v("关闭")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.jing_me_auth.configEditable,expression:"!jing_me_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.editJingMeAuthConfig}},[t._v("编辑 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.jing_me_auth.configEditable,expression:"jing_me_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.saveJingMeAuthEditedChanges}},[t._v(" 保存编辑 ")])],1)],1)],1):t._e(),"passport-auth"===t.showClikedDetailsPluginName?s("div",[s("el-dialog",{attrs:{title:"Passport无线认证",visible:t.dialogDetailsDetVisible,width:"600px"},on:{"update:visible":function(e){t.dialogDetailsDetVisible=e}}},[s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("基本信息")])]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 名称:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["passport-auth"]].templateName)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 简介:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["passport-auth"]].templateDesc)+" ")]),s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("认证配置")])]),s("el-form",{attrs:{model:t.passport_auth.configData,"label-position":t.labelPosition,"label-width":"120px"}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.passport_auth.configEditable,expression:"!passport_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"验证失败处理:","label-width":"auto"}},["return_status"===t.passport_auth.returnType?s("el-row",[t._v(" 返回http状态码:"+t._s(t.passport_auth.configData.return_status)+" ")]):t._e(),"unLoginPaths"===t.passport_auth.returnType?s("el-row",[t._v("跳转到:"+t._s(t.passport_auth.configData.unLoginPaths)+" ")]):t._e()],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.passport_auth.configEditable,expression:"!passport_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"白名单:","label-width":"auto"}},[t._v(" "+t._s(t.passport_auth.white_list)+" ")]),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_auth.configEditable,expression:"passport_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"验证失败处理"}},[s("el-select",{model:{value:t.passport_auth.returnType,callback:function(e){t.$set(t.passport_auth,"returnType",e)},expression:"passport_auth.returnType"}},[s("el-option",{attrs:{label:"返回HTTP状态码",value:"return_status"}}),s("el-option",{attrs:{label:"跳转到指定的URL",value:"unLoginPaths"}})],1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_auth.configEditable,expression:"passport_auth.configEditable"}],staticStyle:{margin:"5px"}},[s("el-input",{attrs:{type:"text",id:"jingMeReturnData",placeholder:t.passportAuthComputeReturnData},model:{value:t.passport_auth.returnData,callback:function(e){t.$set(t.passport_auth,"returnData",e)},expression:"passport_auth.returnData"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_auth.configEditable,expression:"passport_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"白名单"}},[s("el-input",{attrs:{id:"white_list",type:"textarea",placeholder:"输入相对路径，多个使用‘;’分割，如：/business/receiveNoLogin;/business/Login"},model:{value:t.passport_auth.white_list,callback:function(e){t.$set(t.passport_auth,"white_list",e)},expression:"passport_auth.white_list"}})],1)],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.closePassportAuthDialogDetails}},[t._v("关闭")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.passport_auth.configEditable,expression:"!passport_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.editclosePassportAuthConfig}},[t._v(" 编辑 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.passport_auth.configEditable,expression:"passport_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.savePassportAuthEditedChanges}},[t._v("保存编辑 ")])],1)],1)],1):t._e(),"passport-pc-auth"===t.showClikedDetailsPluginName?s("div",[s("el-dialog",{attrs:{title:"PassportPC认证",visible:t.dialogDetailsDetVisible,width:"600px"},on:{"update:visible":function(e){t.dialogDetailsDetVisible=e}}},[s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("基本信息")])]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 名称:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["passport-pc-auth"]].templateName)+" ")]),s("div",{staticStyle:{margin:"20px"}},[t._v(" 简介:"+t._s(t.loginAuthTypeList[t.tempLateCodeMap["passport-pc-auth"]].templateDesc)+" ")]),s("div",{staticClass:"menuHeader"},[s("h2",{staticClass:"menuTitle"},[t._v("认证配置")])]),s("el-form",{attrs:{model:t.passport_pc_auth.configData,"label-position":t.labelPosition,"label-width":"120px"}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.passport_pc_auth.configEditable,expression:"!passport_pc_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"验证失败处理:","label-width":"auto"}},["return_status"===t.passport_pc_auth.returnType?s("el-row",[t._v(" 返回http状态码:"+t._s(t.passport_pc_auth.configData.return_status)+" ")]):t._e(),"unLoginPaths"===t.passport_pc_auth.returnType?s("el-row",[t._v("跳转到:"+t._s(t.passport_pc_auth.configData.unLoginPaths)+" ")]):t._e()],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.passport_pc_auth.configEditable,expression:"!passport_pc_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"cookie名:","label-width":"auto"}},[s("el-row",[t._v(t._s(t.passport_pc_auth.configData.cookie_name))])],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.passport_pc_auth.configEditable,expression:"!passport_pc_auth.configEditable"}],staticStyle:{margin:"20px"},attrs:{label:"白名单:","label-width":"auto"}},[t._v(" "+t._s(t.passport_pc_auth.white_list)+" ")]),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_pc_auth.configEditable,expression:"passport_pc_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"验证失败处理"}},[s("el-select",{model:{value:t.passport_pc_auth.returnType,callback:function(e){t.$set(t.passport_pc_auth,"returnType",e)},expression:"passport_pc_auth.returnType"}},[s("el-option",{attrs:{label:"返回HTTP状态码",value:"return_status"}}),s("el-option",{attrs:{label:"跳转到指定的URL",value:"unLoginPaths"}})],1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_pc_auth.configEditable,expression:"passport_pc_auth.configEditable"}],staticStyle:{margin:"5px"}},[s("el-input",{attrs:{type:"text",id:"jingMeReturnData",placeholder:t.passportPcAuthComputeReturnData},model:{value:t.passport_pc_auth.returnData,callback:function(e){t.$set(t.passport_pc_auth,"returnData",e)},expression:"passport_pc_auth.returnData"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_pc_auth.configEditable,expression:"passport_pc_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"cookie名"}},[s("el-input",{attrs:{id:"cookie_name",type:"text",disabled:!t.passport_pc_auth.configEditable},model:{value:t.passport_pc_auth.configData.cookie_name,callback:function(e){t.$set(t.passport_pc_auth.configData,"cookie_name",e)},expression:"passport_pc_auth.configData.cookie_name"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.passport_pc_auth.configEditable,expression:"passport_pc_auth.configEditable"}],staticStyle:{margin:"5px"},attrs:{label:"白名单"}},[s("el-input",{attrs:{id:"white_list",type:"textarea",placeholder:"输入相对路径，多个使用‘;’分割，如：/business/receiveNoLogin;/business/Login"},model:{value:t.passport_pc_auth.white_list,callback:function(e){t.$set(t.passport_pc_auth,"white_list",e)},expression:"passport_pc_auth.white_list"}})],1)],1),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.closePassportPcAuthDialogDetails}},[t._v("关闭")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.passport_pc_auth.configEditable,expression:"!passport_pc_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.editclosePassportPcAuthConfig}},[t._v(" 编辑 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.passport_pc_auth.configEditable,expression:"passport_pc_auth.configEditable"}],attrs:{type:"primary"},on:{click:t.savePassportPcAuthEditedChanges}},[t._v(" 保存编辑 ")])],1)],1)],1):t._e()],1):t._e()}),[],!1,null,"1d7b50b6",null)),T={components:{LoginAuthentication:L.exports,SignAuthentication:S},props:{editeDisabled:Boolean},data:function(){return{algorithmList:null,loginAuthArray:null}},created:function(){this.getSecuityConfig()},methods:{getSecuityConfig:function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e,a=this;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"/CloudPluginManagerService/queryCloudPluginByCloudDomainId",e=[{domainId:this.$route.params.id}],b.a.post("/CloudPluginManagerService/queryCloudPluginByCloudDomainId",e).then((function(t){a.algorithmList=t.data[1],a.loginAuthArray=t.data[2]})).catch((function(t){}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),refresh:function(){this.$emit("refresh"),this.getSecuityConfig()}}},k=T,O=(a("de5f"),Object(n.a)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"security-config"},[s("div",{staticClass:"background"},[s("el-row",{staticClass:"top"},[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"broadcast"},[s("img",{staticClass:"img",attrs:{src:a("c89a")}}),s("span",{staticStyle:{"margin-left":"10px"}},[t._v("物流开放平台为API提供了一系列的安全配置，可根据API的使用场景、数据级别进行了不同的安全配置。")])])])],1)],1),s("SignAuthentication",{attrs:{"algorithm-list":t.algorithmList,"edite-disabled":t.editeDisabled},on:{refresh:t.refresh}}),s("LoginAuthentication",{attrs:{"login-auth-array":t.loginAuthArray,"edite-disabled":t.editeDisabled},on:{refresh:t.refresh}})],1)}),[],!1,null,"7e3058af",null)),j={components:{BaseInfo:y,SecurityConfig:O.exports},props:{baseInfo:Object,editDisabled:Boolean,showStatus:{type:Number,required:!0}},data:function(){return{firstRadio:"基本信息"}},methods:{refresh:function(){this.$emit("refresh")}}},E=Object(n.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-radio-group",{staticClass:"second-tabs",model:{value:t.firstRadio,callback:function(e){t.firstRadio=e},expression:"firstRadio"}},[a("el-radio-button",{attrs:{label:"基本信息"}}),a("el-radio-button",{attrs:{label:"安全配置"}})],1),"基本信息"===t.firstRadio?a("BaseInfo",{attrs:{"base-info":t.baseInfo,"edit-disabled":t.editDisabled,showStatus:t.showStatus},on:{refresh:t.refresh}}):t._e(),"安全配置"===t.firstRadio?a("SecurityConfig",{attrs:{"edit-disabled":t.editDisabled},on:{refresh:t.refresh}}):t._e()],1)}),[],!1,null,"5356a172",null),N={components:{Header:o,BasicData:E.exports},data:function(){return{loading:!0,code:"code",cnName:"cnName",createUser:"createUser",createTime:new Date,isOnline:0,status:0,baseInfo:{id:0,code:"",cnName:"",intr:"",type:1,serviceType:1,testCluster:{id:0,name:""},uatCluster:{id:0,name:""},prodCluster:{id:0,name:""},productOwner:"",developOwner:"",operateOwner:""},activeName:"first"}},computed:{computeShowStatus:function(){if(4===this.status)return 2;if(1===this.status||3===this.status){if(0===this.isOnline)return 1;if(1===this.isOnline)return 3}},computePublishDisabled:function(){return 3===this.status||4===this.status},computeEditDisabled:function(){return 3===this.status}},methods:{getApiGroupDetail:function(){var t=this,e=[{id:this.$route.params.id}];b.a.post("/CloudDomainService/info",e).then((function(e){t.code=e.data.code,t.cnName=e.data.name,t.createUser=e.data.createUser,t.createTime=e.data.createTime,t.status=e.data.status,t.isOnline=e.data.isOnline,t.fillBaseInfo(e.data),t.loading=!1})).catch((function(e){t.loading=!1}))},fillBaseInfo:function(t){this.baseInfo.id=t.id,this.baseInfo.code=t.code,this.baseInfo.cnName=t.name,this.baseInfo.intr=t.description,this.baseInfo.isOnline=t.isOnline,this.baseInfo.serviceType=t.serviceType,this.baseInfo.type=t.type,this.baseInfo.productOwner=t.productOwner,this.baseInfo.developOwner=t.developOwner,this.baseInfo.operateOwner=t.operateOwner,this.baseInfo.testCluster.id=t.testClusterId,this.baseInfo.testCluster.name=t.testClusterName,this.baseInfo.uatCluster.id=t.uatClusterId,this.baseInfo.uatCluster.name=t.uatClusterName,this.baseInfo.prodCluster.id=t.prodClusterId,this.baseInfo.prodCluster.name=t.prodClusterName},refresh:function(){this.getApiGroupDetail()},verify:function(){var t=this,e=[{id:this.$route.params.id}];b.a.post("/CloudDomainService/prePublish",e).then((function(e){2e4===e.code&&t.goPublishApiGroup()})).catch((function(t){}))},publishApiGroup:function(){this.verify()},goPublishApiGroup:function(){this.$router.push({name:"ApiManagerMobileApiGroupDetailPublish",params:{id:this.$route.params.id}})}},mounted:function(){this.refresh()}},$=N,M=(a("bb27"),Object(n.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"group-detail"},[a("Header",{attrs:{cnName:t.cnName,code:t.code,createUser:t.createUser,createTime:t.createTime,showStatus:t.computeShowStatus}},[a("el-button",{attrs:{type:"primary",disabled:t.computePublishDisabled},on:{click:t.publishApiGroup}},[t._v("发布")])],1),t.loading?t._e():a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},["first"===t.activeName?a("el-tab-pane",{attrs:{label:"基础数据",name:"first"}},[a("BasicData",{attrs:{baseInfo:t.baseInfo,showStatus:t.computeShowStatus,editDisabled:t.computeEditDisabled},on:{refresh:t.refresh}})],1):t._e()],1)],1)}),[],!1,null,"06a28422",null));e.default=M.exports},8576:function(t,e,a){"use strict";a("49ea")},"8e2d":function(t,e,a){},bb27:function(t,e,a){"use strict";a("8e2d")},de4e:function(t,e,a){},de5f:function(t,e,a){"use strict";a("4aef")},ede4:function(t,e,a){},f096:function(t,e,a){"use strict";a("ede4")}}]);