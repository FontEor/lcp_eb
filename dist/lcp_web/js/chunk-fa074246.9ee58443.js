(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fa074246"],{"0e07":function(e,t,r){"use strict";var i=r("7aef"),n=r("7562"),a=(r("b775"),{queryList:function(e){return n.a.post("/ApiManagerService/queryCloudClusterList",[e])},cloudClusterSave:function(e){return n.a.post("/ApiManagerService/saveCloudCluster",[e])},cloudClusterUpdate:function(e){return n.a.post("/ApiManagerService/updateCloudCluster",[e])},findUser:function(e){return i.a.get("/hrInfo/findUser",{params:e})},findSupplierUserByErp:function(e){return i.a.get("/supplier/findSupplierUserByErp",{params:e})},saveBaseInfo:function(e){return n.a.post("/HttpApiService/saveBaseInfo",[e])},queryApiReleaseByCondition:function(e){return n.a.post("/ApiDepotService/queryApiReleaseByCondition",JSON.stringify(e))},queryAliasByInterface:function(e){return n.a.post("/JsfApiMetaService/queryAliasByInterface",JSON.stringify(e))},getMethodList:function(e){return n.a.post("/ApiDepotService/queryApiReleaseByCondition",JSON.stringify(e))},queryMethodByInterface:function(e){return n.a.post("/JsfApiMetaService/queryMethodByInterface",JSON.stringify(e))},getSensitiveLabelForest:function(){return n.a.post("/HttpApiService/querySensitiveLabelForest")}});t.a=a},1063:function(e,t,r){"use strict";r.r(t);var i=r("c7eb"),n=(r("96cf"),r("1da1")),a=r("43b3"),s=r("3d85"),o=r("c2d0"),c={name:"CreateApiGroup",components:{Title:a.a,Steps:s.a},data:function(){var e=this,t=function(){var t=Object(n.a)(Object(i.a)().mark((function t(r,n,a){var s;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.checkDomainIsExist([n]).catch((function(t){var r=t.data.message;r&&e.$message.error(r),a(new Error(" "))}));case 2:s=t.sent,!1===s.data?a():a(new Error("已有用户使用过此英文名称"));case 5:case"end":return t.stop()}}),t)})));return function(e,r,i){return t.apply(this,arguments)}}();return{active:0,titleList:["填写分组基本信息","选择分组内API的类型","创建成功"],basicInfoForm:{code:"",cnName:"",intr:""},basicInfoFormRules:{code:[{required:!0,message:"分组英文名称不能为空"},{min:2,max:30,message:"请输入2-30个字符"},{pattern:/^[A-Za-z_]*$/,message:"请输入英文字母、_、.、-"},{validator:t}],cnName:[{required:!0,message:"分组中文名称不能为空"},{min:2,max:30,message:"请输入2-30个字符"}],intr:[{required:!0,message:"分组描述不能为空"},{min:10,max:100,message:"请输入10-100个字符"}]},apiTypeForm:{serviceType:1,type:1},apiTypeFormRules:{serviceType:[{required:!0,message:"API的发布范围不能为空"}],type:[{required:!0,message:"API的服务类型不能为空"}]},id:null,options:[{type:1,label:"JSF服务"},{type:2,label:"HTTP服务"},{type:3,label:"HTTP流"}]}},methods:{saveCloudDomain:function(){var e=Object(n.a)(Object(i.a)().mark((function e(){var t,r,n,a,s,c,u,p,f=this;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.basicInfoForm,r=t.code,n=t.cnName,a=t.intr,s=this.apiTypeForm,c=s.serviceType,u=s.type,p=[{code:r,name:n,description:a,serviceType:c,type:u,sceneType:3}],e.next=5,o.a.saveCloudDomain(p).catch((function(e){var t=e.data.message;throw t&&f.$message.error(t),new Error(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleCancel:function(){this.$router.push({name:"ApiManagerMobileApiGroup"})},previous:function(){this.active--},nextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.active++}))},confirmSubmit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n.a)(Object(i.a)().mark((function e(r){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,t.saveCloudDomain().catch((function(e){var r=e.data.message;throw r&&t.$message.error(r),new Error(e)}));case 3:n=e.sent,t.id=n.data.id,t.active++,e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},backToFirstStep:function(){this.active=0,this.$refs.basicInfoForm.resetFields(),this.$refs.apiTypeForm.resetFields()}}},u=c,p=(r("5a54"),r("2877")),f=Object(p.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create-api-group"},[r("Title",{attrs:{text:"创建API分组"}}),r("Steps",{attrs:{active:e.active,titleList:e.titleList}}),r("div",{staticClass:"create-api-group-form"},[r("div",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}]},[r("el-form",{ref:"basicInfoForm",attrs:{model:e.basicInfoForm,rules:e.basicInfoFormRules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"分组英文名称",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入分组英文名称"},model:{value:e.basicInfoForm.code,callback:function(t){e.$set(e.basicInfoForm,"code",t)},expression:"basicInfoForm.code"}})],1),r("el-form-item",{attrs:{label:"分组中文名称",prop:"cnName"}},[r("el-input",{attrs:{placeholder:"请输入分组中文名称"},model:{value:e.basicInfoForm.cnName,callback:function(t){e.$set(e.basicInfoForm,"cnName",t)},expression:"basicInfoForm.cnName"}})],1),r("el-form-item",{attrs:{label:"分组描述",prop:"intr"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入分组使用场景的描述"},model:{value:e.basicInfoForm.intr,callback:function(t){e.$set(e.basicInfoForm,"intr",t)},expression:"basicInfoForm.intr"}})],1)],1),r("div",{staticClass:"form-btn"},[r("el-button",{on:{click:function(t){return e.handleCancel()}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStep("basicInfoForm")}}},[e._v("下一步")])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}]},[r("el-form",{ref:"apiTypeForm",attrs:{model:e.apiTypeForm,rules:e.apiTypeFormRules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"API的发布范围",prop:"serviceType"}},[r("el-radio",{attrs:{label:1},model:{value:e.apiTypeForm.serviceType,callback:function(t){e.$set(e.apiTypeForm,"serviceType",t)},expression:"apiTypeForm.serviceType"}},[e._v("发布到内网")]),r("el-radio",{attrs:{label:2},model:{value:e.apiTypeForm.serviceType,callback:function(t){e.$set(e.apiTypeForm,"serviceType",t)},expression:"apiTypeForm.serviceType"}},[e._v("发布到公网")])],1),r("el-form-item",{attrs:{label:"API的服务类型",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.apiTypeForm.type,callback:function(t){e.$set(e.apiTypeForm,"type",t)},expression:"apiTypeForm.type"}},e._l(e.options,(function(e){return r("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})})),1)],1)],1),r("div",{staticClass:"form-btn"},[r("el-button",{on:{click:function(t){return e.previous()}}},[e._v("上一步")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmSubmit("apiTypeForm")}}},[e._v("确认创建")])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}]},[e._m(0),r("div",{staticClass:"form-btn"},[r("el-button",{on:{click:function(t){return e.backToFirstStep()}}},[e._v("继续创建分组")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"ApiManagerMobileApiGroupDetail",params:{id:e.id}})}}},[e._v("完善分组基础数据")])],1)])])],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-success"},[r("div",{staticClass:"form-success__icon"},[r("i",{staticClass:"el-icon-success"})]),r("p",{staticClass:"form-success__title"},[e._v("创建成功")]),r("p",{staticClass:"form-success__tip"},[e._v(" 快去完善分组基础数据吧，完善后发布即可生效 ")])])}],!1,null,"5845bdb8",null);t.default=f.exports},1667:function(e,t,r){"use strict";r("7aef");var i=r("7562"),n=r("0e07"),a=r("3342"),s={getApi:function(e){return i.a.post("/HttpApiService/findApi",e)},verifyApiSummaryFull:function(e){return i.a.post("/HttpApiService/verifyPublishApi",e)},postApi:function(e){return i.a.post("/HttpApiService/publishApi",[e])},updateApiDoc:function(e){return i.a.post("/ApiManagerService/updateApiDoc",JSON.stringify(e))},quickMaintainApiDocByXml:function(e){return i.a.post("/ApiManagerService/quickMaintainApiDocByXml",JSON.stringify(e))},quickMaintainApiDocByJson:function(e){return i.a.post("/ApiManagerService/quickMaintainApiDocByJson",JSON.stringify(e))},basicInfo:n.a,apiDoc:a.a};t.a=s},"2f6a":function(e,t,r){},3342:function(e,t,r){"use strict";var i=r("7562"),n=r("7aef"),a={findApiDoc:function(e){return i.a.post("/HttpApiService/findApiDoc",[e])},saveOrUpdateApiDocForXml:function(e,t){return n.a.post("/httpApi/saveOrUpdateApiDocForXml",e,{params:t})},updateApiDoc:function(e){return n.a.post("/httpApi/updateApiDoc",e)}};t.a=a},"3d85":function(e,t,r){"use strict";var i=(r("c5f6"),{name:"Steps",props:{titleList:{type:Array,default:function(){return[]}},active:{type:Number,required:!0}}}),n=(r("e75f"),r("2877")),a=Object(n.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-steps",{staticClass:"steps",attrs:{active:e.active,"align-center":!0,"finish-status":"success"}},e._l(e.titleList,(function(e,t){return r("el-step",{key:t,attrs:{title:e}})})),1)}),[],!1,null,"443b202a",null);t.a=a.exports},"43b3":function(e,t,r){"use strict";var i={name:"Title",props:{text:{type:String,default:""}}},n=(r("b61a"),r("2877")),a=Object(n.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("div",{staticClass:"title__icon"}),r("div",{staticClass:"title__text"},[e._v(e._s(e.text))])])}),[],!1,null,"3d118947",null);t.a=a.exports},"5a54":function(e,t,r){"use strict";r("7e79")},7562:function(e,t,r){"use strict";var i=r("c7eb"),n=(r("96cf"),r("1da1")),a=r("bc3a"),s=r.n(a),o=r("7a3a"),c=r("3cfb"),u=r("c24f"),p=r("2a53"),f=r("a78e"),l=r.n(f),d=!1,m=s.a.create({baseURL:window.env.gatewayApiDecoupling,withCredentials:!0,timeout:1e4,headers:{"LOP-DN":window.env.gatewayApiDecouplingLop,"Account-Type":Object(p.a)()?"erp":"passport","X-Requested-With":"XMLHttpRequest"}});function v(){return y.apply(this,arguments)}function y(){return y=Object(n.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.a.dispatch("user/resetUser"),sessionStorage.setItem("store",JSON.stringify(c.a.state)),o.MessageBox.confirm("您的登录状态已失效，是否重新登录？","提示",{confirmButtonText:"登录",cancelButtonText:"不登录",type:"warning"}).then(Object(n.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=!1,e.next=3,Object(u.a)();case 3:if(!p.a){e.next=8;break}return e.next=6,c.a.dispatch("user/handleIntranetGetUserInfo");case 6:e.next=9;break;case 8:window.location.reload();case 9:case"end":return e.stop()}}),e)})))).catch((function(){d=!1}));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}m.interceptors.request.use((function(e){return e.headers.groupCode=l.a.get("groupCode")||"",e}),(function(e){return Promise.reject(e)})),m.interceptors.response.use((function(e){var t=e.status;if(e.data.error_response)return o.Message.error("服务异常"),Promise.reject(e);if(401===t||520===t)return d||(d=!0,v()),Promise.reject(e);if(e.data.response){var r=e.data.response,i=r.code,n=r.message;return 2e4===i?e.data.response:(10003===i||n&&o.Message.error(n),Promise.reject(e.data.response))}return Promise.reject(e)}),(function(e){var t=e.response.status;return e.response.data.error_response&&o.Message.error("服务异常"),401!==t&&520!==t||d||(d=!0,v()),Promise.reject(e.response)})),t.a=m},"7e79":function(e,t,r){},"964d":function(e,t,r){"use strict";r("7aef");var i=r("7562"),n={findApiBaseInfo:function(e){return i.a.post("/ApiManagerService/findApiBaseInfo",JSON.stringify(e))},verifyApiSummaryFull:function(e){return i.a.post("/ApiManagerService/verifyPublishApi",JSON.stringify([e]))},queryMethodListByInterfaceOrCnName:function(e){return i.a.post("/ApiManagerService/queryMethodListByInterfaceOrCnName",JSON.stringify(e))},addApiMethod:function(e){return i.a.post("/ApiManagerService/addApiMethod",JSON.stringify(e))},findApiDoc:function(e){return i.a.post("/ApiManagerService/findApiDoc",JSON.stringify(e))},queryAliasByInterface:function(e){return i.a.post("/JsfApiMetaService/queryAliasByInterface",JSON.stringify(e))},quickMaintainApiDocByJsf:function(e){return i.a.post("/ApiManagerService/quickMaintainApiDocByJsf",JSON.stringify(e))},updateApiDoc:function(e){return i.a.post("/ApiManagerService/updateApiDoc",JSON.stringify(e))},quickMaintainApiDocByXml:function(e){return i.a.post("/ApiManagerService/quickMaintainApiDocByXml",JSON.stringify(e))},quickMaintainApiDocByJson:function(e){return i.a.post("/ApiManagerService/quickMaintainApiDocByJson",JSON.stringify(e))},findMethodConfig:function(e){return i.a.post("/JsfApiService/findMethodConfig",JSON.stringify(e))},saveMethodConfig:function(e){return i.a.post("/JsfApiService/saveMethodConfig",JSON.stringify(e))},queryOneLevelParamTypeForMethod:function(e){return i.a.post("/JsfApiService/queryOneLevelParamTypeForMethod",JSON.stringify(e))}};t.a=n},"9f9e":function(e,t,r){},b61a:function(e,t,r){"use strict";r("2f6a")},c2d0:function(e,t,r){"use strict";var i=r("964d"),n=r("1667"),a=(r("b775"),r("7562")),s={saveCloudDomain:function(e){return a.a.post("/CloudDomainService/fontSave",e)},addHttpApi:function(e){return a.a.post("/HttpApiService/addApi",e)},getApiDomain:function(e){return a.a.post("/CloudDomainService/getApiDomain",e)}},o=s,c=r("d128"),u={getCloudDomainBase:function(e){return a.a.post("/CloudDomainService/info",e)}},p=u,f=r("7aef"),l={jsfDetail:i.a,httpDetail:n.a,httpRegister:o,cloudCluster:c.a,apiGroup:p,findAppListForSelect:function(){return f.a.get("/select/findAppListForSelect")},queryCloudDomainList:function(e){return a.a.post("/CloudDomainService/query",e)},saveCloudDomain:function(e){return a.a.post("/CloudDomainService/fontSave",e)},checkDomainIsExist:function(e){return a.a.post("/CloudDomainService/checkDomainIsExist",e)}};t.a=l},d128:function(e,t,r){"use strict";var i=r("7562"),n={queryListPage:function(e){return i.a.post("/ApiManagerService/queryCloudClusterListPage",e)},queryCloudClusterDetails:function(e){return i.a.post("/ApiManagerService/findCloudClusterDetail",[e])}};t.a=n},e75f:function(e,t,r){"use strict";r("9f9e")}}]);